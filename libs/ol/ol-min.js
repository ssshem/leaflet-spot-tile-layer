;;(function(a,b){if(typeof exports==="object"){module.exports=b()}else if(typeof define==="function"&&define.amd){define([],b)}else{a.ol=b()}}(this,function(){var bp={};var bq=this.goog={};this.CLOSURE_NO_DEPS=true;var br=false;var bq=bq||{};bq.global=this;bq.global.CLOSURE_UNCOMPILED_DEFINES;bq.global.CLOSURE_DEFINES;bq.isDef=function(a){return a!==void 0};bq.isString=function(a){return typeof a=='string'};bq.isBoolean=function(a){return typeof a=='boolean'};bq.isNumber=function(a){return typeof a=='number'};bq.exportPath_=function(a,b,c){var d=a.split('.');var e=c||bq.global;if(!(d[0]in e)&&e.execScript){e.execScript('var '+d[0])}for(var f;d.length&&(f=d.shift());){if(!d.length&&bq.isDef(b)){e[f]=b}else if(e[f]&&e[f]!==Object.prototype[f]){e=e[f]}else{e=e[f]={}}}};bq.define=function(a,b){var c=b;if(!br){if(bq.global.CLOSURE_UNCOMPILED_DEFINES&&(bq.global.CLOSURE_UNCOMPILED_DEFINES).nodeType===undefined&&Object.prototype.hasOwnProperty.call(bq.global.CLOSURE_UNCOMPILED_DEFINES,a)){c=bq.global.CLOSURE_UNCOMPILED_DEFINES[a]}else if(bq.global.CLOSURE_DEFINES&&(bq.global.CLOSURE_DEFINES).nodeType===undefined&&Object.prototype.hasOwnProperty.call(bq.global.CLOSURE_DEFINES,a)){c=bq.global.CLOSURE_DEFINES[a]}}bq.exportPath_(a,c)};bq.define('goog.DEBUG',true);bq.define('goog.LOCALE','en');bq.define('goog.TRUSTED_SITE',true);bq.define('goog.STRICT_MODE_COMPATIBLE',false);bq.define('goog.DISALLOW_TEST_ONLY_CODE',br&&!bq.DEBUG);bq.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING',false);bq.provide=function(a){if(bq.isInModuleLoader_()){throw new Error('goog.provide can not be used within a goog.module.');}if(!br){if(bq.isProvided_(a)){throw new Error('Namespace "'+a+'" already declared.');}}bq.constructNamespace_(a)};bq.constructNamespace_=function(a,b){if(!br){delete bq.implicitNamespaces_[a];var c=a;while((c=c.substring(0,c.lastIndexOf('.')))){if(bq.getObjectByName(c)){break}bq.implicitNamespaces_[c]=true}}bq.exportPath_(a,b)};bq.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;bq.module=function(a){if(!bq.isString(a)||!a||a.search(bq.VALID_MODULE_RE_)==-1){throw new Error('Invalid module identifier');}if(!bq.isInModuleLoader_()){throw new Error('Module '+a+' has been loaded incorrectly. Note, '+'modules cannot be loaded as normal scripts. They require some kind of '+'pre-processing step. You\'re likely trying to load a module via a '+'script tag or as a part of a concatenated bundle without rewriting the '+'module. For more info see: '+'https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.');}if(bq.moduleLoaderState_.moduleName){throw new Error('goog.module may only be called once per module.');}bq.moduleLoaderState_.moduleName=a;if(!br){if(bq.isProvided_(a)){throw new Error('Namespace "'+a+'" already declared.');}delete bq.implicitNamespaces_[a]}};bq.module.get=function(a){return bq.module.getInternal_(a)};bq.module.getInternal_=function(a){if(!br){if(a in bq.loadedModules_){return bq.loadedModules_[a]}else if(!bq.implicitNamespaces_[a]){var b=bq.getObjectByName(a);return b!=null?b:null}}return null};bq.moduleLoaderState_=null;bq.isInModuleLoader_=function(){return bq.moduleLoaderState_!=null};bq.module.declareLegacyNamespace=function(){if(!br&&!bq.isInModuleLoader_()){throw new Error('goog.module.declareLegacyNamespace must be called from '+'within a goog.module');}if(!br&&!bq.moduleLoaderState_.moduleName){throw new Error('goog.module must be called prior to '+'goog.module.declareLegacyNamespace.');}bq.moduleLoaderState_.declareLegacyNamespace=true};bq.setTestOnly=function(a){if(bq.DISALLOW_TEST_ONLY_CODE){a=a||'';throw new Error('Importing test-only code into non-debug environment'+(a?': '+a:'.'));}};bq.forwardDeclare=function(a){};bq.forwardDeclare('Document');bq.forwardDeclare('HTMLScriptElement');bq.forwardDeclare('XMLHttpRequest');if(!br){bq.isProvided_=function(a){return(a in bq.loadedModules_)||(!bq.implicitNamespaces_[a]&&bq.isDefAndNotNull(bq.getObjectByName(a)))};bq.implicitNamespaces_={'goog.module':true}}bq.getObjectByName=function(a,b){var c=a.split('.');var d=b||bq.global;for(var i=0;i<c.length;i++){d=d[c[i]];if(!bq.isDefAndNotNull(d)){return null}}return d};bq.globalize=function(a,b){var c=b||bq.global;for(var x in a){c[x]=a[x]}};bq.addDependency=function(a,b,c,d){if(bq.DEPENDENCIES_ENABLED){var e,require;var f=a.replace(/\\/g,'/');var g=bq.dependencies_;if(!d||typeof d==='boolean'){d=d?{'module':'goog'}:{}}for(var i=0;e=b[i];i++){g.nameToPath[e]=f;g.loadFlags[f]=d}for(var j=0;require=c[j];j++){if(!(f in g.requires)){g.requires[f]={}}g.requires[f][require]=true}}};bq.define('goog.ENABLE_DEBUG_LOADER',true);bq.logToConsole_=function(a){if(bq.global.console){bq.global.console['error'](a)}};bq.require=function(a){if(!br){if(bq.ENABLE_DEBUG_LOADER&&bq.IS_OLD_IE_){bq.maybeProcessDeferredDep_(a)}if(bq.isProvided_(a)){if(bq.isInModuleLoader_()){return bq.module.getInternal_(a)}}else if(bq.ENABLE_DEBUG_LOADER){var b=bq.getPathFromDeps_(a);if(b){bq.writeScripts_(b)}else{var c='goog.require could not find: '+a;bq.logToConsole_(c);throw new Error(c);}}return null}};bq.basePath='';bq.global.CLOSURE_BASE_PATH;bq.global.CLOSURE_NO_DEPS;bq.global.CLOSURE_IMPORT_SCRIPT;bq.nullFunction=function(){};bq.abstractMethod=function(){throw new Error('unimplemented abstract method');};bq.addSingletonGetter=function(a){a.instance_=undefined;a.getInstance=function(){if(a.instance_){return a.instance_}if(bq.DEBUG){bq.instantiatedSingletons_[bq.instantiatedSingletons_.length]=a}return a.instance_=new a}};bq.instantiatedSingletons_=[];bq.define('goog.LOAD_MODULE_USING_EVAL',true);bq.define('goog.SEAL_MODULE_EXPORTS',bq.DEBUG);bq.loadedModules_={};bq.DEPENDENCIES_ENABLED=!br&&bq.ENABLE_DEBUG_LOADER;bq.define('goog.TRANSPILE','detect');bq.define('goog.TRANSPILER','transpile.js');if(bq.DEPENDENCIES_ENABLED){bq.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};bq.inHtmlDocument_=function(){var a=bq.global.document;return a!=null&&'write'in a};bq.findBasePath_=function(){if(bq.isDef(bq.global.CLOSURE_BASE_PATH)&&bq.isString(bq.global.CLOSURE_BASE_PATH)){bq.basePath=bq.global.CLOSURE_BASE_PATH;return}else if(!bq.inHtmlDocument_()){return}var a=bq.global.document;var b=a.currentScript;if(b){var c=[b]}else{var c=a.getElementsByTagName('SCRIPT')}for(var i=c.length-1;i>=0;--i){var d=(c[i]);var e=d.src;var f=e.lastIndexOf('?');var l=f==-1?e.length:f;if(e.substr(l-7,7)=='base.js'){bq.basePath=e.substr(0,l-7);return}}};bq.importScript_=function(a,b){var c=bq.global.CLOSURE_IMPORT_SCRIPT||bq.writeScriptTag_;if(c(a,b)){bq.dependencies_.written[a]=true}};bq.IS_OLD_IE_=!!(!bq.global.atob&&bq.global.document&&bq.global.document.all);bq.oldIeWaiting_=false;bq.importProcessedScript_=function(a,b,c){var d='goog.retrieveAndExec_("'+a+'", '+b+', '+c+');';bq.importScript_('',d)};bq.queuedModules_=[];bq.wrapModule_=function(a,b){if(!bq.LOAD_MODULE_USING_EVAL||!bq.isDef(bq.global.JSON)){return''+'goog.loadModule(function(exports) {'+'"use strict";'+b+'\n'+';return exports'+'});'+'\n//# sourceURL='+a+'\n'}else{return''+'goog.loadModule('+bq.global.JSON.stringify(b+'\n//# sourceURL='+a+'\n')+');'}};bq.loadQueuedModules_=function(){var a=bq.queuedModules_.length;if(a>0){var b=bq.queuedModules_;bq.queuedModules_=[];for(var i=0;i<a;i++){var c=b[i];bq.maybeProcessDeferredPath_(c)}}bq.oldIeWaiting_=false};bq.maybeProcessDeferredDep_=function(a){if(bq.isDeferredModule_(a)&&bq.allDepsAreAvailable_(a)){var b=bq.getPathFromDeps_(a);bq.maybeProcessDeferredPath_(bq.basePath+b)}};bq.isDeferredModule_=function(a){var b=bq.getPathFromDeps_(a);var c=b&&bq.dependencies_.loadFlags[b]||{};var d=c['lang']||'es3';if(b&&(c['module']=='goog'||bq.needsTranspile_(d))){var e=bq.basePath+b;return(e)in bq.dependencies_.deferred}return false};bq.allDepsAreAvailable_=function(a){var b=bq.getPathFromDeps_(a);if(b&&(b in bq.dependencies_.requires)){for(var c in bq.dependencies_.requires[b]){if(!bq.isProvided_(c)&&!bq.isDeferredModule_(c)){return false}}}return true};bq.maybeProcessDeferredPath_=function(a){if(a in bq.dependencies_.deferred){var b=bq.dependencies_.deferred[a];delete bq.dependencies_.deferred[a];bq.globalEval(b)}};bq.loadModuleFromUrl=function(a){bq.retrieveAndExec_(a,true,false)};bq.writeScriptSrcNode_=function(a){bq.global.document.write('<script type="text/javascript" src="'+a+'"></'+'script>')};bq.appendScriptSrcNode_=function(a){var b=bq.global.document;var c=(b.createElement('script'));c.type='text/javascript';c.src=a;c.defer=false;c.async=false;b.head.appendChild(c)};bq.writeScriptTag_=function(a,b){if(bq.inHtmlDocument_()){var c=bq.global.document;if(!bq.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&c.readyState=='complete'){var d=/\bdeps.js$/.test(a);if(d){return false}else{throw new Error('Cannot write "'+a+'" after document load');}}if(b===undefined){if(!bq.IS_OLD_IE_){if(bq.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){bq.appendScriptSrcNode_(a)}else{bq.writeScriptSrcNode_(a)}}else{bq.oldIeWaiting_=true;var e=' onreadystatechange=\'goog.onScriptLoad_(this, '+ ++bq.lastNonModuleScriptIndex_+')\' ';c.write('<script type="text/javascript" src="'+a+'"'+e+'></'+'script>')}}else{c.write('<script type="text/javascript">'+bq.protectScriptTag_(b)+'</'+'script>')}return true}else{return false}};bq.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,'\\x3c/$1')};bq.needsTranspile_=function(a){if(bq.TRANSPILE=='always'){return true}else if(bq.TRANSPILE=='never'){return false}else if(!bq.requiresTranspilation_){bq.requiresTranspilation_=bq.createRequiresTranspilation_()}if(a in bq.requiresTranspilation_){return bq.requiresTranspilation_[a]}else{throw new Error('Unknown language mode: '+a);}};bq.requiresTranspilation_=null;bq.lastNonModuleScriptIndex_=0;bq.onScriptLoad_=function(a,b){if(a.readyState=='complete'&&bq.lastNonModuleScriptIndex_==b){bq.loadQueuedModules_()}return true};bq.writeScripts_=function(c){var d=[];var e={};var f=bq.dependencies_;function visitNode(a){if(a in f.written){return}if(a in f.visited){return}f.visited[a]=true;if(a in f.requires){for(var b in f.requires[a]){if(!bq.isProvided_(b)){if(b in f.nameToPath){visitNode(f.nameToPath[b])}else{throw new Error('Undefined nameToPath for '+b);}}}}if(!(a in e)){e[a]=true;d.push(a)}}visitNode(c);for(var i=0;i<d.length;i++){var g=d[i];bq.dependencies_.written[g]=true}var h=bq.moduleLoaderState_;bq.moduleLoaderState_=null;for(var i=0;i<d.length;i++){var g=d[i];if(g){var j=f.loadFlags[g]||{};var k=j['lang']||'es3';var l=bq.needsTranspile_(k);if(j['module']=='goog'||l){bq.importProcessedScript_(bq.basePath+g,j['module']=='goog',l)}else{bq.importScript_(bq.basePath+g)}}else{bq.moduleLoaderState_=h;throw new Error('Undefined script input');}}bq.moduleLoaderState_=h};bq.getPathFromDeps_=function(a){if(a in bq.dependencies_.nameToPath){return bq.dependencies_.nameToPath[a]}else{return null}};bq.findBasePath_();if(!bq.global.CLOSURE_NO_DEPS){bq.importScript_(bq.basePath+'deps.js')}}bq.hasBadLetScoping=null;bq.useSafari10Workaround=function(){if(bq.hasBadLetScoping==null){var a;try{a=!eval('"use strict";'+'let x = 1; function f() { return typeof x; };'+'f() == "number";')}catch(e){a=false}bq.hasBadLetScoping=a}return bq.hasBadLetScoping};bq.workaroundSafari10EvalBug=function(a){return'(function(){'+a+'\n'+';'+'})();\n'};bq.loadModule=function(a){var b=bq.moduleLoaderState_;try{bq.moduleLoaderState_={moduleName:undefined,declareLegacyNamespace:false};var c;if(bq.isFunction(a)){c=a.call(undefined,{})}else if(bq.isString(a)){if(bq.useSafari10Workaround()){a=bq.workaroundSafari10EvalBug(a)}c=bq.loadModuleFromSource_.call(undefined,a)}else{throw new Error('Invalid module definition');}var d=bq.moduleLoaderState_.moduleName;if(!bq.isString(d)||!d){throw new Error('Invalid module name \"'+d+'\"');}if(bq.moduleLoaderState_.declareLegacyNamespace){bq.constructNamespace_(d,c)}else if(bq.SEAL_MODULE_EXPORTS&&Object.seal&&typeof c=='object'&&c!=null){Object.seal(c)}bq.loadedModules_[d]=c}finally{bq.moduleLoaderState_=b}};bq.loadModuleFromSource_=(function(){'use strict';var a={};eval(arguments[0]);return a});bq.normalizePath_=function(a){var b=a.split('/');var i=0;while(i<b.length){if(b[i]=='.'){b.splice(i,1)}else if(i&&b[i]=='..'&&b[i-1]&&b[i-1]!='..'){b.splice(--i,2)}else{i++}}return b.join('/')};bq.global.CLOSURE_LOAD_FILE_SYNC;bq.loadFileSync_=function(a){if(bq.global.CLOSURE_LOAD_FILE_SYNC){return bq.global.CLOSURE_LOAD_FILE_SYNC(a)}else{try{var b=new bq.global['XMLHttpRequest']();b.open('get',a,false);b.send();return b.status==0||b.status==200?b.responseText:null}catch(err){return null}}};bq.retrieveAndExec_=function(a,b,c){if(!br){var d=a;a=bq.normalizePath_(a);var e=bq.global.CLOSURE_IMPORT_SCRIPT||bq.writeScriptTag_;var f=bq.loadFileSync_(a);if(f==null){throw new Error('Load of "'+a+'" failed');}if(c){f=bq.transpile_.call(bq.global,f,a)}if(b){f=bq.wrapModule_(a,f)}else{f+='\n//# sourceURL='+a}var g=bq.IS_OLD_IE_;if(g&&bq.oldIeWaiting_){bq.dependencies_.deferred[d]=f;bq.queuedModules_.push(d)}else{e(a,f)}}};bq.transpile_=function(c,d){var e=bq.global['$jscomp'];if(!e){bq.global['$jscomp']=e={}}var f=e.transpile;if(!f){var g=bq.basePath+bq.TRANSPILER;var h=bq.loadFileSync_(g);if(h){eval(h+'\n//# sourceURL='+g);if(bq.global['$gwtExport']&&bq.global['$gwtExport']['$jscomp']&&!bq.global['$gwtExport']['$jscomp']['transpile']){throw new Error('The transpiler did not properly export the "transpile" '+'method. $gwtExport: '+JSON.stringify(bq.global['$gwtExport']));}bq.global['$jscomp'].transpile=bq.global['$gwtExport']['$jscomp']['transpile'];e=bq.global['$jscomp'];f=e.transpile}}if(!f){var i=' requires transpilation but no transpiler was found.';f=e.transpile=function(a,b){bq.logToConsole_(b+i);return a}}return f(c,d)};bq.typeOf=function(a){var s=typeof a;if(s=='object'){if(a){if(a instanceof Array){return'array'}else if(a instanceof Object){return s}var b=Object.prototype.toString.call((a));if(b=='[object Window]'){return'object'}if((b=='[object Array]'||typeof a.length=='number'&&typeof a.splice!='undefined'&&typeof a.propertyIsEnumerable!='undefined'&&!a.propertyIsEnumerable('splice'))){return'array'}if((b=='[object Function]'||typeof a.call!='undefined'&&typeof a.propertyIsEnumerable!='undefined'&&!a.propertyIsEnumerable('call'))){return'function'}}else{return'null'}}else if(s=='function'&&typeof a.call=='undefined'){return'object'}return s};bq.isNull=function(a){return a===null};bq.isDefAndNotNull=function(a){return a!=null};bq.isArray=function(a){return bq.typeOf(a)=='array'};bq.isArrayLike=function(a){var b=bq.typeOf(a);return b=='array'||b=='object'&&typeof a.length=='number'};bq.isDateLike=function(a){return bq.isObject(a)&&typeof a.getFullYear=='function'};bq.isFunction=function(a){return bq.typeOf(a)=='function'};bq.isObject=function(a){var b=typeof a;return b=='object'&&a!=null||b=='function'};bq.getUid=function(a){return a[bq.UID_PROPERTY_]||(a[bq.UID_PROPERTY_]=++bq.uidCounter_)};bq.hasUid=function(a){return!!a[bq.UID_PROPERTY_]};bq.removeUid=function(a){if(a!==null&&'removeAttribute'in a){a.removeAttribute(bq.UID_PROPERTY_)}try{delete a[bq.UID_PROPERTY_]}catch(ex){}};bq.UID_PROPERTY_='closure_uid_'+((Math.random()*1e9)>>>0);bq.uidCounter_=0;bq.getHashCode=bq.getUid;bq.removeHashCode=bq.removeUid;bq.cloneObject=function(a){var b=bq.typeOf(a);if(b=='object'||b=='array'){if(a.clone){return a.clone()}var c=b=='array'?[]:{};for(var d in a){c[d]=bq.cloneObject(a[d])}return c}return a};bq.bindNative_=function(a,b,c){return(a.call.apply(a.bind,arguments))};bq.bindJs_=function(b,c,d){if(!b){throw new Error();}if(arguments.length>2){var e=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(a,e);return b.apply(c,a)}}else{return function(){return b.apply(c,arguments)}}};bq.bind=function(a,b,c){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf('native code')!=-1){bq.bind=bq.bindNative_}else{bq.bind=bq.bindJs_}return bq.bind.apply(null,arguments)};bq.partial=function(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var a=d.slice();a.push.apply(a,arguments);return b.apply(this,a)}};bq.mixin=function(a,b){for(var x in b){a[x]=b[x]}};bq.now=(bq.TRUSTED_SITE&&Date.now)||(function(){return+new Date()});bq.globalEval=function(a){if(bq.global.execScript){bq.global.execScript(a,'JavaScript')}else if(bq.global.eval){if(bq.evalWorksForGlobals_==null){bq.global.eval('var _evalTest_ = 1;');if(typeof bq.global['_evalTest_']!='undefined'){try{delete bq.global['_evalTest_']}catch(ignore){}bq.evalWorksForGlobals_=true}else{bq.evalWorksForGlobals_=false}}if(bq.evalWorksForGlobals_){bq.global.eval(a)}else{var b=bq.global.document;var c=(b.createElement('SCRIPT'));c.type='text/javascript';c.defer=false;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}}else{throw new Error('goog.globalEval not available');}};bq.evalWorksForGlobals_=null;bq.cssNameMapping_;bq.cssNameMappingStyle_;bq.global.CLOSURE_CSS_NAME_MAP_FN;bq.getCssName=function(d,e){if(String(d).charAt(0)=='.'){throw new Error('className passed in goog.getCssName must not start with ".".'+' You passed: '+d);}var f=function(a){return bq.cssNameMapping_[a]||a};var g=function(a){var b=a.split('-');var c=[];for(var i=0;i<b.length;i++){c.push(f(b[i]))}return c.join('-')};var h;if(bq.cssNameMapping_){h=bq.cssNameMappingStyle_=='BY_WHOLE'?f:g}else{h=function(a){return a}}var j=e?d+'-'+h(e):h(d);if(bq.global.CLOSURE_CSS_NAME_MAP_FN){return bq.global.CLOSURE_CSS_NAME_MAP_FN(j)}return j};bq.setCssNameMapping=function(a,b){bq.cssNameMapping_=a;bq.cssNameMappingStyle_=b};bq.global.CLOSURE_CSS_NAME_MAPPING;if(!br&&bq.global.CLOSURE_CSS_NAME_MAPPING){bq.cssNameMapping_=bq.global.CLOSURE_CSS_NAME_MAPPING}bq.getMsg=function(c,d){if(d){c=c.replace(/\{\$([^}]+)}/g,function(a,b){return(d!=null&&b in d)?d[b]:a})}return c};bq.getMsgWithFallback=function(a,b){return a};bq.exportSymbol=function(a,b,c){bq.exportPath_(a,b,c)};bq.exportProperty=function(a,b,c){a[b]=c};bq.inherits=function(e,f){function tempCtor(){}tempCtor.prototype=f.prototype;e.superClass_=f.prototype;e.prototype=new tempCtor();e.prototype.constructor=e;e.base=function(a,b,c){var d=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++){d[i-2]=arguments[i]}return f.prototype[b].apply(a,d)}};bq.base=function(a,b,c){var d=arguments.callee.caller;if(bq.STRICT_MODE_COMPATIBLE||(bq.DEBUG&&!d)){throw new Error('arguments.caller not defined.  goog.base() cannot be used '+'with strict mode code. See '+'http://www.ecma-international.org/ecma-262/5.1/#sec-C');}if(d.superClass_){var e=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++){e[i-1]=arguments[i]}return d.superClass_.constructor.apply(a,e)}var f=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++){f[i-2]=arguments[i]}var g=false;for(var h=a.constructor;h;h=h.superClass_&&h.superClass_.constructor){if(h.prototype[b]===d){g=true}else if(g){return h.prototype[b].apply(a,f)}}if(a[b]===d){return a.constructor.prototype[b].apply(a,f)}else{throw new Error('goog.base called from a method of one name '+'to a method of a different name');}};bq.scope=function(a){if(bq.isInModuleLoader_()){throw new Error('goog.scope is not supported within a goog.module.');}a.call(bq.global)};if(!br){bq.global['COMPILED']=br}bq.defineClass=function(a,b){var constructor=b.constructor;var c=b.statics;if(!constructor||constructor==Object.prototype.constructor){constructor=function(){throw new Error('cannot instantiate an interface (no constructor defined).');}}var d=bq.defineClass.createSealingConstructor_(constructor,a);if(a){bq.inherits(d,a)}delete b.constructor;delete b.statics;bq.defineClass.applyProperties_(d.prototype,b);if(c!=null){if(c instanceof Function){c(d)}else{bq.defineClass.applyProperties_(d,c)}}return d};bq.defineClass.ClassDescriptor;bq.define('goog.defineClass.SEAL_CLASS_INSTANCES',bq.DEBUG);bq.defineClass.createSealingConstructor_=function(b,c){if(!bq.defineClass.SEAL_CLASS_INSTANCES){return b}var d=!bq.defineClass.isUnsealable_(c);var e=function(){var a=b.apply(this,arguments)||this;a[bq.UID_PROPERTY_]=a[bq.UID_PROPERTY_];if(this.constructor===e&&d&&Object.seal instanceof Function){Object.seal(a)}return a};return e};bq.defineClass.isUnsealable_=function(a){return a&&a.prototype&&a.prototype[bq.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};bq.defineClass.OBJECT_PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];bq.defineClass.applyProperties_=function(a,b){var c;for(c in b){if(Object.prototype.hasOwnProperty.call(b,c)){a[c]=b[c]}}for(var i=0;i<bq.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){c=bq.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(b,c)){a[c]=b[c]}}};bq.tagUnsealableClass=function(a){if(!br&&bq.defineClass.SEAL_CLASS_INSTANCES){a.prototype[bq.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};bq.UNSEALABLE_CONSTRUCTOR_PROPERTY_='goog_defineClass_legacy_unsealable';bq.createRequiresTranspilation_=function(){var d={'es3':false};var e=false;function addNewerLanguageTranspilationCheck(a,b){if(e){d[a]=true}else if(b()){d[a]=false}else{d[a]=true;e=true}}function evalCheck(a){try{return!!eval(a)}catch(ignored){return false}}var f=bq.global.navigator&&bq.global.navigator.userAgent?bq.global.navigator.userAgent:'';addNewerLanguageTranspilationCheck('es5',function(){return evalCheck('[1,].length==1')});addNewerLanguageTranspilationCheck('es6',function(){var a=/Edge\/(\d+)(\.\d)*/i;var b=f.match(a);if(b&&Number(b[1])<15){return false}var c='class X{constructor(){if(new.target!=String)throw 1;this.x=42}}'+'let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof '+'String))throw 1;for(const a of[2,3]){if(a==2)continue;function '+'f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()'+'==3}';return evalCheck('(()=>{"use strict";'+c+'})()')});addNewerLanguageTranspilationCheck('es6-impl',function(){return true});addNewerLanguageTranspilationCheck('es7',function(){return evalCheck('2 ** 2 == 4')});addNewerLanguageTranspilationCheck('es8',function(){return evalCheck('async () => 1, true')});return d};bq.provide('ol.array');ol.array.binarySearch=function(a,b,c){var d,cmp;var e=c||ol.array.numberSafeCompareFunction;var f=0;var g=a.length;var h=false;while(f<g){d=f+(g-f>>1);cmp=+e(a[d],b);if(cmp<0.0){f=d+1}else{g=d;h=!cmp}}return h?f:~f};ol.array.numberSafeCompareFunction=function(a,b){return a>b?1:a<b?-1:0};ol.array.includes=function(a,b){return a.indexOf(b)>=0};ol.array.linearFindNearest=function(a,b,c){var n=a.length;if(a[0]<=b){return 0}else if(b<=a[n-1]){return n-1}else{var i;if(c>0){for(i=1;i<n;++i){if(a[i]<b){return i-1}}}else if(c<0){for(i=1;i<n;++i){if(a[i]<=b){return i}}}else{for(i=1;i<n;++i){if(a[i]==b){return i}else if(a[i]<b){if(a[i-1]-b<b-a[i]){return i-1}else{return i}}}}return n-1}};ol.array.reverseSubArray=function(a,b,c){while(b<c){var d=a[b];a[b]=a[c];a[c]=d;++b;--c}};ol.array.extend=function(a,b){var i;var c=Array.isArray(b)?b:[b];var d=c.length;for(i=0;i<d;i++){a[a.length]=c[i]}};ol.array.remove=function(a,b){var i=a.indexOf(b);var c=i>-1;if(c){a.splice(i,1)}return c};ol.array.find=function(a,b){var c=a.length>>>0;var d;for(var i=0;i<c;i++){d=a[i];if(b(d,i,a)){return d}}return null};ol.array.equals=function(a,b){var c=a.length;if(c!==b.length){return false}for(var i=0;i<c;i++){if(a[i]!==b[i]){return false}}return true};ol.array.stableSort=function(c,d){var e=c.length;var f=Array(c.length);var i;for(i=0;i<e;i++){f[i]={index:i,value:c[i]}}f.sort(function(a,b){return d(a.value,b.value)||a.index-b.index});for(i=0;i<c.length;i++){c[i]=f[i].value}};ol.array.findIndex=function(c,d){var e;var f=!c.every(function(a,b){e=b;return!d(a,b,c)});return f?e:-1};ol.array.isSorted=function(d,e,f){var g=e||ol.array.numberSafeCompareFunction;return d.every(function(a,b){if(b===0){return true}var c=g(d[b-1],a);return!(c>0||f&&c===0)})};bq.provide('ol');ol.ASSUME_TOUCH=false;ol.DEFAULT_MAX_ZOOM=42;ol.DEFAULT_MIN_ZOOM=0;ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD=0.5;ol.DEFAULT_TILE_SIZE=256;ol.DEFAULT_WMS_VERSION='1.3.0';ol.ENABLE_CANVAS=true;ol.ENABLE_PROJ4JS=true;ol.ENABLE_RASTER_REPROJECTION=true;ol.ENABLE_WEBGL=true;ol.DEBUG_WEBGL=true;ol.INITIAL_ATLAS_SIZE=256;ol.MAX_ATLAS_SIZE=-1;ol.MOUSEWHEELZOOM_MAXDELTA=1;ol.OVERVIEWMAP_MAX_RATIO=0.75;ol.OVERVIEWMAP_MIN_RATIO=0.1;ol.RASTER_REPROJECTION_MAX_SOURCE_TILES=100;ol.RASTER_REPROJECTION_MAX_SUBDIVISION=10;ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH=0.25;ol.SIMPLIFY_TOLERANCE=0.5;ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024;ol.VERSION='';ol.WEBGL_MAX_TEXTURE_SIZE;ol.WEBGL_EXTENSIONS;ol.inherits=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a};ol.nullFunction=function(){};ol.getUid=function(a){return a.ol_uid||(a.ol_uid=++ol.uidCounter_)};ol.uidCounter_=0;bq.provide('ol.AssertionError');bq.require('ol');ol.AssertionError=function(a){var b=ol.VERSION?ol.VERSION.split('-')[0]:'latest';this.message='Assertion failed. See https://openlayers.org/en/'+b+'/doc/errors/#'+a+' for details.';this.code=a;this.name='AssertionError'};ol.inherits(ol.AssertionError,Error);bq.provide('ol.asserts');bq.require('ol.AssertionError');ol.asserts.assert=function(a,b){if(!a){throw new ol.AssertionError(b);}};bq.provide('ol.TileRange');ol.TileRange=function(a,b,c,d){this.minX=a;this.maxX=b;this.minY=c;this.maxY=d};ol.TileRange.createOrUpdate=function(a,b,c,d,e){if(e!==undefined){e.minX=a;e.maxX=b;e.minY=c;e.maxY=d;return e}else{return new ol.TileRange(a,b,c,d)}};ol.TileRange.prototype.contains=function(a){return this.containsXY(a[1],a[2])};ol.TileRange.prototype.containsTileRange=function(a){return this.minX<=a.minX&&a.maxX<=this.maxX&&this.minY<=a.minY&&a.maxY<=this.maxY};ol.TileRange.prototype.containsXY=function(x,y){return this.minX<=x&&x<=this.maxX&&this.minY<=y&&y<=this.maxY};ol.TileRange.prototype.equals=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY};ol.TileRange.prototype.extend=function(a){if(a.minX<this.minX){this.minX=a.minX}if(a.maxX>this.maxX){this.maxX=a.maxX}if(a.minY<this.minY){this.minY=a.minY}if(a.maxY>this.maxY){this.maxY=a.maxY}};ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1};ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]};ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1};ol.TileRange.prototype.intersects=function(a){return this.minX<=a.maxX&&this.maxX>=a.minX&&this.minY<=a.maxY&&this.maxY>=a.minY};bq.provide('ol.math');bq.require('ol.asserts');ol.math.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};ol.math.cosh=(function(){var a;if('cosh'in Math){a=Math.cosh}else{a=function(x){var y=Math.exp(x);return(y+1/y)/2}}return a}());ol.math.roundUpToPowerOfTwo=function(x){ol.asserts.assert(0<x,29);return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))};ol.math.squaredSegmentDistance=function(x,y,a,b,c,d){var e=c-a;var f=d-b;if(e!==0||f!==0){var t=((x-a)*e+(y-b)*f)/(e*e+f*f);if(t>1){a=c;b=d}else if(t>0){a+=e*t;b+=f*t}}return ol.math.squaredDistance(x,y,a,b)};ol.math.squaredDistance=function(a,b,c,d){var e=c-a;var f=d-b;return e*e+f*f};ol.math.solveLinearSystem=function(a){var n=a.length;for(var i=0;i<n;i++){var b=i;var c=Math.abs(a[i][i]);for(var r=i+1;r<n;r++){var d=Math.abs(a[r][i]);if(d>c){c=d;b=r}}if(c===0){return null}var e=a[b];a[b]=a[i];a[i]=e;for(var j=i+1;j<n;j++){var f=-a[j][i]/a[i][i];for(var k=i;k<n+1;k++){if(i==k){a[j][k]=0}else{a[j][k]+=f*a[i][k]}}}}var x=new Array(n);for(var l=n-1;l>=0;l--){x[l]=a[l][n]/a[l][l];for(var m=l-1;m>=0;m--){a[m][n]-=a[m][l]*x[l]}}return x};ol.math.toDegrees=function(a){return a*180/Math.PI};ol.math.toRadians=function(a){return a*Math.PI/180};ol.math.modulo=function(a,b){var r=a%b;return r*b<0?r+b:r};ol.math.lerp=function(a,b,x){return a+x*(b-a)};bq.provide('ol.size');ol.size.buffer=function(a,b,c){if(c===undefined){c=[0,0]}c[0]=a[0]+2*b;c[1]=a[1]+2*b;return c};ol.size.hasArea=function(a){return a[0]>0&&a[1]>0};ol.size.scale=function(a,b,c){if(c===undefined){c=[0,0]}c[0]=(a[0]*b+0.5)|0;c[1]=(a[1]*b+0.5)|0;return c};ol.size.toSize=function(a,b){if(Array.isArray(a)){return a}else{if(b===undefined){b=[a,a]}else{b[0]=b[1]=(a)}return b}};bq.provide('ol.extent.Corner');ol.extent.Corner={BOTTOM_LEFT:'bottom-left',BOTTOM_RIGHT:'bottom-right',TOP_LEFT:'top-left',TOP_RIGHT:'top-right'};bq.provide('ol.extent.Relationship');ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};bq.provide('ol.extent');bq.require('ol.asserts');bq.require('ol.extent.Corner');bq.require('ol.extent.Relationship');ol.extent.boundingExtent=function(a){var b=ol.extent.createEmpty();for(var i=0,ii=a.length;i<ii;++i){ol.extent.extendCoordinate(b,a[i])}return b};ol.extent.boundingExtentXYs_=function(a,b,c){var d=Math.min.apply(null,a);var e=Math.min.apply(null,b);var f=Math.max.apply(null,a);var g=Math.max.apply(null,b);return ol.extent.createOrUpdate(d,e,f,g,c)};ol.extent.buffer=function(a,b,c){if(c){c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c}else{return[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}};ol.extent.clone=function(a,b){if(b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}else{return a.slice()}};ol.extent.closestSquaredDistanceXY=function(a,x,y){var b,dy;if(x<a[0]){b=a[0]-x}else if(a[2]<x){b=x-a[2]}else{b=0}if(y<a[1]){dy=a[1]-y}else if(a[3]<y){dy=y-a[3]}else{dy=0}return b*b+dy*dy};ol.extent.containsCoordinate=function(a,b){return ol.extent.containsXY(a,b[0],b[1])};ol.extent.containsExtent=function(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]};ol.extent.containsXY=function(a,x,y){return a[0]<=x&&x<=a[2]&&a[1]<=y&&y<=a[3]};ol.extent.coordinateRelationship=function(a,b){var c=a[0];var d=a[1];var e=a[2];var f=a[3];var x=b[0];var y=b[1];var g=ol.extent.Relationship.UNKNOWN;if(x<c){g=g|ol.extent.Relationship.LEFT}else if(x>e){g=g|ol.extent.Relationship.RIGHT}if(y<d){g=g|ol.extent.Relationship.BELOW}else if(y>f){g=g|ol.extent.Relationship.ABOVE}if(g===ol.extent.Relationship.UNKNOWN){g=ol.extent.Relationship.INTERSECTING}return g};ol.extent.createEmpty=function(){return[Infinity,Infinity,-Infinity,-Infinity]};ol.extent.createOrUpdate=function(a,b,c,d,e){if(e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e}else{return[a,b,c,d]}};ol.extent.createOrUpdateEmpty=function(a){return ol.extent.createOrUpdate(Infinity,Infinity,-Infinity,-Infinity,a)};ol.extent.createOrUpdateFromCoordinate=function(a,b){var x=a[0];var y=a[1];return ol.extent.createOrUpdate(x,y,x,y,b)};ol.extent.createOrUpdateFromCoordinates=function(a,b){var c=ol.extent.createOrUpdateEmpty(b);return ol.extent.extendCoordinates(c,a)};ol.extent.createOrUpdateFromFlatCoordinates=function(a,b,c,d,e){var f=ol.extent.createOrUpdateEmpty(e);return ol.extent.extendFlatCoordinates(f,a,b,c,d)};ol.extent.createOrUpdateFromRings=function(a,b){var c=ol.extent.createOrUpdateEmpty(b);return ol.extent.extendRings(c,a)};ol.extent.equals=function(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]};ol.extent.extend=function(a,b){if(b[0]<a[0]){a[0]=b[0]}if(b[2]>a[2]){a[2]=b[2]}if(b[1]<a[1]){a[1]=b[1]}if(b[3]>a[3]){a[3]=b[3]}return a};ol.extent.extendCoordinate=function(a,b){if(b[0]<a[0]){a[0]=b[0]}if(b[0]>a[2]){a[2]=b[0]}if(b[1]<a[1]){a[1]=b[1]}if(b[1]>a[3]){a[3]=b[1]}};ol.extent.extendCoordinates=function(a,b){var i,ii;for(i=0,ii=b.length;i<ii;++i){ol.extent.extendCoordinate(a,b[i])}return a};ol.extent.extendFlatCoordinates=function(a,b,c,d,e){for(;c<d;c+=e){ol.extent.extendXY(a,b[c],b[c+1])}return a};ol.extent.extendRings=function(a,b){var i,ii;for(i=0,ii=b.length;i<ii;++i){ol.extent.extendCoordinates(a,b[i])}return a};ol.extent.extendXY=function(a,x,y){a[0]=Math.min(a[0],x);a[1]=Math.min(a[1],y);a[2]=Math.max(a[2],x);a[3]=Math.max(a[3],y)};ol.extent.forEachCorner=function(a,b,c){var d;d=b.call(c,ol.extent.getBottomLeft(a));if(d){return d}d=b.call(c,ol.extent.getBottomRight(a));if(d){return d}d=b.call(c,ol.extent.getTopRight(a));if(d){return d}d=b.call(c,ol.extent.getTopLeft(a));if(d){return d}return false};ol.extent.getArea=function(a){var b=0;if(!ol.extent.isEmpty(a)){b=ol.extent.getWidth(a)*ol.extent.getHeight(a)}return b};ol.extent.getBottomLeft=function(a){return[a[0],a[1]]};ol.extent.getBottomRight=function(a){return[a[2],a[1]]};ol.extent.getCenter=function(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]};ol.extent.getCorner=function(a,b){var c;if(b===ol.extent.Corner.BOTTOM_LEFT){c=ol.extent.getBottomLeft(a)}else if(b===ol.extent.Corner.BOTTOM_RIGHT){c=ol.extent.getBottomRight(a)}else if(b===ol.extent.Corner.TOP_LEFT){c=ol.extent.getTopLeft(a)}else if(b===ol.extent.Corner.TOP_RIGHT){c=ol.extent.getTopRight(a)}else{ol.asserts.assert(false,13)}return(c)};ol.extent.getEnlargedArea=function(a,b){var c=Math.min(a[0],b[0]);var d=Math.min(a[1],b[1]);var e=Math.max(a[2],b[2]);var f=Math.max(a[3],b[3]);return(e-c)*(f-d)};ol.extent.getForViewAndSize=function(a,b,c,d,e){var f=b*d[0]/2;var g=b*d[1]/2;var h=Math.cos(c);var i=Math.sin(c);var j=f*h;var k=f*i;var l=g*h;var m=g*i;var x=a[0];var y=a[1];var n=x-j+m;var o=x-j-m;var p=x+j-m;var q=x+j+m;var r=y-k-l;var s=y-k+l;var t=y+k+l;var u=y+k-l;return ol.extent.createOrUpdate(Math.min(n,o,p,q),Math.min(r,s,t,u),Math.max(n,o,p,q),Math.max(r,s,t,u),e)};ol.extent.getHeight=function(a){return a[3]-a[1]};ol.extent.getIntersectionArea=function(a,b){var c=ol.extent.getIntersection(a,b);return ol.extent.getArea(c)};ol.extent.getIntersection=function(a,b,c){var d=c?c:ol.extent.createEmpty();if(ol.extent.intersects(a,b)){if(a[0]>b[0]){d[0]=a[0]}else{d[0]=b[0]}if(a[1]>b[1]){d[1]=a[1]}else{d[1]=b[1]}if(a[2]<b[2]){d[2]=a[2]}else{d[2]=b[2]}if(a[3]<b[3]){d[3]=a[3]}else{d[3]=b[3]}}return d};ol.extent.getMargin=function(a){return ol.extent.getWidth(a)+ol.extent.getHeight(a)};ol.extent.getSize=function(a){return[a[2]-a[0],a[3]-a[1]]};ol.extent.getTopLeft=function(a){return[a[0],a[3]]};ol.extent.getTopRight=function(a){return[a[2],a[3]]};ol.extent.getWidth=function(a){return a[2]-a[0]};ol.extent.intersects=function(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]};ol.extent.isEmpty=function(a){return a[2]<a[0]||a[3]<a[1]};ol.extent.returnOrUpdate=function(a,b){if(b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b}else{return a}};ol.extent.scaleFromCenter=function(a,b){var c=((a[2]-a[0])/2)*(b-1);var d=((a[3]-a[1])/2)*(b-1);a[0]-=c;a[2]+=c;a[1]-=d;a[3]+=d};ol.extent.intersectsSegment=function(a,b,c){var d=false;var e=ol.extent.coordinateRelationship(a,b);var f=ol.extent.coordinateRelationship(a,c);if(e===ol.extent.Relationship.INTERSECTING||f===ol.extent.Relationship.INTERSECTING){d=true}else{var g=a[0];var h=a[1];var i=a[2];var j=a[3];var k=b[0];var l=b[1];var m=c[0];var n=c[1];var o=(n-l)/(m-k);var x,y;if(!!(f&ol.extent.Relationship.ABOVE)&&!(e&ol.extent.Relationship.ABOVE)){x=m-((n-j)/o);d=x>=g&&x<=i}if(!d&&!!(f&ol.extent.Relationship.RIGHT)&&!(e&ol.extent.Relationship.RIGHT)){y=n-((m-i)*o);d=y>=h&&y<=j}if(!d&&!!(f&ol.extent.Relationship.BELOW)&&!(e&ol.extent.Relationship.BELOW)){x=m-((n-h)/o);d=x>=g&&x<=i}if(!d&&!!(f&ol.extent.Relationship.LEFT)&&!(e&ol.extent.Relationship.LEFT)){y=n-((m-g)*o);d=y>=h&&y<=j}}return d};ol.extent.applyTransform=function(a,b,c){var d=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(d,d,2);var e=[d[0],d[2],d[4],d[6]];var f=[d[1],d[3],d[5],d[7]];return ol.extent.boundingExtentXYs_(e,f,c)};bq.provide('ol.obj');ol.obj.assign=(typeof Object.assign==='function')?Object.assign:function(a,b){if(a===undefined||a===null){throw new TypeError('Cannot convert undefined or null to object');}var c=Object(a);for(var i=1,ii=arguments.length;i<ii;++i){var d=arguments[i];if(d!==undefined&&d!==null){for(var e in d){if(d.hasOwnProperty(e)){c[e]=d[e]}}}}return c};ol.obj.clear=function(a){for(var b in a){delete a[b]}};ol.obj.getValues=function(a){var b=[];for(var c in a){b.push(a[c])}return b};ol.obj.isEmpty=function(a){var b;for(b in a){return false}return!b};bq.provide('ol.geom.GeometryType');ol.geom.GeometryType={POINT:'Point',LINE_STRING:'LineString',LINEAR_RING:'LinearRing',POLYGON:'Polygon',MULTI_POINT:'MultiPoint',MULTI_LINE_STRING:'MultiLineString',MULTI_POLYGON:'MultiPolygon',GEOMETRY_COLLECTION:'GeometryCollection',CIRCLE:'Circle'};bq.provide('ol.Sphere');bq.require('ol.math');bq.require('ol.geom.GeometryType');ol.Sphere=function(a){this.radius=a};ol.Sphere.prototype.geodesicArea=function(a){return ol.Sphere.getArea_(a,this.radius)};ol.Sphere.prototype.haversineDistance=function(a,b){return ol.Sphere.getDistance_(a,b,this.radius)};ol.Sphere.prototype.offset=function(a,b,c){var d=ol.math.toRadians(a[1]);var e=ol.math.toRadians(a[0]);var f=b/this.radius;var g=Math.asin(Math.sin(d)*Math.cos(f)+Math.cos(d)*Math.sin(f)*Math.cos(c));var h=e+Math.atan2(Math.sin(c)*Math.sin(f)*Math.cos(d),Math.cos(f)-Math.sin(d)*Math.sin(g));return[ol.math.toDegrees(h),ol.math.toDegrees(g)]};ol.Sphere.DEFAULT_RADIUS=6371008.8;ol.Sphere.getLength=function(a,b){var c=b||{};var d=c.radius||ol.Sphere.DEFAULT_RADIUS;var e=c.projection||'EPSG:3857';a=a.clone().transform(e,'EPSG:4326');var f=a.getType();var g=0;var h,coords,i,ii,j,jj;switch(f){case ol.geom.GeometryType.POINT:case ol.geom.GeometryType.MULTI_POINT:{break}case ol.geom.GeometryType.LINE_STRING:case ol.geom.GeometryType.LINEAR_RING:{h=(a).getCoordinates();g=ol.Sphere.getLength_(h,d);break}case ol.geom.GeometryType.MULTI_LINE_STRING:case ol.geom.GeometryType.POLYGON:{h=(a).getCoordinates();for(i=0,ii=h.length;i<ii;++i){g+=ol.Sphere.getLength_(h[i],d)}break}case ol.geom.GeometryType.MULTI_POLYGON:{h=(a).getCoordinates();for(i=0,ii=h.length;i<ii;++i){coords=h[i];for(j=0,jj=coords.length;j<jj;++j){g+=ol.Sphere.getLength_(coords[j],d)}}break}case ol.geom.GeometryType.GEOMETRY_COLLECTION:{var k=(a).getGeometries();for(i=0,ii=k.length;i<ii;++i){g+=ol.Sphere.getLength(k[i],b)}break}default:{throw new Error('Unsupported geometry type: '+f);}}return g};ol.Sphere.getLength_=function(a,b){var c=0;for(var i=0,ii=a.length;i<ii-1;++i){c+=ol.Sphere.getDistance_(a[i],a[i+1],b)}return c};ol.Sphere.getDistance_=function(b,c,d){var e=ol.math.toRadians(b[1]);var f=ol.math.toRadians(c[1]);var g=(f-e)/2;var h=ol.math.toRadians(c[0]-b[0])/2;var a=Math.sin(g)*Math.sin(g)+Math.sin(h)*Math.sin(h)*Math.cos(e)*Math.cos(f);return 2*d*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};ol.Sphere.getArea=function(a,b){var c=b||{};var d=c.radius||ol.Sphere.DEFAULT_RADIUS;var e=c.projection||'EPSG:3857';a=a.clone().transform(e,'EPSG:4326');var f=a.getType();var g=0;var h,coords,i,ii,j,jj;switch(f){case ol.geom.GeometryType.POINT:case ol.geom.GeometryType.MULTI_POINT:case ol.geom.GeometryType.LINE_STRING:case ol.geom.GeometryType.MULTI_LINE_STRING:case ol.geom.GeometryType.LINEAR_RING:{break}case ol.geom.GeometryType.POLYGON:{h=(a).getCoordinates();g=Math.abs(ol.Sphere.getArea_(h[0],d));for(i=1,ii=h.length;i<ii;++i){g-=Math.abs(ol.Sphere.getArea_(h[i],d))}break}case ol.geom.GeometryType.MULTI_POLYGON:{h=(a).getCoordinates();for(i=0,ii=h.length;i<ii;++i){coords=h[i];g+=Math.abs(ol.Sphere.getArea_(coords[0],d));for(j=1,jj=coords.length;j<jj;++j){g-=Math.abs(ol.Sphere.getArea_(coords[j],d))}}break}case ol.geom.GeometryType.GEOMETRY_COLLECTION:{var k=(a).getGeometries();for(i=0,ii=k.length;i<ii;++i){g+=ol.Sphere.getArea(k[i],b)}break}default:{throw new Error('Unsupported geometry type: '+f);}}return g};ol.Sphere.getArea_=function(a,b){var c=0,len=a.length;var d=a[len-1][0];var e=a[len-1][1];for(var i=0;i<len;i++){var f=a[i][0],y2=a[i][1];c+=ol.math.toRadians(f-d)*(2+Math.sin(ol.math.toRadians(e))+Math.sin(ol.math.toRadians(y2)));d=f;e=y2}return c*b*b/2.0};bq.provide('ol.proj.Units');ol.proj.Units={DEGREES:'degrees',FEET:'ft',METERS:'m',PIXELS:'pixels',TILE_PIXELS:'tile-pixels',USFEET:'us-ft'};ol.proj.Units.METERS_PER_UNIT={};ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*6370997/360;ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.FEET]=0.3048;ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.METERS]=1;ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937;bq.provide('ol.proj.proj4');ol.proj.proj4.cache_=null;ol.proj.proj4.set=function(a){ol.proj.proj4.cache_=a};ol.proj.proj4.get=function(){return ol.proj.proj4.cache_||window['proj4']};bq.provide('ol.proj.Projection');bq.require('ol');bq.require('ol.proj.Units');bq.require('ol.proj.proj4');ol.proj.Projection=function(a){this.code_=a.code;this.units_=(a.units);this.extent_=a.extent!==undefined?a.extent:null;this.worldExtent_=a.worldExtent!==undefined?a.worldExtent:null;this.axisOrientation_=a.axisOrientation!==undefined?a.axisOrientation:'enu';this.global_=a.global!==undefined?a.global:false;this.canWrapX_=!!(this.global_&&this.extent_);this.getPointResolutionFunc_=a.getPointResolution;this.defaultTileGrid_=null;this.metersPerUnit_=a.metersPerUnit;var b=a.code;if(ol.ENABLE_PROJ4JS){var c=ol.proj.proj4.get();if(typeof c=='function'){var d=c.defs(b);if(d!==undefined){if(d.axis!==undefined&&a.axisOrientation===undefined){this.axisOrientation_=d.axis}if(a.metersPerUnit===undefined){this.metersPerUnit_=d.to_meter}if(a.units===undefined){this.units_=d.units}}}}};ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_};ol.proj.Projection.prototype.getCode=function(){return this.code_};ol.proj.Projection.prototype.getExtent=function(){return this.extent_};ol.proj.Projection.prototype.getUnits=function(){return this.units_};ol.proj.Projection.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ol.proj.Units.METERS_PER_UNIT[this.units_]};ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_};ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_};ol.proj.Projection.prototype.isGlobal=function(){return this.global_};ol.proj.Projection.prototype.setGlobal=function(a){this.global_=a;this.canWrapX_=!!(a&&this.extent_)};ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_};ol.proj.Projection.prototype.setDefaultTileGrid=function(a){this.defaultTileGrid_=a};ol.proj.Projection.prototype.setExtent=function(a){this.extent_=a;this.canWrapX_=!!(this.global_&&a)};ol.proj.Projection.prototype.setWorldExtent=function(a){this.worldExtent_=a};ol.proj.Projection.prototype.setGetPointResolution=function(a){this.getPointResolutionFunc_=a};ol.proj.Projection.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};bq.provide('ol.proj.EPSG3857');bq.require('ol');bq.require('ol.math');bq.require('ol.proj.Projection');bq.require('ol.proj.Units');ol.proj.EPSG3857.Projection_=function(c){ol.proj.Projection.call(this,{code:c,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:true,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT,getPointResolution:function(a,b){return a/ol.math.cosh(b[1]/ol.proj.EPSG3857.RADIUS)}})};ol.inherits(ol.proj.EPSG3857.Projection_,ol.proj.Projection);ol.proj.EPSG3857.RADIUS=6378137;ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS;ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE];ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85];ol.proj.EPSG3857.PROJECTIONS=[new ol.proj.EPSG3857.Projection_('EPSG:3857'),new ol.proj.EPSG3857.Projection_('EPSG:102100'),new ol.proj.EPSG3857.Projection_('EPSG:102113'),new ol.proj.EPSG3857.Projection_('EPSG:900913'),new ol.proj.EPSG3857.Projection_('urn:ogc:def:crs:EPSG:6.18:3:3857'),new ol.proj.EPSG3857.Projection_('urn:ogc:def:crs:EPSG::3857'),new ol.proj.EPSG3857.Projection_('http://www.opengis.net/gml/srs/epsg.xml#3857')];ol.proj.EPSG3857.fromEPSG4326=function(a,b,c){var d=a.length,dimension=c>1?c:2,output=b;if(output===undefined){if(dimension>2){output=a.slice()}else{output=new Array(d)}}var e=ol.proj.EPSG3857.HALF_SIZE;for(var i=0;i<d;i+=dimension){output[i]=e*a[i]/180;var y=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(a[i+1]+90)/360));if(y>e){y=e}else if(y<-e){y=-e}output[i+1]=y}return output};ol.proj.EPSG3857.toEPSG4326=function(a,b,c){var d=a.length,dimension=c>1?c:2,output=b;if(output===undefined){if(dimension>2){output=a.slice()}else{output=new Array(d)}}for(var i=0;i<d;i+=dimension){output[i]=180*a[i]/ol.proj.EPSG3857.HALF_SIZE;output[i+1]=360*Math.atan(Math.exp(a[i+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90}return output};bq.provide('ol.proj.EPSG4326');bq.require('ol');bq.require('ol.proj.Projection');bq.require('ol.proj.Units');ol.proj.EPSG4326.Projection_=function(a,b){ol.proj.Projection.call(this,{code:a,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:b,global:true,metersPerUnit:ol.proj.EPSG4326.METERS_PER_UNIT,worldExtent:ol.proj.EPSG4326.EXTENT})};ol.inherits(ol.proj.EPSG4326.Projection_,ol.proj.Projection);ol.proj.EPSG4326.RADIUS=6378137;ol.proj.EPSG4326.EXTENT=[-180,-90,180,90];ol.proj.EPSG4326.METERS_PER_UNIT=Math.PI*ol.proj.EPSG4326.RADIUS/180;ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326.Projection_('CRS:84'),new ol.proj.EPSG4326.Projection_('EPSG:4326','neu'),new ol.proj.EPSG4326.Projection_('urn:ogc:def:crs:EPSG::4326','neu'),new ol.proj.EPSG4326.Projection_('urn:ogc:def:crs:EPSG:6.6:4326','neu'),new ol.proj.EPSG4326.Projection_('urn:ogc:def:crs:OGC:1.3:CRS84'),new ol.proj.EPSG4326.Projection_('urn:ogc:def:crs:OGC:2:84'),new ol.proj.EPSG4326.Projection_('http://www.opengis.net/gml/srs/epsg.xml#4326','neu'),new ol.proj.EPSG4326.Projection_('urn:x-ogc:def:crs:EPSG:4326','neu')];bq.provide('ol.proj.projections');ol.proj.projections.cache_={};ol.proj.projections.clear=function(){ol.proj.projections.cache_={}};ol.proj.projections.get=function(a){var b=ol.proj.projections.cache_;return b[a]||null};ol.proj.projections.add=function(a,b){var c=ol.proj.projections.cache_;c[a]=b};bq.provide('ol.proj.transforms');bq.require('ol.obj');ol.proj.transforms.cache_={};ol.proj.transforms.clear=function(){ol.proj.transforms.cache_={}};ol.proj.transforms.add=function(a,b,c){var d=a.getCode();var e=b.getCode();var f=ol.proj.transforms.cache_;if(!(d in f)){f[d]={}}f[d][e]=c};ol.proj.transforms.remove=function(a,b){var c=a.getCode();var d=b.getCode();var e=ol.proj.transforms.cache_;var f=e[c][d];delete e[c][d];if(ol.obj.isEmpty(e[c])){delete e[c]}return f};ol.proj.transforms.get=function(a,b){var c;var d=ol.proj.transforms.cache_;if(a in d&&b in d[a]){c=d[a][b]}return c};bq.provide('ol.proj');bq.require('ol');bq.require('ol.Sphere');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.proj.EPSG3857');bq.require('ol.proj.EPSG4326');bq.require('ol.proj.Projection');bq.require('ol.proj.Units');bq.require('ol.proj.proj4');bq.require('ol.proj.projections');bq.require('ol.proj.transforms');ol.proj.METERS_PER_UNIT=ol.proj.Units.METERS_PER_UNIT;ol.proj.SPHERE_=new ol.Sphere(ol.Sphere.DEFAULT_RADIUS);if(ol.ENABLE_PROJ4JS){ol.proj.setProj4=function(a){ol.proj.proj4.set(a)}}ol.proj.getPointResolution=function(a,b,c,d){a=ol.proj.get(a);var e;var f=a.getPointResolutionFunc();if(f){e=f(b,c)}else{var g=a.getUnits();if(g==ol.proj.Units.DEGREES&&!d||d==ol.proj.Units.DEGREES){e=b}else{var h=ol.proj.getTransformFromProjections(a,ol.proj.get('EPSG:4326'));var i=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2];i=h(i,i,2);var j=ol.proj.SPHERE_.haversineDistance(i.slice(0,2),i.slice(2,4));var k=ol.proj.SPHERE_.haversineDistance(i.slice(4,6),i.slice(6,8));e=(j+k)/2;var l=d?ol.proj.Units.METERS_PER_UNIT[d]:a.getMetersPerUnit();if(l!==undefined){e/=l}}}return e};ol.proj.addEquivalentProjections=function(c){ol.proj.addProjections(c);c.forEach(function(b){c.forEach(function(a){if(b!==a){ol.proj.transforms.add(b,a,ol.proj.cloneTransform)}})})};ol.proj.addEquivalentTransforms=function(c,d,e,f){c.forEach(function(b){d.forEach(function(a){ol.proj.transforms.add(b,a,e);ol.proj.transforms.add(a,b,f)})})};ol.proj.addProjection=function(a){ol.proj.projections.add(a.getCode(),a);ol.proj.transforms.add(a,a,ol.proj.cloneTransform)};ol.proj.addProjections=function(a){a.forEach(ol.proj.addProjection)};ol.proj.clearAllProjections=function(){ol.proj.projections.clear();ol.proj.transforms.clear()};ol.proj.createProjection=function(a,b){if(!a){return ol.proj.get(b)}else if(typeof a==='string'){return ol.proj.get(a)}else{return(a)}};ol.proj.addCoordinateTransforms=function(a,b,c,d){var e=ol.proj.get(a);var f=ol.proj.get(b);ol.proj.transforms.add(e,f,ol.proj.createTransformFromCoordinateTransform(c));ol.proj.transforms.add(f,e,ol.proj.createTransformFromCoordinateTransform(d))};ol.proj.createTransformFromCoordinateTransform=function(h){return(function(a,b,c){var d=a.length;var e=c!==undefined?c:2;var f=b!==undefined?b:new Array(d);var g,i,j;for(i=0;i<d;i+=e){g=h([a[i],a[i+1]]);f[i]=g[0];f[i+1]=g[1];for(j=e-1;j>=2;--j){f[i+j]=a[i+j]}}return f})};ol.proj.fromLonLat=function(a,b){return ol.proj.transform(a,'EPSG:4326',b!==undefined?b:'EPSG:3857')};ol.proj.toLonLat=function(a,b){var c=ol.proj.transform(a,b!==undefined?b:'EPSG:3857','EPSG:4326');var d=c[0];if(d<-180||d>180){c[0]=ol.math.modulo(d+180,360)-180}return c};ol.proj.get=function(a){var b=null;if(a instanceof ol.proj.Projection){b=a}else if(typeof a==='string'){var c=a;b=ol.proj.projections.get(c);if(ol.ENABLE_PROJ4JS&&!b){var d=ol.proj.proj4.get();if(typeof d=='function'&&d.defs(c)!==undefined){b=new ol.proj.Projection({code:c});ol.proj.addProjection(b)}}}return b};ol.proj.equivalent=function(a,b){if(a===b){return true}var c=a.getUnits()===b.getUnits();if(a.getCode()===b.getCode()){return c}else{var d=ol.proj.getTransformFromProjections(a,b);return d===ol.proj.cloneTransform&&c}};ol.proj.getTransform=function(a,b){var c=ol.proj.get(a);var d=ol.proj.get(b);return ol.proj.getTransformFromProjections(c,d)};ol.proj.getTransformFromProjections=function(a,b){var c=a.getCode();var d=b.getCode();var e=ol.proj.transforms.get(c,d);if(ol.ENABLE_PROJ4JS&&!e){var f=ol.proj.proj4.get();if(typeof f=='function'){var g=f.defs(c);var h=f.defs(d);if(g!==undefined&&h!==undefined){if(g===h){ol.proj.addEquivalentProjections([b,a])}else{var i=f(d,c);ol.proj.addCoordinateTransforms(b,a,i.forward,i.inverse)}e=ol.proj.transforms.get(c,d)}}}if(!e){e=ol.proj.identityTransform}return e};ol.proj.identityTransform=function(a,b,c){if(b!==undefined&&a!==b){for(var i=0,ii=a.length;i<ii;++i){b[i]=a[i]}a=b}return a};ol.proj.cloneTransform=function(a,b,c){var d;if(b!==undefined){for(var i=0,ii=a.length;i<ii;++i){b[i]=a[i]}d=b}else{d=a.slice()}return d};ol.proj.transform=function(a,b,c){var d=ol.proj.getTransform(b,c);return d(a,undefined,a.length)};ol.proj.transformExtent=function(a,b,c){var d=ol.proj.getTransform(b,c);return ol.extent.applyTransform(a,d)};ol.proj.transformWithProjections=function(a,b,c){var d=ol.proj.getTransformFromProjections(b,c);return d(a)};ol.proj.addCommon=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS);ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS);ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)};ol.proj.addCommon();bq.provide('ol.tilecoord');ol.tilecoord.createOrUpdate=function(z,x,y,a){if(a!==undefined){a[0]=z;a[1]=x;a[2]=y;return a}else{return[z,x,y]}};ol.tilecoord.getKeyZXY=function(z,x,y){return z+'/'+x+'/'+y};ol.tilecoord.getKey=function(a){return ol.tilecoord.getKeyZXY(a[0],a[1],a[2])};ol.tilecoord.fromKey=function(a){return a.split('/').map(Number)};ol.tilecoord.hash=function(a){return(a[1]<<a[0])+a[2]};ol.tilecoord.quadKey=function(a){var z=a[0];var b=new Array(z);var c=1<<(z-1);var i,charCode;for(i=0;i<z;++i){charCode=48;if(a[1]&c){charCode+=1}if(a[2]&c){charCode+=2}b[i]=String.fromCharCode(charCode);c>>=1}return b.join('')};ol.tilecoord.withinExtentAndZ=function(a,b){var z=a[0];var x=a[1];var y=a[2];if(b.getMinZoom()>z||z>b.getMaxZoom()){return false}var c=b.getExtent();var d;if(!c){d=b.getFullTileRange(z)}else{d=b.getTileRangeForExtentAndZ(c,z)}if(!d){return true}else{return d.containsXY(x,y)}};bq.provide('ol.tilegrid.TileGrid');bq.require('ol');bq.require('ol.asserts');bq.require('ol.TileRange');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.size');bq.require('ol.tilecoord');ol.tilegrid.TileGrid=function(c){this.minZoom=c.minZoom!==undefined?c.minZoom:0;this.resolutions_=c.resolutions;ol.asserts.assert(ol.array.isSorted(this.resolutions_,function(a,b){return b-a},true),17);var d;if(!c.origins){for(var i=0,ii=this.resolutions_.length-1;i<ii;++i){if(!d){d=this.resolutions_[i]/this.resolutions_[i+1]}else{if(this.resolutions_[i]/this.resolutions_[i+1]!==d){d=undefined;break}}}}this.zoomFactor_=d;this.maxZoom=this.resolutions_.length-1;this.origin_=c.origin!==undefined?c.origin:null;this.origins_=null;if(c.origins!==undefined){this.origins_=c.origins;ol.asserts.assert(this.origins_.length==this.resolutions_.length,20)}var e=c.extent;if(e!==undefined&&!this.origin_&&!this.origins_){this.origin_=ol.extent.getTopLeft(e)}ol.asserts.assert((!this.origin_&&this.origins_)||(this.origin_&&!this.origins_),18);this.tileSizes_=null;if(c.tileSizes!==undefined){this.tileSizes_=c.tileSizes;ol.asserts.assert(this.tileSizes_.length==this.resolutions_.length,19)}this.tileSize_=c.tileSize!==undefined?c.tileSize:!this.tileSizes_?ol.DEFAULT_TILE_SIZE:null;ol.asserts.assert((!this.tileSize_&&this.tileSizes_)||(this.tileSize_&&!this.tileSizes_),22);this.extent_=e!==undefined?e:null;this.fullTileRanges_=null;this.tmpSize_=[0,0];if(c.sizes!==undefined){this.fullTileRanges_=c.sizes.map(function(a,z){var b=new ol.TileRange(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));return b},this)}else if(e){this.calculateTileRanges_(e)}};ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0];ol.tilegrid.TileGrid.prototype.forEachTileCoord=function(a,b,c){var d=this.getTileRangeForExtentAndZ(a,b);for(var i=d.minX,ii=d.maxX;i<=ii;++i){for(var j=d.minY,jj=d.maxY;j<=jj;++j){c([b,i,j])}}};ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(a,b,c,d,e){var f,x,y;var g=null;var z=a[0]-1;if(this.zoomFactor_===2){x=a[1];y=a[2]}else{g=this.getTileCoordExtent(a,e)}while(z>=this.minZoom){if(this.zoomFactor_===2){x=Math.floor(x/2);y=Math.floor(y/2);f=ol.TileRange.createOrUpdate(x,x,y,y,d)}else{f=this.getTileRangeForExtentAndZ(g,z,d)}if(b.call(c,z,f)){return true}--z}return false};ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_};ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom};ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom};ol.tilegrid.TileGrid.prototype.getOrigin=function(z){if(this.origin_){return this.origin_}else{return this.origins_[z]}};ol.tilegrid.TileGrid.prototype.getResolution=function(z){return this.resolutions_[z]};ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_};ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(a,b,c){if(a[0]<this.maxZoom){if(this.zoomFactor_===2){var d=a[1]*2;var e=a[2]*2;return ol.TileRange.createOrUpdate(d,d+1,e,e+1,b)}var f=this.getTileCoordExtent(a,c);return this.getTileRangeForExtentAndZ(f,a[0]+1,b)}return null};ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(z,a,b){var c=this.getOrigin(z);var d=this.getResolution(z);var e=ol.size.toSize(this.getTileSize(z),this.tmpSize_);var f=c[0]+a.minX*e[0]*d;var g=c[0]+(a.maxX+1)*e[0]*d;var h=c[1]+a.minY*e[1]*d;var i=c[1]+(a.maxY+1)*e[1]*d;return ol.extent.createOrUpdate(f,h,g,i,b)};ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(a,z,b){var c=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndZ_(a[0],a[1],z,false,c);var d=c[1];var e=c[2];this.getTileCoordForXYAndZ_(a[2],a[3],z,true,c);return ol.TileRange.createOrUpdate(d,c[1],e,c[2],b)};ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(a){var b=this.getOrigin(a[0]);var c=this.getResolution(a[0]);var d=ol.size.toSize(this.getTileSize(a[0]),this.tmpSize_);return[b[0]+(a[1]+0.5)*d[0]*c,b[1]+(a[2]+0.5)*d[1]*c]};ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(a,b){var c=this.getOrigin(a[0]);var d=this.getResolution(a[0]);var e=ol.size.toSize(this.getTileSize(a[0]),this.tmpSize_);var f=c[0]+a[1]*e[0]*d;var g=c[1]+a[2]*e[1]*d;var h=f+e[0]*d;var i=g+e[1]*d;return ol.extent.createOrUpdate(f,g,h,i,b)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(a,b,c){return this.getTileCoordForXYAndResolution_(a[0],a[1],b,false,c)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(x,y,a,b,c){var z=this.getZForResolution(a);var d=a/this.getResolution(z);var e=this.getOrigin(z);var f=ol.size.toSize(this.getTileSize(z),this.tmpSize_);var g=b?0.5:0;var h=b?0:0.5;var i=Math.floor((x-e[0])/a+g);var j=Math.floor((y-e[1])/a+h);var k=d*i/f[0];var l=d*j/f[1];if(b){k=Math.ceil(k)-1;l=Math.ceil(l)-1}else{k=Math.floor(k);l=Math.floor(l)}return ol.tilecoord.createOrUpdate(z,k,l,c)};ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndZ_=function(x,y,z,a,b){var c=this.getOrigin(z);var d=this.getResolution(z);var e=ol.size.toSize(this.getTileSize(z),this.tmpSize_);var f=a?0.5:0;var g=a?0:0.5;var h=Math.floor((x-c[0])/d+f);var i=Math.floor((y-c[1])/d+g);var j=h/e[0];var k=i/e[1];if(a){j=Math.ceil(j)-1;k=Math.ceil(k)-1}else{j=Math.floor(j);k=Math.floor(k)}return ol.tilecoord.createOrUpdate(z,j,k,b)};ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(a,z,b){return this.getTileCoordForXYAndZ_(a[0],a[1],z,false,b)};ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(a){return this.resolutions_[a[0]]};ol.tilegrid.TileGrid.prototype.getTileSize=function(z){if(this.tileSize_){return this.tileSize_}else{return this.tileSizes_[z]}};ol.tilegrid.TileGrid.prototype.getFullTileRange=function(z){if(!this.fullTileRanges_){return null}else{return this.fullTileRanges_[z]}};ol.tilegrid.TileGrid.prototype.getZForResolution=function(a,b){var z=ol.array.linearFindNearest(this.resolutions_,a,b||0);return ol.math.clamp(z,this.minZoom,this.maxZoom)};ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(a){var b=this.resolutions_.length;var c=new Array(b);for(var z=this.minZoom;z<b;++z){c[z]=this.getTileRangeForExtentAndZ(a,z)}this.fullTileRanges_=c};bq.provide('ol.tilegrid');bq.require('ol');bq.require('ol.size');bq.require('ol.extent');bq.require('ol.extent.Corner');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.proj.Units');bq.require('ol.tilegrid.TileGrid');ol.tilegrid.getForProjection=function(a){var b=a.getDefaultTileGrid();if(!b){b=ol.tilegrid.createForProjection(a);a.setDefaultTileGrid(b)}return b};ol.tilegrid.wrapX=function(a,b,c){var z=b[0];var d=a.getTileCoordCenter(b);var e=ol.tilegrid.extentFromProjection(c);if(!ol.extent.containsCoordinate(e,d)){var f=ol.extent.getWidth(e);var g=Math.ceil((e[0]-d[0])/f);d[0]+=f*g;return a.getTileCoordForCoordAndZ(d,z)}else{return b}};ol.tilegrid.createForExtent=function(a,b,c,d){var e=d!==undefined?d:ol.extent.Corner.TOP_LEFT;var f=ol.tilegrid.resolutionsFromExtent(a,b,c);return new ol.tilegrid.TileGrid({extent:a,origin:ol.extent.getCorner(a,e),resolutions:f,tileSize:c})};ol.tilegrid.createXYZ=function(a){var b=({});ol.obj.assign(b,a!==undefined?a:({}));if(b.extent===undefined){b.extent=ol.proj.get('EPSG:3857').getExtent()}b.resolutions=ol.tilegrid.resolutionsFromExtent(b.extent,b.maxZoom,b.tileSize);delete b.maxZoom;return new ol.tilegrid.TileGrid(b)};ol.tilegrid.resolutionsFromExtent=function(a,b,c){var d=b!==undefined?b:ol.DEFAULT_MAX_ZOOM;var e=ol.extent.getHeight(a);var f=ol.extent.getWidth(a);var g=ol.size.toSize(c!==undefined?c:ol.DEFAULT_TILE_SIZE);var h=Math.max(f/g[0],e/g[1]);var i=d+1;var j=new Array(i);for(var z=0;z<i;++z){j[z]=h/Math.pow(2,z)}return j};ol.tilegrid.createForProjection=function(a,b,c,d){var e=ol.tilegrid.extentFromProjection(a);return ol.tilegrid.createForExtent(e,b,c,d)};ol.tilegrid.extentFromProjection=function(a){a=ol.proj.get(a);var b=a.getExtent();if(!b){var c=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/a.getMetersPerUnit();b=ol.extent.createOrUpdate(-c,-c,c,c)}return b};bq.provide('ol.Attribution');bq.require('ol.TileRange');bq.require('ol.math');bq.require('ol.tilegrid');ol.Attribution=function(a){this.html_=a.html;this.tileRanges_=a.tileRanges?a.tileRanges:null};ol.Attribution.prototype.getHTML=function(){return this.html_};ol.Attribution.prototype.intersectsAnyTileRange=function(a,b,c){if(!this.tileRanges_){return true}var i,ii,tileRange,zKey;for(zKey in a){if(!(zKey in this.tileRanges_)){continue}tileRange=a[zKey];var d;for(i=0,ii=this.tileRanges_[zKey].length;i<ii;++i){d=this.tileRanges_[zKey][i];if(d.intersects(tileRange)){return true}var e=b.getTileRangeForExtentAndZ(ol.tilegrid.extentFromProjection(c),parseInt(zKey,10));var f=e.getWidth();if(tileRange.minX<e.minX||tileRange.maxX>e.maxX){if(d.intersects(new ol.TileRange(ol.math.modulo(tileRange.minX,f),ol.math.modulo(tileRange.maxX,f),tileRange.minY,tileRange.maxY))){return true}if(tileRange.getWidth()>f&&d.intersects(e)){return true}}}}return false};bq.provide('ol.CollectionEventType');ol.CollectionEventType={ADD:'add',REMOVE:'remove'};bq.provide('ol.ObjectEventType');ol.ObjectEventType={PROPERTYCHANGE:'propertychange'};bq.provide('ol.events');bq.require('ol.obj');ol.events.bindListener_=function(d){var e=function(a){var b=d.listener;var c=d.bindTo||d.target;if(d.callOnce){ol.events.unlistenByKey(d)}return b.call(c,a)};d.boundListener=e;return e};ol.events.findListener_=function(a,b,c,d){var e;for(var i=0,ii=a.length;i<ii;++i){e=a[i];if(e.listener===b&&e.bindTo===c){if(d){e.deleteIndex=i}return e}}return undefined};ol.events.getListeners=function(a,b){var c=a.ol_lm;return c?c[b]:undefined};ol.events.getListenerMap_=function(a){var b=a.ol_lm;if(!b){b=a.ol_lm={}}return b};ol.events.removeListeners_=function(a,b){var c=ol.events.getListeners(a,b);if(c){for(var i=0,ii=c.length;i<ii;++i){a.removeEventListener(b,c[i].boundListener);ol.obj.clear(c[i])}c.length=0;var d=a.ol_lm;if(d){delete d[b];if(Object.keys(d).length===0){delete a.ol_lm}}}};ol.events.listen=function(a,b,c,d,e){var f=ol.events.getListenerMap_(a);var g=f[b];if(!g){g=f[b]=[]}var h=ol.events.findListener_(g,c,d,false);if(h){if(!e){h.callOnce=false}}else{h=({bindTo:d,callOnce:!!e,listener:c,target:a,type:b});a.addEventListener(b,ol.events.bindListener_(h));g.push(h)}return h};ol.events.listenOnce=function(a,b,c,d){return ol.events.listen(a,b,c,d,true)};ol.events.unlisten=function(a,b,c,d){var e=ol.events.getListeners(a,b);if(e){var f=ol.events.findListener_(e,c,d,true);if(f){ol.events.unlistenByKey(f)}}};ol.events.unlistenByKey=function(a){if(a&&a.target){a.target.removeEventListener(a.type,a.boundListener);var b=ol.events.getListeners(a.target,a.type);if(b){var i='deleteIndex'in a?a.deleteIndex:b.indexOf(a);if(i!==-1){b.splice(i,1)}if(b.length===0){ol.events.removeListeners_(a.target,a.type)}}ol.obj.clear(a)}};ol.events.unlistenAll=function(a){var b=ol.events.getListenerMap_(a);for(var c in b){ol.events.removeListeners_(a,c)}};bq.provide('ol.Disposable');bq.require('ol');ol.Disposable=function(){};ol.Disposable.prototype.disposed_=false;ol.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal()}};ol.Disposable.prototype.disposeInternal=ol.nullFunction;bq.provide('ol.events.Event');ol.events.Event=function(a){this.propagationStopped;this.type=a;this.target=null};ol.events.Event.prototype.preventDefault=ol.events.Event.prototype.stopPropagation=function(){this.propagationStopped=true};ol.events.Event.stopPropagation=function(a){a.stopPropagation()};ol.events.Event.preventDefault=function(a){a.preventDefault()};bq.provide('ol.events.EventTarget');bq.require('ol');bq.require('ol.Disposable');bq.require('ol.events');bq.require('ol.events.Event');ol.events.EventTarget=function(){ol.Disposable.call(this);this.pendingRemovals_={};this.dispatching_={};this.listeners_={}};ol.inherits(ol.events.EventTarget,ol.Disposable);ol.events.EventTarget.prototype.addEventListener=function(a,b){var c=this.listeners_[a];if(!c){c=this.listeners_[a]=[]}if(c.indexOf(b)===-1){c.push(b)}};ol.events.EventTarget.prototype.dispatchEvent=function(a){var b=typeof a==='string'?new ol.events.Event(a):a;var c=b.type;b.target=this;var d=this.listeners_[c];var e;if(d){if(!(c in this.dispatching_)){this.dispatching_[c]=0;this.pendingRemovals_[c]=0}++this.dispatching_[c];for(var i=0,ii=d.length;i<ii;++i){if(d[i].call(this,b)===false||b.propagationStopped){e=false;break}}--this.dispatching_[c];if(this.dispatching_[c]===0){var f=this.pendingRemovals_[c];delete this.pendingRemovals_[c];while(f--){this.removeEventListener(c,ol.nullFunction)}delete this.dispatching_[c]}return e}};ol.events.EventTarget.prototype.disposeInternal=function(){ol.events.unlistenAll(this)};ol.events.EventTarget.prototype.getListeners=function(a){return this.listeners_[a]};ol.events.EventTarget.prototype.hasListener=function(a){return a?a in this.listeners_:Object.keys(this.listeners_).length>0};ol.events.EventTarget.prototype.removeEventListener=function(a,b){var c=this.listeners_[a];if(c){var d=c.indexOf(b);if(a in this.pendingRemovals_){c[d]=ol.nullFunction;++this.pendingRemovals_[a]}else{c.splice(d,1);if(c.length===0){delete this.listeners_[a]}}}};bq.provide('ol.events.EventType');ol.events.EventType={CHANGE:'change',CLEAR:'clear',CLICK:'click',DBLCLICK:'dblclick',DRAGENTER:'dragenter',DRAGOVER:'dragover',DROP:'drop',ERROR:'error',KEYDOWN:'keydown',KEYPRESS:'keypress',LOAD:'load',MOUSEDOWN:'mousedown',MOUSEMOVE:'mousemove',MOUSEOUT:'mouseout',MOUSEUP:'mouseup',MOUSEWHEEL:'mousewheel',MSPOINTERDOWN:'MSPointerDown',RESIZE:'resize',TOUCHSTART:'touchstart',TOUCHMOVE:'touchmove',TOUCHEND:'touchend',WHEEL:'wheel'};bq.provide('ol.Observable');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventTarget');bq.require('ol.events.EventType');ol.Observable=function(){ol.events.EventTarget.call(this);this.revision_=0};ol.inherits(ol.Observable,ol.events.EventTarget);ol.Observable.unByKey=function(a){if(Array.isArray(a)){for(var i=0,ii=a.length;i<ii;++i){ol.events.unlistenByKey(a[i])}}else{ol.events.unlistenByKey((a))}};ol.Observable.prototype.changed=function(){++this.revision_;this.dispatchEvent(ol.events.EventType.CHANGE)};ol.Observable.prototype.dispatchEvent;ol.Observable.prototype.getRevision=function(){return this.revision_};ol.Observable.prototype.on=function(a,b,c){if(Array.isArray(a)){var d=a.length;var e=new Array(d);for(var i=0;i<d;++i){e[i]=ol.events.listen(this,a[i],b,c)}return e}else{return ol.events.listen(this,(a),b,c)}};ol.Observable.prototype.once=function(a,b,c){if(Array.isArray(a)){var d=a.length;var e=new Array(d);for(var i=0;i<d;++i){e[i]=ol.events.listenOnce(this,a[i],b,c)}return e}else{return ol.events.listenOnce(this,(a),b,c)}};ol.Observable.prototype.un=function(a,b,c){if(Array.isArray(a)){for(var i=0,ii=a.length;i<ii;++i){ol.events.unlisten(this,a[i],b,c)}return}else{ol.events.unlisten(this,(a),b,c)}};bq.provide('ol.Object');bq.require('ol');bq.require('ol.ObjectEventType');bq.require('ol.Observable');bq.require('ol.events.Event');bq.require('ol.obj');ol.Object=function(a){ol.Observable.call(this);ol.getUid(this);this.values_={};if(a!==undefined){this.setProperties(a)}};ol.inherits(ol.Object,ol.Observable);ol.Object.changeEventTypeCache_={};ol.Object.getChangeEventType=function(a){return ol.Object.changeEventTypeCache_.hasOwnProperty(a)?ol.Object.changeEventTypeCache_[a]:(ol.Object.changeEventTypeCache_[a]='change:'+a)};ol.Object.prototype.get=function(a){var b;if(this.values_.hasOwnProperty(a)){b=this.values_[a]}return b};ol.Object.prototype.getKeys=function(){return Object.keys(this.values_)};ol.Object.prototype.getProperties=function(){return ol.obj.assign({},this.values_)};ol.Object.prototype.notify=function(a,b){var c;c=ol.Object.getChangeEventType(a);this.dispatchEvent(new ol.Object.Event(c,a,b));c=ol.ObjectEventType.PROPERTYCHANGE;this.dispatchEvent(new ol.Object.Event(c,a,b))};ol.Object.prototype.set=function(a,b,c){if(c){this.values_[a]=b}else{var d=this.values_[a];this.values_[a]=b;if(d!==b){this.notify(a,d)}}};ol.Object.prototype.setProperties=function(a,b){var c;for(c in a){this.set(c,a[c],b)}};ol.Object.prototype.unset=function(a,b){if(a in this.values_){var c=this.values_[a];delete this.values_[a];if(!b){this.notify(a,c)}}};ol.Object.Event=function(a,b,c){ol.events.Event.call(this,a);this.key=b;this.oldValue=c};ol.inherits(ol.Object.Event,ol.events.Event);bq.provide('ol.Collection');bq.require('ol');bq.require('ol.AssertionError');bq.require('ol.CollectionEventType');bq.require('ol.Object');bq.require('ol.events.Event');ol.Collection=function(a,b){ol.Object.call(this);var c=b||{};this.unique_=!!c.unique;this.array_=a?a:[];if(this.unique_){for(var i=0,ii=this.array_.length;i<ii;++i){this.assertUnique_(this.array_[i],i)}}this.updateLength_()};ol.inherits(ol.Collection,ol.Object);ol.Collection.prototype.clear=function(){while(this.getLength()>0){this.pop()}};ol.Collection.prototype.extend=function(a){var i,ii;for(i=0,ii=a.length;i<ii;++i){this.push(a[i])}return this};ol.Collection.prototype.forEach=function(f,a){var b=(a)?f.bind(a):f;var c=this.array_;for(var i=0,ii=c.length;i<ii;++i){b(c[i],i,c)}};ol.Collection.prototype.getArray=function(){return this.array_};ol.Collection.prototype.item=function(a){return this.array_[a]};ol.Collection.prototype.getLength=function(){return(this.get(ol.Collection.Property_.LENGTH))};ol.Collection.prototype.insertAt=function(a,b){if(this.unique_){this.assertUnique_(b)}this.array_.splice(a,0,b);this.updateLength_();this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.ADD,b))};ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)};ol.Collection.prototype.push=function(a){if(this.unique_){this.assertUnique_(a)}var n=this.getLength();this.insertAt(n,a);return this.getLength()};ol.Collection.prototype.remove=function(a){var b=this.array_;var i,ii;for(i=0,ii=b.length;i<ii;++i){if(b[i]===a){return this.removeAt(i)}}return undefined};ol.Collection.prototype.removeAt=function(a){var b=this.array_[a];this.array_.splice(a,1);this.updateLength_();this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.REMOVE,b));return b};ol.Collection.prototype.setAt=function(a,b){var n=this.getLength();if(a<n){if(this.unique_){this.assertUnique_(b,a)}var c=this.array_[a];this.array_[a]=b;this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.REMOVE,c));this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.ADD,b))}else{var j;for(j=n;j<a;++j){this.insertAt(j,undefined)}this.insertAt(a,b)}};ol.Collection.prototype.updateLength_=function(){this.set(ol.Collection.Property_.LENGTH,this.array_.length)};ol.Collection.prototype.assertUnique_=function(a,b){for(var i=0,ii=this.array_.length;i<ii;++i){if(this.array_[i]===a&&i!==b){throw new ol.AssertionError(58);}}};ol.Collection.Property_={LENGTH:'length'};ol.Collection.Event=function(a,b){ol.events.Event.call(this,a);this.element=b};ol.inherits(ol.Collection.Event,ol.events.Event);bq.provide('ol.MapEvent');bq.require('ol');bq.require('ol.events.Event');ol.MapEvent=function(a,b,c){ol.events.Event.call(this,a);this.map=b;this.frameState=c!==undefined?c:null};ol.inherits(ol.MapEvent,ol.events.Event);bq.provide('ol.MapBrowserEvent');bq.require('ol');bq.require('ol.MapEvent');ol.MapBrowserEvent=function(a,b,c,d,e){ol.MapEvent.call(this,a,b,e);this.originalEvent=c;this.pixel=b.getEventPixel(c);this.coordinate=b.getCoordinateFromPixel(this.pixel);this.dragging=d!==undefined?d:false};ol.inherits(ol.MapBrowserEvent,ol.MapEvent);ol.MapBrowserEvent.prototype.preventDefault=function(){ol.MapEvent.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};ol.MapBrowserEvent.prototype.stopPropagation=function(){ol.MapEvent.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};bq.provide('ol.webgl');ol.webgl.ONE=1;ol.webgl.SRC_ALPHA=0x0302;ol.webgl.COLOR_ATTACHMENT0=0x8CE0;ol.webgl.COLOR_BUFFER_BIT=0x00004000;ol.webgl.TRIANGLES=0x0004;ol.webgl.TRIANGLE_STRIP=0x0005;ol.webgl.ONE_MINUS_SRC_ALPHA=0x0303;ol.webgl.ARRAY_BUFFER=0x8892;ol.webgl.ELEMENT_ARRAY_BUFFER=0x8893;ol.webgl.STREAM_DRAW=0x88E0;ol.webgl.STATIC_DRAW=0x88E4;ol.webgl.DYNAMIC_DRAW=0x88E8;ol.webgl.CULL_FACE=0x0B44;ol.webgl.BLEND=0x0BE2;ol.webgl.STENCIL_TEST=0x0B90;ol.webgl.DEPTH_TEST=0x0B71;ol.webgl.SCISSOR_TEST=0x0C11;ol.webgl.UNSIGNED_BYTE=0x1401;ol.webgl.UNSIGNED_SHORT=0x1403;ol.webgl.UNSIGNED_INT=0x1405;ol.webgl.FLOAT=0x1406;ol.webgl.RGBA=0x1908;ol.webgl.FRAGMENT_SHADER=0x8B30;ol.webgl.VERTEX_SHADER=0x8B31;ol.webgl.LINK_STATUS=0x8B82;ol.webgl.LINEAR=0x2601;ol.webgl.TEXTURE_MAG_FILTER=0x2800;ol.webgl.TEXTURE_MIN_FILTER=0x2801;ol.webgl.TEXTURE_WRAP_S=0x2802;ol.webgl.TEXTURE_WRAP_T=0x2803;ol.webgl.TEXTURE_2D=0x0DE1;ol.webgl.TEXTURE0=0x84C0;ol.webgl.CLAMP_TO_EDGE=0x812F;ol.webgl.COMPILE_STATUS=0x8B81;ol.webgl.FRAMEBUFFER=0x8D40;ol.webgl.CONTEXT_IDS_=['experimental-webgl','webgl','webkit-3d','moz-webgl'];ol.webgl.getContext=function(a,b){var c,i,ii=ol.webgl.CONTEXT_IDS_.length;for(i=0;i<ii;++i){try{c=a.getContext(ol.webgl.CONTEXT_IDS_[i],b);if(c){return(c)}}catch(e){}}return null};bq.provide('ol.has');bq.require('ol');bq.require('ol.webgl');var bs=typeof navigator!=='undefined'?navigator.userAgent.toLowerCase():'';ol.has.FIREFOX=bs.indexOf('firefox')!==-1;ol.has.SAFARI=bs.indexOf('safari')!==-1&&bs.indexOf('chrom')==-1;ol.has.WEBKIT=bs.indexOf('webkit')!==-1&&bs.indexOf('edge')==-1;ol.has.MAC=bs.indexOf('macintosh')!==-1;ol.has.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1;ol.has.CANVAS_LINE_DASH=false;ol.has.CANVAS=ol.ENABLE_CANVAS&&(function(){if(!('HTMLCanvasElement'in window)){return false}try{var a=document.createElement('CANVAS').getContext('2d');if(!a){return false}else{if(a.setLineDash!==undefined){ol.has.CANVAS_LINE_DASH=true}return true}}catch(e){return false}})();ol.has.DEVICE_ORIENTATION='DeviceOrientationEvent'in window;ol.has.GEOLOCATION='geolocation'in navigator;ol.has.TOUCH=ol.ASSUME_TOUCH||'ontouchstart'in window;ol.has.POINTER='PointerEvent'in window;ol.has.MSPOINTER=!!(navigator.msPointerEnabled);ol.has.WEBGL;(function(){if(ol.ENABLE_WEBGL){var a=false;var b;var c=[];if('WebGLRenderingContext'in window){try{var d=(document.createElement('CANVAS'));var f=ol.webgl.getContext(d,{failIfMajorPerformanceCaveat:true});if(f){a=true;b=(f.getParameter(f.MAX_TEXTURE_SIZE));c=f.getSupportedExtensions()}}catch(e){}}ol.has.WEBGL=a;ol.WEBGL_EXTENSIONS=c;ol.WEBGL_MAX_TEXTURE_SIZE=b}})();bq.provide('ol.MapBrowserEventType');bq.require('ol.events.EventType');ol.MapBrowserEventType={SINGLECLICK:'singleclick',CLICK:ol.events.EventType.CLICK,DBLCLICK:ol.events.EventType.DBLCLICK,POINTERDRAG:'pointerdrag',POINTERMOVE:'pointermove',POINTERDOWN:'pointerdown',POINTERUP:'pointerup',POINTEROVER:'pointerover',POINTEROUT:'pointerout',POINTERENTER:'pointerenter',POINTERLEAVE:'pointerleave',POINTERCANCEL:'pointercancel'};bq.provide('ol.MapBrowserPointerEvent');bq.require('ol');bq.require('ol.MapBrowserEvent');ol.MapBrowserPointerEvent=function(a,b,c,d,e){ol.MapBrowserEvent.call(this,a,b,c.originalEvent,d,e);this.pointerEvent=c};ol.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent);bq.provide('ol.pointer.EventType');ol.pointer.EventType={POINTERMOVE:'pointermove',POINTERDOWN:'pointerdown',POINTERUP:'pointerup',POINTEROVER:'pointerover',POINTEROUT:'pointerout',POINTERENTER:'pointerenter',POINTERLEAVE:'pointerleave',POINTERCANCEL:'pointercancel'};bq.provide('ol.pointer.EventSource');ol.pointer.EventSource=function(a,b){this.dispatcher=a;this.mapping_=b};ol.pointer.EventSource.prototype.getEvents=function(){return Object.keys(this.mapping_)};ol.pointer.EventSource.prototype.getHandlerForEvent=function(a){return this.mapping_[a]};bq.provide('ol.pointer.MouseSource');bq.require('ol');bq.require('ol.pointer.EventSource');ol.pointer.MouseSource=function(a){var b={'mousedown':this.mousedown,'mousemove':this.mousemove,'mouseup':this.mouseup,'mouseover':this.mouseover,'mouseout':this.mouseout};ol.pointer.EventSource.call(this,a,b);this.pointerMap=a.pointerMap;this.lastTouches=[]};ol.inherits(ol.pointer.MouseSource,ol.pointer.EventSource);ol.pointer.MouseSource.POINTER_ID=1;ol.pointer.MouseSource.POINTER_TYPE='mouse';ol.pointer.MouseSource.DEDUP_DIST=25;ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(a){var b=this.lastTouches;var x=a.clientX,y=a.clientY;for(var i=0,l=b.length,t;i<l&&(t=b[i]);i++){var c=Math.abs(x-t[0]),dy=Math.abs(y-t[1]);if(c<=ol.pointer.MouseSource.DEDUP_DIST&&dy<=ol.pointer.MouseSource.DEDUP_DIST){return true}}return false};ol.pointer.MouseSource.prepareEvent=function(a,b){var e=b.cloneEvent(a,a);var c=e.preventDefault;e.preventDefault=function(){a.preventDefault();c()};e.pointerId=ol.pointer.MouseSource.POINTER_ID;e.isPrimary=true;e.pointerType=ol.pointer.MouseSource.POINTER_TYPE;return e};ol.pointer.MouseSource.prototype.mousedown=function(a){if(!this.isEventSimulatedFromTouch_(a)){if(ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap){this.cancel(a)}var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=a;this.dispatcher.down(e,a)}};ol.pointer.MouseSource.prototype.mousemove=function(a){if(!this.isEventSimulatedFromTouch_(a)){var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.move(e,a)}};ol.pointer.MouseSource.prototype.mouseup=function(a){if(!this.isEventSimulatedFromTouch_(a)){var p=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];if(p&&p.button===a.button){var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.up(e,a);this.cleanupMouse()}}};ol.pointer.MouseSource.prototype.mouseover=function(a){if(!this.isEventSimulatedFromTouch_(a)){var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.enterOver(e,a)}};ol.pointer.MouseSource.prototype.mouseout=function(a){if(!this.isEventSimulatedFromTouch_(a)){var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.leaveOut(e,a)}};ol.pointer.MouseSource.prototype.cancel=function(a){var e=ol.pointer.MouseSource.prepareEvent(a,this.dispatcher);this.dispatcher.cancel(e,a);this.cleanupMouse()};ol.pointer.MouseSource.prototype.cleanupMouse=function(){delete this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]};bq.provide('ol.pointer.MsSource');bq.require('ol');bq.require('ol.pointer.EventSource');ol.pointer.MsSource=function(a){var b={'MSPointerDown':this.msPointerDown,'MSPointerMove':this.msPointerMove,'MSPointerUp':this.msPointerUp,'MSPointerOut':this.msPointerOut,'MSPointerOver':this.msPointerOver,'MSPointerCancel':this.msPointerCancel,'MSGotPointerCapture':this.msGotPointerCapture,'MSLostPointerCapture':this.msLostPointerCapture};ol.pointer.EventSource.call(this,a,b);this.pointerMap=a.pointerMap;this.POINTER_TYPES=['','unavailable','touch','pen','mouse']};ol.inherits(ol.pointer.MsSource,ol.pointer.EventSource);ol.pointer.MsSource.prototype.prepareEvent_=function(a){var e=a;if(typeof a.pointerType==='number'){e=this.dispatcher.cloneEvent(a,a);e.pointerType=this.POINTER_TYPES[a.pointerType]}return e};ol.pointer.MsSource.prototype.cleanup=function(a){delete this.pointerMap[a.toString()]};ol.pointer.MsSource.prototype.msPointerDown=function(a){this.pointerMap[a.pointerId.toString()]=a;var e=this.prepareEvent_(a);this.dispatcher.down(e,a)};ol.pointer.MsSource.prototype.msPointerMove=function(a){var e=this.prepareEvent_(a);this.dispatcher.move(e,a)};ol.pointer.MsSource.prototype.msPointerUp=function(a){var e=this.prepareEvent_(a);this.dispatcher.up(e,a);this.cleanup(a.pointerId)};ol.pointer.MsSource.prototype.msPointerOut=function(a){var e=this.prepareEvent_(a);this.dispatcher.leaveOut(e,a)};ol.pointer.MsSource.prototype.msPointerOver=function(a){var e=this.prepareEvent_(a);this.dispatcher.enterOver(e,a)};ol.pointer.MsSource.prototype.msPointerCancel=function(a){var e=this.prepareEvent_(a);this.dispatcher.cancel(e,a);this.cleanup(a.pointerId)};ol.pointer.MsSource.prototype.msLostPointerCapture=function(a){var e=this.dispatcher.makeEvent('lostpointercapture',a,a);this.dispatcher.dispatchEvent(e)};ol.pointer.MsSource.prototype.msGotPointerCapture=function(a){var e=this.dispatcher.makeEvent('gotpointercapture',a,a);this.dispatcher.dispatchEvent(e)};bq.provide('ol.pointer.NativeSource');bq.require('ol');bq.require('ol.pointer.EventSource');ol.pointer.NativeSource=function(a){var b={'pointerdown':this.pointerDown,'pointermove':this.pointerMove,'pointerup':this.pointerUp,'pointerout':this.pointerOut,'pointerover':this.pointerOver,'pointercancel':this.pointerCancel,'gotpointercapture':this.gotPointerCapture,'lostpointercapture':this.lostPointerCapture};ol.pointer.EventSource.call(this,a,b)};ol.inherits(ol.pointer.NativeSource,ol.pointer.EventSource);ol.pointer.NativeSource.prototype.pointerDown=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerMove=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerUp=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerOut=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerOver=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.pointerCancel=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.lostPointerCapture=function(a){this.dispatcher.fireNativeEvent(a)};ol.pointer.NativeSource.prototype.gotPointerCapture=function(a){this.dispatcher.fireNativeEvent(a)};bq.provide('ol.pointer.PointerEvent');bq.require('ol');bq.require('ol.events.Event');ol.pointer.PointerEvent=function(a,b,c){ol.events.Event.call(this,a);this.originalEvent=b;var d=c?c:{};this.buttons=this.getButtons_(d);this.pressure=this.getPressure_(d,this.buttons);this.bubbles='bubbles'in d?d['bubbles']:false;this.cancelable='cancelable'in d?d['cancelable']:false;this.view='view'in d?d['view']:null;this.detail='detail'in d?d['detail']:null;this.screenX='screenX'in d?d['screenX']:0;this.screenY='screenY'in d?d['screenY']:0;this.clientX='clientX'in d?d['clientX']:0;this.clientY='clientY'in d?d['clientY']:0;this.ctrlKey='ctrlKey'in d?d['ctrlKey']:false;this.altKey='altKey'in d?d['altKey']:false;this.shiftKey='shiftKey'in d?d['shiftKey']:false;this.metaKey='metaKey'in d?d['metaKey']:false;this.button='button'in d?d['button']:0;this.relatedTarget='relatedTarget'in d?d['relatedTarget']:null;this.pointerId='pointerId'in d?d['pointerId']:0;this.width='width'in d?d['width']:0;this.height='height'in d?d['height']:0;this.tiltX='tiltX'in d?d['tiltX']:0;this.tiltY='tiltY'in d?d['tiltY']:0;this.pointerType='pointerType'in d?d['pointerType']:'';this.hwTimestamp='hwTimestamp'in d?d['hwTimestamp']:0;this.isPrimary='isPrimary'in d?d['isPrimary']:false;if(b.preventDefault){this.preventDefault=function(){b.preventDefault()}}};ol.inherits(ol.pointer.PointerEvent,ol.events.Event);ol.pointer.PointerEvent.prototype.getButtons_=function(a){var b;if(a.buttons||ol.pointer.PointerEvent.HAS_BUTTONS){b=a.buttons}else{switch(a.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}}return b};ol.pointer.PointerEvent.prototype.getPressure_=function(a,b){var c=0;if(a.pressure){c=a.pressure}else{c=b?0.5:0}return c};ol.pointer.PointerEvent.HAS_BUTTONS=false;(function(){try{var a=new MouseEvent('click',{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=a.buttons===1}catch(e){}})();bq.provide('ol.pointer.TouchSource');bq.require('ol');bq.require('ol.array');bq.require('ol.pointer.EventSource');bq.require('ol.pointer.MouseSource');ol.pointer.TouchSource=function(a,b){var c={'touchstart':this.touchstart,'touchmove':this.touchmove,'touchend':this.touchend,'touchcancel':this.touchcancel};ol.pointer.EventSource.call(this,a,c);this.pointerMap=a.pointerMap;this.mouseSource=b;this.firstTouchId_=undefined;this.clickCount_=0;this.resetId_=undefined};ol.inherits(ol.pointer.TouchSource,ol.pointer.EventSource);ol.pointer.TouchSource.DEDUP_TIMEOUT=2500;ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200;ol.pointer.TouchSource.POINTER_TYPE='touch';ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(a){return this.firstTouchId_===a.identifier};ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(a){var b=Object.keys(this.pointerMap).length;if(b===0||(b===1&&ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap)){this.firstTouchId_=a.identifier;this.cancelResetClickCount_()}};ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(a){if(a.isPrimary){this.firstTouchId_=undefined;this.resetClickCount_()}};ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)};ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0;this.resetId_=undefined};ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){if(this.resetId_!==undefined){clearTimeout(this.resetId_)}};ol.pointer.TouchSource.prototype.touchToPointer_=function(a,b){var e=this.dispatcher.cloneEvent(a,b);e.pointerId=b.identifier+2;e.bubbles=true;e.cancelable=true;e.detail=this.clickCount_;e.button=0;e.buttons=1;e.width=b.webkitRadiusX||b.radiusX||0;e.height=b.webkitRadiusY||b.radiusY||0;e.pressure=b.webkitForce||b.force||0.5;e.isPrimary=this.isPrimaryTouch_(b);e.pointerType=ol.pointer.TouchSource.POINTER_TYPE;e.clientX=b.clientX;e.clientY=b.clientY;e.screenX=b.screenX;e.screenY=b.screenY;return e};ol.pointer.TouchSource.prototype.processTouches_=function(a,b){var c=Array.prototype.slice.call(a.changedTouches);var d=c.length;function preventDefault(){a.preventDefault()}var i,pointer;for(i=0;i<d;++i){pointer=this.touchToPointer_(a,c[i]);pointer.preventDefault=preventDefault;b.call(this,a,pointer)}};ol.pointer.TouchSource.prototype.findTouch_=function(a,b){var l=a.length;var c;for(var i=0;i<l;i++){c=a[i];if(c.identifier===b){return true}}return false};ol.pointer.TouchSource.prototype.vacuumTouches_=function(a){var b=a.touches;var c=Object.keys(this.pointerMap);var e=c.length;if(e>=b.length){var d=[];var i,key,value;for(i=0;i<e;++i){key=c[i];value=this.pointerMap[key];if(key!=ol.pointer.MouseSource.POINTER_ID&&!this.findTouch_(b,key-2)){d.push(value.out)}}for(i=0;i<d.length;++i){this.cancelOut_(a,d[i])}}};ol.pointer.TouchSource.prototype.touchstart=function(a){this.vacuumTouches_(a);this.setPrimaryTouch_(a.changedTouches[0]);this.dedupSynthMouse_(a);this.clickCount_++;this.processTouches_(a,this.overDown_)};ol.pointer.TouchSource.prototype.overDown_=function(a,b){this.pointerMap[b.pointerId]={target:b.target,out:b,outTarget:b.target};this.dispatcher.over(b,a);this.dispatcher.enter(b,a);this.dispatcher.down(b,a)};ol.pointer.TouchSource.prototype.touchmove=function(a){a.preventDefault();this.processTouches_(a,this.moveOverOut_)};ol.pointer.TouchSource.prototype.moveOverOut_=function(a,b){var c=b;var d=this.pointerMap[c.pointerId];if(!d){return}var e=d.out;var f=d.outTarget;this.dispatcher.move(c,a);if(e&&f!==c.target){e.relatedTarget=c.target;c.relatedTarget=f;e.target=f;if(c.target){this.dispatcher.leaveOut(e,a);this.dispatcher.enterOver(c,a)}else{c.target=f;c.relatedTarget=null;this.cancelOut_(a,c)}}d.out=c;d.outTarget=c.target};ol.pointer.TouchSource.prototype.touchend=function(a){this.dedupSynthMouse_(a);this.processTouches_(a,this.upOut_)};ol.pointer.TouchSource.prototype.upOut_=function(a,b){this.dispatcher.up(b,a);this.dispatcher.out(b,a);this.dispatcher.leave(b,a);this.cleanUpPointer_(b)};ol.pointer.TouchSource.prototype.touchcancel=function(a){this.processTouches_(a,this.cancelOut_)};ol.pointer.TouchSource.prototype.cancelOut_=function(a,b){this.dispatcher.cancel(b,a);this.dispatcher.out(b,a);this.dispatcher.leave(b,a);this.cleanUpPointer_(b)};ol.pointer.TouchSource.prototype.cleanUpPointer_=function(a){delete this.pointerMap[a.pointerId];this.removePrimaryPointer_(a)};ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(a){var b=this.mouseSource.lastTouches;var t=a.changedTouches[0];if(this.isPrimaryTouch_(t)){var c=[t.clientX,t.clientY];b.push(c);setTimeout(function(){ol.array.remove(b,c)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}};bq.provide('ol.pointer.PointerEventHandler');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventTarget');bq.require('ol.has');bq.require('ol.pointer.EventType');bq.require('ol.pointer.MouseSource');bq.require('ol.pointer.MsSource');bq.require('ol.pointer.NativeSource');bq.require('ol.pointer.PointerEvent');bq.require('ol.pointer.TouchSource');ol.pointer.PointerEventHandler=function(a){ol.events.EventTarget.call(this);this.element_=a;this.pointerMap={};this.eventMap_={};this.eventSourceList_=[];this.registerSources()};ol.inherits(ol.pointer.PointerEventHandler,ol.events.EventTarget);ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER){this.registerSource('native',new ol.pointer.NativeSource(this))}else if(ol.has.MSPOINTER){this.registerSource('ms',new ol.pointer.MsSource(this))}else{var a=new ol.pointer.MouseSource(this);this.registerSource('mouse',a);if(ol.has.TOUCH){this.registerSource('touch',new ol.pointer.TouchSource(this,a))}}this.register_()};ol.pointer.PointerEventHandler.prototype.registerSource=function(b,c){var s=c;var d=s.getEvents();if(d){d.forEach(function(e){var a=s.getHandlerForEvent(e);if(a){this.eventMap_[e]=a.bind(s)}},this);this.eventSourceList_.push(s)}};ol.pointer.PointerEventHandler.prototype.register_=function(){var l=this.eventSourceList_.length;var a;for(var i=0;i<l;i++){a=this.eventSourceList_[i];this.addEvents_(a.getEvents())}};ol.pointer.PointerEventHandler.prototype.unregister_=function(){var l=this.eventSourceList_.length;var a;for(var i=0;i<l;i++){a=this.eventSourceList_[i];this.removeEvents_(a.getEvents())}};ol.pointer.PointerEventHandler.prototype.eventHandler_=function(a){var b=a.type;var c=this.eventMap_[b];if(c){c(a)}};ol.pointer.PointerEventHandler.prototype.addEvents_=function(b){b.forEach(function(a){ol.events.listen(this.element_,a,this.eventHandler_,this)},this)};ol.pointer.PointerEventHandler.prototype.removeEvents_=function(a){a.forEach(function(e){ol.events.unlisten(this.element_,e,this.eventHandler_,this)},this)};ol.pointer.PointerEventHandler.prototype.cloneEvent=function(a,b){var c={},p;for(var i=0,ii=ol.pointer.PointerEventHandler.CLONE_PROPS.length;i<ii;i++){p=ol.pointer.PointerEventHandler.CLONE_PROPS[i][0];c[p]=a[p]||b[p]||ol.pointer.PointerEventHandler.CLONE_PROPS[i][1]}return c};ol.pointer.PointerEventHandler.prototype.down=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERDOWN,a,b)};ol.pointer.PointerEventHandler.prototype.move=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERMOVE,a,b)};ol.pointer.PointerEventHandler.prototype.up=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERUP,a,b)};ol.pointer.PointerEventHandler.prototype.enter=function(a,b){a.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERENTER,a,b)};ol.pointer.PointerEventHandler.prototype.leave=function(a,b){a.bubbles=false;this.fireEvent(ol.pointer.EventType.POINTERLEAVE,a,b)};ol.pointer.PointerEventHandler.prototype.over=function(a,b){a.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROVER,a,b)};ol.pointer.PointerEventHandler.prototype.out=function(a,b){a.bubbles=true;this.fireEvent(ol.pointer.EventType.POINTEROUT,a,b)};ol.pointer.PointerEventHandler.prototype.cancel=function(a,b){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,a,b)};ol.pointer.PointerEventHandler.prototype.leaveOut=function(a,b){this.out(a,b);if(!this.contains_(a.target,a.relatedTarget)){this.leave(a,b)}};ol.pointer.PointerEventHandler.prototype.enterOver=function(a,b){this.over(a,b);if(!this.contains_(a.target,a.relatedTarget)){this.enter(a,b)}};ol.pointer.PointerEventHandler.prototype.contains_=function(a,b){if(!a||!b){return false}return a.contains(b)};ol.pointer.PointerEventHandler.prototype.makeEvent=function(a,b,c){return new ol.pointer.PointerEvent(a,c,b)};ol.pointer.PointerEventHandler.prototype.fireEvent=function(a,b,c){var e=this.makeEvent(a,b,c);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(a){var e=this.makeEvent(a.type,a,a);this.dispatchEvent(e)};ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(a,b){var c=this.makeEvent(a,ol.pointer.MouseSource.prepareEvent(b,this),b);return c};ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_();ol.events.EventTarget.prototype.disposeInternal.call(this)};ol.pointer.PointerEventHandler.CLONE_PROPS=[['bubbles',false],['cancelable',false],['view',null],['detail',null],['screenX',0],['screenY',0],['clientX',0],['clientY',0],['ctrlKey',false],['altKey',false],['shiftKey',false],['metaKey',false],['button',0],['relatedTarget',null],['buttons',0],['pointerId',0],['width',0],['height',0],['pressure',0],['tiltX',0],['tiltY',0],['pointerType',''],['hwTimestamp',0],['isPrimary',false],['type',''],['target',null],['currentTarget',null],['which',0]];bq.provide('ol.MapBrowserEventHandler');bq.require('ol');bq.require('ol.has');bq.require('ol.MapBrowserEventType');bq.require('ol.MapBrowserPointerEvent');bq.require('ol.events');bq.require('ol.events.EventTarget');bq.require('ol.pointer.EventType');bq.require('ol.pointer.PointerEventHandler');ol.MapBrowserEventHandler=function(a,b){ol.events.EventTarget.call(this);this.map_=a;this.clickTimeoutId_=0;this.dragging_=false;this.dragListenerKeys_=[];this.moveTolerance_=b?b*ol.has.DEVICE_PIXEL_RATIO:ol.has.DEVICE_PIXEL_RATIO;this.down_=null;var c=this.map_.getViewport();this.activePointers_=0;this.trackedTouches_={};this.pointerEventHandler_=new ol.pointer.PointerEventHandler(c);this.documentPointerEventHandler_=null;this.pointerdownListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,this);this.relayedListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,this)};ol.inherits(ol.MapBrowserEventHandler,ol.events.EventTarget);ol.MapBrowserEventHandler.prototype.emulateClick_=function(b){var c=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.CLICK,this.map_,b);this.dispatchEvent(c);if(this.clickTimeoutId_!==0){clearTimeout(this.clickTimeoutId_);this.clickTimeoutId_=0;c=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.DBLCLICK,this.map_,b);this.dispatchEvent(c)}else{this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var a=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.SINGLECLICK,this.map_,b);this.dispatchEvent(a)}.bind(this),250)}};ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(a){var b=a;if(b.type==ol.MapBrowserEventType.POINTERUP||b.type==ol.MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[b.pointerId]}else if(b.type==ol.MapBrowserEventType.POINTERDOWN){this.trackedTouches_[b.pointerId]=true}this.activePointers_=Object.keys(this.trackedTouches_).length};ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(a){this.updateActivePointers_(a);var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERUP,this.map_,a);this.dispatchEvent(b);if(!b.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(a)){this.emulateClick_(this.down_)}if(this.activePointers_===0){this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_.length=0;this.dragging_=false;this.down_=null;this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}};ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(a){return a.button===0};ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(a){this.updateActivePointers_(a);var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERDOWN,this.map_,a);this.dispatchEvent(b);this.down_=a;if(this.dragListenerKeys_.length===0){this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document);this.dragListenerKeys_.push(ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),ol.events.listen(this.pointerEventHandler_,ol.MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this))}};ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(a){if(this.isMoving_(a)){this.dragging_=true;var b=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERDRAG,this.map_,a,this.dragging_);this.dispatchEvent(b)}a.preventDefault()};ol.MapBrowserEventHandler.prototype.relayEvent_=function(a){var b=!!(this.down_&&this.isMoving_(a));this.dispatchEvent(new ol.MapBrowserPointerEvent(a.type,this.map_,a,b))};ol.MapBrowserEventHandler.prototype.isMoving_=function(a){return Math.abs(a.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(a.clientY-this.down_.clientY)>this.moveTolerance_};ol.MapBrowserEventHandler.prototype.disposeInternal=function(){if(this.relayedListenerKey_){ol.events.unlistenByKey(this.relayedListenerKey_);this.relayedListenerKey_=null}if(this.pointerdownListenerKey_){ol.events.unlistenByKey(this.pointerdownListenerKey_);this.pointerdownListenerKey_=null}this.dragListenerKeys_.forEach(ol.events.unlistenByKey);this.dragListenerKeys_.length=0;if(this.documentPointerEventHandler_){this.documentPointerEventHandler_.dispose();this.documentPointerEventHandler_=null}if(this.pointerEventHandler_){this.pointerEventHandler_.dispose();this.pointerEventHandler_=null}ol.events.EventTarget.prototype.disposeInternal.call(this)};bq.provide('ol.MapEventType');ol.MapEventType={POSTRENDER:'postrender',MOVESTART:'movestart',MOVEEND:'moveend'};bq.provide('ol.MapProperty');ol.MapProperty={LAYERGROUP:'layergroup',SIZE:'size',TARGET:'target',VIEW:'view'};bq.provide('ol.TileState');ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};bq.provide('ol.structs.PriorityQueue');bq.require('ol.asserts');bq.require('ol.obj');ol.structs.PriorityQueue=function(a,b){this.priorityFunction_=a;this.keyFunction_=b;this.elements_=[];this.priorities_=[];this.queuedElements_={}};ol.structs.PriorityQueue.DROP=Infinity;ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0;this.priorities_.length=0;ol.obj.clear(this.queuedElements_)};ol.structs.PriorityQueue.prototype.dequeue=function(){var a=this.elements_;var b=this.priorities_;var c=a[0];if(a.length==1){a.length=0;b.length=0}else{a[0]=a.pop();b[0]=b.pop();this.siftUp_(0)}var d=this.keyFunction_(c);delete this.queuedElements_[d];return c};ol.structs.PriorityQueue.prototype.enqueue=function(a){ol.asserts.assert(!(this.keyFunction_(a)in this.queuedElements_),31);var b=this.priorityFunction_(a);if(b!=ol.structs.PriorityQueue.DROP){this.elements_.push(a);this.priorities_.push(b);this.queuedElements_[this.keyFunction_(a)]=true;this.siftDown_(0,this.elements_.length-1);return true}return false};ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length};ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(a){return a*2+1};ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(a){return a*2+2};ol.structs.PriorityQueue.prototype.getParentIndex_=function(a){return(a-1)>>1};ol.structs.PriorityQueue.prototype.heapify_=function(){var i;for(i=(this.elements_.length>>1)-1;i>=0;i--){this.siftUp_(i)}};ol.structs.PriorityQueue.prototype.isEmpty=function(){return this.elements_.length===0};ol.structs.PriorityQueue.prototype.isKeyQueued=function(a){return a in this.queuedElements_};ol.structs.PriorityQueue.prototype.isQueued=function(a){return this.isKeyQueued(this.keyFunction_(a))};ol.structs.PriorityQueue.prototype.siftUp_=function(a){var b=this.elements_;var c=this.priorities_;var d=b.length;var e=b[a];var f=c[a];var g=a;while(a<(d>>1)){var h=this.getLeftChildIndex_(a);var i=this.getRightChildIndex_(a);var j=i<d&&c[i]<c[h]?i:h;b[a]=b[j];c[a]=c[j];a=j}b[a]=e;c[a]=f;this.siftDown_(g,a)};ol.structs.PriorityQueue.prototype.siftDown_=function(a,b){var c=this.elements_;var d=this.priorities_;var e=c[b];var f=d[b];while(b>a){var g=this.getParentIndex_(b);if(d[g]>f){c[b]=c[g];d[b]=d[g];b=g}else{break}}c[b]=e;d[b]=f};ol.structs.PriorityQueue.prototype.reprioritize=function(){var a=this.priorityFunction_;var b=this.elements_;var c=this.priorities_;var d=0;var n=b.length;var e,i,priority;for(i=0;i<n;++i){e=b[i];priority=a(e);if(priority==ol.structs.PriorityQueue.DROP){delete this.queuedElements_[this.keyFunction_(e)]}else{c[d]=priority;b[d++]=e}}b.length=d;c.length=d;this.heapify_()};bq.provide('ol.TileQueue');bq.require('ol');bq.require('ol.TileState');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.structs.PriorityQueue');ol.TileQueue=function(b,c){ol.structs.PriorityQueue.call(this,function(a){return b.apply(null,a)},function(a){return(a[0]).getKey()});this.tileChangeCallback_=c;this.tilesLoading_=0;this.tilesLoadingKeys_={}};ol.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.enqueue=function(a){var b=ol.structs.PriorityQueue.prototype.enqueue.call(this,a);if(b){var c=a[0];ol.events.listen(c,ol.events.EventType.CHANGE,this.handleTileChange,this)}return b};ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_};ol.TileQueue.prototype.handleTileChange=function(a){var b=(a.target);var c=b.getState();if(c===ol.TileState.LOADED||c===ol.TileState.ERROR||c===ol.TileState.EMPTY||c===ol.TileState.ABORT){ol.events.unlisten(b,ol.events.EventType.CHANGE,this.handleTileChange,this);var d=b.getKey();if(d in this.tilesLoadingKeys_){delete this.tilesLoadingKeys_[d];--this.tilesLoading_}this.tileChangeCallback_()}};ol.TileQueue.prototype.loadMoreTiles=function(a,b){var c=0;var d=false;var e,tile,tileKey;while(this.tilesLoading_<a&&c<b&&this.getCount()>0){tile=(this.dequeue()[0]);tileKey=tile.getKey();e=tile.getState();if(e===ol.TileState.ABORT){d=true}else if(e===ol.TileState.IDLE&&!(tileKey in this.tilesLoadingKeys_)){this.tilesLoadingKeys_[tileKey]=true;++this.tilesLoading_;++c;tile.load()}}if(c===0&&d){this.tileChangeCallback_()}};bq.provide('ol.CenterConstraint');bq.require('ol.math');ol.CenterConstraint.createExtent=function(b){return(function(a){if(a){return[ol.math.clamp(a[0],b[0],b[2]),ol.math.clamp(a[1],b[1],b[3])]}else{return undefined}})};ol.CenterConstraint.none=function(a){return a};bq.provide('ol.ResolutionConstraint');bq.require('ol.array');bq.require('ol.math');ol.ResolutionConstraint.createSnapToResolutions=function(f){return(function(a,b,c){if(a!==undefined){var z=ol.array.linearFindNearest(f,a,c);z=ol.math.clamp(z+b,0,f.length-1);var d=Math.floor(z);if(z!=d&&d<f.length-1){var e=f[d]/f[d+1];return f[d]/Math.pow(e,z-d)}else{return f[d]}}else{return undefined}})};ol.ResolutionConstraint.createSnapToPower=function(g,h,i){return(function(a,b,c){if(a!==undefined){var d=-c/2+0.5;var e=Math.floor(Math.log(h/a)/Math.log(g)+d);var f=Math.max(e+b,0);if(i!==undefined){f=Math.min(f,i)}return h/Math.pow(g,f)}else{return undefined}})};bq.provide('ol.RotationConstraint');bq.require('ol.math');ol.RotationConstraint.disable=function(a,b){if(a!==undefined){return 0}else{return undefined}};ol.RotationConstraint.none=function(a,b){if(a!==undefined){return a+b}else{return undefined}};ol.RotationConstraint.createSnapToN=function(n){var c=2*Math.PI/n;return(function(a,b){if(a!==undefined){a=Math.floor((a+b)/c+0.5)*c;return a}else{return undefined}})};ol.RotationConstraint.createSnapToZero=function(c){var d=c||ol.math.toRadians(5);return(function(a,b){if(a!==undefined){if(Math.abs(a+b)<=d){return 0}else{return a+b}}else{return undefined}})};bq.provide('ol.ViewHint');ol.ViewHint={ANIMATING:0,INTERACTING:1};bq.provide('ol.ViewProperty');ol.ViewProperty={CENTER:'center',RESOLUTION:'resolution',ROTATION:'rotation'};bq.provide('ol.string');ol.string.padNumber=function(a,b,c){var d=c!==undefined?a.toFixed(c):''+a;var e=d.indexOf('.');e=e===-1?d.length:e;return e>b?d:new Array(1+b-e).join('0')+d};ol.string.compareVersions=function(a,b){var c=(''+a).split('.');var d=(''+b).split('.');for(var i=0;i<Math.max(c.length,d.length);i++){var e=parseInt(c[i]||'0',10);var f=parseInt(d[i]||'0',10);if(e>f){return 1}if(f>e){return-1}}return 0};bq.provide('ol.coordinate');bq.require('ol.math');bq.require('ol.string');ol.coordinate.add=function(a,b){a[0]+=b[0];a[1]+=b[1];return a};ol.coordinate.closestOnCircle=function(a,b){var r=b.getRadius();var c=b.getCenter();var e=c[0];var f=c[1];var g=a[0];var h=a[1];var i=g-e;var j=h-f;if(i===0&&j===0){i=1}var d=Math.sqrt(i*i+j*j);var x,y;x=e+r*i/d;y=f+r*j/d;return[x,y]};ol.coordinate.closestOnSegment=function(a,b){var c=a[0];var d=a[1];var e=b[0];var f=b[1];var g=e[0];var h=e[1];var i=f[0];var j=f[1];var k=i-g;var l=j-h;var m=(k===0&&l===0)?0:((k*(c-g))+(l*(d-h)))/((k*k+l*l)||0);var x,y;if(m<=0){x=g;y=h}else if(m>=1){x=i;y=j}else{x=g+m*k;y=h+m*l}return[x,y]};ol.coordinate.createStringXY=function(b){return(function(a){return ol.coordinate.toStringXY(a,b)})};ol.coordinate.degreesToStringHDMS=function(a,b,c){var d=ol.math.modulo(b+180,360)-180;var x=Math.abs(3600*d);var e=c||0;var f=Math.pow(10,e);var g=Math.floor(x/3600);var h=Math.floor((x-g*3600)/60);var i=x-(g*3600)-(h*60);i=Math.ceil(i*f)/f;if(i>=60){i=0;h+=1}if(h>=60){h=0;g+=1}return g+'\u00b0 '+ol.string.padNumber(h,2)+'\u2032 '+ol.string.padNumber(i,2,e)+'\u2033'+(d==0?'':' '+a.charAt(d<0?1:0))};ol.coordinate.format=function(a,b,c){if(a){return b.replace('{x}',a[0].toFixed(c)).replace('{y}',a[1].toFixed(c))}else{return''}};ol.coordinate.equals=function(a,b){var c=true;for(var i=a.length-1;i>=0;--i){if(a[i]!=b[i]){c=false;break}}return c};ol.coordinate.rotate=function(a,b){var c=Math.cos(b);var d=Math.sin(b);var x=a[0]*c-a[1]*d;var y=a[1]*c+a[0]*d;a[0]=x;a[1]=y;return a};ol.coordinate.scale=function(a,b){a[0]*=b;a[1]*=b;return a};ol.coordinate.sub=function(a,b){a[0]-=b[0];a[1]-=b[1];return a};ol.coordinate.squaredDistance=function(a,b){var c=a[0]-b[0];var d=a[1]-b[1];return c*c+d*d};ol.coordinate.distance=function(a,b){return Math.sqrt(ol.coordinate.squaredDistance(a,b))};ol.coordinate.squaredDistanceToSegment=function(a,b){return ol.coordinate.squaredDistance(a,ol.coordinate.closestOnSegment(a,b))};ol.coordinate.toStringHDMS=function(a,b){if(a){return ol.coordinate.degreesToStringHDMS('NS',a[1],b)+' '+ol.coordinate.degreesToStringHDMS('EW',a[0],b)}else{return''}};ol.coordinate.toStringXY=function(a,b){return ol.coordinate.format(a,'{x}, {y}',b)};bq.provide('ol.easing');ol.easing.easeIn=function(t){return Math.pow(t,3)};ol.easing.easeOut=function(t){return 1-ol.easing.easeIn(1-t)};ol.easing.inAndOut=function(t){return 3*t*t-2*t*t*t};ol.easing.linear=function(t){return t};ol.easing.upAndDown=function(t){if(t<0.5){return ol.easing.inAndOut(2*t)}else{return 1-ol.easing.inAndOut(2*(t-0.5))}};bq.provide('ol.geom.GeometryLayout');ol.geom.GeometryLayout={XY:'XY',XYZ:'XYZ',XYM:'XYM',XYZM:'XYZM'};bq.provide('ol.functions');ol.functions.TRUE=function(){return true};ol.functions.FALSE=function(){return false};bq.provide('ol.geom.flat.transform');ol.geom.flat.transform.transform2D=function(a,b,c,d,e,f){var g=f?f:[];var i=0;var j;for(j=b;j<c;j+=d){var x=a[j];var y=a[j+1];g[i++]=e[0]*x+e[2]*y+e[4];g[i++]=e[1]*x+e[3]*y+e[5]}if(f&&g.length!=i){g.length=i}return g};ol.geom.flat.transform.rotate=function(a,b,c,d,e,f,g){var h=g?g:[];var l=Math.cos(e);var m=Math.sin(e);var n=f[0];var o=f[1];var i=0;for(var j=b;j<c;j+=d){var p=a[j]-n;var q=a[j+1]-o;h[i++]=n+p*l-q*m;h[i++]=o+p*m+q*l;for(var k=j+2;k<j+d;++k){h[i++]=a[k]}}if(g&&h.length!=i){h.length=i}return h};ol.geom.flat.transform.scale=function(a,b,c,d,e,f,g,h){var l=h?h:[];var m=g[0];var n=g[1];var i=0;for(var j=b;j<c;j+=d){var o=a[j]-m;var p=a[j+1]-n;l[i++]=m+e*o;l[i++]=n+f*p;for(var k=j+2;k<j+d;++k){l[i++]=a[k]}}if(h&&l.length!=i){l.length=i}return l};ol.geom.flat.transform.translate=function(a,b,c,d,e,f,g){var h=g?g:[];var i=0;var j,k;for(j=b;j<c;j+=d){h[i++]=a[j]+e;h[i++]=a[j+1]+f;for(k=j+2;k<j+d;++k){h[i++]=a[k]}}if(g&&h.length!=i){h.length=i}return h};bq.provide('ol.transform');bq.require('ol.asserts');ol.transform.tmp_=new Array(6);ol.transform.create=function(){return[1,0,0,1,0,0]};ol.transform.reset=function(a){return ol.transform.set(a,1,0,0,1,0,0)};ol.transform.multiply=function(a,b){var c=a[0];var d=a[1];var e=a[2];var f=a[3];var g=a[4];var h=a[5];var i=b[0];var j=b[1];var k=b[2];var l=b[3];var m=b[4];var n=b[5];a[0]=c*i+e*j;a[1]=d*i+f*j;a[2]=c*k+e*l;a[3]=d*k+f*l;a[4]=c*m+e*n+g;a[5]=d*m+f*n+h;return a};ol.transform.set=function(g,a,b,c,d,e,f){g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=e;g[5]=f;return g};ol.transform.setFromArray=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};ol.transform.apply=function(a,b){var x=b[0],y=b[1];b[0]=a[0]*x+a[2]*y+a[4];b[1]=a[1]*x+a[3]*y+a[5];return b};ol.transform.rotate=function(a,b){var c=Math.cos(b);var d=Math.sin(b);return ol.transform.multiply(a,ol.transform.set(ol.transform.tmp_,c,d,-d,c,0,0))};ol.transform.scale=function(a,x,y){return ol.transform.multiply(a,ol.transform.set(ol.transform.tmp_,x,0,0,y,0,0))};ol.transform.translate=function(a,b,c){return ol.transform.multiply(a,ol.transform.set(ol.transform.tmp_,1,0,0,1,b,c))};ol.transform.compose=function(a,b,c,d,e,f,g,h){var i=Math.sin(f);var j=Math.cos(f);a[0]=d*j;a[1]=e*i;a[2]=-d*i;a[3]=e*j;a[4]=g*d*j-h*d*i+b;a[5]=g*e*i+h*e*j+c;return a};ol.transform.invert=function(g){var h=ol.transform.determinant(g);ol.asserts.assert(h!==0,32);var a=g[0];var b=g[1];var c=g[2];var d=g[3];var e=g[4];var f=g[5];g[0]=d/h;g[1]=-b/h;g[2]=-c/h;g[3]=a/h;g[4]=(c*f-d*e)/h;g[5]=-(a*f-b*e)/h;return g};ol.transform.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};bq.provide('ol.geom.Geometry');bq.require('ol');bq.require('ol.Object');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.geom.flat.transform');bq.require('ol.proj');bq.require('ol.proj.Units');bq.require('ol.transform');ol.geom.Geometry=function(){ol.Object.call(this);this.extent_=ol.extent.createEmpty();this.extentRevision_=-1;this.simplifiedGeometryCache={};this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=0;this.tmpTransform_=ol.transform.create()};ol.inherits(ol.geom.Geometry,ol.Object);ol.geom.Geometry.prototype.clone=function(){};ol.geom.Geometry.prototype.closestPointXY=function(x,y,a,b){};ol.geom.Geometry.prototype.getClosestPoint=function(a,b){var c=b?b:[NaN,NaN];this.closestPointXY(a[0],a[1],c,Infinity);return c};ol.geom.Geometry.prototype.intersectsCoordinate=function(a){return this.containsXY(a[0],a[1])};ol.geom.Geometry.prototype.computeExtent=function(a){};ol.geom.Geometry.prototype.containsXY=ol.functions.FALSE;ol.geom.Geometry.prototype.getExtent=function(a){if(this.extentRevision_!=this.getRevision()){this.extent_=this.computeExtent(this.extent_);this.extentRevision_=this.getRevision()}return ol.extent.returnOrUpdate(this.extent_,a)};ol.geom.Geometry.prototype.rotate=function(a,b){};ol.geom.Geometry.prototype.scale=function(a,b,c){};ol.geom.Geometry.prototype.simplify=function(a){return this.getSimplifiedGeometry(a*a)};ol.geom.Geometry.prototype.getSimplifiedGeometry=function(a){};ol.geom.Geometry.prototype.getType=function(){};ol.geom.Geometry.prototype.applyTransform=function(a){};ol.geom.Geometry.prototype.intersectsExtent=function(a){};ol.geom.Geometry.prototype.translate=function(a,b){};ol.geom.Geometry.prototype.transform=function(g,h){var i=this.tmpTransform_;g=ol.proj.get(g);var j=g.getUnits()==ol.proj.Units.TILE_PIXELS?function(a,b,c){var d=g.getExtent();var e=g.getWorldExtent();var f=ol.extent.getHeight(e)/ol.extent.getHeight(d);ol.transform.compose(i,e[0],e[3],f,-f,0,0,0);ol.geom.flat.transform.transform2D(a,0,a.length,c,i,b);return ol.proj.getTransform(g,h)(a,b,c)}:ol.proj.getTransform(g,h);this.applyTransform(j);return this};bq.provide('ol.geom.SimpleGeometry');bq.require('ol');bq.require('ol.functions');bq.require('ol.extent');bq.require('ol.geom.Geometry');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.flat.transform');bq.require('ol.obj');ol.geom.SimpleGeometry=function(){ol.geom.Geometry.call(this);this.layout=ol.geom.GeometryLayout.XY;this.stride=2;this.flatCoordinates=null};ol.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry);ol.geom.SimpleGeometry.getLayoutForStride_=function(a){var b;if(a==2){b=ol.geom.GeometryLayout.XY}else if(a==3){b=ol.geom.GeometryLayout.XYZ}else if(a==4){b=ol.geom.GeometryLayout.XYZM}return(b)};ol.geom.SimpleGeometry.getStrideForLayout=function(a){var b;if(a==ol.geom.GeometryLayout.XY){b=2}else if(a==ol.geom.GeometryLayout.XYZ||a==ol.geom.GeometryLayout.XYM){b=3}else if(a==ol.geom.GeometryLayout.XYZM){b=4}return(b)};ol.geom.SimpleGeometry.prototype.containsXY=ol.functions.FALSE;ol.geom.SimpleGeometry.prototype.computeExtent=function(a){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)};ol.geom.SimpleGeometry.prototype.getCoordinates=function(){};ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates};ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)};ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!=this.getRevision()){ol.obj.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(a<0||(this.simplifiedGeometryMaxMinSquaredTolerance!==0&&a<=this.simplifiedGeometryMaxMinSquaredTolerance)){return this}var b=a.toString();if(this.simplifiedGeometryCache.hasOwnProperty(b)){return this.simplifiedGeometryCache[b]}else{var c=this.getSimplifiedGeometryInternal(a);var d=c.getFlatCoordinates();if(d.length<this.flatCoordinates.length){this.simplifiedGeometryCache[b]=c;return c}else{this.simplifiedGeometryMaxMinSquaredTolerance=a;return this}}};ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(a){return this};ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride};ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(a,b){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(a);this.layout=a;this.flatCoordinates=b};ol.geom.SimpleGeometry.prototype.setCoordinates=function(a,b){};ol.geom.SimpleGeometry.prototype.setLayout=function(a,b,c){var d;if(a){d=ol.geom.SimpleGeometry.getStrideForLayout(a)}else{var i;for(i=0;i<c;++i){if(b.length===0){this.layout=ol.geom.GeometryLayout.XY;this.stride=2;return}else{b=(b[0])}}d=b.length;a=ol.geom.SimpleGeometry.getLayoutForStride_(d)}this.layout=a;this.stride=d};ol.geom.SimpleGeometry.prototype.applyTransform=function(a){if(this.flatCoordinates){a(this.flatCoordinates,this.flatCoordinates,this.stride);this.changed()}};ol.geom.SimpleGeometry.prototype.rotate=function(a,b){var c=this.getFlatCoordinates();if(c){var d=this.getStride();ol.geom.flat.transform.rotate(c,0,c.length,d,a,b,c);this.changed()}};ol.geom.SimpleGeometry.prototype.scale=function(a,b,c){var d=b;if(d===undefined){d=a}var e=c;if(!e){e=ol.extent.getCenter(this.getExtent())}var f=this.getFlatCoordinates();if(f){var g=this.getStride();ol.geom.flat.transform.scale(f,0,f.length,g,a,d,e,f);this.changed()}};ol.geom.SimpleGeometry.prototype.translate=function(a,b){var c=this.getFlatCoordinates();if(c){var d=this.getStride();ol.geom.flat.transform.translate(c,0,c.length,d,a,b,c);this.changed()}};ol.geom.SimpleGeometry.transform2D=function(a,b,c){var d=a.getFlatCoordinates();if(!d){return null}else{var e=a.getStride();return ol.geom.flat.transform.transform2D(d,0,d.length,e,b,c)}};bq.provide('ol.geom.flat.area');ol.geom.flat.area.linearRing=function(a,b,c,d){var e=0;var f=a[c-d];var g=a[c-d+1];for(;b<c;b+=d){var h=a[b];var i=a[b+1];e+=g*h-f*i;f=h;g=i}return e/2};ol.geom.flat.area.linearRings=function(a,b,c,d){var e=0;var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];e+=ol.geom.flat.area.linearRing(a,b,f,d);b=f}return e};ol.geom.flat.area.linearRingss=function(a,b,c,d){var e=0;var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];e+=ol.geom.flat.area.linearRings(a,b,f,d);b=f[f.length-1]}return e};bq.provide('ol.geom.flat.closest');bq.require('ol.math');ol.geom.flat.closest.point=function(a,b,c,d,x,y,e){var f=a[b];var g=a[b+1];var h=a[c]-f;var j=a[c+1]-g;var i,offset;if(h===0&&j===0){offset=b}else{var t=((x-f)*h+(y-g)*j)/(h*h+j*j);if(t>1){offset=c}else if(t>0){for(i=0;i<d;++i){e[i]=ol.math.lerp(a[b+i],a[c+i],t)}e.length=d;return}else{offset=b}}for(i=0;i<d;++i){e[i]=a[offset+i]}e.length=d};ol.geom.flat.closest.getMaxSquaredDelta=function(a,b,c,d,e){var f=a[b];var g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b];var i=a[b+1];var j=ol.math.squaredDistance(f,g,h,i);if(j>e){e=j}f=h;g=i}return e};ol.geom.flat.closest.getsMaxSquaredDelta=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];e=ol.geom.flat.closest.getMaxSquaredDelta(a,b,f,d,e);b=f}return e};ol.geom.flat.closest.getssMaxSquaredDelta=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];e=ol.geom.flat.closest.getsMaxSquaredDelta(a,b,f,d,e);b=f[f.length-1]}return e};ol.geom.flat.closest.getClosestPoint=function(a,b,c,d,e,f,x,y,g,h,j){if(b==c){return h}var i,squaredDistance;if(e===0){squaredDistance=ol.math.squaredDistance(x,y,a[b],a[b+1]);if(squaredDistance<h){for(i=0;i<d;++i){g[i]=a[b+i]}g.length=d;return squaredDistance}else{return h}}var k=j?j:[NaN,NaN];var l=b+d;while(l<c){ol.geom.flat.closest.point(a,l-d,l,d,x,y,k);squaredDistance=ol.math.squaredDistance(x,y,k[0],k[1]);if(squaredDistance<h){h=squaredDistance;for(i=0;i<d;++i){g[i]=k[i]}g.length=d;l+=d}else{l+=d*Math.max(((Math.sqrt(squaredDistance)-Math.sqrt(h))/e)|0,1)}}if(f){ol.geom.flat.closest.point(a,c-d,b,d,x,y,k);squaredDistance=ol.math.squaredDistance(x,y,k[0],k[1]);if(squaredDistance<h){h=squaredDistance;for(i=0;i<d;++i){g[i]=k[i]}g.length=d}}return h};ol.geom.flat.closest.getsClosestPoint=function(a,b,c,d,e,f,x,y,g,h,j){var k=j?j:[NaN,NaN];var i,ii;for(i=0,ii=c.length;i<ii;++i){var l=c[i];h=ol.geom.flat.closest.getClosestPoint(a,b,l,d,e,f,x,y,g,h,k);b=l}return h};ol.geom.flat.closest.getssClosestPoint=function(a,b,c,d,e,f,x,y,g,h,j){var k=j?j:[NaN,NaN];var i,ii;for(i=0,ii=c.length;i<ii;++i){var l=c[i];h=ol.geom.flat.closest.getsClosestPoint(a,b,l,d,e,f,x,y,g,h,k);b=l[l.length-1]}return h};bq.provide('ol.geom.flat.deflate');ol.geom.flat.deflate.coordinate=function(a,b,c,d){var i,ii;for(i=0,ii=c.length;i<ii;++i){a[b++]=c[i]}return b};ol.geom.flat.deflate.coordinates=function(a,b,c,d){var i,ii;for(i=0,ii=c.length;i<ii;++i){var e=c[i];var j;for(j=0;j<d;++j){a[b++]=e[j]}}return b};ol.geom.flat.deflate.coordinatess=function(a,b,c,d,e){var f=e?e:[];var i=0;var j,jj;for(j=0,jj=c.length;j<jj;++j){var g=ol.geom.flat.deflate.coordinates(a,b,c[j],d);f[i++]=g;b=g}f.length=i;return f};ol.geom.flat.deflate.coordinatesss=function(a,b,c,d,e){var f=e?e:[];var i=0;var j,jj;for(j=0,jj=c.length;j<jj;++j){var g=ol.geom.flat.deflate.coordinatess(a,b,c[j],d,f[i]);f[i++]=g;b=g[g.length-1]}f.length=i;return f};bq.provide('ol.geom.flat.inflate');ol.geom.flat.inflate.coordinates=function(a,b,c,d,e){var f=e!==undefined?e:[];var i=0;var j;for(j=b;j<c;j+=d){f[i++]=a.slice(j,j+d)}f.length=i;return f};ol.geom.flat.inflate.coordinatess=function(a,b,c,d,e){var f=e!==undefined?e:[];var i=0;var j,jj;for(j=0,jj=c.length;j<jj;++j){var g=c[j];f[i++]=ol.geom.flat.inflate.coordinates(a,b,g,d,f[i]);b=g}f.length=i;return f};ol.geom.flat.inflate.coordinatesss=function(a,b,c,d,e){var f=e!==undefined?e:[];var i=0;var j,jj;for(j=0,jj=c.length;j<jj;++j){var g=c[j];f[i++]=ol.geom.flat.inflate.coordinatess(a,b,g,d,f[i]);b=g[g.length-1]}f.length=i;return f};bq.provide('ol.geom.flat.simplify');bq.require('ol.math');ol.geom.flat.simplify.lineString=function(a,b,c,d,e,f,g){var h=g!==undefined?g:[];if(!f){c=ol.geom.flat.simplify.radialDistance(a,b,c,d,e,h,0);a=h;b=0;d=2}h.length=ol.geom.flat.simplify.douglasPeucker(a,b,c,d,e,h,0);return h};ol.geom.flat.simplify.douglasPeucker=function(a,b,c,d,e,f,g){var n=(c-b)/d;if(n<3){for(;b<c;b+=d){f[g++]=a[b];f[g++]=a[b+1]}return g}var h=new Array(n);h[0]=1;h[n-1]=1;var j=[b,c-d];var k=0;var i;while(j.length>0){var l=j.pop();var m=j.pop();var o=0;var p=a[m];var q=a[m+1];var r=a[l];var s=a[l+1];for(i=m+d;i<l;i+=d){var x=a[i];var y=a[i+1];var t=ol.math.squaredSegmentDistance(x,y,p,q,r,s);if(t>o){k=i;o=t}}if(o>e){h[(k-b)/d]=1;if(m+d<k){j.push(m,k)}if(k+d<l){j.push(k,l)}}}for(i=0;i<n;++i){if(h[i]){f[g++]=a[b+i*d];f[g++]=a[b+i*d+1]}}return g};ol.geom.flat.simplify.douglasPeuckers=function(a,b,c,d,e,f,g,h){var i,ii;for(i=0,ii=c.length;i<ii;++i){var j=c[i];g=ol.geom.flat.simplify.douglasPeucker(a,b,j,d,e,f,g);h.push(g);b=j}return g};ol.geom.flat.simplify.douglasPeuckerss=function(a,b,c,d,e,f,g,h){var i,ii;for(i=0,ii=c.length;i<ii;++i){var j=c[i];var k=[];g=ol.geom.flat.simplify.douglasPeuckers(a,b,j,d,e,f,g,k);h.push(k);b=j[j.length-1]}return g};ol.geom.flat.simplify.radialDistance=function(a,b,c,d,e,f,g){if(c<=b+d){for(;b<c;b+=d){f[g++]=a[b];f[g++]=a[b+1]}return g}var h=a[b];var i=a[b+1];f[g++]=h;f[g++]=i;var j=h;var k=i;for(b+=d;b<c;b+=d){j=a[b];k=a[b+1];if(ol.math.squaredDistance(h,i,j,k)>e){f[g++]=j;f[g++]=k;h=j;i=k}}if(j!=h||k!=i){f[g++]=j;f[g++]=k}return g};ol.geom.flat.simplify.snap=function(a,b){return b*Math.round(a/b)};ol.geom.flat.simplify.quantize=function(a,b,c,d,e,f,g){if(b==c){return g}var h=ol.geom.flat.simplify.snap(a[b],e);var i=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;f[g++]=h;f[g++]=i;var j,y2;do{j=ol.geom.flat.simplify.snap(a[b],e);y2=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;if(b==c){f[g++]=j;f[g++]=y2;return g}}while(j==h&&y2==i);while(b<c){var k,y3;k=ol.geom.flat.simplify.snap(a[b],e);y3=ol.geom.flat.simplify.snap(a[b+1],e);b+=d;if(k==j&&y3==y2){continue}var l=j-h;var m=y2-i;var n=k-h;var o=y3-i;if((l*o==m*n)&&((l<0&&n<l)||l==n||(l>0&&n>l))&&((m<0&&o<m)||m==o||(m>0&&o>m))){j=k;y2=y3;continue}f[g++]=j;f[g++]=y2;h=j;i=y2;j=k;y2=y3}f[g++]=j;f[g++]=y2;return g};ol.geom.flat.simplify.quantizes=function(a,b,c,d,e,f,g,h){var i,ii;for(i=0,ii=c.length;i<ii;++i){var j=c[i];g=ol.geom.flat.simplify.quantize(a,b,j,d,e,f,g);h.push(g);b=j}return g};ol.geom.flat.simplify.quantizess=function(a,b,c,d,e,f,g,h){var i,ii;for(i=0,ii=c.length;i<ii;++i){var j=c[i];var k=[];g=ol.geom.flat.simplify.quantizes(a,b,j,d,e,f,g,k);h.push(k);b=j[j.length-1]}return g};bq.provide('ol.geom.LinearRing');bq.require('ol');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.area');bq.require('ol.geom.flat.closest');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.simplify');ol.geom.LinearRing=function(a,b){ol.geom.SimpleGeometry.call(this);this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};ol.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry);ol.geom.LinearRing.prototype.clone=function(){var a=new ol.geom.LinearRing(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.LinearRing.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,true,x,y,a,b)};ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(a){var b=[];b.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);var c=new ol.geom.LinearRing(null);c.setFlatCoordinates(ol.geom.GeometryLayout.XY,b);return c};ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING};ol.geom.LinearRing.prototype.intersectsExtent=function(a){};ol.geom.LinearRing.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.LinearRing.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};bq.provide('ol.geom.Point');bq.require('ol');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.deflate');bq.require('ol.math');ol.geom.Point=function(a,b){ol.geom.SimpleGeometry.call(this);this.setCoordinates(a,b)};ol.inherits(ol.geom.Point,ol.geom.SimpleGeometry);ol.geom.Point.prototype.clone=function(){var a=new ol.geom.Point(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.Point.prototype.closestPointXY=function(x,y,a,b){var c=this.flatCoordinates;var d=ol.math.squaredDistance(x,y,c[0],c[1]);if(d<b){var e=this.stride;var i;for(i=0;i<e;++i){a[i]=c[i]}a.length=e;return d}else{return b}};ol.geom.Point.prototype.getCoordinates=function(){return!this.flatCoordinates?[]:this.flatCoordinates.slice()};ol.geom.Point.prototype.computeExtent=function(a){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,a)};ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT};ol.geom.Point.prototype.intersectsExtent=function(a){return ol.extent.containsXY(a,this.flatCoordinates[0],this.flatCoordinates[1])};ol.geom.Point.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,0);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.Point.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};bq.provide('ol.geom.flat.contains');bq.require('ol.extent');ol.geom.flat.contains.linearRingContainsExtent=function(b,c,d,e,f){var g=ol.extent.forEachCorner(f,function(a){return!ol.geom.flat.contains.linearRingContainsXY(b,c,d,e,a[0],a[1])});return!g};ol.geom.flat.contains.linearRingContainsXY=function(a,b,c,d,x,y){var e=0;var f=a[c-d];var g=a[c-d+1];for(;b<c;b+=d){var h=a[b];var i=a[b+1];if(g<=y){if(i>y&&((h-f)*(y-g))-((x-f)*(i-g))>0){e++}}else if(i<=y&&((h-f)*(y-g))-((x-f)*(i-g))<0){e--}f=h;g=i}return e!==0};ol.geom.flat.contains.linearRingsContainsXY=function(a,b,c,d,x,y){if(c.length===0){return false}if(!ol.geom.flat.contains.linearRingContainsXY(a,b,c[0],d,x,y)){return false}var i,ii;for(i=1,ii=c.length;i<ii;++i){if(ol.geom.flat.contains.linearRingContainsXY(a,c[i-1],c[i],d,x,y)){return false}}return true};ol.geom.flat.contains.linearRingssContainsXY=function(a,b,c,d,x,y){if(c.length===0){return false}var i,ii;for(i=0,ii=c.length;i<ii;++i){var e=c[i];if(ol.geom.flat.contains.linearRingsContainsXY(a,b,e,d,x,y)){return true}b=e[e.length-1]}return false};bq.provide('ol.geom.flat.interiorpoint');bq.require('ol.array');bq.require('ol.geom.flat.contains');ol.geom.flat.interiorpoint.linearRings=function(a,b,c,d,e,f,g){var i,ii,x,x1,x2,y1,y2;var y=e[f+1];var h=[];for(var r=0,rr=c.length;r<rr;++r){var j=c[r];x1=a[j-d];y1=a[j-d+1];for(i=b;i<j;i+=d){x2=a[i];y2=a[i+1];if((y<=y1&&y2<=y)||(y1<=y&&y<=y2)){x=(y-y1)/(y2-y1)*(x2-x1)+x1;h.push(x)}x1=x2;y1=y2}}var k=NaN;var l=-Infinity;h.sort(ol.array.numberSafeCompareFunction);x1=h[0];for(i=1,ii=h.length;i<ii;++i){x2=h[i];var m=Math.abs(x2-x1);if(m>l){x=(x1+x2)/2;if(ol.geom.flat.contains.linearRingsContainsXY(a,b,c,d,x,y)){k=x;l=m}}x1=x2}if(isNaN(k)){k=e[f]}if(g){g.push(k,y,l);return g}else{return[k,y,l]}};ol.geom.flat.interiorpoint.linearRingss=function(a,b,c,d,e){var f=[];var i,ii;for(i=0,ii=c.length;i<ii;++i){var g=c[i];f=ol.geom.flat.interiorpoint.linearRings(a,b,g,d,e,2*i,f);b=g[g.length-1]}return f};bq.provide('ol.geom.flat.segments');ol.geom.flat.segments.forEach=function(a,b,c,d,e,f){var g=[a[b],a[b+1]];var h=[];var i;for(;(b+d)<c;b+=d){h[0]=a[b+d];h[1]=a[b+d+1];i=e.call(f,g,h);if(i){return i}g[0]=h[0];g[1]=h[1]}return false};bq.provide('ol.geom.flat.intersectsextent');bq.require('ol.extent');bq.require('ol.geom.flat.contains');bq.require('ol.geom.flat.segments');ol.geom.flat.intersectsextent.lineString=function(c,d,e,f,g){var h=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),c,d,e,f);if(!ol.extent.intersects(g,h)){return false}if(ol.extent.containsExtent(g,h)){return true}if(h[0]>=g[0]&&h[2]<=g[2]){return true}if(h[1]>=g[1]&&h[3]<=g[3]){return true}return ol.geom.flat.segments.forEach(c,d,e,f,function(a,b){return ol.extent.intersectsSegment(g,a,b)})};ol.geom.flat.intersectsextent.lineStrings=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){if(ol.geom.flat.intersectsextent.lineString(a,b,c[i],d,e)){return true}b=c[i]}return false};ol.geom.flat.intersectsextent.linearRing=function(a,b,c,d,e){if(ol.geom.flat.intersectsextent.lineString(a,b,c,d,e)){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[0],e[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[0],e[3])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[2],e[1])){return true}if(ol.geom.flat.contains.linearRingContainsXY(a,b,c,d,e[2],e[3])){return true}return false};ol.geom.flat.intersectsextent.linearRings=function(a,b,c,d,e){if(!ol.geom.flat.intersectsextent.linearRing(a,b,c[0],d,e)){return false}if(c.length===1){return true}var i,ii;for(i=1,ii=c.length;i<ii;++i){if(ol.geom.flat.contains.linearRingContainsExtent(a,c[i-1],c[i],d,e)){return false}}return true};ol.geom.flat.intersectsextent.linearRingss=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];if(ol.geom.flat.intersectsextent.linearRings(a,b,f,d,e)){return true}b=f[f.length-1]}return false};bq.provide('ol.geom.flat.reverse');ol.geom.flat.reverse.coordinates=function(a,b,c,d){while(b<c-d){var i;for(i=0;i<d;++i){var e=a[b+i];a[b+i]=a[c-d+i];a[c-d+i]=e}b+=d;c-=d}};bq.provide('ol.geom.flat.orient');bq.require('ol.geom.flat.reverse');ol.geom.flat.orient.linearRingIsClockwise=function(a,b,c,d){var e=0;var f=a[c-d];var g=a[c-d+1];for(;b<c;b+=d){var h=a[b];var i=a[b+1];e+=(h-f)*(i+g);f=h;g=i}return e>0};ol.geom.flat.orient.linearRingsAreOriented=function(a,b,c,d,e){var f=e!==undefined?e:false;var i,ii;for(i=0,ii=c.length;i<ii;++i){var g=c[i];var h=ol.geom.flat.orient.linearRingIsClockwise(a,b,g,d);if(i===0){if((f&&h)||(!f&&!h)){return false}}else{if((f&&!h)||(!f&&h)){return false}}b=g}return true};ol.geom.flat.orient.linearRingssAreOriented=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){if(!ol.geom.flat.orient.linearRingsAreOriented(a,b,c[i],d,e)){return false}}return true};ol.geom.flat.orient.orientLinearRings=function(a,b,c,d,e){var f=e!==undefined?e:false;var i,ii;for(i=0,ii=c.length;i<ii;++i){var g=c[i];var h=ol.geom.flat.orient.linearRingIsClockwise(a,b,g,d);var j=i===0?(f&&h)||(!f&&!h):(f&&!h)||(!f&&h);if(j){ol.geom.flat.reverse.coordinates(a,b,g,d)}b=g}return b};ol.geom.flat.orient.orientLinearRingss=function(a,b,c,d,e){var i,ii;for(i=0,ii=c.length;i<ii;++i){b=ol.geom.flat.orient.orientLinearRings(a,b,c[i],d,e)}return b};bq.provide('ol.geom.Polygon');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LinearRing');bq.require('ol.geom.Point');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.area');bq.require('ol.geom.flat.closest');bq.require('ol.geom.flat.contains');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.interiorpoint');bq.require('ol.geom.flat.intersectsextent');bq.require('ol.geom.flat.orient');bq.require('ol.geom.flat.simplify');bq.require('ol.math');ol.geom.Polygon=function(a,b){ol.geom.SimpleGeometry.call(this);this.ends_=[];this.flatInteriorPointRevision_=-1;this.flatInteriorPoint_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(a,b)};ol.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry);ol.geom.Polygon.prototype.appendLinearRing=function(a){if(!this.flatCoordinates){this.flatCoordinates=a.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,a.getFlatCoordinates())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.Polygon.prototype.clone=function(){var a=new ol.geom.Polygon(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return a};ol.geom.Polygon.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,true,x,y,a,b)};ol.geom.Polygon.prototype.containsXY=function(x,y){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,x,y)};ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getCoordinates=function(a){var b;if(a!==undefined){b=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRings(b,0,this.ends_,this.stride,a)}else{b=this.flatCoordinates}return ol.geom.flat.inflate.coordinatess(b,0,this.ends_,this.stride)};ol.geom.Polygon.prototype.getEnds=function(){return this.ends_};ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var a=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,0);this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_};ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint(),ol.geom.GeometryLayout.XYM)};ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length};ol.geom.Polygon.prototype.getLinearRing=function(a){if(a<0||this.ends_.length<=a){return null}var b=new ol.geom.LinearRing(null);b.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a===0?0:this.ends_[a-1],this.ends_[a]));return b};ol.geom.Polygon.prototype.getLinearRings=function(){var a=this.layout;var b=this.flatCoordinates;var c=this.ends_;var d=[];var e=0;var i,ii;for(i=0,ii=c.length;i<ii;++i){var f=c[i];var g=new ol.geom.LinearRing(null);g.setFlatCoordinates(a,b.slice(e,f));d.push(g);e=f}return d};ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;if(ol.geom.flat.orient.linearRingsAreOriented(a,0,this.ends_,this.stride)){this.orientedFlatCoordinates_=a}else{this.orientedFlatCoordinates_=a.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(a),b,0,c);var d=new ol.geom.Polygon(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON};ol.geom.Polygon.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a)};ol.geom.Polygon.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(b,a,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=c.length===0?0:c[c.length-1];this.changed()}};ol.geom.Polygon.prototype.setFlatCoordinates=function(a,b,c){this.setFlatCoordinatesInternal(a,b);this.ends_=c;this.changed()};ol.geom.Polygon.circular=function(a,b,c,d){var n=d?d:32;var e=[];var i;for(i=0;i<n;++i){ol.array.extend(e,a.offset(b,c,2*Math.PI*i/n))}e.push(e[0],e[1]);var f=new ol.geom.Polygon(null);f.setFlatCoordinates(ol.geom.GeometryLayout.XY,e,[e.length]);return f};ol.geom.Polygon.fromExtent=function(a){var b=a[0];var c=a[1];var d=a[2];var e=a[3];var f=[b,c,b,e,d,e,d,c,b,c];var g=new ol.geom.Polygon(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f,[f.length]);return g};ol.geom.Polygon.fromCircle=function(a,b,c){var d=b?b:32;var e=a.getStride();var f=a.getLayout();var g=new ol.geom.Polygon(null,f);var h=e*(d+1);var j=new Array(h);for(var i=0;i<h;i++){j[i]=0}var k=[j.length];g.setFlatCoordinates(f,j,k);ol.geom.Polygon.makeRegular(g,a.getCenter(),a.getRadius(),c);return g};ol.geom.Polygon.makeRegular=function(a,b,c,d){var e=a.getFlatCoordinates();var f=a.getLayout();var g=a.getStride();var h=a.getEnds();var j=e.length/g-1;var k=d?d:0;var l,offset;for(var i=0;i<=j;++i){offset=i*g;l=k+(ol.math.modulo(i,j)*2*Math.PI/j);e[offset]=b[0]+(c*Math.cos(l));e[offset+1]=b[1]+(c*Math.sin(l))}a.setFlatCoordinates(f,e,h)};bq.provide('ol.View');bq.require('ol');bq.require('ol.CenterConstraint');bq.require('ol.Object');bq.require('ol.ResolutionConstraint');bq.require('ol.RotationConstraint');bq.require('ol.ViewHint');bq.require('ol.ViewProperty');bq.require('ol.array');bq.require('ol.asserts');bq.require('ol.coordinate');bq.require('ol.easing');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.geom.Polygon');bq.require('ol.geom.SimpleGeometry');bq.require('ol.math');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.proj.Units');ol.View=function(a){ol.Object.call(this);var b=ol.obj.assign({},a);this.hints_=[0,0];this.animations_=[];this.updateAnimationKey_;this.updateAnimations_=this.updateAnimations_.bind(this);this.projection_=ol.proj.createProjection(b.projection,'EPSG:3857');this.applyOptions_(b)};ol.inherits(ol.View,ol.Object);ol.View.prototype.applyOptions_=function(a){var b={};b[ol.ViewProperty.CENTER]=a.center!==undefined?a.center:null;var c=ol.View.createResolutionConstraint_(a);this.maxResolution_=c.maxResolution;this.minResolution_=c.minResolution;this.zoomFactor_=c.zoomFactor;this.resolutions_=a.resolutions;this.minZoom_=c.minZoom;var d=ol.View.createCenterConstraint_(a);var e=c.constraint;var f=ol.View.createRotationConstraint_(a);this.constraints_={center:d,resolution:e,rotation:f};if(a.resolution!==undefined){b[ol.ViewProperty.RESOLUTION]=a.resolution}else if(a.zoom!==undefined){b[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,a.zoom-this.minZoom_);if(this.resolutions_){b[ol.ViewProperty.RESOLUTION]=ol.math.clamp(Number(this.getResolution()||b[ol.ViewProperty.RESOLUTION]),this.minResolution_,this.maxResolution_)}}b[ol.ViewProperty.ROTATION]=a.rotation!==undefined?a.rotation:0;this.setProperties(b);this.options_=a};ol.View.prototype.getUpdatedOptions_=function(a){var b=ol.obj.assign({},this.options_);if(b.resolution!==undefined){b.resolution=this.getResolution()}else{b.zoom=this.getZoom()}b.center=this.getCenter();b.rotation=this.getRotation();return ol.obj.assign({},b,a)};ol.View.prototype.animate=function(a){var b=arguments.length;var c;if(b>1&&typeof arguments[b-1]==='function'){c=arguments[b-1];--b}if(!this.isDef()){var d=arguments[b-1];if(d.center){this.setCenter(d.center)}if(d.zoom!==undefined){this.setZoom(d.zoom)}if(d.rotation!==undefined){this.setRotation(d.rotation)}if(c){c(true)}return}var e=Date.now();var f=this.getCenter().slice();var g=this.getResolution();var h=this.getRotation();var j=[];for(var i=0;i<b;++i){var k=(arguments[i]);var l=({start:e,complete:false,anchor:k.anchor,duration:k.duration!==undefined?k.duration:1000,easing:k.easing||ol.easing.inAndOut});if(k.center){l.sourceCenter=f;l.targetCenter=k.center;f=l.targetCenter}if(k.zoom!==undefined){l.sourceResolution=g;l.targetResolution=this.constrainResolution(this.maxResolution_,k.zoom-this.minZoom_,0);g=l.targetResolution}else if(k.resolution){l.sourceResolution=g;l.targetResolution=k.resolution;g=l.targetResolution}if(k.rotation!==undefined){l.sourceRotation=h;var m=ol.math.modulo(k.rotation-h+Math.PI,2*Math.PI)-Math.PI;l.targetRotation=h+m;h=l.targetRotation}l.callback=c;if(ol.View.isNoopAnimation(l)){l.complete=true}else{e+=l.duration}j.push(l)}this.animations_.push(j);this.setHint(ol.ViewHint.ANIMATING,1);this.updateAnimations_()};ol.View.prototype.getAnimating=function(){return this.hints_[ol.ViewHint.ANIMATING]>0};ol.View.prototype.getInteracting=function(){return this.hints_[ol.ViewHint.INTERACTING]>0};ol.View.prototype.cancelAnimations=function(){this.setHint(ol.ViewHint.ANIMATING,-this.hints_[ol.ViewHint.ANIMATING]);for(var i=0,ii=this.animations_.length;i<ii;++i){var a=this.animations_[i];if(a[0].callback){a[0].callback(false)}}this.animations_.length=0};ol.View.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==undefined){cancelAnimationFrame(this.updateAnimationKey_);this.updateAnimationKey_=undefined}if(!this.getAnimating()){return}var a=Date.now();var b=false;for(var i=this.animations_.length-1;i>=0;--i){var c=this.animations_[i];var d=true;for(var j=0,jj=c.length;j<jj;++j){var e=c[j];if(e.complete){continue}var f=a-e.start;var g=e.duration>0?f/e.duration:1;if(g>=1){e.complete=true;g=1}else{d=false}var h=e.easing(g);if(e.sourceCenter){var k=e.sourceCenter[0];var l=e.sourceCenter[1];var m=e.targetCenter[0];var n=e.targetCenter[1];var x=k+h*(m-k);var y=l+h*(n-l);this.set(ol.ViewProperty.CENTER,[x,y])}if(e.sourceResolution&&e.targetResolution){var o=h===1?e.targetResolution:e.sourceResolution+h*(e.targetResolution-e.sourceResolution);if(e.anchor){this.set(ol.ViewProperty.CENTER,this.calculateCenterZoom(o,e.anchor))}this.set(ol.ViewProperty.RESOLUTION,o)}if(e.sourceRotation!==undefined&&e.targetRotation!==undefined){var p=h===1?ol.math.modulo(e.targetRotation+Math.PI,2*Math.PI)-Math.PI:e.sourceRotation+h*(e.targetRotation-e.sourceRotation);if(e.anchor){this.set(ol.ViewProperty.CENTER,this.calculateCenterRotate(p,e.anchor))}this.set(ol.ViewProperty.ROTATION,p)}b=true;if(!e.complete){break}}if(d){this.animations_[i]=null;this.setHint(ol.ViewHint.ANIMATING,-1);var q=c[0].callback;if(q){q(true)}}}this.animations_=this.animations_.filter(Boolean);if(b&&this.updateAnimationKey_===undefined){this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_)}};ol.View.prototype.calculateCenterRotate=function(a,b){var c;var d=this.getCenter();if(d!==undefined){c=[d[0]-b[0],d[1]-b[1]];ol.coordinate.rotate(c,a-this.getRotation());ol.coordinate.add(c,b)}return c};ol.View.prototype.calculateCenterZoom=function(a,b){var c;var d=this.getCenter();var e=this.getResolution();if(d!==undefined&&e!==undefined){var x=b[0]-a*(b[0]-d[0])/e;var y=b[1]-a*(b[1]-d[1])/e;c=[x,y]}return c};ol.View.prototype.getSizeFromViewport_=function(){var a=[100,100];var b='.ol-viewport[data-view="'+ol.getUid(this)+'"]';var c=document.querySelector(b);if(c){var d=getComputedStyle(c);a[0]=parseInt(d.width,10);a[1]=parseInt(d.height,10)}return a};ol.View.prototype.constrainCenter=function(a){return this.constraints_.center(a)};ol.View.prototype.constrainResolution=function(a,b,c){var d=b||0;var e=c||0;return this.constraints_.resolution(a,d,e)};ol.View.prototype.constrainRotation=function(a,b){var c=b||0;return this.constraints_.rotation(a,c)};ol.View.prototype.getCenter=function(){return(this.get(ol.ViewProperty.CENTER))};ol.View.prototype.getConstraints=function(){return this.constraints_};ol.View.prototype.getHints=function(a){if(a!==undefined){a[0]=this.hints_[0];a[1]=this.hints_[1];return a}else{return this.hints_.slice()}};ol.View.prototype.calculateExtent=function(a){var b=a||this.getSizeFromViewport_();var c=(this.getCenter());ol.asserts.assert(c,1);var d=(this.getResolution());ol.asserts.assert(d!==undefined,2);var e=(this.getRotation());ol.asserts.assert(e!==undefined,3);return ol.extent.getForViewAndSize(c,d,e,b)};ol.View.prototype.getMaxResolution=function(){return this.maxResolution_};ol.View.prototype.getMinResolution=function(){return this.minResolution_};ol.View.prototype.getMaxZoom=function(){return(this.getZoomForResolution(this.minResolution_))};ol.View.prototype.setMaxZoom=function(a){this.applyOptions_(this.getUpdatedOptions_({maxZoom:a}))};ol.View.prototype.getMinZoom=function(){return(this.getZoomForResolution(this.maxResolution_))};ol.View.prototype.setMinZoom=function(a){this.applyOptions_(this.getUpdatedOptions_({minZoom:a}))};ol.View.prototype.getProjection=function(){return this.projection_};ol.View.prototype.getResolution=function(){return(this.get(ol.ViewProperty.RESOLUTION))};ol.View.prototype.getResolutions=function(){return this.resolutions_};ol.View.prototype.getResolutionForExtent=function(a,b){var c=b||this.getSizeFromViewport_();var d=ol.extent.getWidth(a)/c[0];var e=ol.extent.getHeight(a)/c[1];return Math.max(d,e)};ol.View.prototype.getResolutionForValueFunction=function(c){var d=c||2;var e=this.maxResolution_;var f=this.minResolution_;var g=Math.log(e/f)/Math.log(d);return(function(a){var b=e/Math.pow(d,a*g);return b})};ol.View.prototype.getRotation=function(){return(this.get(ol.ViewProperty.ROTATION))};ol.View.prototype.getValueForResolutionFunction=function(c){var d=c||2;var e=this.maxResolution_;var f=this.minResolution_;var g=Math.log(e/f)/Math.log(d);return(function(a){var b=(Math.log(e/a)/Math.log(d))/g;return b})};ol.View.prototype.getState=function(){var a=(this.getCenter());var b=this.getProjection();var c=(this.getResolution());var d=this.getRotation();return({center:a.slice(),projection:b!==undefined?b:null,resolution:c,rotation:d,zoom:this.getZoom()})};ol.View.prototype.getZoom=function(){var a;var b=this.getResolution();if(b!==undefined){a=this.getZoomForResolution(b)}return a};ol.View.prototype.getZoomForResolution=function(a){var b=this.minZoom_||0;var c,zoomFactor;if(this.resolutions_){var d=ol.array.linearFindNearest(this.resolutions_,a,1);b=d;c=this.resolutions_[d];if(d==this.resolutions_.length-1){zoomFactor=2}else{zoomFactor=c/this.resolutions_[d+1]}}else{c=this.maxResolution_;zoomFactor=this.zoomFactor_}return b+Math.log(c/a)/Math.log(zoomFactor)};ol.View.prototype.getResolutionForZoom=function(a){return(this.constrainResolution(this.maxResolution_,a-this.minZoom_,0))};ol.View.prototype.fit=function(a,b){var c=b||{};var d=c.size;if(!d){d=this.getSizeFromViewport_()}var e;if(!(a instanceof ol.geom.SimpleGeometry)){ol.asserts.assert(Array.isArray(a),24);ol.asserts.assert(!ol.extent.isEmpty(a),25);e=ol.geom.Polygon.fromExtent(a)}else if(a.getType()===ol.geom.GeometryType.CIRCLE){a=a.getExtent();e=ol.geom.Polygon.fromExtent(a);e.rotate(this.getRotation(),ol.extent.getCenter(a))}else{e=a}var f=c.padding!==undefined?c.padding:[0,0,0,0];var g=c.constrainResolution!==undefined?c.constrainResolution:true;var h=c.nearest!==undefined?c.nearest:false;var j;if(c.minResolution!==undefined){j=c.minResolution}else if(c.maxZoom!==undefined){j=this.constrainResolution(this.maxResolution_,c.maxZoom-this.minZoom_,0)}else{j=0}var k=e.getFlatCoordinates();var l=this.getRotation();var m=Math.cos(-l);var n=Math.sin(-l);var o=+Infinity;var p=+Infinity;var q=-Infinity;var r=-Infinity;var s=e.getStride();for(var i=0,ii=k.length;i<ii;i+=s){var t=k[i]*m-k[i+1]*n;var u=k[i]*n+k[i+1]*m;o=Math.min(o,t);p=Math.min(p,u);q=Math.max(q,t);r=Math.max(r,u)}var v=this.getResolutionForExtent([o,p,q,r],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);v=isNaN(v)?j:Math.max(v,j);if(g){var w=this.constrainResolution(v,0,0);if(!h&&w<v){w=this.constrainResolution(w,-1,0)}v=w}n=-n;var x=(o+q)/2;var y=(p+r)/2;x+=(f[1]-f[3])/2*v;y+=(f[0]-f[2])/2*v;var z=x*m-y*n;var A=y*m+x*n;var B=[z,A];var C=c.callback?c.callback:ol.nullFunction;if(c.duration!==undefined){this.animate({resolution:v,center:B,duration:c.duration,easing:c.easing},C)}else{this.setResolution(v);this.setCenter(B);setTimeout(C.bind(undefined,true),0)}};ol.View.prototype.centerOn=function(a,b,c){var d=this.getRotation();var e=Math.cos(-d);var f=Math.sin(-d);var g=a[0]*e-a[1]*f;var h=a[1]*e+a[0]*f;var i=this.getResolution();g+=(b[0]/2-c[0])*i;h+=(c[1]-b[1]/2)*i;f=-f;var j=g*e-h*f;var k=h*e+g*f;this.setCenter([j,k])};ol.View.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==undefined};ol.View.prototype.rotate=function(a,b){if(b!==undefined){var c=this.calculateCenterRotate(a,b);this.setCenter(c)}this.setRotation(a)};ol.View.prototype.setCenter=function(a){this.set(ol.ViewProperty.CENTER,a);if(this.getAnimating()){this.cancelAnimations()}};ol.View.prototype.setHint=function(a,b){this.hints_[a]+=b;this.changed();return this.hints_[a]};ol.View.prototype.setResolution=function(a){this.set(ol.ViewProperty.RESOLUTION,a);if(this.getAnimating()){this.cancelAnimations()}};ol.View.prototype.setRotation=function(a){this.set(ol.ViewProperty.ROTATION,a);if(this.getAnimating()){this.cancelAnimations()}};ol.View.prototype.setZoom=function(a){this.setResolution(this.getResolutionForZoom(a))};ol.View.createCenterConstraint_=function(a){if(a.extent!==undefined){return ol.CenterConstraint.createExtent(a.extent)}else{return ol.CenterConstraint.none}};ol.View.createResolutionConstraint_=function(a){var b;var c;var d;var e=28;var f=2;var g=a.minZoom!==undefined?a.minZoom:ol.DEFAULT_MIN_ZOOM;var h=a.maxZoom!==undefined?a.maxZoom:e;var i=a.zoomFactor!==undefined?a.zoomFactor:f;if(a.resolutions!==undefined){var j=a.resolutions;c=j[g];d=j[h]!==undefined?j[h]:j[j.length-1];b=ol.ResolutionConstraint.createSnapToResolutions(j)}else{var k=ol.proj.createProjection(a.projection,'EPSG:3857');var l=k.getExtent();var m=!l?360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/k.getMetersPerUnit():Math.max(ol.extent.getWidth(l),ol.extent.getHeight(l));var n=m/ol.DEFAULT_TILE_SIZE/Math.pow(f,ol.DEFAULT_MIN_ZOOM);var o=n/Math.pow(f,e-ol.DEFAULT_MIN_ZOOM);c=a.maxResolution;if(c!==undefined){g=0}else{c=n/Math.pow(i,g)}d=a.minResolution;if(d===undefined){if(a.maxZoom!==undefined){if(a.maxResolution!==undefined){d=c/Math.pow(i,h)}else{d=n/Math.pow(i,h)}}else{d=o}}h=g+Math.floor(Math.log(c/d)/Math.log(i));d=c/Math.pow(i,h-g);b=ol.ResolutionConstraint.createSnapToPower(i,c,h-g)}return{constraint:b,maxResolution:c,minResolution:d,minZoom:g,zoomFactor:i}};ol.View.createRotationConstraint_=function(a){var b=a.enableRotation!==undefined?a.enableRotation:true;if(b){var c=a.constrainRotation;if(c===undefined||c===true){return ol.RotationConstraint.createSnapToZero()}else if(c===false){return ol.RotationConstraint.none}else if(typeof c==='number'){return ol.RotationConstraint.createSnapToN(c)}else{return ol.RotationConstraint.none}}else{return ol.RotationConstraint.disable}};ol.View.isNoopAnimation=function(a){if(a.sourceCenter&&a.targetCenter){if(!ol.coordinate.equals(a.sourceCenter,a.targetCenter)){return false}}if(a.sourceResolution!==a.targetResolution){return false}if(a.sourceRotation!==a.targetRotation){return false}return true};bq.provide('ol.dom');ol.dom.createCanvasContext2D=function(a,b){var c=document.createElement('CANVAS');if(a){c.width=a}if(b){c.height=b}return c.getContext('2d')};ol.dom.outerWidth=function(a){var b=a.offsetWidth;var c=getComputedStyle(a);b+=parseInt(c.marginLeft,10)+parseInt(c.marginRight,10);return b};ol.dom.outerHeight=function(a){var b=a.offsetHeight;var c=getComputedStyle(a);b+=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10);return b};ol.dom.replaceNode=function(a,b){var c=b.parentNode;if(c){c.replaceChild(a,b)}};ol.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};ol.dom.removeChildren=function(a){while(a.lastChild){a.removeChild(a.lastChild)}};bq.provide('ol.layer.Property');ol.layer.Property={OPACITY:'opacity',VISIBLE:'visible',EXTENT:'extent',Z_INDEX:'zIndex',MAX_RESOLUTION:'maxResolution',MIN_RESOLUTION:'minResolution',SOURCE:'source'};bq.provide('ol.layer.Base');bq.require('ol');bq.require('ol.Object');bq.require('ol.layer.Property');bq.require('ol.math');bq.require('ol.obj');ol.layer.Base=function(a){ol.Object.call(this);var b=ol.obj.assign({},a);b[ol.layer.Property.OPACITY]=a.opacity!==undefined?a.opacity:1;b[ol.layer.Property.VISIBLE]=a.visible!==undefined?a.visible:true;b[ol.layer.Property.Z_INDEX]=a.zIndex!==undefined?a.zIndex:0;b[ol.layer.Property.MAX_RESOLUTION]=a.maxResolution!==undefined?a.maxResolution:Infinity;b[ol.layer.Property.MIN_RESOLUTION]=a.minResolution!==undefined?a.minResolution:0;this.setProperties(b);this.state_=({layer:(this),managed:true});this.type};ol.inherits(ol.layer.Base,ol.Object);ol.layer.Base.prototype.getType=function(){return this.type};ol.layer.Base.prototype.getLayerState=function(){this.state_.opacity=ol.math.clamp(this.getOpacity(),0,1);this.state_.sourceState=this.getSourceState();this.state_.visible=this.getVisible();this.state_.extent=this.getExtent();this.state_.zIndex=this.getZIndex();this.state_.maxResolution=this.getMaxResolution();this.state_.minResolution=Math.max(this.getMinResolution(),0);return this.state_};ol.layer.Base.prototype.getLayersArray=function(a){};ol.layer.Base.prototype.getLayerStatesArray=function(a){};ol.layer.Base.prototype.getExtent=function(){return(this.get(ol.layer.Property.EXTENT))};ol.layer.Base.prototype.getMaxResolution=function(){return(this.get(ol.layer.Property.MAX_RESOLUTION))};ol.layer.Base.prototype.getMinResolution=function(){return(this.get(ol.layer.Property.MIN_RESOLUTION))};ol.layer.Base.prototype.getOpacity=function(){return(this.get(ol.layer.Property.OPACITY))};ol.layer.Base.prototype.getSourceState=function(){};ol.layer.Base.prototype.getVisible=function(){return(this.get(ol.layer.Property.VISIBLE))};ol.layer.Base.prototype.getZIndex=function(){return(this.get(ol.layer.Property.Z_INDEX))};ol.layer.Base.prototype.setExtent=function(a){this.set(ol.layer.Property.EXTENT,a)};ol.layer.Base.prototype.setMaxResolution=function(a){this.set(ol.layer.Property.MAX_RESOLUTION,a)};ol.layer.Base.prototype.setMinResolution=function(a){this.set(ol.layer.Property.MIN_RESOLUTION,a)};ol.layer.Base.prototype.setOpacity=function(a){this.set(ol.layer.Property.OPACITY,a)};ol.layer.Base.prototype.setVisible=function(a){this.set(ol.layer.Property.VISIBLE,a)};ol.layer.Base.prototype.setZIndex=function(a){this.set(ol.layer.Property.Z_INDEX,a)};bq.provide('ol.source.State');ol.source.State={UNDEFINED:'undefined',LOADING:'loading',READY:'ready',ERROR:'error'};bq.provide('ol.layer.Group');bq.require('ol');bq.require('ol.Collection');bq.require('ol.CollectionEventType');bq.require('ol.Object');bq.require('ol.ObjectEventType');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.layer.Base');bq.require('ol.obj');bq.require('ol.source.State');ol.layer.Group=function(a){var b=a||{};var c=(ol.obj.assign({},b));delete c.layers;var d=b.layers;ol.layer.Base.call(this,c);this.layersListenerKeys_=[];this.listenerKeys_={};ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Group.Property_.LAYERS),this.handleLayersChanged_,this);if(d){if(Array.isArray(d)){d=new ol.Collection(d.slice(),{unique:true})}else{ol.asserts.assert(d instanceof ol.Collection,43);d=d}}else{d=new ol.Collection(undefined,{unique:true})}this.setLayers(d)};ol.inherits(ol.layer.Group,ol.layer.Base);ol.layer.Group.prototype.handleLayerChange_=function(){this.changed()};ol.layer.Group.prototype.handleLayersChanged_=function(a){this.layersListenerKeys_.forEach(ol.events.unlistenByKey);this.layersListenerKeys_.length=0;var b=this.getLayers();this.layersListenerKeys_.push(ol.events.listen(b,ol.CollectionEventType.ADD,this.handleLayersAdd_,this),ol.events.listen(b,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(var c in this.listenerKeys_){this.listenerKeys_[c].forEach(ol.events.unlistenByKey)}ol.obj.clear(this.listenerKeys_);var d=b.getArray();var i,ii,layer;for(i=0,ii=d.length;i<ii;i++){layer=d[i];this.listenerKeys_[ol.getUid(layer).toString()]=[ol.events.listen(layer,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(layer,ol.events.EventType.CHANGE,this.handleLayerChange_,this)]}this.changed()};ol.layer.Group.prototype.handleLayersAdd_=function(a){var b=(a.element);var c=ol.getUid(b).toString();this.listenerKeys_[c]=[ol.events.listen(b,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(b,ol.events.EventType.CHANGE,this.handleLayerChange_,this)];this.changed()};ol.layer.Group.prototype.handleLayersRemove_=function(a){var b=(a.element);var c=ol.getUid(b).toString();this.listenerKeys_[c].forEach(ol.events.unlistenByKey);delete this.listenerKeys_[c];this.changed()};ol.layer.Group.prototype.getLayers=function(){return(this.get(ol.layer.Group.Property_.LAYERS))};ol.layer.Group.prototype.setLayers=function(a){this.set(ol.layer.Group.Property_.LAYERS,a)};ol.layer.Group.prototype.getLayersArray=function(b){var c=b!==undefined?b:[];this.getLayers().forEach(function(a){a.getLayersArray(c)});return c};ol.layer.Group.prototype.getLayerStatesArray=function(b){var c=b!==undefined?b:[];var d=c.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(c)});var e=this.getLayerState();var i,ii,layerState;for(i=d,ii=c.length;i<ii;i++){layerState=c[i];layerState.opacity*=e.opacity;layerState.visible=layerState.visible&&e.visible;layerState.maxResolution=Math.min(layerState.maxResolution,e.maxResolution);layerState.minResolution=Math.max(layerState.minResolution,e.minResolution);if(e.extent!==undefined){if(layerState.extent!==undefined){layerState.extent=ol.extent.getIntersection(layerState.extent,e.extent)}else{layerState.extent=e.extent}}}return c};ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY};ol.layer.Group.Property_={LAYERS:'layers'};bq.provide('ol.PluginType');ol.PluginType={MAP_RENDERER:'MAP_RENDERER',LAYER_RENDERER:'LAYER_RENDERER'};bq.provide('ol.plugins');bq.require('ol.PluginType');ol.plugins.mapRendererPlugins_=[];ol.plugins.getMapRendererPlugins=function(){return ol.plugins.mapRendererPlugins_};ol.plugins.layerRendererPlugins_=[];ol.plugins.getLayerRendererPlugins=function(){return ol.plugins.layerRendererPlugins_};ol.plugins.register=function(a,b){var c;switch(a){case ol.PluginType.MAP_RENDERER:{c=ol.plugins.mapRendererPlugins_;c.push((b));break}case ol.PluginType.LAYER_RENDERER:{c=ol.plugins.layerRendererPlugins_;c.push((b));break}default:{throw new Error('Unsupported plugin type: '+a);}}};ol.plugins.registerMultiple=function(a,b){for(var i=0,ii=b.length;i<ii;++i){ol.plugins.register(a,b[i])}};bq.provide('ol.renderer.Type');ol.renderer.Type={CANVAS:'canvas',WEBGL:'webgl'};bq.provide('ol.PluggableMap');bq.require('ol');bq.require('ol.Collection');bq.require('ol.CollectionEventType');bq.require('ol.MapBrowserEvent');bq.require('ol.MapBrowserEventHandler');bq.require('ol.MapBrowserEventType');bq.require('ol.MapEvent');bq.require('ol.MapEventType');bq.require('ol.MapProperty');bq.require('ol.Object');bq.require('ol.ObjectEventType');bq.require('ol.TileQueue');bq.require('ol.View');bq.require('ol.ViewHint');bq.require('ol.asserts');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.has');bq.require('ol.layer.Group');bq.require('ol.obj');bq.require('ol.plugins');bq.require('ol.renderer.Type');bq.require('ol.size');bq.require('ol.structs.PriorityQueue');bq.require('ol.transform');ol.PluggableMap=function(d){ol.Object.call(this);var e=ol.PluggableMap.createOptionsInternal(d);this.loadTilesWhileAnimating_=d.loadTilesWhileAnimating!==undefined?d.loadTilesWhileAnimating:false;this.loadTilesWhileInteracting_=d.loadTilesWhileInteracting!==undefined?d.loadTilesWhileInteracting:false;this.pixelRatio_=d.pixelRatio!==undefined?d.pixelRatio:ol.has.DEVICE_PIXEL_RATIO;this.logos_=e.logos;this.animationDelayKey_;this.animationDelay_=function(){this.animationDelayKey_=undefined;this.renderFrame_.call(this,Date.now())}.bind(this);this.coordinateToPixelTransform_=ol.transform.create();this.pixelToCoordinateTransform_=ol.transform.create();this.frameIndex_=0;this.frameState_=null;this.previousExtent_=null;this.viewPropertyListenerKey_=null;this.viewChangeListenerKey_=null;this.layerGroupPropertyListenerKeys_=null;this.viewport_=document.createElement('DIV');this.viewport_.className='ol-viewport'+(ol.has.TOUCH?' ol-touch':'');this.viewport_.style.position='relative';this.viewport_.style.overflow='hidden';this.viewport_.style.width='100%';this.viewport_.style.height='100%';this.viewport_.style.msTouchAction='none';this.viewport_.style.touchAction='none';this.overlayContainer_=document.createElement('DIV');this.overlayContainer_.className='ol-overlaycontainer';this.viewport_.appendChild(this.overlayContainer_);this.overlayContainerStopEvent_=document.createElement('DIV');this.overlayContainerStopEvent_.className='ol-overlaycontainer-stopevent';var f=[ol.events.EventType.CLICK,ol.events.EventType.DBLCLICK,ol.events.EventType.MOUSEDOWN,ol.events.EventType.TOUCHSTART,ol.events.EventType.MSPOINTERDOWN,ol.MapBrowserEventType.POINTERDOWN,ol.events.EventType.MOUSEWHEEL,ol.events.EventType.WHEEL];for(var i=0,ii=f.length;i<ii;++i){ol.events.listen(this.overlayContainerStopEvent_,f[i],ol.events.Event.stopPropagation)}this.viewport_.appendChild(this.overlayContainerStopEvent_);this.mapBrowserEventHandler_=new ol.MapBrowserEventHandler(this,d.moveTolerance);for(var g in ol.MapBrowserEventType){ol.events.listen(this.mapBrowserEventHandler_,ol.MapBrowserEventType[g],this.handleMapBrowserEvent,this)}this.keyboardEventTarget_=e.keyboardEventTarget;this.keyHandlerKeys_=null;ol.events.listen(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this);ol.events.listen(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this);this.controls=e.controls||new ol.Collection();this.interactions=e.interactions||new ol.Collection();this.overlays_=e.overlays;this.overlayIdIndex_={};this.renderer_=e.mapRendererPlugin['create'](this.viewport_,this);this.handleResize_;this.focus_=null;this.postRenderFunctions_=[];this.tileQueue_=new ol.TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this));this.skippedFeatureUids_={};ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,this);this.setProperties(e.values);this.controls.forEach(function(a){a.setMap(this)},this);ol.events.listen(this.controls,ol.CollectionEventType.ADD,function(a){a.element.setMap(this)},this);ol.events.listen(this.controls,ol.CollectionEventType.REMOVE,function(a){a.element.setMap(null)},this);this.interactions.forEach(function(a){a.setMap(this)},this);ol.events.listen(this.interactions,ol.CollectionEventType.ADD,function(a){a.element.setMap(this)},this);ol.events.listen(this.interactions,ol.CollectionEventType.REMOVE,function(a){a.element.setMap(null)},this);this.overlays_.forEach(this.addOverlayInternal_,this);ol.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(a){this.addOverlayInternal_((a.element))},this);ol.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(a){var b=(a.element);var c=b.getId();if(c!==undefined){delete this.overlayIdIndex_[c.toString()]}a.element.setMap(null)},this)};ol.inherits(ol.PluggableMap,ol.Object);ol.PluggableMap.prototype.addControl=function(a){this.getControls().push(a)};ol.PluggableMap.prototype.addInteraction=function(a){this.getInteractions().push(a)};ol.PluggableMap.prototype.addLayer=function(a){var b=this.getLayerGroup().getLayers();b.push(a)};ol.PluggableMap.prototype.addOverlay=function(a){this.getOverlays().push(a)};ol.PluggableMap.prototype.addOverlayInternal_=function(a){var b=a.getId();if(b!==undefined){this.overlayIdIndex_[b.toString()]=a}a.setMap(this)};ol.PluggableMap.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose();ol.events.unlisten(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this);ol.events.unlisten(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this);if(this.handleResize_!==undefined){window.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,false);this.handleResize_=undefined}if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_);this.animationDelayKey_=undefined}this.setTarget(null);ol.Object.prototype.disposeInternal.call(this)};ol.PluggableMap.prototype.forEachFeatureAtPixel=function(a,b,c){if(!this.frameState_){return}var d=this.getCoordinateFromPixel(a);c=c!==undefined?c:{};var e=c.hitTolerance!==undefined?c.hitTolerance*this.frameState_.pixelRatio:0;var f=c.layerFilter!==undefined?c.layerFilter:ol.functions.TRUE;return this.renderer_.forEachFeatureAtCoordinate(d,this.frameState_,e,b,null,f,null)};ol.PluggableMap.prototype.getFeaturesAtPixel=function(b,c){var d=null;this.forEachFeatureAtPixel(b,function(a){if(!d){d=[]}d.push(a)},c);return d};ol.PluggableMap.prototype.forEachLayerAtPixel=function(a,b,c,d,e){if(!this.frameState_){return}var f=c!==undefined?c:null;var g=d!==undefined?d:ol.functions.TRUE;var h=e!==undefined?e:null;return this.renderer_.forEachLayerAtPixel(a,this.frameState_,b,f,g,h)};ol.PluggableMap.prototype.hasFeatureAtPixel=function(a,b){if(!this.frameState_){return false}var c=this.getCoordinateFromPixel(a);b=b!==undefined?b:{};var d=b.layerFilter!==undefined?b.layerFilter:ol.functions.TRUE;var e=b.hitTolerance!==undefined?b.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(c,this.frameState_,e,d,null)};ol.PluggableMap.prototype.getEventCoordinate=function(a){return this.getCoordinateFromPixel(this.getEventPixel(a))};ol.PluggableMap.prototype.getEventPixel=function(a){var b=this.viewport_.getBoundingClientRect();var c=a.changedTouches?a.changedTouches[0]:a;return[c.clientX-b.left,c.clientY-b.top]};ol.PluggableMap.prototype.getTarget=function(){return(this.get(ol.MapProperty.TARGET))};ol.PluggableMap.prototype.getTargetElement=function(){var a=this.getTarget();if(a!==undefined){return typeof a==='string'?document.getElementById(a):a}else{return null}};ol.PluggableMap.prototype.getCoordinateFromPixel=function(a){var b=this.frameState_;if(!b){return null}else{return ol.transform.apply(b.pixelToCoordinateTransform,a.slice())}};ol.PluggableMap.prototype.getControls=function(){return this.controls};ol.PluggableMap.prototype.getOverlays=function(){return this.overlays_};ol.PluggableMap.prototype.getOverlayById=function(a){var b=this.overlayIdIndex_[a.toString()];return b!==undefined?b:null};ol.PluggableMap.prototype.getInteractions=function(){return this.interactions};ol.PluggableMap.prototype.getLayerGroup=function(){return(this.get(ol.MapProperty.LAYERGROUP))};ol.PluggableMap.prototype.getLayers=function(){var a=this.getLayerGroup().getLayers();return a};ol.PluggableMap.prototype.getPixelFromCoordinate=function(a){var b=this.frameState_;if(!b){return null}else{return ol.transform.apply(b.coordinateToPixelTransform,a.slice(0,2))}};ol.PluggableMap.prototype.getRenderer=function(){return this.renderer_};ol.PluggableMap.prototype.getSize=function(){return(this.get(ol.MapProperty.SIZE))};ol.PluggableMap.prototype.getView=function(){return(this.get(ol.MapProperty.VIEW))};ol.PluggableMap.prototype.getViewport=function(){return this.viewport_};ol.PluggableMap.prototype.getOverlayContainer=function(){return this.overlayContainer_};ol.PluggableMap.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_};ol.PluggableMap.prototype.getTilePriority=function(a,b,c,d){var e=this.frameState_;if(!e||!(b in e.wantedTiles)){return ol.structs.PriorityQueue.DROP}if(!e.wantedTiles[b][a.getKey()]){return ol.structs.PriorityQueue.DROP}var f=c[0]-e.focus[0];var g=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(f*f+g*g)/d};ol.PluggableMap.prototype.handleBrowserEvent=function(a,b){var c=b||a.type;var d=new ol.MapBrowserEvent(c,this,a);this.handleMapBrowserEvent(d)};ol.PluggableMap.prototype.handleMapBrowserEvent=function(a){if(!this.frameState_){return}this.focus_=a.coordinate;a.frameState=this.frameState_;var b=this.getInteractions().getArray();var i;if(this.dispatchEvent(a)!==false){for(i=b.length-1;i>=0;i--){var c=b[i];if(!c.getActive()){continue}var d=c.handleEvent(a);if(!d){break}}}};ol.PluggableMap.prototype.handlePostRender=function(){var a=this.frameState_;var b=this.tileQueue_;if(!b.isEmpty()){var c=16;var d=c;if(a){var e=a.viewHints;if(e[ol.ViewHint.ANIMATING]){c=this.loadTilesWhileAnimating_?8:0;d=2}if(e[ol.ViewHint.INTERACTING]){c=this.loadTilesWhileInteracting_?8:0;d=2}}if(b.getTilesLoading()<c){b.reprioritize();b.loadMoreTiles(c,d)}}var f=this.postRenderFunctions_;var i,ii;for(i=0,ii=f.length;i<ii;++i){f[i](this,a)}f.length=0};ol.PluggableMap.prototype.handleSizeChanged_=function(){this.render()};ol.PluggableMap.prototype.handleTargetChanged_=function(){var a;if(this.getTarget()){a=this.getTargetElement()}if(this.keyHandlerKeys_){for(var i=0,ii=this.keyHandlerKeys_.length;i<ii;++i){ol.events.unlistenByKey(this.keyHandlerKeys_[i])}this.keyHandlerKeys_=null}if(!a){this.renderer_.removeLayerRenderers();ol.dom.removeNode(this.viewport_);if(this.handleResize_!==undefined){window.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,false);this.handleResize_=undefined}}else{a.appendChild(this.viewport_);var b=!this.keyboardEventTarget_?a:this.keyboardEventTarget_;this.keyHandlerKeys_=[ol.events.listen(b,ol.events.EventType.KEYDOWN,this.handleBrowserEvent,this),ol.events.listen(b,ol.events.EventType.KEYPRESS,this.handleBrowserEvent,this)];if(!this.handleResize_){this.handleResize_=this.updateSize.bind(this);window.addEventListener(ol.events.EventType.RESIZE,this.handleResize_,false)}}this.updateSize()};ol.PluggableMap.prototype.handleTileChange_=function(){this.render()};ol.PluggableMap.prototype.handleViewPropertyChanged_=function(){this.render()};ol.PluggableMap.prototype.handleViewChanged_=function(){if(this.viewPropertyListenerKey_){ol.events.unlistenByKey(this.viewPropertyListenerKey_);this.viewPropertyListenerKey_=null}if(this.viewChangeListenerKey_){ol.events.unlistenByKey(this.viewChangeListenerKey_);this.viewChangeListenerKey_=null}var a=this.getView();if(a){this.viewport_.setAttribute('data-view',ol.getUid(a));this.viewPropertyListenerKey_=ol.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this);this.viewChangeListenerKey_=ol.events.listen(a,ol.events.EventType.CHANGE,this.handleViewPropertyChanged_,this)}this.render()};ol.PluggableMap.prototype.handleLayerGroupChanged_=function(){if(this.layerGroupPropertyListenerKeys_){this.layerGroupPropertyListenerKeys_.forEach(ol.events.unlistenByKey);this.layerGroupPropertyListenerKeys_=null}var a=this.getLayerGroup();if(a){this.layerGroupPropertyListenerKeys_=[ol.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.render,this),ol.events.listen(a,ol.events.EventType.CHANGE,this.render,this)]}this.render()};ol.PluggableMap.prototype.isRendered=function(){return!!this.frameState_};ol.PluggableMap.prototype.renderSync=function(){if(this.animationDelayKey_){cancelAnimationFrame(this.animationDelayKey_)}this.animationDelay_()};ol.PluggableMap.prototype.render=function(){if(this.animationDelayKey_===undefined){this.animationDelayKey_=requestAnimationFrame(this.animationDelay_)}};ol.PluggableMap.prototype.removeControl=function(a){return this.getControls().remove(a)};ol.PluggableMap.prototype.removeInteraction=function(a){return this.getInteractions().remove(a)};ol.PluggableMap.prototype.removeLayer=function(a){var b=this.getLayerGroup().getLayers();return b.remove(a)};ol.PluggableMap.prototype.removeOverlay=function(a){return this.getOverlays().remove(a)};ol.PluggableMap.prototype.renderFrame_=function(a){var i,ii,viewState;var b=this.getSize();var c=this.getView();var d=ol.extent.createEmpty();var e=this.frameState_;var f=null;if(b!==undefined&&ol.size.hasArea(b)&&c&&c.isDef()){var g=c.getHints(this.frameState_?this.frameState_.viewHints:undefined);var h=this.getLayerGroup().getLayerStatesArray();var j={};for(i=0,ii=h.length;i<ii;++i){j[ol.getUid(h[i].layer)]=h[i]}viewState=c.getState();var k=viewState.center;var l=viewState.resolution/this.pixelRatio_;k[0]=Math.round(k[0]/l)*l;k[1]=Math.round(k[1]/l)*l;f=({animate:false,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:d,focus:!this.focus_?k:this.focus_,index:this.frameIndex_++,layerStates:j,layerStatesArray:h,logos:ol.obj.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:b,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:a,usedTiles:{},viewState:viewState,viewHints:g,wantedTiles:{}})}if(f){f.extent=ol.extent.getForViewAndSize(viewState.center,viewState.resolution,viewState.rotation,f.size,d)}this.frameState_=f;this.renderer_.renderFrame(f);if(f){if(f.animate){this.render()}Array.prototype.push.apply(this.postRenderFunctions_,f.postRenderFunctions);if(e){var m=!this.previousExtent_||(!ol.extent.isEmpty(this.previousExtent_)&&!ol.extent.equals(f.extent,this.previousExtent_));if(m){this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVESTART,this,e));this.previousExtent_=ol.extent.createOrUpdateEmpty(this.previousExtent_)}}var n=this.previousExtent_&&!f.viewHints[ol.ViewHint.ANIMATING]&&!f.viewHints[ol.ViewHint.INTERACTING]&&!ol.extent.equals(f.extent,this.previousExtent_);if(n){this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,f));ol.extent.clone(f.extent,this.previousExtent_)}}this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,f));setTimeout(this.handlePostRender.bind(this),0)};ol.PluggableMap.prototype.setLayerGroup=function(a){this.set(ol.MapProperty.LAYERGROUP,a)};ol.PluggableMap.prototype.setSize=function(a){this.set(ol.MapProperty.SIZE,a)};ol.PluggableMap.prototype.setTarget=function(a){this.set(ol.MapProperty.TARGET,a)};ol.PluggableMap.prototype.setView=function(a){this.set(ol.MapProperty.VIEW,a)};ol.PluggableMap.prototype.skipFeature=function(a){var b=ol.getUid(a).toString();this.skippedFeatureUids_[b]=true;this.render()};ol.PluggableMap.prototype.updateSize=function(){var a=this.getTargetElement();if(!a){this.setSize(undefined)}else{var b=getComputedStyle(a);this.setSize([a.offsetWidth-parseFloat(b['borderLeftWidth'])-parseFloat(b['paddingLeft'])-parseFloat(b['paddingRight'])-parseFloat(b['borderRightWidth']),a.offsetHeight-parseFloat(b['borderTopWidth'])-parseFloat(b['paddingTop'])-parseFloat(b['paddingBottom'])-parseFloat(b['borderBottomWidth'])])}};ol.PluggableMap.prototype.unskipFeature=function(a){var b=ol.getUid(a).toString();delete this.skippedFeatureUids_[b];this.render()};ol.PluggableMap.DEFAULT_RENDERER_TYPES=[ol.renderer.Type.CANVAS,ol.renderer.Type.WEBGL];ol.PluggableMap.LOGO_URL='data:image/png;base64,'+'iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBI'+'WXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAA'+'AhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszW'+'WMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvY'+'asvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvX'+'H1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1Vk'+'bMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW'+'2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLP'+'VcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqT'+'acrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaar'+'ldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+Hi'+'zeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDn'+'BAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSF'+'hYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJ'+'REFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxC'+'Brb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe'+'0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8'+'a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7a'+'hgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCn'+'B3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDg'+'q82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC';ol.PluggableMap.createOptionsInternal=function(a){var b=null;if(a.keyboardEventTarget!==undefined){b=typeof a.keyboardEventTarget==='string'?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget}var c={};var d={};if(a.logo===undefined||(typeof a.logo==='boolean'&&a.logo)){d[ol.PluggableMap.LOGO_URL]='https://openlayers.org/'}else{var e=a.logo;if(typeof e==='string'){d[e]=''}else if(e instanceof HTMLElement){d[ol.getUid(e).toString()]=e}else if(e){ol.asserts.assert(typeof e.href=='string',44);ol.asserts.assert(typeof e.src=='string',45);d[e.src]=e.href}}var f=(a.layers instanceof ol.layer.Group)?a.layers:new ol.layer.Group({layers:a.layers});c[ol.MapProperty.LAYERGROUP]=f;c[ol.MapProperty.TARGET]=a.target;c[ol.MapProperty.VIEW]=a.view!==undefined?a.view:new ol.View();var g;if(a.renderer!==undefined){if(Array.isArray(a.renderer)){g=a.renderer}else if(typeof a.renderer==='string'){g=[a.renderer]}else{ol.asserts.assert(false,46)}if(g.indexOf(('dom'))>=0){g=g.concat(ol.PluggableMap.DEFAULT_RENDERER_TYPES)}}else{g=ol.PluggableMap.DEFAULT_RENDERER_TYPES}var h;var k=ol.plugins.getMapRendererPlugins();outer:for(var i=0,ii=g.length;i<ii;++i){var l=g[i];for(var j=0,jj=k.length;j<jj;++j){var m=k[j];if(m['handles'](l)){h=m;break outer}}}if(!h){throw new Error('Unable to create a map renderer for types: '+g.join(', '));}var n;if(a.controls!==undefined){if(Array.isArray(a.controls)){n=new ol.Collection(a.controls.slice())}else{ol.asserts.assert(a.controls instanceof ol.Collection,47);n=a.controls}}var o;if(a.interactions!==undefined){if(Array.isArray(a.interactions)){o=new ol.Collection(a.interactions.slice())}else{ol.asserts.assert(a.interactions instanceof ol.Collection,48);o=a.interactions}}var p;if(a.overlays!==undefined){if(Array.isArray(a.overlays)){p=new ol.Collection(a.overlays.slice())}else{ol.asserts.assert(a.overlays instanceof ol.Collection,49);p=a.overlays}}else{p=new ol.Collection()}return{controls:n,interactions:o,keyboardEventTarget:b,logos:d,overlays:p,mapRendererPlugin:h,values:c}};bq.provide('ol.control.Control');bq.require('ol');bq.require('ol.MapEventType');bq.require('ol.Object');bq.require('ol.dom');bq.require('ol.events');ol.control.Control=function(a){ol.Object.call(this);this.element=a.element?a.element:null;this.target_=null;this.map_=null;this.listenerKeys=[];this.render=a.render?a.render:ol.nullFunction;if(a.target){this.setTarget(a.target)}};ol.inherits(ol.control.Control,ol.Object);ol.control.Control.prototype.disposeInternal=function(){ol.dom.removeNode(this.element);ol.Object.prototype.disposeInternal.call(this)};ol.control.Control.prototype.getMap=function(){return this.map_};ol.control.Control.prototype.setMap=function(a){if(this.map_){ol.dom.removeNode(this.element)}for(var i=0,ii=this.listenerKeys.length;i<ii;++i){ol.events.unlistenByKey(this.listenerKeys[i])}this.listenerKeys.length=0;this.map_=a;if(this.map_){var b=this.target_?this.target_:a.getOverlayContainerStopEvent();b.appendChild(this.element);if(this.render!==ol.nullFunction){this.listenerKeys.push(ol.events.listen(a,ol.MapEventType.POSTRENDER,this.render,this))}a.render()}};ol.control.Control.prototype.setTarget=function(a){this.target_=typeof a==='string'?document.getElementById(a):a};bq.provide('ol.css');ol.css.CLASS_HIDDEN='ol-hidden';ol.css.CLASS_SELECTABLE='ol-selectable';ol.css.CLASS_UNSELECTABLE='ol-unselectable';ol.css.CLASS_UNSUPPORTED='ol-unsupported';ol.css.CLASS_CONTROL='ol-control';ol.css.getFontFamilies=(function(){var c;var d={};return function(a){if(!c){c=document.createElement('div').style}if(!(a in d)){c.font=a;var b=c.fontFamily;c.font='';if(!b){return null}d[a]=b.split(/,\s?/)}return d[a]}})();bq.provide('ol.render.EventType');ol.render.EventType={POSTCOMPOSE:'postcompose',PRECOMPOSE:'precompose',RENDER:'render'};bq.provide('ol.layer.Layer');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol');bq.require('ol.Object');bq.require('ol.layer.Base');bq.require('ol.layer.Property');bq.require('ol.obj');bq.require('ol.render.EventType');bq.require('ol.source.State');ol.layer.Layer=function(a){var b=ol.obj.assign({},a);delete b.source;ol.layer.Base.call(this,(b));this.mapPrecomposeKey_=null;this.mapRenderKey_=null;this.sourceChangeKey_=null;if(a.map){this.setMap(a.map)}ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Property.SOURCE),this.handleSourcePropertyChange_,this);var c=a.source?a.source:null;this.setSource(c)};ol.inherits(ol.layer.Layer,ol.layer.Base);ol.layer.Layer.visibleAtResolution=function(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution};ol.layer.Layer.prototype.getLayersArray=function(a){var b=a?a:[];b.push(this);return b};ol.layer.Layer.prototype.getLayerStatesArray=function(a){var b=a?a:[];b.push(this.getLayerState());return b};ol.layer.Layer.prototype.getSource=function(){var a=this.get(ol.layer.Property.SOURCE);return(a)||null};ol.layer.Layer.prototype.getSourceState=function(){var a=this.getSource();return!a?ol.source.State.UNDEFINED:a.getState()};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()};ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){if(this.sourceChangeKey_){ol.events.unlistenByKey(this.sourceChangeKey_);this.sourceChangeKey_=null}var a=this.getSource();if(a){this.sourceChangeKey_=ol.events.listen(a,ol.events.EventType.CHANGE,this.handleSourceChange_,this)}this.changed()};ol.layer.Layer.prototype.setMap=function(c){if(this.mapPrecomposeKey_){ol.events.unlistenByKey(this.mapPrecomposeKey_);this.mapPrecomposeKey_=null}if(!c){this.changed()}if(this.mapRenderKey_){ol.events.unlistenByKey(this.mapRenderKey_);this.mapRenderKey_=null}if(c){this.mapPrecomposeKey_=ol.events.listen(c,ol.render.EventType.PRECOMPOSE,function(a){var b=this.getLayerState();b.managed=false;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[ol.getUid(this)]=b},this);this.mapRenderKey_=ol.events.listen(this,ol.events.EventType.CHANGE,c.render,c);this.changed()}};ol.layer.Layer.prototype.setSource=function(a){this.set(ol.layer.Property.SOURCE,a)};bq.provide('ol.control.Attribution');bq.require('ol');bq.require('ol.array');bq.require('ol.control.Control');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.layer.Layer');bq.require('ol.obj');ol.control.Attribution=function(a){var b=a?a:{};this.ulElement_=document.createElement('UL');this.logoLi_=document.createElement('LI');this.ulElement_.appendChild(this.logoLi_);this.logoLi_.style.display='none';this.collapsed_=b.collapsed!==undefined?b.collapsed:true;this.collapsible_=b.collapsible!==undefined?b.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var c=b.className!==undefined?b.className:'ol-attribution';var d=b.tipLabel!==undefined?b.tipLabel:'Attributions';var e=b.collapseLabel!==undefined?b.collapseLabel:'\u00BB';if(typeof e==='string'){this.collapseLabel_=document.createElement('span');this.collapseLabel_.textContent=e}else{this.collapseLabel_=e}var f=b.label!==undefined?b.label:'i';if(typeof f==='string'){this.label_=document.createElement('span');this.label_.textContent=f}else{this.label_=f}var g=(this.collapsible_&&!this.collapsed_)?this.collapseLabel_:this.label_;var h=document.createElement('button');h.setAttribute('type','button');h.title=d;h.appendChild(g);ol.events.listen(h,ol.events.EventType.CLICK,this.handleClick_,this);var i=c+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?' ol-collapsed':'')+(this.collapsible_?'':' ol-uncollapsible');var j=document.createElement('div');j.className=i;j.appendChild(this.ulElement_);j.appendChild(h);var k=b.render?b.render:ol.control.Attribution.render;ol.control.Control.call(this,{element:j,render:k,target:b.target});this.renderedAttributions_=[];this.renderedVisible_=true;this.logoElements_={}};ol.inherits(ol.control.Attribution,ol.control.Control);ol.control.Attribution.prototype.getSourceAttributions_=function(a){var b={};var c=[];var d=a.layerStatesArray;var e=a.viewState.resolution;for(var i=0,ii=d.length;i<ii;++i){var f=d[i];if(!ol.layer.Layer.visibleAtResolution(f,e)){continue}var g=f.layer.getSource();if(!g){continue}var h=g.getAttributions2();if(!h){continue}var k=h(a);if(!k){continue}if(Array.isArray(k)){for(var j=0,jj=k.length;j<jj;++j){if(!(k[j]in b)){c.push(k[j]);b[k[j]]=true}}}else{if(!(k in b)){c.push(k);b[k]=true}}}return c};ol.control.Attribution.render=function(a){this.updateElement_(a.frameState)};ol.control.Attribution.prototype.updateElement_=function(a){if(!a){if(this.renderedVisible_){this.element.style.display='none';this.renderedVisible_=false}return}var b=this.getSourceAttributions_(a);if(ol.array.equals(b,this.renderedAttributions_)){return}while(this.ulElement_.lastChild!==this.logoLi_){this.ulElement_.removeChild(this.ulElement_.lastChild)}for(var i=0,ii=b.length;i<ii;++i){var c=document.createElement('LI');c.innerHTML=b[i];this.ulElement_.appendChild(c)}if(b.length===0&&this.renderedAttributions_.length>0){this.element.classList.add('ol-logo-only')}else if(this.renderedAttributions_.length===0&&b.length>0){this.element.classList.remove('ol-logo-only')}var d=b.length>0||!ol.obj.isEmpty(a.logos);if(this.renderedVisible_!=d){this.element.style.display=d?'':'none';this.renderedVisible_=d}this.renderedAttributions_=b;this.insertLogos_(a)};ol.control.Attribution.prototype.insertLogos_=function(a){var b;var c=a.logos;var d=this.logoElements_;for(b in d){if(!(b in c)){ol.dom.removeNode(d[b]);delete d[b]}}var e,logoElement,logoKey;for(logoKey in c){var f=c[logoKey];if(f instanceof HTMLElement){this.logoLi_.appendChild(f);d[logoKey]=f}if(!(logoKey in d)){e=new Image();e.src=logoKey;if(f===''){logoElement=e}else{logoElement=document.createElement('a');logoElement.href=f;logoElement.appendChild(e)}this.logoLi_.appendChild(logoElement);d[logoKey]=logoElement}}this.logoLi_.style.display=!ol.obj.isEmpty(c)?'':'none'};ol.control.Attribution.prototype.handleClick_=function(a){a.preventDefault();this.handleToggle_()};ol.control.Attribution.prototype.handleToggle_=function(){this.element.classList.toggle('ol-collapsed');if(this.collapsed_){ol.dom.replaceNode(this.collapseLabel_,this.label_)}else{ol.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_};ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_};ol.control.Attribution.prototype.setCollapsible=function(a){if(this.collapsible_===a){return}this.collapsible_=a;this.element.classList.toggle('ol-uncollapsible');if(!a&&this.collapsed_){this.handleToggle_()}};ol.control.Attribution.prototype.setCollapsed=function(a){if(!this.collapsible_||this.collapsed_===a){return}this.handleToggle_()};ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_};bq.provide('ol.control.Rotate');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol');bq.require('ol.control.Control');bq.require('ol.css');bq.require('ol.easing');ol.control.Rotate=function(a){var b=a?a:{};var c=b.className!==undefined?b.className:'ol-rotate';var d=b.label!==undefined?b.label:'\u21E7';this.label_=null;if(typeof d==='string'){this.label_=document.createElement('span');this.label_.className='ol-compass';this.label_.textContent=d}else{this.label_=d;this.label_.classList.add('ol-compass')}var e=b.tipLabel?b.tipLabel:'Reset rotation';var f=document.createElement('button');f.className=c+'-reset';f.setAttribute('type','button');f.title=e;f.appendChild(this.label_);ol.events.listen(f,ol.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,this);var g=c+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL;var h=document.createElement('div');h.className=g;h.appendChild(f);var i=b.render?b.render:ol.control.Rotate.render;this.callResetNorth_=b.resetNorth?b.resetNorth:undefined;ol.control.Control.call(this,{element:h,render:i,target:b.target});this.duration_=b.duration!==undefined?b.duration:250;this.autoHide_=b.autoHide!==undefined?b.autoHide:true;this.rotation_=undefined;if(this.autoHide_){this.element.classList.add(ol.css.CLASS_HIDDEN)}};ol.inherits(ol.control.Rotate,ol.control.Control);ol.control.Rotate.prototype.handleClick_=function(a){a.preventDefault();if(this.callResetNorth_!==undefined){this.callResetNorth_()}else{this.resetNorth_()}};ol.control.Rotate.prototype.resetNorth_=function(){var a=this.getMap();var b=a.getView();if(!b){return}if(b.getRotation()!==undefined){if(this.duration_>0){b.animate({rotation:0,duration:this.duration_,easing:ol.easing.easeOut})}else{b.setRotation(0)}}};ol.control.Rotate.render=function(a){var b=a.frameState;if(!b){return}var c=b.viewState.rotation;if(c!=this.rotation_){var d='rotate('+c+'rad)';if(this.autoHide_){var e=this.element.classList.contains(ol.css.CLASS_HIDDEN);if(!e&&c===0){this.element.classList.add(ol.css.CLASS_HIDDEN)}else if(e&&c!==0){this.element.classList.remove(ol.css.CLASS_HIDDEN)}}this.label_.style.msTransform=d;this.label_.style.webkitTransform=d;this.label_.style.transform=d}this.rotation_=c};bq.provide('ol.control.Zoom');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.control.Control');bq.require('ol.css');bq.require('ol.easing');ol.control.Zoom=function(a){var b=a?a:{};var c=b.className!==undefined?b.className:'ol-zoom';var d=b.delta!==undefined?b.delta:1;var e=b.zoomInLabel!==undefined?b.zoomInLabel:'+';var f=b.zoomOutLabel!==undefined?b.zoomOutLabel:'\u2212';var g=b.zoomInTipLabel!==undefined?b.zoomInTipLabel:'Zoom in';var h=b.zoomOutTipLabel!==undefined?b.zoomOutTipLabel:'Zoom out';var i=document.createElement('button');i.className=c+'-in';i.setAttribute('type','button');i.title=g;i.appendChild(typeof e==='string'?document.createTextNode(e):e);ol.events.listen(i,ol.events.EventType.CLICK,ol.control.Zoom.prototype.handleClick_.bind(this,d));var j=document.createElement('button');j.className=c+'-out';j.setAttribute('type','button');j.title=h;j.appendChild(typeof f==='string'?document.createTextNode(f):f);ol.events.listen(j,ol.events.EventType.CLICK,ol.control.Zoom.prototype.handleClick_.bind(this,-d));var k=c+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL;var l=document.createElement('div');l.className=k;l.appendChild(i);l.appendChild(j);ol.control.Control.call(this,{element:l,target:b.target});this.duration_=b.duration!==undefined?b.duration:250};ol.inherits(ol.control.Zoom,ol.control.Control);ol.control.Zoom.prototype.handleClick_=function(a,b){b.preventDefault();this.zoomByDelta_(a)};ol.control.Zoom.prototype.zoomByDelta_=function(a){var b=this.getMap();var c=b.getView();if(!c){return}var d=c.getResolution();if(d){var e=c.constrainResolution(d,a);if(this.duration_>0){if(c.getAnimating()){c.cancelAnimations()}c.animate({resolution:e,duration:this.duration_,easing:ol.easing.easeOut})}else{c.setResolution(e)}}};bq.provide('ol.control');bq.require('ol.Collection');bq.require('ol.control.Attribution');bq.require('ol.control.Rotate');bq.require('ol.control.Zoom');ol.control.defaults=function(a){var b=a?a:{};var c=new ol.Collection();var d=b.zoom!==undefined?b.zoom:true;if(d){c.push(new ol.control.Zoom(b.zoomOptions))}var e=b.rotate!==undefined?b.rotate:true;if(e){c.push(new ol.control.Rotate(b.rotateOptions))}var f=b.attribution!==undefined?b.attribution:true;if(f){c.push(new ol.control.Attribution(b.attributionOptions))}return c};bq.provide('ol.Kinetic');ol.Kinetic=function(a,b,c){this.decay_=a;this.minVelocity_=b;this.delay_=c;this.points_=[];this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.begin=function(){this.points_.length=0;this.angle_=0;this.initialVelocity_=0};ol.Kinetic.prototype.update=function(x,y){this.points_.push(x,y,Date.now())};ol.Kinetic.prototype.end=function(){if(this.points_.length<6){return false}var a=Date.now()-this.delay_;var b=this.points_.length-3;if(this.points_[b+2]<a){return false}var c=b-3;while(c>0&&this.points_[c+2]>a){c-=3}var d=this.points_[b+2]-this.points_[c+2];if(d<1000/60){return false}var e=this.points_[b]-this.points_[c];var f=this.points_[b+1]-this.points_[c+1];this.angle_=Math.atan2(f,e);this.initialVelocity_=Math.sqrt(e*e+f*f)/d;return this.initialVelocity_>this.minVelocity_};ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_};ol.Kinetic.prototype.getAngle=function(){return this.angle_};bq.provide('ol.interaction.Property');ol.interaction.Property={ACTIVE:'active'};bq.provide('ol.interaction.Interaction');bq.require('ol');bq.require('ol.Object');bq.require('ol.easing');bq.require('ol.interaction.Property');bq.require('ol.math');ol.interaction.Interaction=function(a){ol.Object.call(this);this.map_=null;this.setActive(true);this.handleEvent=a.handleEvent};ol.inherits(ol.interaction.Interaction,ol.Object);ol.interaction.Interaction.prototype.getActive=function(){return(this.get(ol.interaction.Property.ACTIVE))};ol.interaction.Interaction.prototype.getMap=function(){return this.map_};ol.interaction.Interaction.prototype.setActive=function(a){this.set(ol.interaction.Property.ACTIVE,a)};ol.interaction.Interaction.prototype.setMap=function(a){this.map_=a};ol.interaction.Interaction.pan=function(a,b,c){var d=a.getCenter();if(d){var e=a.constrainCenter([d[0]+b[0],d[1]+b[1]]);if(c){a.animate({duration:c,easing:ol.easing.linear,center:e})}else{a.setCenter(e)}}};ol.interaction.Interaction.rotate=function(a,b,c,d){b=a.constrainRotation(b,0);ol.interaction.Interaction.rotateWithoutConstraints(a,b,c,d)};ol.interaction.Interaction.rotateWithoutConstraints=function(a,b,c,d){if(b!==undefined){var e=a.getRotation();var f=a.getCenter();if(e!==undefined&&f&&d>0){a.animate({rotation:b,anchor:c,duration:d,easing:ol.easing.easeOut})}else{a.rotate(b,c)}}};ol.interaction.Interaction.zoom=function(a,b,c,d,e){b=a.constrainResolution(b,0,e);ol.interaction.Interaction.zoomWithoutConstraints(a,b,c,d)};ol.interaction.Interaction.zoomByDelta=function(a,b,c,d){var e=a.getResolution();var f=a.constrainResolution(e,b,0);if(f!==undefined){var g=a.getResolutions();f=ol.math.clamp(f,a.getMinResolution()||g[g.length-1],a.getMaxResolution()||g[0])}if(c&&f!==undefined&&f!==e){var h=a.getCenter();var i=a.calculateCenterZoom(f,c);i=a.constrainCenter(i);c=[(f*h[0]-e*i[0])/(f-e),(f*h[1]-e*i[1])/(f-e)]}ol.interaction.Interaction.zoomWithoutConstraints(a,f,c,d)};ol.interaction.Interaction.zoomWithoutConstraints=function(a,b,c,d){if(b){var e=a.getResolution();var f=a.getCenter();if(e!==undefined&&f&&b!==e&&d){a.animate({resolution:b,anchor:c,duration:d,easing:ol.easing.easeOut})}else{if(c){var g=a.calculateCenterZoom(b,c);a.setCenter(g)}a.setResolution(b)}}};bq.provide('ol.interaction.DoubleClickZoom');bq.require('ol');bq.require('ol.MapBrowserEventType');bq.require('ol.interaction.Interaction');ol.interaction.DoubleClickZoom=function(a){var b=a?a:{};this.delta_=b.delta?b.delta:1;ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent});this.duration_=b.duration!==undefined?b.duration:250};ol.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction);ol.interaction.DoubleClickZoom.handleEvent=function(a){var b=false;var c=a.originalEvent;if(a.type==ol.MapBrowserEventType.DBLCLICK){var d=a.map;var e=a.coordinate;var f=c.shiftKey?-this.delta_:this.delta_;var g=d.getView();ol.interaction.Interaction.zoomByDelta(g,f,e,this.duration_);a.preventDefault();b=true}return!b};bq.provide('ol.events.condition');bq.require('ol.MapBrowserEventType');bq.require('ol.asserts');bq.require('ol.functions');bq.require('ol.has');ol.events.condition.altKeyOnly=function(a){var b=a.originalEvent;return(b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey)};ol.events.condition.altShiftKeysOnly=function(a){var b=a.originalEvent;return(b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey)};ol.events.condition.always=ol.functions.TRUE;ol.events.condition.click=function(a){return a.type==ol.MapBrowserEventType.CLICK};ol.events.condition.mouseActionButton=function(a){var b=a.originalEvent;return b.button==0&&!(ol.has.WEBKIT&&ol.has.MAC&&b.ctrlKey)};ol.events.condition.never=ol.functions.FALSE;ol.events.condition.pointerMove=function(a){return a.type=='pointermove'};ol.events.condition.singleClick=function(a){return a.type==ol.MapBrowserEventType.SINGLECLICK};ol.events.condition.doubleClick=function(a){return a.type==ol.MapBrowserEventType.DBLCLICK};ol.events.condition.noModifierKeys=function(a){var b=a.originalEvent;return(!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey)};ol.events.condition.platformModifierKeyOnly=function(a){var b=a.originalEvent;return(!b.altKey&&(ol.has.MAC?b.metaKey:b.ctrlKey)&&!b.shiftKey)};ol.events.condition.shiftKeyOnly=function(a){var b=a.originalEvent;return(!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey)};ol.events.condition.targetNotEditable=function(a){var b=a.originalEvent.target;var c=b.tagName;return(c!=='INPUT'&&c!=='SELECT'&&c!=='TEXTAREA')};ol.events.condition.mouseOnly=function(a){ol.asserts.assert(a.pointerEvent,56);return(a).pointerEvent.pointerType=='mouse'};ol.events.condition.primaryAction=function(a){var b=a.pointerEvent;return b.isPrimary&&b.button===0};bq.provide('ol.interaction.Pointer');bq.require('ol');bq.require('ol.functions');bq.require('ol.MapBrowserEventType');bq.require('ol.MapBrowserPointerEvent');bq.require('ol.interaction.Interaction');bq.require('ol.obj');ol.interaction.Pointer=function(a){var b=a?a:{};var c=b.handleEvent?b.handleEvent:ol.interaction.Pointer.handleEvent;ol.interaction.Interaction.call(this,{handleEvent:c});this.handleDownEvent_=b.handleDownEvent?b.handleDownEvent:ol.interaction.Pointer.handleDownEvent;this.handleDragEvent_=b.handleDragEvent?b.handleDragEvent:ol.interaction.Pointer.handleDragEvent;this.handleMoveEvent_=b.handleMoveEvent?b.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent;this.handleUpEvent_=b.handleUpEvent?b.handleUpEvent:ol.interaction.Pointer.handleUpEvent;this.handlingDownUpSequence=false;this.trackedPointers_={};this.targetPointers=[]};ol.inherits(ol.interaction.Pointer,ol.interaction.Interaction);ol.interaction.Pointer.centroid=function(a){var b=a.length;var c=0;var d=0;for(var i=0;i<b;i++){c+=a[i].clientX;d+=a[i].clientY}return[c/b,d/b]};ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(a){var b=a.type;return(b===ol.MapBrowserEventType.POINTERDOWN||b===ol.MapBrowserEventType.POINTERDRAG||b===ol.MapBrowserEventType.POINTERUP)};ol.interaction.Pointer.prototype.updateTrackedPointers_=function(a){if(this.isPointerDraggingEvent_(a)){var b=a.pointerEvent;var c=b.pointerId.toString();if(a.type==ol.MapBrowserEventType.POINTERUP){delete this.trackedPointers_[c]}else if(a.type==ol.MapBrowserEventType.POINTERDOWN){this.trackedPointers_[c]=b}else if(c in this.trackedPointers_){this.trackedPointers_[c]=b}this.targetPointers=ol.obj.getValues(this.trackedPointers_)}};ol.interaction.Pointer.handleDragEvent=ol.nullFunction;ol.interaction.Pointer.handleUpEvent=ol.functions.FALSE;ol.interaction.Pointer.handleDownEvent=ol.functions.FALSE;ol.interaction.Pointer.handleMoveEvent=ol.nullFunction;ol.interaction.Pointer.handleEvent=function(a){if(!(a instanceof ol.MapBrowserPointerEvent)){return true}var b=false;this.updateTrackedPointers_(a);if(this.handlingDownUpSequence){if(a.type==ol.MapBrowserEventType.POINTERDRAG){this.handleDragEvent_(a)}else if(a.type==ol.MapBrowserEventType.POINTERUP){var c=this.handleUpEvent_(a);this.handlingDownUpSequence=c&&this.targetPointers.length>0}}else{if(a.type==ol.MapBrowserEventType.POINTERDOWN){var d=this.handleDownEvent_(a);this.handlingDownUpSequence=d;b=this.shouldStopEvent(d)}else if(a.type==ol.MapBrowserEventType.POINTERMOVE){this.handleMoveEvent_(a)}}return!b};ol.interaction.Pointer.prototype.shouldStopEvent=function(a){return a};bq.provide('ol.interaction.DragPan');bq.require('ol');bq.require('ol.ViewHint');bq.require('ol.coordinate');bq.require('ol.easing');bq.require('ol.events.condition');bq.require('ol.functions');bq.require('ol.interaction.Pointer');ol.interaction.DragPan=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});var b=a?a:{};this.kinetic_=b.kinetic;this.lastCentroid=null;this.lastPointersCount_;this.condition_=b.condition?b.condition:ol.events.condition.noModifierKeys;this.noKinetic_=false};ol.inherits(ol.interaction.DragPan,ol.interaction.Pointer);ol.interaction.DragPan.handleDragEvent_=function(a){var b=this.targetPointers;var c=ol.interaction.Pointer.centroid(b);if(b.length==this.lastPointersCount_){if(this.kinetic_){this.kinetic_.update(c[0],c[1])}if(this.lastCentroid){var d=this.lastCentroid[0]-c[0];var e=c[1]-this.lastCentroid[1];var f=a.map;var g=f.getView();var h=g.getState();var i=[d,e];ol.coordinate.scale(i,h.resolution);ol.coordinate.rotate(i,h.rotation);ol.coordinate.add(i,h.center);i=g.constrainCenter(i);g.setCenter(i)}}else if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=c;this.lastPointersCount_=b.length};ol.interaction.DragPan.handleUpEvent_=function(a){var b=a.map;var c=b.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var d=this.kinetic_.getDistance();var e=this.kinetic_.getAngle();var f=(c.getCenter());var g=b.getPixelFromCoordinate(f);var h=b.getCoordinateFromPixel([g[0]-d*Math.cos(e),g[1]-d*Math.sin(e)]);c.animate({center:c.constrainCenter(h),duration:500,easing:ol.easing.easeOut})}c.setHint(ol.ViewHint.INTERACTING,-1);return false}else{if(this.kinetic_){this.kinetic_.begin()}this.lastCentroid=null;return true}};ol.interaction.DragPan.handleDownEvent_=function(a){if(this.targetPointers.length>0&&this.condition_(a)){var b=a.map;var c=b.getView();this.lastCentroid=null;if(!this.handlingDownUpSequence){c.setHint(ol.ViewHint.INTERACTING,1)}if(c.getAnimating()){c.setCenter(a.frameState.viewState.center)}if(this.kinetic_){this.kinetic_.begin()}this.noKinetic_=this.targetPointers.length>1;return true}else{return false}};ol.interaction.DragPan.prototype.shouldStopEvent=ol.functions.FALSE;bq.provide('ol.interaction.DragRotate');bq.require('ol');bq.require('ol.RotationConstraint');bq.require('ol.ViewHint');bq.require('ol.events.condition');bq.require('ol.functions');bq.require('ol.interaction.Interaction');bq.require('ol.interaction.Pointer');ol.interaction.DragRotate=function(a){var b=a?a:{};ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_});this.condition_=b.condition?b.condition:ol.events.condition.altShiftKeysOnly;this.lastAngle_=undefined;this.duration_=b.duration!==undefined?b.duration:250};ol.inherits(ol.interaction.DragRotate,ol.interaction.Pointer);ol.interaction.DragRotate.handleDragEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return}var b=a.map;var c=b.getView();if(c.getConstraints().rotation===ol.RotationConstraint.disable){return}var d=b.getSize();var e=a.pixel;var f=Math.atan2(d[1]/2-e[1],e[0]-d[0]/2);if(this.lastAngle_!==undefined){var g=f-this.lastAngle_;var h=c.getRotation();ol.interaction.Interaction.rotateWithoutConstraints(c,h-g)}this.lastAngle_=f};ol.interaction.DragRotate.handleUpEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return true}var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=c.getRotation();ol.interaction.Interaction.rotate(c,d,undefined,this.duration_);return false};ol.interaction.DragRotate.handleDownEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return false}if(ol.events.condition.mouseActionButton(a)&&this.condition_(a)){var b=a.map;b.getView().setHint(ol.ViewHint.INTERACTING,1);this.lastAngle_=undefined;return true}else{return false}};ol.interaction.DragRotate.prototype.shouldStopEvent=ol.functions.FALSE;bq.provide('ol.render.Box');bq.require('ol');bq.require('ol.Disposable');bq.require('ol.geom.Polygon');ol.render.Box=function(a){this.geometry_=null;this.element_=(document.createElement('div'));this.element_.style.position='absolute';this.element_.className='ol-box '+a;this.map_=null;this.startPixel_=null;this.endPixel_=null};ol.inherits(ol.render.Box,ol.Disposable);ol.render.Box.prototype.disposeInternal=function(){this.setMap(null)};ol.render.Box.prototype.render_=function(){var a=this.startPixel_;var b=this.endPixel_;var c='px';var d=this.element_.style;d.left=Math.min(a[0],b[0])+c;d.top=Math.min(a[1],b[1])+c;d.width=Math.abs(b[0]-a[0])+c;d.height=Math.abs(b[1]-a[1])+c};ol.render.Box.prototype.setMap=function(a){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var b=this.element_.style;b.left=b.top=b.width=b.height='inherit'}this.map_=a;if(this.map_){this.map_.getOverlayContainer().appendChild(this.element_)}};ol.render.Box.prototype.setPixels=function(a,b){this.startPixel_=a;this.endPixel_=b;this.createOrUpdateGeometry();this.render_()};ol.render.Box.prototype.createOrUpdateGeometry=function(){var a=this.startPixel_;var b=this.endPixel_;var c=[a,[a[0],b[1]],b,[b[0],a[1]]];var d=c.map(this.map_.getCoordinateFromPixel,this.map_);d[4]=d[0].slice();if(!this.geometry_){this.geometry_=new ol.geom.Polygon([d])}else{this.geometry_.setCoordinates([d])}};ol.render.Box.prototype.getGeometry=function(){return this.geometry_};bq.provide('ol.interaction.DragBox');bq.require('ol.events.Event');bq.require('ol');bq.require('ol.events.condition');bq.require('ol.interaction.Pointer');bq.require('ol.render.Box');ol.interaction.DragBox=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});var b=a?a:{};this.box_=new ol.render.Box(b.className||'ol-dragbox');this.minArea_=b.minArea!==undefined?b.minArea:64;this.startPixel_=null;this.condition_=b.condition?b.condition:ol.events.condition.always;this.boxEndCondition_=b.boxEndCondition?b.boxEndCondition:ol.interaction.DragBox.defaultBoxEndCondition};ol.inherits(ol.interaction.DragBox,ol.interaction.Pointer);ol.interaction.DragBox.defaultBoxEndCondition=function(a,b,c){var d=c[0]-b[0];var e=c[1]-b[1];return d*d+e*e>=this.minArea_};ol.interaction.DragBox.handleDragEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return}this.box_.setPixels(this.startPixel_,a.pixel);this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXDRAG,a.coordinate,a))};ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()};ol.interaction.DragBox.prototype.onBoxEnd=ol.nullFunction;ol.interaction.DragBox.handleUpEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return true}this.box_.setMap(null);if(this.boxEndCondition_(a,this.startPixel_,a.pixel)){this.onBoxEnd(a);this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXEND,a.coordinate,a))}return false};ol.interaction.DragBox.handleDownEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return false}if(ol.events.condition.mouseActionButton(a)&&this.condition_(a)){this.startPixel_=a.pixel;this.box_.setMap(a.map);this.box_.setPixels(this.startPixel_,this.startPixel_);this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXSTART,a.coordinate,a));return true}else{return false}};ol.interaction.DragBox.EventType_={BOXSTART:'boxstart',BOXDRAG:'boxdrag',BOXEND:'boxend'};ol.interaction.DragBox.Event=function(a,b,c){ol.events.Event.call(this,a);this.coordinate=b;this.mapBrowserEvent=c};ol.inherits(ol.interaction.DragBox.Event,ol.events.Event);bq.provide('ol.interaction.DragZoom');bq.require('ol');bq.require('ol.easing');bq.require('ol.events.condition');bq.require('ol.extent');bq.require('ol.interaction.DragBox');ol.interaction.DragZoom=function(a){var b=a?a:{};var c=b.condition?b.condition:ol.events.condition.shiftKeyOnly;this.duration_=b.duration!==undefined?b.duration:200;this.out_=b.out!==undefined?b.out:false;ol.interaction.DragBox.call(this,{condition:c,className:b.className||'ol-dragzoom'})};ol.inherits(ol.interaction.DragZoom,ol.interaction.DragBox);ol.interaction.DragZoom.prototype.onBoxEnd=function(){var a=this.getMap();var b=(a.getView());var c=(a.getSize());var d=this.getGeometry().getExtent();if(this.out_){var e=b.calculateExtent(c);var f=ol.extent.createOrUpdateFromCoordinates([a.getPixelFromCoordinate(ol.extent.getBottomLeft(d)),a.getPixelFromCoordinate(ol.extent.getTopRight(d))]);var g=b.getResolutionForExtent(f,c);ol.extent.scaleFromCenter(e,1/g);d=e}var h=b.constrainResolution(b.getResolutionForExtent(d,c));var i=ol.extent.getCenter(d);i=b.constrainCenter(i);b.animate({resolution:h,center:i,duration:this.duration_,easing:ol.easing.easeOut})};bq.provide('ol.events.KeyCode');ol.events.KeyCode={LEFT:37,UP:38,RIGHT:39,DOWN:40};bq.provide('ol.interaction.KeyboardPan');bq.require('ol');bq.require('ol.coordinate');bq.require('ol.events.EventType');bq.require('ol.events.KeyCode');bq.require('ol.events.condition');bq.require('ol.interaction.Interaction');ol.interaction.KeyboardPan=function(b){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});var c=b||{};this.defaultCondition_=function(a){return ol.events.condition.noModifierKeys(a)&&ol.events.condition.targetNotEditable(a)};this.condition_=c.condition!==undefined?c.condition:this.defaultCondition_;this.duration_=c.duration!==undefined?c.duration:100;this.pixelDelta_=c.pixelDelta!==undefined?c.pixelDelta:128};ol.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction);ol.interaction.KeyboardPan.handleEvent=function(a){var b=false;if(a.type==ol.events.EventType.KEYDOWN){var c=a.originalEvent;var d=c.keyCode;if(this.condition_(a)&&(d==ol.events.KeyCode.DOWN||d==ol.events.KeyCode.LEFT||d==ol.events.KeyCode.RIGHT||d==ol.events.KeyCode.UP)){var e=a.map;var f=e.getView();var g=f.getResolution()*this.pixelDelta_;var h=0,deltaY=0;if(d==ol.events.KeyCode.DOWN){deltaY=-g}else if(d==ol.events.KeyCode.LEFT){h=-g}else if(d==ol.events.KeyCode.RIGHT){h=g}else{deltaY=g}var i=[h,deltaY];ol.coordinate.rotate(i,f.getRotation());ol.interaction.Interaction.pan(f,i,this.duration_);a.preventDefault();b=true}}return!b};bq.provide('ol.interaction.KeyboardZoom');bq.require('ol');bq.require('ol.events.EventType');bq.require('ol.events.condition');bq.require('ol.interaction.Interaction');ol.interaction.KeyboardZoom=function(a){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});var b=a?a:{};this.condition_=b.condition?b.condition:ol.events.condition.targetNotEditable;this.delta_=b.delta?b.delta:1;this.duration_=b.duration!==undefined?b.duration:100};ol.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction);ol.interaction.KeyboardZoom.handleEvent=function(a){var b=false;if(a.type==ol.events.EventType.KEYDOWN||a.type==ol.events.EventType.KEYPRESS){var c=a.originalEvent;var d=c.charCode;if(this.condition_(a)&&(d=='+'.charCodeAt(0)||d=='-'.charCodeAt(0))){var e=a.map;var f=(d=='+'.charCodeAt(0))?this.delta_:-this.delta_;var g=e.getView();ol.interaction.Interaction.zoomByDelta(g,f,undefined,this.duration_);a.preventDefault();b=true}}return!b};bq.provide('ol.interaction.MouseWheelZoom');bq.require('ol');bq.require('ol.ViewHint');bq.require('ol.easing');bq.require('ol.events.EventType');bq.require('ol.has');bq.require('ol.interaction.Interaction');bq.require('ol.math');ol.interaction.MouseWheelZoom=function(a){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});var b=a||{};this.delta_=0;this.duration_=b.duration!==undefined?b.duration:250;this.timeout_=b.timeout!==undefined?b.timeout:80;this.useAnchor_=b.useAnchor!==undefined?b.useAnchor:true;this.constrainResolution_=b.constrainResolution||false;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined;this.mode_=undefined;this.trackpadEventGap_=400;this.trackpadTimeoutId_=undefined;this.trackpadDeltaPerZoom_=300;this.trackpadZoomBuffer_=1.5};ol.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction);ol.interaction.MouseWheelZoom.handleEvent=function(a){var b=a.type;if(b!==ol.events.EventType.WHEEL&&b!==ol.events.EventType.MOUSEWHEEL){return true}a.preventDefault();var c=a.map;var d=(a.originalEvent);if(this.useAnchor_){this.lastAnchor_=a.coordinate}var e;if(a.type==ol.events.EventType.WHEEL){e=d.deltaY;if(ol.has.FIREFOX&&d.deltaMode===WheelEvent.DOM_DELTA_PIXEL){e/=ol.has.DEVICE_PIXEL_RATIO}if(d.deltaMode===WheelEvent.DOM_DELTA_LINE){e*=40}}else if(a.type==ol.events.EventType.MOUSEWHEEL){e=-d.wheelDeltaY;if(ol.has.SAFARI){e/=3}}if(e===0){return false}var f=Date.now();if(this.startTime_===undefined){this.startTime_=f}if(!this.mode_||f-this.startTime_>this.trackpadEventGap_){this.mode_=Math.abs(e)<4?ol.interaction.MouseWheelZoom.Mode_.TRACKPAD:ol.interaction.MouseWheelZoom.Mode_.WHEEL}if(this.mode_===ol.interaction.MouseWheelZoom.Mode_.TRACKPAD){var g=c.getView();if(this.trackpadTimeoutId_){clearTimeout(this.trackpadTimeoutId_)}else{g.setHint(ol.ViewHint.INTERACTING,1)}this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var h=g.getResolution()*Math.pow(2,e/this.trackpadDeltaPerZoom_);var i=g.getMinResolution();var j=g.getMaxResolution();var k=0;if(h<i){h=Math.max(h,i/this.trackpadZoomBuffer_);k=1}else if(h>j){h=Math.min(h,j*this.trackpadZoomBuffer_);k=-1}if(this.lastAnchor_){var l=g.calculateCenterZoom(h,this.lastAnchor_);g.setCenter(g.constrainCenter(l))}g.setResolution(h);if(k===0&&this.constrainResolution_){g.animate({resolution:g.constrainResolution(h,e>0?-1:1),easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:this.duration_})}if(k>0){g.animate({resolution:i,easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:500})}else if(k<0){g.animate({resolution:j,easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:500})}this.startTime_=f;return false}this.delta_+=e;var m=Math.max(this.timeout_-(f-this.startTime_),0);clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,c),m);return false};ol.interaction.MouseWheelZoom.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=undefined;var a=this.getMap().getView();a.setHint(ol.ViewHint.INTERACTING,-1)};ol.interaction.MouseWheelZoom.prototype.handleWheelZoom_=function(a){var b=a.getView();if(b.getAnimating()){b.cancelAnimations()}var c=ol.MOUSEWHEELZOOM_MAXDELTA;var d=ol.math.clamp(this.delta_,-c,c);ol.interaction.Interaction.zoomByDelta(b,-d,this.lastAnchor_,this.duration_);this.mode_=undefined;this.delta_=0;this.lastAnchor_=null;this.startTime_=undefined;this.timeoutId_=undefined};ol.interaction.MouseWheelZoom.prototype.setMouseAnchor=function(a){this.useAnchor_=a;if(!a){this.lastAnchor_=null}};ol.interaction.MouseWheelZoom.Mode_={TRACKPAD:'trackpad',WHEEL:'wheel'};bq.provide('ol.interaction.PinchRotate');bq.require('ol');bq.require('ol.ViewHint');bq.require('ol.functions');bq.require('ol.interaction.Interaction');bq.require('ol.interaction.Pointer');bq.require('ol.RotationConstraint');ol.interaction.PinchRotate=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});var b=a||{};this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0.0;this.threshold_=b.threshold!==undefined?b.threshold:0.3;this.duration_=b.duration!==undefined?b.duration:250};ol.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer);ol.interaction.PinchRotate.handleDragEvent_=function(a){var b=0.0;var c=this.targetPointers[0];var d=this.targetPointers[1];var e=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);if(this.lastAngle_!==undefined){var f=e-this.lastAngle_;this.rotationDelta_+=f;if(!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_){this.rotating_=true}b=f}this.lastAngle_=e;var g=a.map;var h=g.getView();if(h.getConstraints().rotation===ol.RotationConstraint.disable){return}var i=g.getViewport().getBoundingClientRect();var j=ol.interaction.Pointer.centroid(this.targetPointers);j[0]-=i.left;j[1]-=i.top;this.anchor_=g.getCoordinateFromPixel(j);if(this.rotating_){var k=h.getRotation();g.render();ol.interaction.Interaction.rotateWithoutConstraints(h,k+b,this.anchor_)}};ol.interaction.PinchRotate.handleUpEvent_=function(a){if(this.targetPointers.length<2){var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);if(this.rotating_){var d=c.getRotation();ol.interaction.Interaction.rotate(c,d,this.anchor_,this.duration_)}return false}else{return true}};ol.interaction.PinchRotate.handleDownEvent_=function(a){if(this.targetPointers.length>=2){var b=a.map;this.anchor_=null;this.lastAngle_=undefined;this.rotating_=false;this.rotationDelta_=0.0;if(!this.handlingDownUpSequence){b.getView().setHint(ol.ViewHint.INTERACTING,1)}return true}else{return false}};ol.interaction.PinchRotate.prototype.shouldStopEvent=ol.functions.FALSE;bq.provide('ol.interaction.PinchZoom');bq.require('ol');bq.require('ol.ViewHint');bq.require('ol.functions');bq.require('ol.interaction.Interaction');bq.require('ol.interaction.Pointer');ol.interaction.PinchZoom=function(a){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});var b=a?a:{};this.constrainResolution_=b.constrainResolution||false;this.anchor_=null;this.duration_=b.duration!==undefined?b.duration:400;this.lastDistance_=undefined;this.lastScaleDelta_=1};ol.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer);ol.interaction.PinchZoom.handleDragEvent_=function(a){var b=1.0;var c=this.targetPointers[0];var d=this.targetPointers[1];var e=c.clientX-d.clientX;var f=c.clientY-d.clientY;var g=Math.sqrt(e*e+f*f);if(this.lastDistance_!==undefined){b=this.lastDistance_/g}this.lastDistance_=g;var h=a.map;var i=h.getView();var j=i.getResolution();var k=i.getMaxResolution();var l=i.getMinResolution();var m=j*b;if(m>k){b=k/j;m=k}else if(m<l){b=l/j;m=l}if(b!=1.0){this.lastScaleDelta_=b}var n=h.getViewport().getBoundingClientRect();var o=ol.interaction.Pointer.centroid(this.targetPointers);o[0]-=n.left;o[1]-=n.top;this.anchor_=h.getCoordinateFromPixel(o);h.render();ol.interaction.Interaction.zoomWithoutConstraints(i,m,this.anchor_)};ol.interaction.PinchZoom.handleUpEvent_=function(a){if(this.targetPointers.length<2){var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=c.getResolution();if(this.constrainResolution_||d<c.getMinResolution()||d>c.getMaxResolution()){var e=this.lastScaleDelta_-1;ol.interaction.Interaction.zoom(c,d,this.anchor_,this.duration_,e)}return false}else{return true}};ol.interaction.PinchZoom.handleDownEvent_=function(a){if(this.targetPointers.length>=2){var b=a.map;this.anchor_=null;this.lastDistance_=undefined;this.lastScaleDelta_=1;if(!this.handlingDownUpSequence){b.getView().setHint(ol.ViewHint.INTERACTING,1)}return true}else{return false}};ol.interaction.PinchZoom.prototype.shouldStopEvent=ol.functions.FALSE;bq.provide('ol.interaction');bq.require('ol.Collection');bq.require('ol.Kinetic');bq.require('ol.interaction.DoubleClickZoom');bq.require('ol.interaction.DragPan');bq.require('ol.interaction.DragRotate');bq.require('ol.interaction.DragZoom');bq.require('ol.interaction.KeyboardPan');bq.require('ol.interaction.KeyboardZoom');bq.require('ol.interaction.MouseWheelZoom');bq.require('ol.interaction.PinchRotate');bq.require('ol.interaction.PinchZoom');ol.interaction.defaults=function(a){var b=a?a:{};var c=new ol.Collection();var d=new ol.Kinetic(-0.005,0.05,100);var e=b.altShiftDragRotate!==undefined?b.altShiftDragRotate:true;if(e){c.push(new ol.interaction.DragRotate())}var f=b.doubleClickZoom!==undefined?b.doubleClickZoom:true;if(f){c.push(new ol.interaction.DoubleClickZoom({delta:b.zoomDelta,duration:b.zoomDuration}))}var g=b.dragPan!==undefined?b.dragPan:true;if(g){c.push(new ol.interaction.DragPan({kinetic:d}))}var h=b.pinchRotate!==undefined?b.pinchRotate:true;if(h){c.push(new ol.interaction.PinchRotate())}var i=b.pinchZoom!==undefined?b.pinchZoom:true;if(i){c.push(new ol.interaction.PinchZoom({constrainResolution:b.constrainResolution,duration:b.zoomDuration}))}var j=b.keyboard!==undefined?b.keyboard:true;if(j){c.push(new ol.interaction.KeyboardPan());c.push(new ol.interaction.KeyboardZoom({delta:b.zoomDelta,duration:b.zoomDuration}))}var k=b.mouseWheelZoom!==undefined?b.mouseWheelZoom:true;if(k){c.push(new ol.interaction.MouseWheelZoom({constrainResolution:b.constrainResolution,duration:b.zoomDuration}))}var l=b.shiftDragZoom!==undefined?b.shiftDragZoom:true;if(l){c.push(new ol.interaction.DragZoom({duration:b.zoomDuration}))}return c};bq.provide('ol.ImageBase');bq.require('ol');bq.require('ol.events.EventTarget');bq.require('ol.events.EventType');ol.ImageBase=function(a,b,c,d){ol.events.EventTarget.call(this);this.extent=a;this.pixelRatio_=c;this.resolution=b;this.state=d};ol.inherits(ol.ImageBase,ol.events.EventTarget);ol.ImageBase.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.ImageBase.prototype.getExtent=function(){return this.extent};ol.ImageBase.prototype.getImage=function(){};ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){return(this.resolution)};ol.ImageBase.prototype.getState=function(){return this.state};ol.ImageBase.prototype.load=function(){};bq.provide('ol.ImageState');ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3};bq.provide('ol.ImageCanvas');bq.require('ol');bq.require('ol.ImageBase');bq.require('ol.ImageState');ol.ImageCanvas=function(a,b,c,d,e){this.loader_=e!==undefined?e:null;var f=e!==undefined?ol.ImageState.IDLE:ol.ImageState.LOADED;ol.ImageBase.call(this,a,b,c,f);this.canvas_=d;this.error_=null};ol.inherits(ol.ImageCanvas,ol.ImageBase);ol.ImageCanvas.prototype.getError=function(){return this.error_};ol.ImageCanvas.prototype.handleLoad_=function(a){if(a){this.error_=a;this.state=ol.ImageState.ERROR}else{this.state=ol.ImageState.LOADED}this.changed()};ol.ImageCanvas.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();this.loader_(this.handleLoad_.bind(this))}};ol.ImageCanvas.prototype.getImage=function(){return this.canvas_};bq.provide('ol.LayerType');ol.LayerType={IMAGE:'IMAGE',TILE:'TILE',VECTOR_TILE:'VECTOR_TILE',VECTOR:'VECTOR'};bq.provide('ol.layer.VectorRenderType');ol.layer.VectorRenderType={IMAGE:'image',VECTOR:'vector'};bq.provide('ol.render.Event');bq.require('ol');bq.require('ol.events.Event');ol.render.Event=function(a,b,c,d,e){ol.events.Event.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e};ol.inherits(ol.render.Event,ol.events.Event);bq.provide('ol.structs.LRUCache');bq.require('ol');bq.require('ol.asserts');bq.require('ol.events.EventTarget');bq.require('ol.events.EventType');ol.structs.LRUCache=function(a){ol.events.EventTarget.call(this);this.highWaterMark=a!==undefined?a:2048;this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null};ol.inherits(ol.structs.LRUCache,ol.events.EventTarget);ol.structs.LRUCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark};ol.structs.LRUCache.prototype.clear=function(){this.count_=0;this.entries_={};this.oldest_=null;this.newest_=null;this.dispatchEvent(ol.events.EventType.CLEAR)};ol.structs.LRUCache.prototype.containsKey=function(a){return this.entries_.hasOwnProperty(a)};ol.structs.LRUCache.prototype.forEach=function(f,a){var b=this.oldest_;while(b){f.call(a,b.value_,b.key_,this);b=b.newer}};ol.structs.LRUCache.prototype.get=function(a){var b=this.entries_[a];ol.asserts.assert(b!==undefined,15);if(b===this.newest_){return b.value_}else if(b===this.oldest_){this.oldest_=(this.oldest_.newer);this.oldest_.older=null}else{b.newer.older=b.older;b.older.newer=b.newer}b.newer=null;b.older=this.newest_;this.newest_.newer=b;this.newest_=b;return b.value_};ol.structs.LRUCache.prototype.remove=function(a){var b=this.entries_[a];ol.asserts.assert(b!==undefined,15);if(b===this.newest_){this.newest_=(b.older);if(this.newest_){this.newest_.newer=null}}else if(b===this.oldest_){this.oldest_=(b.newer);if(this.oldest_){this.oldest_.older=null}}else{b.newer.older=b.older;b.older.newer=b.newer}delete this.entries_[a];--this.count_;return b.value_};ol.structs.LRUCache.prototype.getCount=function(){return this.count_};ol.structs.LRUCache.prototype.getKeys=function(){var a=new Array(this.count_);var i=0;var b;for(b=this.newest_;b;b=b.older){a[i++]=b.key_}return a};ol.structs.LRUCache.prototype.getValues=function(){var a=new Array(this.count_);var i=0;var b;for(b=this.newest_;b;b=b.older){a[i++]=b.value_}return a};ol.structs.LRUCache.prototype.peekLast=function(){return this.oldest_.value_};ol.structs.LRUCache.prototype.peekLastKey=function(){return this.oldest_.key_};ol.structs.LRUCache.prototype.peekFirstKey=function(){return this.newest_.key_};ol.structs.LRUCache.prototype.pop=function(){var a=this.oldest_;delete this.entries_[a.key_];if(a.newer){a.newer.older=null}this.oldest_=(a.newer);if(!this.oldest_){this.newest_=null}--this.count_;return a.value_};ol.structs.LRUCache.prototype.replace=function(a,b){this.get(a);this.entries_[a].value_=b};ol.structs.LRUCache.prototype.set=function(a,b){ol.asserts.assert(!(a in this.entries_),16);var c=({key_:a,newer:null,older:this.newest_,value_:b});if(!this.newest_){this.oldest_=c}else{this.newest_.newer=c}this.newest_=c;this.entries_[a]=c;++this.count_};ol.structs.LRUCache.prototype.prune=function(){while(this.canExpireCache()){this.pop()}};bq.provide('ol.render.canvas');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.obj');bq.require('ol.structs.LRUCache');bq.require('ol.transform');ol.render.canvas.defaultFont='10px sans-serif';ol.render.canvas.defaultFillStyle=[0,0,0,1];ol.render.canvas.defaultLineCap='round';ol.render.canvas.defaultLineDash=[];ol.render.canvas.defaultLineDashOffset=0;ol.render.canvas.defaultLineJoin='round';ol.render.canvas.defaultMiterLimit=10;ol.render.canvas.defaultStrokeStyle=[0,0,0,1];ol.render.canvas.defaultTextAlign='center';ol.render.canvas.defaultTextBaseline='middle';ol.render.canvas.defaultPadding=[0,0,0,0];ol.render.canvas.defaultLineWidth=1;ol.render.canvas.labelCache=new ol.structs.LRUCache();ol.render.canvas.checkedFonts_={};ol.render.canvas.measureContext_=null;ol.render.canvas.textHeights_={};ol.render.canvas.checkFont=(function(){var e=60;var f=ol.render.canvas.checkedFonts_;var g=ol.render.canvas.labelCache;var h='32px monospace';var j='wmytzilWMYTZIL@#/&?$%10';var k,referenceWidth;function isAvailable(a){var b=ol.render.canvas.getMeasureContext();b.font=h;referenceWidth=b.measureText(j).width;var c=true;if(a!='monospace'){b.font='32px '+a+',monospace';var d=b.measureText(j).width;c=d!=referenceWidth}return c}function check(){var a=true;for(var b in f){if(f[b]<e){if(isAvailable(b)){f[b]=e;ol.obj.clear(ol.render.canvas.textHeights_);ol.render.canvas.measureContext_=null;g.clear()}else{++f[b];a=false}}}if(a){window.clearInterval(k);k=undefined}}return function(a){var b=ol.css.getFontFamilies(a);if(!b){return}for(var i=0,ii=b.length;i<ii;++i){var c=b[i];if(!(c in f)){f[c]=e;if(!isAvailable(c)){f[c]=0;if(k===undefined){k=window.setInterval(check,32)}}}}}})();ol.render.canvas.getMeasureContext=function(){var a=ol.render.canvas.measureContext_;if(!a){a=ol.render.canvas.measureContext_=ol.dom.createCanvasContext2D(1,1)}return a};ol.render.canvas.measureTextHeight=(function(){var c;var d=ol.render.canvas.textHeights_;return function(a){var b=d[a];if(b==undefined){if(!c){c=document.createElement('span');c.textContent='M';c.style.margin=c.style.padding='0 !important';c.style.position='absolute !important';c.style.left='-99999px !important'}c.style.font=a;document.body.appendChild(c);b=d[a]=c.offsetHeight;document.body.removeChild(c)}return b}})();ol.render.canvas.measureTextWidth=function(a,b){var c=ol.render.canvas.getMeasureContext();if(a!=c.font){c.font=a}return c.measureText(b).width};ol.render.canvas.rotateAtOffset=function(a,b,c,d){if(b!==0){a.translate(c,d);a.rotate(b);a.translate(-c,-d)}};ol.render.canvas.resetTransform_=ol.transform.create();ol.render.canvas.drawImage=function(a,b,c,d,e,f,w,h,x,y,g){var i;if(c!=1){i=a.globalAlpha;a.globalAlpha=i*c}if(b){a.setTransform.apply(a,b)}a.drawImage(d,e,f,w,h,x,y,w*g,h*g);if(i){a.globalAlpha=i}if(b){a.setTransform.apply(a,ol.render.canvas.resetTransform_)}};bq.provide('ol.color');bq.require('ol.asserts');bq.require('ol.math');ol.color.HEX_COLOR_RE_=/^#(?:[0-9a-f]{3,4}){1,2}$/i;ol.color.NAMED_COLOR_RE_=/^([a-z]*)$/i;ol.color.asArray=function(a){if(Array.isArray(a)){return a}else{return ol.color.fromString((a))}};ol.color.asString=function(a){if(typeof a==='string'){return a}else{return ol.color.toString(a)}};ol.color.fromNamed=function(a){var b=document.createElement('div');b.style.color=a;document.body.appendChild(b);var c=getComputedStyle(b).color;document.body.removeChild(b);return c};ol.color.fromString=(function(){var c=1024;var d={};var e=0;return(function(s){var a;if(d.hasOwnProperty(s)){a=d[s]}else{if(e>=c){var i=0;var b;for(b in d){if((i++&3)===0){delete d[b];--e}}}a=ol.color.fromStringInternal_(s);d[s]=a;++e}return a})})();ol.color.fromStringInternal_=function(s){var r,g,b,a,color,parts;if(ol.color.NAMED_COLOR_RE_.exec(s)){s=ol.color.fromNamed(s)}if(ol.color.HEX_COLOR_RE_.exec(s)){var n=s.length-1;var d;if(n<=4){d=1}else{d=2}var c=n===4||n===8;r=parseInt(s.substr(1+0*d,d),16);g=parseInt(s.substr(1+1*d,d),16);b=parseInt(s.substr(1+2*d,d),16);if(c){a=parseInt(s.substr(1+3*d,d),16)}else{a=255}if(d==1){r=(r<<4)+r;g=(g<<4)+g;b=(b<<4)+b;if(c){a=(a<<4)+a}}color=[r,g,b,a/255]}else if(s.indexOf('rgba(')==0){parts=s.slice(5,-1).split(',').map(Number);color=ol.color.normalize(parts)}else if(s.indexOf('rgb(')==0){parts=s.slice(4,-1).split(',').map(Number);parts.push(1);color=ol.color.normalize(parts)}else{ol.asserts.assert(false,14)}return(color)};ol.color.normalize=function(a,b){var c=b||[];c[0]=ol.math.clamp((a[0]+0.5)|0,0,255);c[1]=ol.math.clamp((a[1]+0.5)|0,0,255);c[2]=ol.math.clamp((a[2]+0.5)|0,0,255);c[3]=ol.math.clamp(a[3],0,1);return c};ol.color.toString=function(c){var r=c[0];if(r!=(r|0)){r=(r+0.5)|0}var g=c[1];if(g!=(g|0)){g=(g+0.5)|0}var b=c[2];if(b!=(b|0)){b=(b+0.5)|0}var a=c[3]===undefined?1:c[3];return'rgba('+r+','+g+','+b+','+a+')'};bq.provide('ol.colorlike');bq.require('ol.color');ol.colorlike.asColorLike=function(a){if(ol.colorlike.isColorLike(a)){return(a)}else{return ol.color.asString((a))}};ol.colorlike.isColorLike=function(a){return(typeof a==='string'||a instanceof CanvasPattern||a instanceof CanvasGradient)};bq.provide('ol.render.VectorContext');ol.render.VectorContext=function(){};ol.render.VectorContext.prototype.drawCustom=function(a,b,c){};ol.render.VectorContext.prototype.drawGeometry=function(a){};ol.render.VectorContext.prototype.setStyle=function(a){};ol.render.VectorContext.prototype.drawCircle=function(a,b){};ol.render.VectorContext.prototype.drawFeature=function(a,b){};ol.render.VectorContext.prototype.drawGeometryCollection=function(a,b){};ol.render.VectorContext.prototype.drawLineString=function(a,b){};ol.render.VectorContext.prototype.drawMultiLineString=function(a,b){};ol.render.VectorContext.prototype.drawMultiPoint=function(a,b){};ol.render.VectorContext.prototype.drawMultiPolygon=function(a,b){};ol.render.VectorContext.prototype.drawPoint=function(a,b){};ol.render.VectorContext.prototype.drawPolygon=function(a,b){};ol.render.VectorContext.prototype.drawText=function(a,b){};ol.render.VectorContext.prototype.setFillStrokeStyle=function(a,b){};ol.render.VectorContext.prototype.setImageStyle=function(a,b){};ol.render.VectorContext.prototype.setTextStyle=function(a,b){};bq.provide('ol.render.canvas.Immediate');bq.require('ol');bq.require('ol.array');bq.require('ol.colorlike');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.transform');bq.require('ol.has');bq.require('ol.render.VectorContext');bq.require('ol.render.canvas');bq.require('ol.transform');ol.render.canvas.Immediate=function(a,b,c,d,e){ol.render.VectorContext.call(this);this.context_=a;this.pixelRatio_=b;this.extent_=c;this.transform_=d;this.viewRotation_=e;this.contextFillState_=null;this.contextStrokeState_=null;this.contextTextState_=null;this.fillState_=null;this.strokeState_=null;this.image_=null;this.imageAnchorX_=0;this.imageAnchorY_=0;this.imageHeight_=0;this.imageOpacity_=0;this.imageOriginX_=0;this.imageOriginY_=0;this.imageRotateWithView_=false;this.imageRotation_=0;this.imageScale_=0;this.imageSnapToPixel_=false;this.imageWidth_=0;this.text_='';this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=false;this.textRotation_=0;this.textScale_=0;this.textFillState_=null;this.textStrokeState_=null;this.textState_=null;this.pixelCoordinates_=[];this.tmpLocalTransform_=ol.transform.create()};ol.inherits(ol.render.canvas.Immediate,ol.render.VectorContext);ol.render.canvas.Immediate.prototype.drawImages_=function(a,b,c,d){if(!this.image_){return}var e=ol.geom.flat.transform.transform2D(a,b,c,2,this.transform_,this.pixelCoordinates_);var f=this.context_;var g=this.tmpLocalTransform_;var h=f.globalAlpha;if(this.imageOpacity_!=1){f.globalAlpha=h*this.imageOpacity_}var j=this.imageRotation_;if(this.imageRotateWithView_){j+=this.viewRotation_}var i,ii;for(i=0,ii=e.length;i<ii;i+=2){var x=e[i]-this.imageAnchorX_;var y=e[i+1]-this.imageAnchorY_;if(this.imageSnapToPixel_){x=Math.round(x);y=Math.round(y)}if(j!==0||this.imageScale_!=1){var k=x+this.imageAnchorX_;var l=y+this.imageAnchorY_;ol.transform.compose(g,k,l,this.imageScale_,this.imageScale_,j,-k,-l);f.setTransform.apply(f,g)}f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,y,this.imageWidth_,this.imageHeight_)}if(j!==0||this.imageScale_!=1){f.setTransform(1,0,0,1,0,0)}if(this.imageOpacity_!=1){f.globalAlpha=h}};ol.render.canvas.Immediate.prototype.drawText_=function(a,b,c,d){if(!this.textState_||this.text_===''){return}if(this.textFillState_){this.setContextFillState_(this.textFillState_)}if(this.textStrokeState_){this.setContextStrokeState_(this.textStrokeState_)}this.setContextTextState_(this.textState_);var e=ol.geom.flat.transform.transform2D(a,b,c,d,this.transform_,this.pixelCoordinates_);var f=this.context_;var g=this.textRotation_;if(this.textRotateWithView_){g+=this.viewRotation_}for(;b<c;b+=d){var x=e[b]+this.textOffsetX_;var y=e[b+1]+this.textOffsetY_;if(g!==0||this.textScale_!=1){var h=ol.transform.compose(this.tmpLocalTransform_,x,y,this.textScale_,this.textScale_,g,-x,-y);f.setTransform.apply(f,h)}if(this.textStrokeState_){f.strokeText(this.text_,x,y)}if(this.textFillState_){f.fillText(this.text_,x,y)}}if(g!==0||this.textScale_!=1){f.setTransform(1,0,0,1,0,0)}};ol.render.canvas.Immediate.prototype.moveToLineTo_=function(a,b,c,d,e){var f=this.context_;var g=ol.geom.flat.transform.transform2D(a,b,c,d,this.transform_,this.pixelCoordinates_);f.moveTo(g[0],g[1]);var h=g.length;if(e){h-=2}for(var i=2;i<h;i+=2){f.lineTo(g[i],g[i+1])}if(e){f.closePath()}return c};ol.render.canvas.Immediate.prototype.drawRings_=function(a,b,c,d){var i,ii;for(i=0,ii=c.length;i<ii;++i){b=this.moveToLineTo_(a,b,c[i],d,true)}return b};ol.render.canvas.Immediate.prototype.drawCircle=function(a){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(this.fillState_||this.strokeState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var b=ol.geom.SimpleGeometry.transform2D(a,this.transform_,this.pixelCoordinates_);var c=b[2]-b[0];var d=b[3]-b[1];var e=Math.sqrt(c*c+d*d);var f=this.context_;f.beginPath();f.arc(b[0],b[1],e,0,2*Math.PI);if(this.fillState_){f.fill()}if(this.strokeState_){f.stroke()}}if(this.text_!==''){this.drawText_(a.getCenter(),0,2,2)}};ol.render.canvas.Immediate.prototype.setStyle=function(a){this.setFillStrokeStyle(a.getFill(),a.getStroke());this.setImageStyle(a.getImage());this.setTextStyle(a.getText())};ol.render.canvas.Immediate.prototype.drawGeometry=function(a){var b=a.getType();switch(b){case ol.geom.GeometryType.POINT:this.drawPoint((a));break;case ol.geom.GeometryType.LINE_STRING:this.drawLineString((a));break;case ol.geom.GeometryType.POLYGON:this.drawPolygon((a));break;case ol.geom.GeometryType.MULTI_POINT:this.drawMultiPoint((a));break;case ol.geom.GeometryType.MULTI_LINE_STRING:this.drawMultiLineString((a));break;case ol.geom.GeometryType.MULTI_POLYGON:this.drawMultiPolygon((a));break;case ol.geom.GeometryType.GEOMETRY_COLLECTION:this.drawGeometryCollection((a));break;case ol.geom.GeometryType.CIRCLE:this.drawCircle((a));break;default:}};ol.render.canvas.Immediate.prototype.drawFeature=function(a,b){var c=b.getGeometryFunction()(a);if(!c||!ol.extent.intersects(this.extent_,c.getExtent())){return}this.setStyle(b);this.drawGeometry(c)};ol.render.canvas.Immediate.prototype.drawGeometryCollection=function(a){var b=a.getGeometriesArray();var i,ii;for(i=0,ii=b.length;i<ii;++i){this.drawGeometry(b[i])}};ol.render.canvas.Immediate.prototype.drawPoint=function(a){var b=a.getFlatCoordinates();var c=a.getStride();if(this.image_){this.drawImages_(b,0,b.length,c)}if(this.text_!==''){this.drawText_(b,0,b.length,c)}};ol.render.canvas.Immediate.prototype.drawMultiPoint=function(a){var b=a.getFlatCoordinates();var c=a.getStride();if(this.image_){this.drawImages_(b,0,b.length,c)}if(this.text_!==''){this.drawText_(b,0,b.length,c)}};ol.render.canvas.Immediate.prototype.drawLineString=function(a){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var b=this.context_;var c=a.getFlatCoordinates();b.beginPath();this.moveToLineTo_(c,0,c.length,a.getStride(),false);b.stroke()}if(this.text_!==''){var d=a.getFlatMidpoint();this.drawText_(d,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiLineString=function(a){var b=a.getExtent();if(!ol.extent.intersects(this.extent_,b)){return}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var c=this.context_;var d=a.getFlatCoordinates();var e=0;var f=a.getEnds();var g=a.getStride();c.beginPath();var i,ii;for(i=0,ii=f.length;i<ii;++i){e=this.moveToLineTo_(d,e,f[i],g,false)}c.stroke()}if(this.text_!==''){var h=a.getFlatMidpoints();this.drawText_(h,0,h.length,2)}};ol.render.canvas.Immediate.prototype.drawPolygon=function(a){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var b=this.context_;b.beginPath();this.drawRings_(a.getOrientedFlatCoordinates(),0,a.getEnds(),a.getStride());if(this.fillState_){b.fill()}if(this.strokeState_){b.stroke()}}if(this.text_!==''){var c=a.getFlatInteriorPoint();this.drawText_(c,0,2,2)}};ol.render.canvas.Immediate.prototype.drawMultiPolygon=function(a){if(!ol.extent.intersects(this.extent_,a.getExtent())){return}if(this.strokeState_||this.fillState_){if(this.fillState_){this.setContextFillState_(this.fillState_)}if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)}var b=this.context_;var c=a.getOrientedFlatCoordinates();var d=0;var e=a.getEndss();var f=a.getStride();var i,ii;b.beginPath();for(i=0,ii=e.length;i<ii;++i){var g=e[i];d=this.drawRings_(c,d,g,f)}if(this.fillState_){b.fill()}if(this.strokeState_){b.stroke()}}if(this.text_!==''){var h=a.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}};ol.render.canvas.Immediate.prototype.setContextFillState_=function(a){var b=this.context_;var c=this.contextFillState_;if(!c){b.fillStyle=a.fillStyle;this.contextFillState_={fillStyle:a.fillStyle}}else{if(c.fillStyle!=a.fillStyle){c.fillStyle=b.fillStyle=a.fillStyle}}};ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(a){var b=this.context_;var c=this.contextStrokeState_;if(!c){b.lineCap=a.lineCap;if(ol.has.CANVAS_LINE_DASH){b.setLineDash(a.lineDash);b.lineDashOffset=a.lineDashOffset}b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.strokeStyle=a.strokeStyle;this.contextStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle}}else{if(c.lineCap!=a.lineCap){c.lineCap=b.lineCap=a.lineCap}if(ol.has.CANVAS_LINE_DASH){if(!ol.array.equals(c.lineDash,a.lineDash)){b.setLineDash(c.lineDash=a.lineDash)}if(c.lineDashOffset!=a.lineDashOffset){c.lineDashOffset=b.lineDashOffset=a.lineDashOffset}}if(c.lineJoin!=a.lineJoin){c.lineJoin=b.lineJoin=a.lineJoin}if(c.lineWidth!=a.lineWidth){c.lineWidth=b.lineWidth=a.lineWidth}if(c.miterLimit!=a.miterLimit){c.miterLimit=b.miterLimit=a.miterLimit}if(c.strokeStyle!=a.strokeStyle){c.strokeStyle=b.strokeStyle=a.strokeStyle}}};ol.render.canvas.Immediate.prototype.setContextTextState_=function(a){var b=this.context_;var c=this.contextTextState_;var d=a.textAlign?a.textAlign:ol.render.canvas.defaultTextAlign;if(!c){b.font=a.font;b.textAlign=d;b.textBaseline=a.textBaseline;this.contextTextState_={font:a.font,textAlign:d,textBaseline:a.textBaseline}}else{if(c.font!=a.font){c.font=b.font=a.font}if(c.textAlign!=d){c.textAlign=d}if(c.textBaseline!=a.textBaseline){c.textBaseline=b.textBaseline=a.textBaseline}}};ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(a,b){if(!a){this.fillState_=null}else{var c=a.getColor();this.fillState_={fillStyle:ol.colorlike.asColorLike(c?c:ol.render.canvas.defaultFillStyle)}}if(!b){this.strokeState_=null}else{var d=b.getColor();var e=b.getLineCap();var f=b.getLineDash();var g=b.getLineDashOffset();var h=b.getLineJoin();var i=b.getWidth();var j=b.getMiterLimit();this.strokeState_={lineCap:e!==undefined?e:ol.render.canvas.defaultLineCap,lineDash:f?f:ol.render.canvas.defaultLineDash,lineDashOffset:g?g:ol.render.canvas.defaultLineDashOffset,lineJoin:h!==undefined?h:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(i!==undefined?i:ol.render.canvas.defaultLineWidth),miterLimit:j!==undefined?j:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.colorlike.asColorLike(d?d:ol.render.canvas.defaultStrokeStyle)}}};ol.render.canvas.Immediate.prototype.setImageStyle=function(a){if(!a){this.image_=null}else{var b=a.getAnchor();var c=a.getImage(1);var d=a.getOrigin();var e=a.getSize();this.imageAnchorX_=b[0];this.imageAnchorY_=b[1];this.imageHeight_=e[1];this.image_=c;this.imageOpacity_=a.getOpacity();this.imageOriginX_=d[0];this.imageOriginY_=d[1];this.imageRotateWithView_=a.getRotateWithView();this.imageRotation_=a.getRotation();this.imageScale_=a.getScale()*this.pixelRatio_;this.imageSnapToPixel_=a.getSnapToPixel();this.imageWidth_=e[0]}};ol.render.canvas.Immediate.prototype.setTextStyle=function(a){if(!a){this.text_=''}else{var b=a.getFill();if(!b){this.textFillState_=null}else{var c=b.getColor();this.textFillState_={fillStyle:ol.colorlike.asColorLike(c?c:ol.render.canvas.defaultFillStyle)}}var d=a.getStroke();if(!d){this.textStrokeState_=null}else{var e=d.getColor();var f=d.getLineCap();var g=d.getLineDash();var h=d.getLineDashOffset();var i=d.getLineJoin();var j=d.getWidth();var k=d.getMiterLimit();this.textStrokeState_={lineCap:f!==undefined?f:ol.render.canvas.defaultLineCap,lineDash:g?g:ol.render.canvas.defaultLineDash,lineDashOffset:h?h:ol.render.canvas.defaultLineDashOffset,lineJoin:i!==undefined?i:ol.render.canvas.defaultLineJoin,lineWidth:j!==undefined?j:ol.render.canvas.defaultLineWidth,miterLimit:k!==undefined?k:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.colorlike.asColorLike(e?e:ol.render.canvas.defaultStrokeStyle)}}var l=a.getFont();var m=a.getOffsetX();var n=a.getOffsetY();var o=a.getRotateWithView();var p=a.getRotation();var q=a.getScale();var r=a.getText();var s=a.getTextAlign();var t=a.getTextBaseline();this.textState_={font:l!==undefined?l:ol.render.canvas.defaultFont,textAlign:s!==undefined?s:ol.render.canvas.defaultTextAlign,textBaseline:t!==undefined?t:ol.render.canvas.defaultTextBaseline};this.text_=r!==undefined?r:'';this.textOffsetX_=m!==undefined?(this.pixelRatio_*m):0;this.textOffsetY_=n!==undefined?(this.pixelRatio_*n):0;this.textRotateWithView_=o!==undefined?o:false;this.textRotation_=p!==undefined?p:0;this.textScale_=this.pixelRatio_*(q!==undefined?q:1)}};bq.provide('ol.renderer.Layer');bq.require('ol');bq.require('ol.ImageState');bq.require('ol.Observable');bq.require('ol.TileState');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.functions');bq.require('ol.source.State');ol.renderer.Layer=function(a){ol.Observable.call(this);this.layer_=a};ol.inherits(ol.renderer.Layer,ol.Observable);ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=ol.nullFunction;ol.renderer.Layer.prototype.hasFeatureAtCoordinate=ol.functions.FALSE;ol.renderer.Layer.prototype.createLoadedTileFinder=function(d,e,f){return(function(b,c){function callback(a){if(!f[b]){f[b]={}}f[b][a.tileCoord.toString()]=a}return d.forEachLoadedTile(e,b,c,callback)})};ol.renderer.Layer.prototype.getLayer=function(){return this.layer_};ol.renderer.Layer.prototype.handleImageChange_=function(a){var b=(a.target);if(b.getState()===ol.ImageState.LOADED){this.renderIfReadyAndVisible()}};ol.renderer.Layer.prototype.loadImage=function(a){var b=a.getState();if(b!=ol.ImageState.LOADED&&b!=ol.ImageState.ERROR){ol.events.listen(a,ol.events.EventType.CHANGE,this.handleImageChange_,this)}if(b==ol.ImageState.IDLE){a.load();b=a.getState()}return b==ol.ImageState.LOADED};ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var a=this.getLayer();if(a.getVisible()&&a.getSourceState()==ol.source.State.READY){this.changed()}};ol.renderer.Layer.prototype.scheduleExpireCache=function(e,f){if(f.canExpireCache()){var g=function(a,b,c){var d=ol.getUid(a).toString();if(d in c.usedTiles){a.expireCache(c.viewState.projection,c.usedTiles[d])}}.bind(null,f);e.postRenderFunctions.push((g))}};ol.renderer.Layer.prototype.updateLogos=function(a,b){var c=b.getLogo();if(c!==undefined){if(typeof c==='string'){a.logos[c]=''}else if(c){ol.asserts.assert(typeof c.href=='string',44);ol.asserts.assert(typeof c.src=='string',45);a.logos[c.src]=c.href}}};ol.renderer.Layer.prototype.updateUsedTiles=function(a,b,z,c){var d=ol.getUid(b).toString();var e=z.toString();if(d in a){if(e in a[d]){a[d][e].extend(c)}else{a[d][e]=c}}else{a[d]={};a[d][e]=c}};ol.renderer.Layer.prototype.manageTilePyramid=function(a,b,c,d,e,f,g,h,i,j){var k=ol.getUid(b).toString();if(!(k in a.wantedTiles)){a.wantedTiles[k]={}}var l=a.wantedTiles[k];var m=a.tileQueue;var n=c.getMinZoom();var o,tileRange,tileResolution,x,y,z;for(z=n;z<=g;++z){tileRange=c.getTileRangeForExtentAndZ(f,z,tileRange);tileResolution=c.getResolution(z);for(x=tileRange.minX;x<=tileRange.maxX;++x){for(y=tileRange.minY;y<=tileRange.maxY;++y){if(g-z<=h){o=b.getTile(z,x,y,d,e);if(o.getState()==ol.TileState.IDLE){l[o.getKey()]=true;if(!m.isKeyQueued(o.getKey())){m.enqueue([o,k,c.getTileCoordCenter(o.tileCoord),tileResolution])}}if(i!==undefined){i.call(j,o)}}else{b.useTile(z,x,y,e)}}}}};bq.provide('ol.renderer.canvas.Layer');bq.require('ol');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.render.Event');bq.require('ol.render.EventType');bq.require('ol.render.canvas');bq.require('ol.render.canvas.Immediate');bq.require('ol.renderer.Layer');bq.require('ol.transform');ol.renderer.canvas.Layer=function(a){ol.renderer.Layer.call(this,a);this.renderedResolution;this.transform_=ol.transform.create()};ol.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer);ol.renderer.canvas.Layer.prototype.clip=function(a,b,c){var d=b.pixelRatio;var e=b.size[0]*d;var f=b.size[1]*d;var g=b.viewState.rotation;var h=ol.extent.getTopLeft((c));var i=ol.extent.getTopRight((c));var j=ol.extent.getBottomRight((c));var k=ol.extent.getBottomLeft((c));ol.transform.apply(b.coordinateToPixelTransform,h);ol.transform.apply(b.coordinateToPixelTransform,i);ol.transform.apply(b.coordinateToPixelTransform,j);ol.transform.apply(b.coordinateToPixelTransform,k);a.save();ol.render.canvas.rotateAtOffset(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(i[0]*d,i[1]*d);a.lineTo(j[0]*d,j[1]*d);a.lineTo(k[0]*d,k[1]*d);a.clip();ol.render.canvas.rotateAtOffset(a,g,e/2,f/2)};ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(a,b,c,d){var e=this.getLayer();if(e.hasListener(a)){var f=c.size[0]*c.pixelRatio;var g=c.size[1]*c.pixelRatio;var h=c.viewState.rotation;ol.render.canvas.rotateAtOffset(b,-h,f/2,g/2);var i=d!==undefined?d:this.getTransform(c,0);var j=new ol.render.canvas.Immediate(b,c.pixelRatio,c.extent,i,c.viewState.rotation);var k=new ol.render.Event(a,j,c,b,null);e.dispatchEvent(k);ol.render.canvas.rotateAtOffset(b,h,f/2,g/2)}};ol.renderer.canvas.Layer.prototype.forEachLayerAtCoordinate=function(a,b,c,d){var e=this.forEachFeatureAtCoordinate(a,b,0,ol.functions.TRUE,this);if(e){return c.call(d,this.getLayer(),null)}else{return undefined}};ol.renderer.canvas.Layer.prototype.postCompose=function(a,b,c,d){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a,b,d)};ol.renderer.canvas.Layer.prototype.preCompose=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a,b,c)};ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.RENDER,a,b,c)};ol.renderer.canvas.Layer.prototype.getTransform=function(a,b){var c=a.viewState;var d=a.pixelRatio;var e=d*a.size[0]/2;var f=d*a.size[1]/2;var g=d/c.resolution;var h=-g;var i=-c.rotation;var j=-c.center[0]+b;var k=-c.center[1];return ol.transform.compose(this.transform_,e,f,g,h,i,j,k)};ol.renderer.canvas.Layer.prototype.composeFrame=function(a,b,c){};ol.renderer.canvas.Layer.prototype.prepareFrame=function(a,b){};bq.provide('ol.renderer.canvas.IntermediateCanvas');bq.require('ol');bq.require('ol.coordinate');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.renderer.canvas.Layer');bq.require('ol.transform');ol.renderer.canvas.IntermediateCanvas=function(a){ol.renderer.canvas.Layer.call(this,a);this.coordinateToCanvasPixelTransform=ol.transform.create();this.hitCanvasContext_=null};ol.inherits(ol.renderer.canvas.IntermediateCanvas,ol.renderer.canvas.Layer);ol.renderer.canvas.IntermediateCanvas.prototype.composeFrame=function(a,b,c){this.preCompose(c,a);var d=this.getImage();if(d){var e=b.extent;var f=e!==undefined&&!ol.extent.containsExtent(e,a.extent)&&ol.extent.intersects(e,a.extent);if(f){this.clip(c,a,(e))}var g=this.getImageTransform();var h=c.globalAlpha;c.globalAlpha=b.opacity;var i=g[4];var j=g[5];var k=d.width*g[0];var l=d.height*g[3];c.drawImage(d,0,0,+d.width,+d.height,Math.round(i),Math.round(j),Math.round(k),Math.round(l));c.globalAlpha=h;if(f){c.restore()}}this.postCompose(c,a,b)};ol.renderer.canvas.IntermediateCanvas.prototype.getImage=function(){};ol.renderer.canvas.IntermediateCanvas.prototype.getImageTransform=function(){};ol.renderer.canvas.IntermediateCanvas.prototype.forEachFeatureAtCoordinate=function(b,c,d,e,f){var g=this.getLayer();var h=g.getSource();var i=c.viewState.resolution;var j=c.viewState.rotation;var k=c.skippedFeatureUids;return h.forEachFeatureAtCoordinate(b,i,j,d,k,function(a){return e.call(f,a,g)})};ol.renderer.canvas.IntermediateCanvas.prototype.forEachLayerAtCoordinate=function(a,b,c,d){if(!this.getImage()){return undefined}if(this.getLayer().getSource().forEachFeatureAtCoordinate!==ol.nullFunction){return ol.renderer.canvas.Layer.prototype.forEachLayerAtCoordinate.apply(this,arguments)}else{var e=ol.transform.apply(this.coordinateToCanvasPixelTransform,a.slice());ol.coordinate.scale(e,b.viewState.resolution/this.renderedResolution);if(!this.hitCanvasContext_){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.getImage(),e[0],e[1],1,1,0,0,1,1);var f=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(f[3]>0){return c.call(d,this.getLayer(),f)}else{return undefined}}};bq.provide('ol.renderer.canvas.ImageLayer');bq.require('ol');bq.require('ol.ImageCanvas');bq.require('ol.LayerType');bq.require('ol.ViewHint');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.layer.VectorRenderType');bq.require('ol.obj');bq.require('ol.plugins');bq.require('ol.renderer.Type');bq.require('ol.renderer.canvas.IntermediateCanvas');bq.require('ol.transform');ol.renderer.canvas.ImageLayer=function(a){ol.renderer.canvas.IntermediateCanvas.call(this,a);this.image_=null;this.imageTransform_=ol.transform.create();this.skippedFeatures_=[];this.vectorRenderer_=null};ol.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.IntermediateCanvas);ol.renderer.canvas.ImageLayer['handles']=function(a,b){return a===ol.renderer.Type.CANVAS&&(b.getType()===ol.LayerType.IMAGE||b.getType()===ol.LayerType.VECTOR&&(b).getRenderMode()===ol.layer.VectorRenderType.IMAGE)};ol.renderer.canvas.ImageLayer['create']=function(a,b){var c=new ol.renderer.canvas.ImageLayer((b));if(b.getType()===ol.LayerType.VECTOR){var d=ol.plugins.getLayerRendererPlugins();for(var i=0,ii=d.length;i<ii;++i){var e=(d[i]);if(e!==ol.renderer.canvas.ImageLayer&&e['handles'](ol.renderer.Type.CANVAS,b)){c.setVectorRenderer(e['create'](a,b))}}}return c};ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return!this.image_?null:this.image_.getImage()};ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_};ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(a,b){var c=a.pixelRatio;var d=a.size;var e=a.viewState;var f=e.center;var g=e.resolution;var h;var i=(this.getLayer());var j=i.getSource();var k=a.viewHints;var l=a.extent;if(b.extent!==undefined){l=ol.extent.getIntersection(l,b.extent)}if(!k[ol.ViewHint.ANIMATING]&&!k[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(l)){var m=e.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var n=j.getProjection();if(n){m=n}}var o=this.vectorRenderer_;if(o){var p=o.context;var q=(ol.obj.assign({},a,{size:[ol.extent.getWidth(l)/g,ol.extent.getHeight(l)/g],viewState:(ol.obj.assign({},a.viewState,{rotation:0}))}));var r=Object.keys(q.skippedFeatureUids).sort();if(o.prepareFrame(q,b)&&(o.replayGroupChanged||!ol.array.equals(r,this.skippedFeatures_))){p.canvas.width=q.size[0]*c;p.canvas.height=q.size[1]*c;o.composeFrame(q,b,p);this.image_=new ol.ImageCanvas(l,g,c,p.canvas);this.skippedFeatures_=r}}else{h=j.getImage(l,g,c,m);if(h){var s=this.loadImage(h);if(s){this.image_=h}}}}if(this.image_){h=this.image_;var t=h.getExtent();var u=h.getResolution();var v=h.getPixelRatio();var w=c*u/(g*v);var x=ol.transform.compose(this.imageTransform_,c*d[0]/2,c*d[1]/2,w,w,0,v*(t[0]-f[0])/u,v*(f[1]-t[3])/u);ol.transform.compose(this.coordinateToCanvasPixelTransform,c*d[0]/2-x[4],c*d[1]/2-x[5],c/g,-c/g,0,-f[0],-f[1]);this.updateLogos(a,j);this.renderedResolution=u*c/v}return!!this.image_};ol.renderer.canvas.ImageLayer.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e){if(this.vectorRenderer_){return this.vectorRenderer_.forEachFeatureAtCoordinate(a,b,c,d,e)}else{return ol.renderer.canvas.IntermediateCanvas.prototype.forEachFeatureAtCoordinate.call(this,a,b,c,d,e)}};ol.renderer.canvas.ImageLayer.prototype.setVectorRenderer=function(a){this.vectorRenderer_=a};bq.provide('ol.style.IconImageCache');bq.require('ol.color');ol.style.IconImageCache=function(){this.cache_={};this.cacheSize_=0;this.maxCacheSize_=32};ol.style.IconImageCache.getKey=function(a,b,c){var d=c?ol.color.asString(c):'null';return b+':'+a+':'+d};ol.style.IconImageCache.prototype.clear=function(){this.cache_={};this.cacheSize_=0};ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var i=0;var a,iconImage;for(a in this.cache_){iconImage=this.cache_[a];if((i++&3)===0&&!iconImage.hasListener()){delete this.cache_[a];--this.cacheSize_}}}};ol.style.IconImageCache.prototype.get=function(a,b,c){var d=ol.style.IconImageCache.getKey(a,b,c);return d in this.cache_?this.cache_[d]:null};ol.style.IconImageCache.prototype.set=function(a,b,c,d){var e=ol.style.IconImageCache.getKey(a,b,c);this.cache_[e]=d;++this.cacheSize_};ol.style.IconImageCache.prototype.setSize=function(a){this.maxCacheSize_=a;this.expire()};bq.provide('ol.style');bq.require('ol.style.IconImageCache');ol.style.iconImageCache=new ol.style.IconImageCache();bq.provide('ol.renderer.Map');bq.require('ol');bq.require('ol.Disposable');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.layer.Layer');bq.require('ol.plugins');bq.require('ol.style');bq.require('ol.transform');ol.renderer.Map=function(a,b){ol.Disposable.call(this);this.map_=b;this.layerRenderers_={};this.layerRendererListeners_={}};ol.inherits(ol.renderer.Map,ol.Disposable);ol.renderer.Map.prototype.calculateMatrices2D=function(a){var b=a.viewState;var c=a.coordinateToPixelTransform;var d=a.pixelToCoordinateTransform;ol.transform.compose(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);ol.transform.invert(ol.transform.setFromArray(d,c))};ol.renderer.Map.prototype.removeLayerRenderers=function(){for(var a in this.layerRenderers_){this.removeLayerRendererByKey_(a).dispose()}};ol.renderer.Map.expireIconCache_=function(a,b){var c=ol.style.iconImageCache;c.expire()};ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(e,f,g,h,j,k,l){var m;var n=f.viewState;var o=n.resolution;function forEachFeatureAtCoordinate(a,b){var c=ol.getUid(a).toString();var d=f.layerStates[ol.getUid(b)].managed;if(!(c in f.skippedFeatureUids&&!d)){return h.call(j,a,d?b:null)}}var p=n.projection;var q=e;if(p.canWrapX()){var r=p.getExtent();var s=ol.extent.getWidth(r);var x=e[0];if(x<r[0]||x>r[2]){var t=Math.ceil((r[0]-x)/s);q=[x+s*t,e[1]]}}var u=f.layerStatesArray;var v=u.length;var i;for(i=v-1;i>=0;--i){var w=u[i];var y=w.layer;if(ol.layer.Layer.visibleAtResolution(w,o)&&k.call(l,y)){var z=this.getLayerRenderer(y);if(y.getSource()){m=z.forEachFeatureAtCoordinate(y.getSource().getWrapX()?q:e,f,g,forEachFeatureAtCoordinate,j)}if(m){return m}}}return undefined};ol.renderer.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e,f){};ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(a,b,c,d,e){var f=this.forEachFeatureAtCoordinate(a,b,c,ol.functions.TRUE,this,d,e);return f!==undefined};ol.renderer.Map.prototype.getLayerRenderer=function(a){var b=ol.getUid(a).toString();if(b in this.layerRenderers_){return this.layerRenderers_[b]}else{var c=ol.plugins.getLayerRendererPlugins();var d;var e=this.getType();for(var i=0,ii=c.length;i<ii;++i){var f=c[i];if(f['handles'](e,a)){d=f['create'](this,a);break}}if(d){this.layerRenderers_[b]=d;this.layerRendererListeners_[b]=ol.events.listen(d,ol.events.EventType.CHANGE,this.handleLayerRendererChange_,this)}else{throw new Error('Unable to create renderer for layer: '+a.getType());}return d}};ol.renderer.Map.prototype.getLayerRendererByKey=function(a){return this.layerRenderers_[a]};ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_};ol.renderer.Map.prototype.getMap=function(){return this.map_};ol.renderer.Map.prototype.getType=function(){};ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()};ol.renderer.Map.prototype.removeLayerRendererByKey_=function(a){var b=this.layerRenderers_[a];delete this.layerRenderers_[a];ol.events.unlistenByKey(this.layerRendererListeners_[a]);delete this.layerRendererListeners_[a];return b};ol.renderer.Map.prototype.renderFrame=ol.nullFunction;ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(a,b){var c;for(c in this.layerRenderers_){if(!b||!(c in b.layerStates)){this.removeLayerRendererByKey_(c).dispose()}}};ol.renderer.Map.prototype.scheduleExpireIconCache=function(a){a.postRenderFunctions.push((ol.renderer.Map.expireIconCache_))};ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(a){var b;for(b in this.layerRenderers_){if(!(b in a.layerStates)){a.postRenderFunctions.push((this.removeUnusedLayerRenderers_.bind(this)));return}}};ol.renderer.Map.sortByZIndex=function(a,b){return a.zIndex-b.zIndex};bq.provide('ol.renderer.canvas.Map');bq.require('ol.transform');bq.require('ol');bq.require('ol.array');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.layer.Layer');bq.require('ol.render.Event');bq.require('ol.render.EventType');bq.require('ol.render.canvas');bq.require('ol.render.canvas.Immediate');bq.require('ol.renderer.Map');bq.require('ol.renderer.Type');bq.require('ol.source.State');ol.renderer.canvas.Map=function(a,b){ol.renderer.Map.call(this,a,b);this.context_=ol.dom.createCanvasContext2D();this.canvas_=this.context_.canvas;this.canvas_.style.width='100%';this.canvas_.style.height='100%';this.canvas_.style.display='block';this.canvas_.className=ol.css.CLASS_UNSELECTABLE;a.insertBefore(this.canvas_,a.childNodes[0]||null);this.renderedVisible_=true;this.transform_=ol.transform.create()};ol.inherits(ol.renderer.canvas.Map,ol.renderer.Map);ol.renderer.canvas.Map['handles']=function(a){return a===ol.renderer.Type.CANVAS};ol.renderer.canvas.Map['create']=function(a,b){return new ol.renderer.canvas.Map(a,b)};ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(a,b){var c=this.getMap();var d=this.context_;if(c.hasListener(a)){var e=b.extent;var f=b.pixelRatio;var g=b.viewState;var h=g.rotation;var i=this.getTransform(b);var j=new ol.render.canvas.Immediate(d,f,e,i,h);var k=new ol.render.Event(a,j,b,d,null);c.dispatchEvent(k)}};ol.renderer.canvas.Map.prototype.getTransform=function(a){var b=a.viewState;var c=this.canvas_.width/2;var d=this.canvas_.height/2;var e=a.pixelRatio/b.resolution;var f=-e;var g=-b.rotation;var h=-b.center[0];var i=-b.center[1];return ol.transform.compose(this.transform_,c,d,e,f,g,h,i)};ol.renderer.canvas.Map.prototype.getType=function(){return ol.renderer.Type.CANVAS};ol.renderer.canvas.Map.prototype.renderFrame=function(a){if(!a){if(this.renderedVisible_){this.canvas_.style.display='none';this.renderedVisible_=false}return}var b=this.context_;var c=a.pixelRatio;var d=Math.round(a.size[0]*c);var e=Math.round(a.size[1]*c);if(this.canvas_.width!=d||this.canvas_.height!=e){this.canvas_.width=d;this.canvas_.height=e}else{b.clearRect(0,0,d,e)}var f=a.viewState.rotation;this.calculateMatrices2D(a);this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a);var g=a.layerStatesArray;ol.array.stableSort(g,ol.renderer.Map.sortByZIndex);if(f){b.save();ol.render.canvas.rotateAtOffset(b,f,d/2,e/2)}var h=a.viewState.resolution;var i,ii,layer,layerRenderer,layerState;for(i=0,ii=g.length;i<ii;++i){layerState=g[i];layer=layerState.layer;layerRenderer=(this.getLayerRenderer(layer));if(!ol.layer.Layer.visibleAtResolution(layerState,h)||layerState.sourceState!=ol.source.State.READY){continue}if(layerRenderer.prepareFrame(a,layerState)){layerRenderer.composeFrame(a,layerState,b)}}if(f){b.restore()}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a);if(!this.renderedVisible_){this.canvas_.style.display='';this.renderedVisible_=true}this.scheduleRemoveUnusedLayerRenderers(a);this.scheduleExpireIconCache(a)};ol.renderer.canvas.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e,f){var g;var h=b.viewState;var j=h.resolution;var k=b.layerStatesArray;var l=k.length;var m=ol.transform.apply(b.pixelToCoordinateTransform,a.slice());var i;for(i=l-1;i>=0;--i){var n=k[i];var o=n.layer;if(ol.layer.Layer.visibleAtResolution(n,j)&&e.call(f,o)){var p=(this.getLayerRenderer(o));g=p.forEachLayerAtCoordinate(m,b,c,d);if(g){return g}}}return undefined};bq.provide('ol.renderer.canvas.TileLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.TileRange');bq.require('ol.TileState');bq.require('ol.ViewHint');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.renderer.Type');bq.require('ol.renderer.canvas.IntermediateCanvas');bq.require('ol.transform');ol.renderer.canvas.TileLayer=function(a){ol.renderer.canvas.IntermediateCanvas.call(this,a);this.context=this.context===null?null:ol.dom.createCanvasContext2D();this.oversampling_;this.renderedExtent_=null;this.renderedRevision;this.renderedTiles=[];this.tmpExtent=ol.extent.createEmpty();this.tmpTileRange_=new ol.TileRange(0,0,0,0);this.imageTransform_=ol.transform.create();this.zDirection=0};ol.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.IntermediateCanvas);ol.renderer.canvas.TileLayer['handles']=function(a,b){return a===ol.renderer.Type.CANVAS&&b.getType()===ol.LayerType.TILE};ol.renderer.canvas.TileLayer['create']=function(a,b){return new ol.renderer.canvas.TileLayer((b))};ol.renderer.canvas.TileLayer.prototype.isDrawableTile_=function(a){var b=a.getState();var c=this.getLayer().getUseInterimTilesOnError();return b==ol.TileState.LOADED||b==ol.TileState.EMPTY||b==ol.TileState.ERROR&&!c};ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(c,d){var e=c.pixelRatio;var f=c.size;var g=c.viewState;var j=g.projection;var k=g.resolution;var l=g.center;var m=this.getLayer();var n=(m.getSource());var o=n.getRevision();var p=n.getTileGridForProjection(j);var z=p.getZForResolution(k,this.zDirection);var q=p.getResolution(z);var r=Math.round(k/q)||1;var s=c.extent;if(d.extent!==undefined){s=ol.extent.getIntersection(s,d.extent)}if(ol.extent.isEmpty(s)){return false}var t=p.getTileRangeForExtentAndZ(s,z);var u=p.getTileRangeExtent(z,t);var v=n.getTilePixelRatio(e);var A={};A[z]={};var B=this.createLoadedTileFinder(n,j,A);var C=this.tmpExtent;var D=this.tmpTileRange_;var E=false;var F,x,y;for(x=t.minX;x<=t.maxX;++x){for(y=t.minY;y<=t.maxY;++y){F=n.getTile(z,x,y,e,j);if(F.getState()==ol.TileState.ERROR){if(!m.getUseInterimTilesOnError()){F.setState(ol.TileState.LOADED)}else if(m.getPreload()>0){E=true}}if(!this.isDrawableTile_(F)){F=F.getInterimTile()}if(this.isDrawableTile_(F)){var G=ol.getUid(this);if(F.getState()==ol.TileState.LOADED){A[z][F.tileCoord.toString()]=F;var H=F.inTransition(G);if(!E&&(H||this.renderedTiles.indexOf(F)===-1)){E=true}}if(F.getAlpha(G,c.time)===1){continue}}var I=p.getTileCoordChildTileRange(F.tileCoord,D,C);var J=false;if(I){J=B(z+1,I)}if(!J){p.forEachTileCoordParentTileRange(F.tileCoord,B,null,D,C)}}}var K=q*e/v*r;var L=c.viewHints;var M=L[ol.ViewHint.ANIMATING]||L[ol.ViewHint.INTERACTING];if(!(this.renderedResolution&&Date.now()-c.time>16&&M)&&(E||!(this.renderedExtent_&&ol.extent.containsExtent(this.renderedExtent_,s))||this.renderedRevision!=o||r!=this.oversampling_||!M&&K!=this.renderedResolution)){var N=this.context;if(N){var O=n.getTilePixelSize(z,e,j);var P=Math.round(t.getWidth()*O[0]/r);var Q=Math.round(t.getHeight()*O[1]/r);var R=N.canvas;if(R.width!=P||R.height!=Q){this.oversampling_=r;R.width=P;R.height=Q}else{if(this.renderedExtent_&&!ol.extent.equals(u,this.renderedExtent_)){N.clearRect(0,0,P,Q)}r=this.oversampling_}}this.renderedTiles.length=0;var S=Object.keys(A).map(Number);S.sort(function(a,b){if(a===z){return 1}else if(b===z){return-1}else{return a>b?1:a<b?-1:0}});var T,currentScale,currentTilePixelSize,currentZ,i,ii;var U,tileGutter,tilesToDraw,w,h;for(i=0,ii=S.length;i<ii;++i){currentZ=S[i];currentTilePixelSize=n.getTilePixelSize(currentZ,e,j);T=p.getResolution(currentZ);currentScale=T/q;tileGutter=v*n.getGutter(j);tilesToDraw=A[currentZ];for(var V in tilesToDraw){F=tilesToDraw[V];U=p.getTileCoordExtent(F.getTileCoord(),C);x=(U[0]-u[0])/q*v/r;y=(u[3]-U[3])/q*v/r;w=currentTilePixelSize[0]*currentScale/r;h=currentTilePixelSize[1]*currentScale/r;this.drawTileImage(F,c,d,x,y,w,h,tileGutter,z===currentZ);this.renderedTiles.push(F)}}this.renderedRevision=o;this.renderedResolution=q*e/v*r;this.renderedExtent_=u}var W=this.renderedResolution/k;var X=ol.transform.compose(this.imageTransform_,e*f[0]/2,e*f[1]/2,W,W,0,(this.renderedExtent_[0]-l[0])/this.renderedResolution*e,(l[1]-this.renderedExtent_[3])/this.renderedResolution*e);ol.transform.compose(this.coordinateToCanvasPixelTransform,e*f[0]/2-X[4],e*f[1]/2-X[5],e/k,-e/k,0,-l[0],-l[1]);this.updateUsedTiles(c.usedTiles,n,z,t);this.manageTilePyramid(c,n,p,e,j,s,z,m.getPreload());this.scheduleExpireCache(c,n);this.updateLogos(c,n);return this.renderedTiles.length>0};ol.renderer.canvas.TileLayer.prototype.drawTileImage=function(e,f,g,x,y,w,h,i,j){var k=e.getImage(this.getLayer());if(!k){return}if(k.done){var l=this;k.done(function(a){k=a;var b=ol.getUid(l);var c=j?e.getAlpha(b,f.time):1;if(c===1&&!l.getLayer().getSource().getOpaque(f.viewState.projection)){l.context.clearRect(x,y,w,h)}var d=c!==l.context.globalAlpha;if(d){l.context.save();l.context.globalAlpha=c}l.context.drawImage(k,i,i,k.width-2*i,k.height-2*i,x,y,w,h);if(d){l.context.restore()}if(c!==1){f.animate=true}else if(j){e.endTransition(b)}});return}var m=ol.getUid(this);var n=j?e.getAlpha(m,f.time):1;if(n===1&&!this.getLayer().getSource().getOpaque(f.viewState.projection)){this.context.clearRect(x,y,w,h)}var o=n!==this.context.globalAlpha;if(o){this.context.save();this.context.globalAlpha=n}this.context.drawImage(k,i,i,k.width-2*i,k.height-2*i,x,y,w,h);if(o){this.context.restore()}if(n!==1){f.animate=true}else if(j){e.endTransition(m)}};ol.renderer.canvas.TileLayer.prototype.getImage=function(){var a=this.context;return a?a.canvas:null};ol.renderer.canvas.TileLayer.prototype.getLayer;ol.renderer.canvas.TileLayer.prototype.getImageTransform=function(){return this.imageTransform_};bq.provide('ol.ext.rbush');ol.ext.rbush=function(){};(function(){(function(h){'use strict';var l=quickselect;var o=quickselect;function quickselect(a,k,b,c,d){quickselectStep(a,k,b||0,c||(a.length-1),d||defaultCompare)}function quickselectStep(a,k,b,c,d){while(c>b){if(c-b>600){var n=c-b+1;var m=k-b+1;var z=Math.log(n);var s=0.5*Math.exp(2*z/3);var e=0.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var f=Math.max(b,Math.floor(k-m*s/n+e));var g=Math.min(c,Math.floor(k+(n-m)*s/n+e));quickselectStep(a,k,f,g,d)}var t=a[k];var i=b;var j=c;swap(a,b,k);if(d(a[c],t)>0)swap(a,b,c);while(i<j){swap(a,i,j);i++;j--;while(d(a[i],t)<0)i++;while(d(a[j],t)>0)j--}if(d(a[b],t)===0)swap(a,b,j);else{j++;swap(a,j,c)}if(j<=k)b=j+1;if(k<=j)c=j-1}}function swap(a,i,j){var b=a[i];a[i]=a[j];a[j]=b}function defaultCompare(a,b){return a<b?-1:a>b?1:0}l.default=o;var q=rbush;function rbush(a,b){if(!(this instanceof rbush))return new rbush(a,b);this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));if(b){this._initFormat(b)}this.clear()}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,result=[],toBBox=this.toBBox;if(!intersects(a,b))return result;var c=[],i,len,child,childBBox;while(b){for(i=0,len=b.children.length;i<len;i++){child=b.children[i];childBBox=b.leaf?toBBox(child):child;if(intersects(a,childBBox)){if(b.leaf)result.push(child);else if(contains(a,childBBox))this._all(child,result);else c.push(child)}}b=c.pop()}return result},collides:function(a){var b=this.data,toBBox=this.toBBox;if(!intersects(a,b))return false;var c=[],i,len,child,childBBox;while(b){for(i=0,len=b.children.length;i<len;i++){child=b.children[i];childBBox=b.leaf?toBBox(child):child;if(intersects(a,childBBox)){if(b.leaf||contains(a,childBBox))return true;c.push(child)}}b=c.pop()}return false},load:function(a){if(!(a&&a.length))return this;if(a.length<this._minEntries){for(var i=0,len=a.length;i<len;i++){this.insert(a[i])}return this}var b=this._build(a.slice(),0,a.length-1,0);if(!this.data.children.length){this.data=b}else if(this.data.height===b.height){this._splitRoot(this.data,b)}else{if(this.data.height<b.height){var c=this.data;this.data=b;b=c}this._insert(b,this.data.height-b.height-1,true)}return this},insert:function(a){if(a)this._insert(a,this.data.height-1);return this},clear:function(){this.data=createNode([]);return this},remove:function(a,b){if(!a)return this;var c=this.data,bbox=this.toBBox(a),path=[],indexes=[],i,parent,index,goingUp;while(c||path.length){if(!c){c=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(c.leaf){index=findItem(a,c.children,b);if(index!==-1){c.children.splice(index,1);path.push(c);this._condense(path);return this}}if(!goingUp&&!c.leaf&&contains(c,bbox)){path.push(c);indexes.push(i);i=0;parent=c;c=c.children[0]}else if(parent){i++;c=parent.children[i];goingUp=false}else c=null}return this},toBBox:function(a){return a},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){var c=[];while(a){if(a.leaf)b.push.apply(b,a.children);else c.push.apply(c,a.children);a=c.pop()}return b},_build:function(a,b,c,d){var N=c-b+1,M=this._maxEntries,node;if(N<=M){node=createNode(a.slice(b,c+1));calcBBox(node,this.toBBox);return node}if(!d){d=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,d-1))}node=createNode([]);node.leaf=false;node.height=d;var e=Math.ceil(N/M),N1=e*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(a,b,c,N1,this.compareMinX);for(i=b;i<=c;i+=N1){right2=Math.min(i+N1-1,c);multiSelect(a,i,right2,e,this.compareMinY);for(j=i;j<=right2;j+=e){right3=Math.min(j+e-1,right2);node.children.push(this._build(a,j,right3,d-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function(a,b,c,d){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){d.push(b);if(b.leaf||d.length-1===c)break;minArea=minEnlargement=Infinity;for(i=0,len=b.children.length;i<len;i++){child=b.children[i];area=bboxArea(child);enlargement=enlargedArea(a,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}b=targetNode||b.children[0]}return b},_insert:function(a,b,c){var d=this.toBBox,bbox=c?a:d(a),insertPath=[];var e=this._chooseSubtree(bbox,this.data,b,insertPath);e.children.push(a);extend(e,bbox);while(b>=0){if(insertPath[b].children.length>this._maxEntries){this._split(insertPath,b);b--}else break}this._adjustParentBBoxes(bbox,insertPath,b)},_split:function(a,b){var c=a[b],M=c.children.length,m=this._minEntries;this._chooseSplitAxis(c,m,M);var d=this._chooseSplitIndex(c,m,M);var e=createNode(c.children.splice(d,c.children.length-d));e.height=c.height;e.leaf=c.leaf;calcBBox(c,this.toBBox);calcBBox(e,this.toBBox);if(b)a[b-1].children.push(e);else this._splitRoot(c,e)},_splitRoot:function(a,b){this.data=createNode([a,b]);this.data.height=a.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(a,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(a,0,i,this.toBBox);bbox2=distBBox(a,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index},_chooseSplitAxis:function(a,m,M){var b=a.leaf?this.compareMinX:compareNodeMinX,compareMinY=a.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(a,m,M,b),yMargin=this._allDistMargin(a,m,M,compareMinY);if(xMargin<yMargin)a.children.sort(b)},_allDistMargin:function(a,m,M,b){a.children.sort(b);var c=this.toBBox,leftBBox=distBBox(a,0,m,c),rightBBox=distBBox(a,M-m,M,c),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=a.children[i];extend(leftBBox,a.leaf?c(child):child);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=a.children[i];extend(rightBBox,a.leaf?c(child):child);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function(a,b,c){for(var i=c;i>=0;i--){extend(b[i],a)}},_condense:function(a){for(var i=a.length-1,siblings;i>=0;i--){if(a[i].children.length===0){if(i>0){siblings=a[i-1].children;siblings.splice(siblings.indexOf(a[i]),1)}else this.clear()}else calcBBox(a[i],this.toBBox)}},_initFormat:function(a){var b=['return a',' - b',';'];this.compareMinX=new Function('a','b',b.join(a[0]));this.compareMinY=new Function('a','b',b.join(a[1]));this.toBBox=new Function('a','return {minX: a'+a[0]+', minY: a'+a[1]+', maxX: a'+a[2]+', maxY: a'+a[3]+'};')}};function findItem(a,b,c){if(!c)return b.indexOf(a);for(var i=0;i<b.length;i++){if(c(a,b[i]))return i}return-1}function calcBBox(a,b){distBBox(a,0,a.children.length,b,a)}function distBBox(a,k,p,b,c){if(!c)c=createNode(null);c.minX=Infinity;c.minY=Infinity;c.maxX=-Infinity;c.maxY=-Infinity;for(var i=k,child;i<p;i++){child=a.children[i];extend(c,a.leaf?b(child):child)}return c}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return(a.maxX-a.minX)+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var c=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-c)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(a){return{children:a,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(a,b,c,n,d){var e=[b,c],mid;while(e.length){c=e.pop();b=e.pop();if(c-b<=n)continue;mid=b+Math.ceil((c-b)/n/2)*n;l(a,mid,b,c,d);e.push(b,mid,mid,c)}}h['default']=q}((this.rbush=this.rbush||{})))}).call(ol.ext);ol.ext.rbush=ol.ext.rbush.default;bq.provide('ol.render.ReplayGroup');ol.render.ReplayGroup=function(){};ol.render.ReplayGroup.prototype.getReplay=function(a,b){};ol.render.ReplayGroup.prototype.isEmpty=function(){};bq.provide('ol.render.ReplayType');ol.render.ReplayType={CIRCLE:'Circle',DEFAULT:'Default',IMAGE:'Image',LINE_STRING:'LineString',POLYGON:'Polygon',TEXT:'Text'};bq.provide('ol.geom.flat.length');ol.geom.flat.length.lineString=function(a,b,c,d){var e=a[b];var f=a[b+1];var g=0;var i;for(i=b+d;i<c;i+=d){var h=a[i];var j=a[i+1];g+=Math.sqrt((h-e)*(h-e)+(j-f)*(j-f));e=h;f=j}return g};ol.geom.flat.length.linearRing=function(a,b,c,d){var e=ol.geom.flat.length.lineString(a,b,c,d);var f=a[c-d]-a[b];var g=a[c-d+1]-a[b+1];e+=Math.sqrt(f*f+g*g);return e};bq.provide('ol.geom.flat.textpath');bq.require('ol.math');ol.geom.flat.textpath.lineString=function(a,b,c,d,e,f,g,h){var j=[];var k=a[b]>a[c-d];var l=e.length;var m=a[b];var n=a[b+1];b+=d;var o=a[b];var p=a[b+1];var q=0;var r=Math.sqrt(Math.pow(o-m,2)+Math.pow(p-n,2));var s='';var t=0;var u,index,previousAngle;for(var i=0;i<l;++i){index=k?l-i-1:i;var v=e.charAt(index);s=k?v+s:s+v;var w=f(s)-t;t+=w;var z=g+w/2;while(b<c-d&&q+r<z){m=o;n=p;b+=d;o=a[b];p=a[b+1];q+=r;r=Math.sqrt(Math.pow(o-m,2)+Math.pow(p-n,2))}var A=z-q;var B=Math.atan2(p-n,o-m);if(k){B+=B>0?-Math.PI:Math.PI}if(previousAngle!==undefined){var C=B-previousAngle;C+=(C>Math.PI)?-2*Math.PI:(C<-Math.PI)?2*Math.PI:0;if(Math.abs(C)>h){return null}}var D=A/r;var x=ol.math.lerp(m,o,D);var y=ol.math.lerp(n,p,D);if(previousAngle==B){if(k){u[0]=x;u[1]=y;u[2]=w/2}u[4]=s}else{s=v;t=w;u=[x,y,w/2,B,s];if(k){j.unshift(u)}else{j.push(u)}previousAngle=B}g+=w}return j};bq.provide('ol.render.canvas.Instruction');ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};bq.provide('ol.render.replay');bq.require('ol.render.ReplayType');ol.render.replay.ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.CIRCLE,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT,ol.render.ReplayType.DEFAULT];ol.render.replay.TEXT_ALIGN={};ol.render.replay.TEXT_ALIGN['left']=0;ol.render.replay.TEXT_ALIGN['end']=0;ol.render.replay.TEXT_ALIGN['center']=0.5;ol.render.replay.TEXT_ALIGN['right']=1;ol.render.replay.TEXT_ALIGN['start']=1;ol.render.replay.TEXT_ALIGN['top']=0;ol.render.replay.TEXT_ALIGN['middle']=0.5;ol.render.replay.TEXT_ALIGN['hanging']=0.2;ol.render.replay.TEXT_ALIGN['alphabetic']=0.8;ol.render.replay.TEXT_ALIGN['ideographic']=0.8;ol.render.replay.TEXT_ALIGN['bottom']=1;bq.provide('ol.render.canvas.Replay');bq.require('ol');bq.require('ol.array');bq.require('ol.colorlike');bq.require('ol.extent');bq.require('ol.extent.Relationship');bq.require('ol.geom.GeometryType');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.length');bq.require('ol.geom.flat.textpath');bq.require('ol.geom.flat.transform');bq.require('ol.has');bq.require('ol.obj');bq.require('ol.render.VectorContext');bq.require('ol.render.canvas');bq.require('ol.render.canvas.Instruction');bq.require('ol.render.replay');bq.require('ol.transform');ol.render.canvas.Replay=function(a,b,c,d,e,f){ol.render.VectorContext.call(this);this.declutterTree=f;this.tmpExtent_=ol.extent.createEmpty();this.tolerance=a;this.maxExtent=b;this.overlaps=e;this.pixelRatio=d;this.maxLineWidth=0;this.resolution=c;this.fillOrigin_;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_=null;this.bufferedMaxExtent_=null;this.instructions=[];this.coordinates=[];this.coordinateCache_={};this.renderedTransform_=ol.transform.create();this.hitDetectionInstructions=[];this.pixelCoordinates_=null;this.state=({});this.viewRotation_=0;this.tmpLocalTransform_=ol.transform.create();this.resetTransform_=ol.transform.create()};ol.inherits(ol.render.canvas.Replay,ol.render.VectorContext);ol.render.canvas.Replay.prototype.replayTextBackground_=function(a,b,c,d,e,f,g){a.beginPath();a.moveTo.apply(a,b);a.lineTo.apply(a,c);a.lineTo.apply(a,d);a.lineTo.apply(a,e);a.lineTo.apply(a,b);if(f){this.fillOrigin_=(f[2]);this.fill_(a)}if(g){this.setStrokeStyle_(a,(g));a.stroke()}};ol.render.canvas.Replay.prototype.replayImage_=function(a,x,y,b,c,d,e,f,g,i,j,k,l,m,n,o,p,q){var r=p||q;var s=this.tmpLocalTransform_;c*=l;d*=l;x-=c;y-=d;if(m){x=Math.round(x);y=Math.round(y)}var w=(n+i>b.width)?b.width-i:n;var h=(f+j>b.height)?b.height-j:f;var t=this.tmpExtent_;var u=o[3]+w*l+o[1];var v=o[0]+h*l+o[2];var z=x-o[3];var A=y-o[0];var B;var C;var D;var E;if(r||k!==0){B=[z,A];C=[z+u,A];D=[z+u,A+v];E=[z,A+v]}var F=null;if(k!==0){var G=x+c;var H=y+d;F=ol.transform.compose(s,G,H,1,1,k,-G,-H);ol.extent.createOrUpdateEmpty(t);ol.extent.extendCoordinate(t,ol.transform.apply(s,B));ol.extent.extendCoordinate(t,ol.transform.apply(s,C));ol.extent.extendCoordinate(t,ol.transform.apply(s,D));ol.extent.extendCoordinate(t,ol.transform.apply(s,E))}else{ol.extent.createOrUpdate(z,A,z+u,A+v,t)}var I=a.canvas;var J=t[0]<=I.width&&t[2]>=0&&t[1]<=I.height&&t[3]>=0;if(e){if(!J&&e[4]==1){return}ol.extent.extend(e,t);var K=J?[a,F?F.slice(0):null,g,b,i,j,w,h,x,y,l]:null;if(K&&r){K.push(p,q,B,C,D,E)}e.push(K)}else if(J){if(r){this.replayTextBackground_(a,B,C,D,E,(p),(q))}ol.render.canvas.drawImage(a,F,g,b,i,j,w,h,x,y,l)}};ol.render.canvas.Replay.prototype.applyPixelRatio=function(b){var c=this.pixelRatio;return c==1?b:b.map(function(a){return a*c})};ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(a,b,c,d,e,f){var g=this.coordinates.length;var h=this.getBufferedMaxExtent();if(f){b+=d}var j=[a[b],a[b+1]];var k=[NaN,NaN];var l=true;var i,lastRel,nextRel;for(i=b+d;i<c;i+=d){k[0]=a[i];k[1]=a[i+1];nextRel=ol.extent.coordinateRelationship(h,k);if(nextRel!==lastRel){if(l){this.coordinates[g++]=j[0];this.coordinates[g++]=j[1]}this.coordinates[g++]=k[0];this.coordinates[g++]=k[1];l=false}else if(nextRel===ol.extent.Relationship.INTERSECTING){this.coordinates[g++]=k[0];this.coordinates[g++]=k[1];l=false}else{l=true}j[0]=k[0];j[1]=k[1];lastRel=nextRel}if((e&&l)||i===b+d){this.coordinates[g++]=j[0];this.coordinates[g++]=j[1]}return g};ol.render.canvas.Replay.prototype.drawCustomCoordinates_=function(a,b,c,d,e){for(var i=0,ii=c.length;i<ii;++i){var f=c[i];var g=this.appendFlatCoordinates(a,b,f,d,false,false);e.push(g);b=f}return b};ol.render.canvas.Replay.prototype.drawCustom=function(a,b,c){this.beginGeometry(a,b);var d=a.getType();var e=a.getStride();var f=this.coordinates.length;var g,replayEnd,replayEnds,replayEndss;var h;if(d==ol.geom.GeometryType.MULTI_POLYGON){a=(a);g=a.getOrientedFlatCoordinates();replayEndss=[];var j=a.getEndss();h=0;for(var i=0,ii=j.length;i<ii;++i){var k=[];h=this.drawCustomCoordinates_(g,h,j[i],e,k);replayEndss.push(k)}this.instructions.push([ol.render.canvas.Instruction.CUSTOM,f,replayEndss,a,c,ol.geom.flat.inflate.coordinatesss])}else if(d==ol.geom.GeometryType.POLYGON||d==ol.geom.GeometryType.MULTI_LINE_STRING){replayEnds=[];g=(d==ol.geom.GeometryType.POLYGON)?(a).getOrientedFlatCoordinates():a.getFlatCoordinates();h=this.drawCustomCoordinates_(g,0,(a).getEnds(),e,replayEnds);this.instructions.push([ol.render.canvas.Instruction.CUSTOM,f,replayEnds,a,c,ol.geom.flat.inflate.coordinatess])}else if(d==ol.geom.GeometryType.LINE_STRING||d==ol.geom.GeometryType.MULTI_POINT){g=a.getFlatCoordinates();replayEnd=this.appendFlatCoordinates(g,0,g.length,e,false,false);this.instructions.push([ol.render.canvas.Instruction.CUSTOM,f,replayEnd,a,c,ol.geom.flat.inflate.coordinates])}else if(d==ol.geom.GeometryType.POINT){g=a.getFlatCoordinates();this.coordinates.push(g[0],g[1]);replayEnd=this.coordinates.length;this.instructions.push([ol.render.canvas.Instruction.CUSTOM,f,replayEnd,a,c])}this.endGeometry(a,b)};ol.render.canvas.Replay.prototype.beginGeometry=function(a,b){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,b,0];this.instructions.push(this.beginGeometryInstruction1_);this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,b,0];this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)};ol.render.canvas.Replay.prototype.fill_=function(a){if(this.fillOrigin_){var b=ol.transform.apply(this.renderedTransform_,this.fillOrigin_.slice());a.translate(b[0],b[1]);a.rotate(this.viewRotation_)}a.fill();if(this.fillOrigin_){a.setTransform.apply(a,ol.render.canvas.resetTransform_)}};ol.render.canvas.Replay.prototype.setStrokeStyle_=function(a,b){a.strokeStyle=(b[1]);a.lineWidth=(b[2]);a.lineCap=(b[3]);a.lineJoin=(b[4]);a.miterLimit=(b[5]);if(ol.has.CANVAS_LINE_DASH){a.lineDashOffset=(b[7]);a.setLineDash((b[6]))}};ol.render.canvas.Replay.prototype.renderDeclutter_=function(a,b){if(a&&a.length>5){var c=a[4];if(c==1||c==a.length-5){var d={minX:(a[0]),minY:(a[1]),maxX:(a[2]),maxY:(a[3]),value:b};if(!this.declutterTree.collides(d)){this.declutterTree.insert(d);var e=ol.render.canvas.drawImage;for(var j=5,jj=a.length;j<jj;++j){var f=(a[j]);if(f){if(f.length>11){this.replayTextBackground_(f[0],f[13],f[14],f[15],f[16],f[11],f[12])}e.apply(undefined,f)}}}a.length=5;ol.extent.createOrUpdateEmpty(a)}}};ol.render.canvas.Replay.prototype.replay_=function(a,b,e,f,g,h){var j;if(this.pixelCoordinates_&&ol.array.equals(b,this.renderedTransform_)){j=this.pixelCoordinates_}else{if(!this.pixelCoordinates_){this.pixelCoordinates_=[]}j=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,b,this.pixelCoordinates_);ol.transform.setFromArray(this.renderedTransform_,b)}var k=!ol.obj.isEmpty(e);var i=0;var l=f.length;var d=0;var m;var n,anchorY,prevX,prevY,roundX,roundY,declutterGroup,image;var o=0;var p=0;var q=null;var s=null;var t=this.coordinateCache_;var u=this.viewRotation_;var v=({context:a,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:u});var w=this.instructions!=f||this.overlaps?0:200;while(i<l){var z=f[i];var A=(z[0]);var B,x,y;switch(A){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:B=(z[1]);if((k&&e[ol.getUid(B).toString()])||!B.getGeometry()){i=(z[2])}else if(h!==undefined&&!ol.extent.intersects(h,B.getGeometry().getExtent())){i=(z[2])+1}else{++i}break;case ol.render.canvas.Instruction.BEGIN_PATH:if(o>w){this.fill_(a);o=0}if(p>w){a.stroke();p=0}if(!o&&!p){a.beginPath();prevX=prevY=NaN}++i;break;case ol.render.canvas.Instruction.CIRCLE:d=(z[1]);var C=j[d];var D=j[d+1];var E=j[d+2];var F=j[d+3];var G=E-C;var H=F-D;var r=Math.sqrt(G*G+H*H);a.moveTo(C+r,D);a.arc(C,D,r,0,2*Math.PI,true);++i;break;case ol.render.canvas.Instruction.CLOSE_PATH:a.closePath();++i;break;case ol.render.canvas.Instruction.CUSTOM:d=(z[1]);m=z[2];var I=(z[3]);var J=z[4];var K=z.length==6?z[5]:undefined;v.geometry=I;v.feature=B;if(!(i in t)){t[i]=[]}var L=t[i];if(K){K(j,d,m,2,L)}else{L[0]=j[d];L[1]=j[d+1];L.length=2}J(L,v);++i;break;case ol.render.canvas.Instruction.DRAW_IMAGE:d=(z[1]);m=(z[2]);image=(z[3]);n=(z[4]);anchorY=(z[5]);declutterGroup=g?null:(z[6]);var M=(z[7]);var N=(z[8]);var O=(z[9]);var P=(z[10]);var Q=(z[11]);var R=(z[12]);var S=(z[13]);var T=(z[14]);var U=(z[15]);var V,backgroundFill,backgroundStroke;if(z.length>16){V=(z[16]);backgroundFill=(z[17]);backgroundStroke=(z[18])}else{V=ol.render.canvas.defaultPadding;backgroundFill=backgroundStroke=false}if(Q){R+=u}for(;d<m;d+=2){this.replayImage_(a,j[d],j[d+1],image,n,anchorY,declutterGroup,M,N,O,P,R,S,T,U,V,backgroundFill?(q):null,backgroundStroke?(s):null)}this.renderDeclutter_(declutterGroup,B);++i;break;case ol.render.canvas.Instruction.DRAW_CHARS:var W=(z[1]);var X=(z[2]);var Y=(z[3]);declutterGroup=g?null:(z[4]);var Z=(z[5]);var bt=(z[6]);var bu=(z[7]);var bv=(z[8]);var bw=(z[9]);var bx=(z[10]);var by=(z[11]);var bz=(z[12]);var bA=(z[13]);var bB=(z[14]);var bC=ol.geom.flat.length.lineString(j,W,X,2);var bD=bv(bz);if(Z||bD<=bC){var bE=(this).textStates[bA].textAlign;var bF=(bC-bD)*ol.render.replay.TEXT_ALIGN[bE];var bG=ol.geom.flat.textpath.lineString(j,W,X,2,bz,bv,bF,bu);if(bG){var c,cc,chars,label,part;if(bx){for(c=0,cc=bG.length;c<cc;++c){part=bG[c];chars=(part[4]);label=(this).getImage(chars,bA,'',bx);n=(part[2])+by;anchorY=Y*label.height+(0.5-Y)*2*by-bw;this.replayImage_(a,(part[0]),(part[1]),label,n,anchorY,declutterGroup,label.height,1,0,0,(part[3]),bB,false,label.width,ol.render.canvas.defaultPadding,null,null)}}if(bt){for(c=0,cc=bG.length;c<cc;++c){part=bG[c];chars=(part[4]);label=(this).getImage(chars,bA,bt,'');n=(part[2]);anchorY=Y*label.height-bw;this.replayImage_(a,(part[0]),(part[1]),label,n,anchorY,declutterGroup,label.height,1,0,0,(part[3]),bB,false,label.width,ol.render.canvas.defaultPadding,null,null)}}}}this.renderDeclutter_(declutterGroup,B);++i;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(g!==undefined){B=(z[1]);var bH=g(B);if(bH){return bH}}++i;break;case ol.render.canvas.Instruction.FILL:if(w){o++}else{this.fill_(a)}++i;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:d=(z[1]);m=(z[2]);x=j[d];y=j[d+1];roundX=(x+0.5)|0;roundY=(y+0.5)|0;if(roundX!==prevX||roundY!==prevY){a.moveTo(x,y);prevX=roundX;prevY=roundY}for(d+=2;d<m;d+=2){x=j[d];y=j[d+1];roundX=(x+0.5)|0;roundY=(y+0.5)|0;if(d==m-2||roundX!==prevX||roundY!==prevY){a.lineTo(x,y);prevX=roundX;prevY=roundY}}++i;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:q=z;this.fillOrigin_=z[2];if(o){this.fill_(a);o=0;if(p){a.stroke();p=0}}a.fillStyle=(z[1]);++i;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:s=z;if(p){a.stroke();p=0}this.setStrokeStyle_(a,(z));++i;break;case ol.render.canvas.Instruction.STROKE:if(w){p++}else{a.stroke()}++i;break;default:++i;break}}if(o){this.fill_(a)}if(p){a.stroke()}return undefined};ol.render.canvas.Replay.prototype.replay=function(a,b,c,d){this.viewRotation_=c;this.replay_(a,b,d,this.instructions,undefined,undefined)};ol.render.canvas.Replay.prototype.replayHitDetection=function(a,b,c,d,e,f){this.viewRotation_=c;return this.replay_(a,b,d,this.hitDetectionInstructions,e,f)};ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions=function(){var a=this.hitDetectionInstructions;a.reverse();var i;var n=a.length;var b;var c;var d=-1;for(i=0;i<n;++i){b=a[i];c=(b[0]);if(c==ol.render.canvas.Instruction.END_GEOMETRY){d=i}else if(c==ol.render.canvas.Instruction.BEGIN_GEOMETRY){b[2]=i;ol.array.reverseSubArray(this.hitDetectionInstructions,d,i);d=-1}}};ol.render.canvas.Replay.prototype.setFillStrokeStyle=function(a,b){var c=this.state;if(a){var d=a.getColor();c.fillStyle=ol.colorlike.asColorLike(d?d:ol.render.canvas.defaultFillStyle)}else{c.fillStyle=undefined}if(b){var e=b.getColor();c.strokeStyle=ol.colorlike.asColorLike(e?e:ol.render.canvas.defaultStrokeStyle);var f=b.getLineCap();c.lineCap=f!==undefined?f:ol.render.canvas.defaultLineCap;var g=b.getLineDash();c.lineDash=g?g.slice():ol.render.canvas.defaultLineDash;var h=b.getLineDashOffset();c.lineDashOffset=h?h:ol.render.canvas.defaultLineDashOffset;var i=b.getLineJoin();c.lineJoin=i!==undefined?i:ol.render.canvas.defaultLineJoin;var j=b.getWidth();c.lineWidth=j!==undefined?j:ol.render.canvas.defaultLineWidth;var k=b.getMiterLimit();c.miterLimit=k!==undefined?k:ol.render.canvas.defaultMiterLimit;if(c.lineWidth>this.maxLineWidth){this.maxLineWidth=c.lineWidth;this.bufferedMaxExtent_=null}}else{c.strokeStyle=undefined;c.lineCap=undefined;c.lineDash=null;c.lineDashOffset=undefined;c.lineJoin=undefined;c.lineWidth=undefined;c.miterLimit=undefined}};ol.render.canvas.Replay.prototype.applyFill=function(a,b){var c=a.fillStyle;var d=[ol.render.canvas.Instruction.SET_FILL_STYLE,c];if(typeof c!=='string'){var e=b.getExtent();d.push([e[0],e[3]])}this.instructions.push(d)};ol.render.canvas.Replay.prototype.applyStroke=function(a){this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth*this.pixelRatio,a.lineCap,a.lineJoin,a.miterLimit,this.applyPixelRatio(a.lineDash),a.lineDashOffset*this.pixelRatio])};ol.render.canvas.Replay.prototype.updateFillStyle=function(a,b,c){var d=a.fillStyle;if(typeof d!=='string'||a.currentFillStyle!=d){b.call(this,a,c);a.currentFillStyle=d}};ol.render.canvas.Replay.prototype.updateStrokeStyle=function(a,b){var c=a.strokeStyle;var d=a.lineCap;var e=a.lineDash;var f=a.lineDashOffset;var g=a.lineJoin;var h=a.lineWidth;var i=a.miterLimit;if(a.currentStrokeStyle!=c||a.currentLineCap!=d||(e!=a.currentLineDash&&!ol.array.equals(a.currentLineDash,e))||a.currentLineDashOffset!=f||a.currentLineJoin!=g||a.currentLineWidth!=h||a.currentMiterLimit!=i){b.call(this,a);a.currentStrokeStyle=c;a.currentLineCap=d;a.currentLineDash=e;a.currentLineDashOffset=f;a.currentLineJoin=g;a.currentLineWidth=h;a.currentMiterLimit=i}};ol.render.canvas.Replay.prototype.endGeometry=function(a,b){this.beginGeometryInstruction1_[2]=this.instructions.length;this.beginGeometryInstruction1_=null;this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length;this.beginGeometryInstruction2_=null;var c=[ol.render.canvas.Instruction.END_GEOMETRY,b];this.instructions.push(c);this.hitDetectionInstructions.push(c)};ol.render.canvas.Replay.prototype.finish=ol.nullFunction;ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_){this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent);if(this.maxLineWidth>0){var a=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,a,this.bufferedMaxExtent_)}}return this.bufferedMaxExtent_};bq.provide('ol.render.canvas.ImageReplay');bq.require('ol');bq.require('ol.render.canvas.Instruction');bq.require('ol.render.canvas.Replay');ol.render.canvas.ImageReplay=function(a,b,c,d,e,f){ol.render.canvas.Replay.call(this,a,b,c,d,e,f);this.declutterGroup_=null;this.hitDetectionImage_=null;this.image_=null;this.anchorX_=undefined;this.anchorY_=undefined;this.height_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.scale_=undefined;this.snapToPixel_=undefined;this.width_=undefined};ol.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay);ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(a,b,c,d){return this.appendFlatCoordinates(a,b,c,d,false,false)};ol.render.canvas.ImageReplay.prototype.drawPoint=function(a,b){if(!this.image_){return}this.beginGeometry(a,b);var c=a.getFlatCoordinates();var d=a.getStride();var e=this.coordinates.length;var f=this.drawCoordinates_(c,0,c.length,d);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(a,b)};ol.render.canvas.ImageReplay.prototype.drawMultiPoint=function(a,b){if(!this.image_){return}this.beginGeometry(a,b);var c=a.getFlatCoordinates();var d=a.getStride();var e=this.coordinates.length;var f=this.drawCoordinates_(c,0,c.length,d);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,e,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]);this.endGeometry(a,b)};ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions();this.anchorX_=undefined;this.anchorY_=undefined;this.hitDetectionImage_=null;this.image_=null;this.height_=undefined;this.scale_=undefined;this.opacity_=undefined;this.originX_=undefined;this.originY_=undefined;this.rotateWithView_=undefined;this.rotation_=undefined;this.snapToPixel_=undefined;this.width_=undefined};ol.render.canvas.ImageReplay.prototype.setImageStyle=function(a,b){var c=a.getAnchor();var d=a.getSize();var e=a.getHitDetectionImage(1);var f=a.getImage(1);var g=a.getOrigin();this.anchorX_=c[0];this.anchorY_=c[1];this.declutterGroup_=(b);this.hitDetectionImage_=e;this.image_=f;this.height_=d[1];this.opacity_=a.getOpacity();this.originX_=g[0];this.originY_=g[1];this.rotateWithView_=a.getRotateWithView();this.rotation_=a.getRotation();this.scale_=a.getScale();this.snapToPixel_=a.getSnapToPixel();this.width_=d[0]};bq.provide('ol.render.canvas.LineStringReplay');bq.require('ol');bq.require('ol.render.canvas.Instruction');bq.require('ol.render.canvas.Replay');ol.render.canvas.LineStringReplay=function(a,b,c,d,e,f){ol.render.canvas.Replay.call(this,a,b,c,d,e,f)};ol.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay);ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(a,b,c,d){var e=this.coordinates.length;var f=this.appendFlatCoordinates(a,b,c,d,false,false);var g=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,e,f];this.instructions.push(g);this.hitDetectionInstructions.push(g);return c};ol.render.canvas.LineStringReplay.prototype.drawLineString=function(a,b){var c=this.state;var d=c.strokeStyle;var e=c.lineWidth;if(d===undefined||e===undefined){return}this.updateStrokeStyle(c,this.applyStroke);this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[ol.render.canvas.Instruction.BEGIN_PATH]);var f=a.getFlatCoordinates();var g=a.getStride();this.drawFlatCoordinates_(f,0,f.length,g);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(a,b)};ol.render.canvas.LineStringReplay.prototype.drawMultiLineString=function(a,b){var c=this.state;var d=c.strokeStyle;var e=c.lineWidth;if(d===undefined||e===undefined){return}this.updateStrokeStyle(c,this.applyStroke);this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[ol.render.canvas.Instruction.BEGIN_PATH]);var f=a.getEnds();var g=a.getFlatCoordinates();var h=a.getStride();var j=0;var i,ii;for(i=0,ii=f.length;i<ii;++i){j=this.drawFlatCoordinates_(g,j,f[i],h)}this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]);this.endGeometry(a,b)};ol.render.canvas.LineStringReplay.prototype.finish=function(){var a=this.state;if(a.lastStroke!=undefined&&a.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE])}this.reverseHitDetectionInstructions();this.state=null};ol.render.canvas.LineStringReplay.prototype.applyStroke=function(a){if(a.lastStroke!=undefined&&a.lastStroke!=this.coordinates.length){this.instructions.push([ol.render.canvas.Instruction.STROKE]);a.lastStroke=this.coordinates.length}a.lastStroke=0;ol.render.canvas.Replay.prototype.applyStroke.call(this,a);this.instructions.push([ol.render.canvas.Instruction.BEGIN_PATH])};bq.provide('ol.render.canvas.PolygonReplay');bq.require('ol');bq.require('ol.color');bq.require('ol.geom.flat.simplify');bq.require('ol.render.canvas');bq.require('ol.render.canvas.Instruction');bq.require('ol.render.canvas.Replay');ol.render.canvas.PolygonReplay=function(a,b,c,d,e,f){ol.render.canvas.Replay.call(this,a,b,c,d,e,f)};ol.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay);ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(a,b,c,d){var e=this.state;var f=e.fillStyle!==undefined;var g=e.strokeStyle!=undefined;var h=c.length;var j=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(j);this.hitDetectionInstructions.push(j);for(var i=0;i<h;++i){var k=c[i];var l=this.coordinates.length;var m=this.appendFlatCoordinates(a,b,k,d,true,!g);var n=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,l,m];this.instructions.push(n);this.hitDetectionInstructions.push(n);if(g){var o=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(o);this.hitDetectionInstructions.push(o)}b=k}var p=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(p);if(f){this.instructions.push(p)}if(g){var q=[ol.render.canvas.Instruction.STROKE];this.instructions.push(q);this.hitDetectionInstructions.push(q)}return b};ol.render.canvas.PolygonReplay.prototype.drawCircle=function(a,b){var c=this.state;var d=c.fillStyle;var e=c.strokeStyle;if(d===undefined&&e===undefined){return}this.setFillStrokeStyles_(a);this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(c.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset])}var f=a.getFlatCoordinates();var g=a.getStride();var h=this.coordinates.length;this.appendFlatCoordinates(f,0,f.length,g,false,false);var i=[ol.render.canvas.Instruction.BEGIN_PATH];var j=[ol.render.canvas.Instruction.CIRCLE,h];this.instructions.push(i,j);this.hitDetectionInstructions.push(i,j);var k=[ol.render.canvas.Instruction.FILL];this.hitDetectionInstructions.push(k);if(c.fillStyle!==undefined){this.instructions.push(k)}if(c.strokeStyle!==undefined){var l=[ol.render.canvas.Instruction.STROKE];this.instructions.push(l);this.hitDetectionInstructions.push(l)}this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.drawPolygon=function(a,b){var c=this.state;this.setFillStrokeStyles_(a);this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(c.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset])}var d=a.getEnds();var e=a.getOrientedFlatCoordinates();var f=a.getStride();this.drawFlatCoordinatess_(e,0,d,f);this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.drawMultiPolygon=function(a,b){var c=this.state;var d=c.fillStyle;var e=c.strokeStyle;if(d===undefined&&e===undefined){return}this.setFillStrokeStyles_(a);this.beginGeometry(a,b);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]);if(c.strokeStyle!==undefined){this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset])}var f=a.getEndss();var g=a.getOrientedFlatCoordinates();var h=a.getStride();var j=0;var i,ii;for(i=0,ii=f.length;i<ii;++i){j=this.drawFlatCoordinatess_(g,j,f[i],h)}this.endGeometry(a,b)};ol.render.canvas.PolygonReplay.prototype.finish=function(){this.reverseHitDetectionInstructions();this.state=null;var a=this.tolerance;if(a!==0){var b=this.coordinates;var i,ii;for(i=0,ii=b.length;i<ii;++i){b[i]=ol.geom.flat.simplify.snap(b[i],a)}}};ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(a){var b=this.state;var c=b.fillStyle;if(c!==undefined){this.updateFillStyle(b,this.applyFill,a)}if(b.strokeStyle!==undefined){this.updateStrokeStyle(b,this.applyStroke)}};bq.provide('ol.geom.flat.straightchunk');ol.geom.flat.straightchunk.lineString=function(a,b,c,d,e){var f=c;var g=c;var h=0;var m=0;var j=c;var k,i,m12,m23,x1,y1,x12,y12,x23,y23;for(i=c;i<d;i+=e){var l=b[i];var n=b[i+1];if(x1!==undefined){x23=l-x1;y23=n-y1;m23=Math.sqrt(x23*x23+y23*y23);if(x12!==undefined){m+=m12;k=Math.acos((x12*x23+y12*y23)/(m12*m23));if(k>a){if(m>h){h=m;f=j;g=i}m=0;j=i-e}}m12=m23;x12=x23;y12=y23}x1=l;y1=n}m+=m23;return m>h?[j,i]:[f,g]};bq.provide('ol.style.TextPlacement');ol.style.TextPlacement={POINT:'point',LINE:'line'};bq.provide('ol.render.canvas.TextReplay');bq.require('ol');bq.require('ol.colorlike');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.geom.flat.straightchunk');bq.require('ol.geom.GeometryType');bq.require('ol.has');bq.require('ol.render.canvas');bq.require('ol.render.canvas.Instruction');bq.require('ol.render.canvas.Replay');bq.require('ol.render.replay');bq.require('ol.style.TextPlacement');ol.render.canvas.TextReplay=function(a,b,c,d,e,f){ol.render.canvas.Replay.call(this,a,b,c,d,e,f);this.declutterGroup_;this.labels_=null;this.text_='';this.textOffsetX_=0;this.textOffsetY_=0;this.textRotateWithView_=undefined;this.textRotation_=0;this.textFillState_=null;this.fillStates={};this.textStrokeState_=null;this.strokeStates={};this.textState_=({});this.textStates={};this.textKey_='';this.fillKey_='';this.strokeKey_='';this.widths_={};var g=ol.render.canvas.labelCache;g.prune()};ol.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay);ol.render.canvas.TextReplay.measureTextWidths=function(a,b,c){var d=b.length;var e=0;var f,i;for(i=0;i<d;++i){f=ol.render.canvas.measureTextWidth(a,b[i]);e=Math.max(e,f);c.push(f)}return e};ol.render.canvas.TextReplay.prototype.drawText=function(a,b){var c=this.textFillState_;var d=this.textStrokeState_;var e=this.textState_;if(this.text_===''||!e||(!c&&!d)){return}var f=this.coordinates.length;var g=a.getType();var h=null;var j=2;var k=2;var i,ii;if(e.placement===ol.style.TextPlacement.LINE){if(!ol.extent.intersects(this.getBufferedMaxExtent(),a.getExtent())){return}var l;h=a.getFlatCoordinates();k=a.getStride();if(g==ol.geom.GeometryType.LINE_STRING){l=[h.length]}else if(g==ol.geom.GeometryType.MULTI_LINE_STRING){l=a.getEnds()}else if(g==ol.geom.GeometryType.POLYGON){l=a.getEnds().slice(0,1)}else if(g==ol.geom.GeometryType.MULTI_POLYGON){var m=a.getEndss();l=[];for(i=0,ii=m.length;i<ii;++i){l.push(m[i][0])}}this.beginGeometry(a,b);var n=e.textAlign;var p=0;var q;for(var o=0,oo=l.length;o<oo;++o){if(n==undefined){var r=ol.geom.flat.straightchunk.lineString(e.maxAngle,h,p,l[o],k);p=r[0];q=r[1]}else{q=l[o]}for(i=p;i<q;i+=k){this.coordinates.push(h[i],h[i+1])}j=this.coordinates.length;p=l[o];this.drawChars_(f,j,this.declutterGroup_);f=j}this.endGeometry(a,b)}else{var s=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_);var t=s.width/this.pixelRatio;switch(g){case ol.geom.GeometryType.POINT:case ol.geom.GeometryType.MULTI_POINT:h=a.getFlatCoordinates();j=h.length;break;case ol.geom.GeometryType.LINE_STRING:h=(a).getFlatMidpoint();break;case ol.geom.GeometryType.CIRCLE:h=(a).getCenter();break;case ol.geom.GeometryType.MULTI_LINE_STRING:h=(a).getFlatMidpoints();j=h.length;break;case ol.geom.GeometryType.POLYGON:h=(a).getFlatInteriorPoint();if(!e.overflow&&h[2]/this.resolution<t){return}k=3;break;case ol.geom.GeometryType.MULTI_POLYGON:var u=(a).getFlatInteriorPoints();h=[];for(i=0,ii=u.length;i<ii;i+=3){if(e.overflow||u[i+2]/this.resolution>=t){h.push(u[i],u[i+1])}}j=h.length;if(j==0){return}break;default:}j=this.appendFlatCoordinates(h,0,j,k,false,false);this.beginGeometry(a,b);if(e.backgroundFill||e.backgroundStroke){this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke);this.updateFillStyle(this.state,this.applyFill,a);this.updateStrokeStyle(this.state,this.applyStroke)}this.drawTextImage_(s,f,j);this.endGeometry(a,b)}};ol.render.canvas.TextReplay.prototype.getImage=function(a,b,c,d){var e;var f=d+b+a+c+this.pixelRatio;var g=ol.render.canvas.labelCache;if(!g.containsKey(f)){var h=d?this.strokeStates[d]||this.textStrokeState_:null;var j=c?this.fillStates[c]||this.textFillState_:null;var k=this.textStates[b]||this.textState_;var l=this.pixelRatio;var m=k.scale*l;var n=ol.render.replay.TEXT_ALIGN[k.textAlign||ol.render.canvas.defaultTextAlign];var o=d&&h.lineWidth?h.lineWidth:0;var p=a.split('\n');var q=p.length;var r=[];var s=ol.render.canvas.TextReplay.measureTextWidths(k.font,p,r);var t=ol.render.canvas.measureTextHeight(k.font);var u=t*q;var v=(s+o);var w=ol.dom.createCanvasContext2D(Math.ceil(v*m),Math.ceil((u+o)*m));e=w.canvas;g.set(f,e);if(m!=1){w.scale(m,m)}w.font=k.font;if(d){w.strokeStyle=h.strokeStyle;w.lineWidth=o*(ol.has.SAFARI?m:1);w.lineCap=h.lineCap;w.lineJoin=h.lineJoin;w.miterLimit=h.miterLimit;if(ol.has.CANVAS_LINE_DASH&&h.lineDash.length){w.setLineDash(h.lineDash);w.lineDashOffset=h.lineDashOffset}}if(c){w.fillStyle=j.fillStyle}w.textBaseline='middle';w.textAlign='center';var y=(0.5-n);var x=n*e.width/m+y*o;var i;if(d){for(i=0;i<q;++i){w.strokeText(p[i],x+y*r[i],0.5*(o+t)+i*t)}}if(c){for(i=0;i<q;++i){w.fillText(p[i],x+y*r[i],0.5*(o+t)+i*t)}}}return g.get(f)};ol.render.canvas.TextReplay.prototype.drawTextImage_=function(a,b,c){var d=this.textState_;var e=this.textStrokeState_;var f=this.pixelRatio;var g=ol.render.replay.TEXT_ALIGN[d.textAlign||ol.render.canvas.defaultTextAlign];var h=ol.render.replay.TEXT_ALIGN[d.textBaseline];var i=e&&e.lineWidth?e.lineWidth:0;var j=g*a.width/f+2*(0.5-g)*i;var k=h*a.height/f+2*(0.5-h)*i;this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,b,c,a,(j-this.textOffsetX_)*f,(k-this.textOffsetY_)*f,this.declutterGroup_,a.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,true,a.width,d.padding==ol.render.canvas.defaultPadding?ol.render.canvas.defaultPadding:d.padding.map(function(p){return p*f}),!!d.backgroundFill,!!d.backgroundStroke]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,b,c,a,(j-this.textOffsetX_)*f,(k-this.textOffsetY_)*f,this.declutterGroup_,a.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/f,true,a.width,d.padding,!!d.backgroundFill,!!d.backgroundStroke])};ol.render.canvas.TextReplay.prototype.drawChars_=function(c,d,e){var f=this.textStrokeState_;var g=this.textState_;var h=this.textFillState_;var i=this.strokeKey_;if(f){if(!(i in this.strokeStates)){this.strokeStates[i]=({strokeStyle:f.strokeStyle,lineCap:f.lineCap,lineDashOffset:f.lineDashOffset,lineWidth:f.lineWidth,lineJoin:f.lineJoin,miterLimit:f.miterLimit,lineDash:f.lineDash})}}var j=this.textKey_;if(!(this.textKey_ in this.textStates)){this.textStates[this.textKey_]=({font:g.font,textAlign:g.textAlign||ol.render.canvas.defaultTextAlign,scale:g.scale})}var k=this.fillKey_;if(h){if(!(k in this.fillStates)){this.fillStates[k]=({fillStyle:h.fillStyle})}}var l=this.pixelRatio;var m=ol.render.replay.TEXT_ALIGN[g.textBaseline];var n=this.textOffsetY_*l;var o=this.text_;var p=g.font;var q=g.scale;var r=f?f.lineWidth*q/2:0;var s=this.widths_[p];if(!s){this.widths_[p]=s={}}this.instructions.push([ol.render.canvas.Instruction.DRAW_CHARS,c,d,m,e,g.overflow,k,g.maxAngle,function(a){var b=s[a];if(!b){b=s[a]=ol.render.canvas.measureTextWidth(p,a)}return b*q*l},n,i,r*l,o,j,1]);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_CHARS,c,d,m,e,g.overflow,k,g.maxAngle,function(a){var b=s[a];if(!b){b=s[a]=ol.render.canvas.measureTextWidth(p,a)}return b*q},n,i,r,o,j,1/l])};ol.render.canvas.TextReplay.prototype.setTextStyle=function(a,b){var c,fillState,strokeState;if(!a){this.text_=''}else{this.declutterGroup_=(b);var d=a.getFill();if(!d){fillState=this.textFillState_=null}else{fillState=this.textFillState_;if(!fillState){fillState=this.textFillState_=({})}fillState.fillStyle=ol.colorlike.asColorLike(d.getColor()||ol.render.canvas.defaultFillStyle)}var e=a.getStroke();if(!e){strokeState=this.textStrokeState_=null}else{strokeState=this.textStrokeState_;if(!strokeState){strokeState=this.textStrokeState_=({})}var f=e.getLineDash();var g=e.getLineDashOffset();var h=e.getWidth();var i=e.getMiterLimit();strokeState.lineCap=e.getLineCap()||ol.render.canvas.defaultLineCap;strokeState.lineDash=f?f.slice():ol.render.canvas.defaultLineDash;strokeState.lineDashOffset=g===undefined?ol.render.canvas.defaultLineDashOffset:g;strokeState.lineJoin=e.getLineJoin()||ol.render.canvas.defaultLineJoin;strokeState.lineWidth=h===undefined?ol.render.canvas.defaultLineWidth:h;strokeState.miterLimit=i===undefined?ol.render.canvas.defaultMiterLimit:i;strokeState.strokeStyle=ol.colorlike.asColorLike(e.getColor()||ol.render.canvas.defaultStrokeStyle)}c=this.textState_;var j=a.getFont()||ol.render.canvas.defaultFont;ol.render.canvas.checkFont(j);var k=a.getScale();c.overflow=a.getOverflow();c.font=j;c.maxAngle=a.getMaxAngle();c.placement=a.getPlacement();c.textAlign=a.getTextAlign();c.textBaseline=a.getTextBaseline()||ol.render.canvas.defaultTextBaseline;c.backgroundFill=a.getBackgroundFill();c.backgroundStroke=a.getBackgroundStroke();c.padding=a.getPadding()||ol.render.canvas.defaultPadding;c.scale=k===undefined?1:k;var l=a.getOffsetX();var m=a.getOffsetY();var n=a.getRotateWithView();var o=a.getRotation();this.text_=a.getText()||'';this.textOffsetX_=l===undefined?0:l;this.textOffsetY_=m===undefined?0:m;this.textRotateWithView_=n===undefined?false:n;this.textRotation_=o===undefined?0:o;this.strokeKey_=strokeState?(typeof strokeState.strokeStyle=='string'?strokeState.strokeStyle:ol.getUid(strokeState.strokeStyle))+strokeState.lineCap+strokeState.lineDashOffset+'|'+strokeState.lineWidth+strokeState.lineJoin+strokeState.miterLimit+'['+strokeState.lineDash.join()+']':'';this.textKey_=c.font+c.scale+(c.textAlign||'?');this.fillKey_=fillState?(typeof fillState.fillStyle=='string'?fillState.fillStyle:('|'+ol.getUid(fillState.fillStyle))):''}};bq.provide('ol.render.canvas.ReplayGroup');bq.require('ol');bq.require('ol.array');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.geom.flat.transform');bq.require('ol.obj');bq.require('ol.render.ReplayGroup');bq.require('ol.render.ReplayType');bq.require('ol.render.canvas.Replay');bq.require('ol.render.canvas.ImageReplay');bq.require('ol.render.canvas.LineStringReplay');bq.require('ol.render.canvas.PolygonReplay');bq.require('ol.render.canvas.TextReplay');bq.require('ol.render.replay');bq.require('ol.transform');ol.render.canvas.ReplayGroup=function(a,b,c,d,e,f,g){ol.render.ReplayGroup.call(this);this.declutterTree_=f;this.declutterGroup_=null;this.tolerance_=a;this.maxExtent_=b;this.overlaps_=e;this.pixelRatio_=d;this.resolution_=c;this.renderBuffer_=g;this.replaysByZIndex_={};this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1);this.hitDetectionTransform_=ol.transform.create()};ol.inherits(ol.render.canvas.ReplayGroup,ol.render.ReplayGroup);ol.render.canvas.ReplayGroup.circleArrayCache_={0:[[true]]};ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_=function(a,x,y){var i;var b=Math.floor(a.length/2);if(x>=b){for(i=b;i<x;i++){a[i][y]=true}}else if(x<b){for(i=x+1;i<b;i++){a[i][y]=true}}};ol.render.canvas.ReplayGroup.getCircleArray_=function(a){if(ol.render.canvas.ReplayGroup.circleArrayCache_[a]!==undefined){return ol.render.canvas.ReplayGroup.circleArrayCache_[a]}var b=a*2+1;var c=new Array(b);for(var i=0;i<b;i++){c[i]=new Array(b)}var x=a;var y=0;var d=0;while(x>=y){ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a+x,a+y);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a+y,a+x);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a-y,a+x);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a-x,a+y);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a-x,a-y);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a-y,a-x);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a+y,a-x);ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(c,a+x,a-y);y++;d+=1+2*y;if(2*(d-x)+1>0){x-=1;d+=1-2*x}}ol.render.canvas.ReplayGroup.circleArrayCache_[a]=c;return c};ol.render.canvas.ReplayGroup.replayDeclutter=function(a,b,c){var d=Object.keys(a).map(Number).sort(ol.array.numberSafeCompareFunction);var e={};for(var z=0,zz=d.length;z<zz;++z){var f=a[d[z].toString()];for(var i=0,ii=f.length;i<ii;){var g=f[i++];var h=f[i++];g.replay(b,h,c,e)}}};ol.render.canvas.ReplayGroup.prototype.addDeclutter=function(a){var b=null;if(this.declutterTree_){if(a){b=this.declutterGroup_;(b[4])++}else{b=this.declutterGroup_=ol.extent.createEmpty();b.push(1)}}return b};ol.render.canvas.ReplayGroup.prototype.clip=function(a,b){var c=this.getClipCoords(b);a.beginPath();a.moveTo(c[0],c[1]);a.lineTo(c[2],c[3]);a.lineTo(c[4],c[5]);a.lineTo(c[6],c[7]);a.clip()};ol.render.canvas.ReplayGroup.prototype.hasReplays=function(a){for(var b in this.replaysByZIndex_){var c=this.replaysByZIndex_[b];for(var i=0,ii=a.length;i<ii;++i){if(a[i]in c){return true}}}return false};ol.render.canvas.ReplayGroup.prototype.finish=function(){var a;for(a in this.replaysByZIndex_){var b=this.replaysByZIndex_[a];var c;for(c in b){b[c].finish()}}};ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(d,e,f,g,h,k,l){g=Math.round(g);var m=g*2+1;var n=ol.transform.compose(this.hitDetectionTransform_,g+0.5,g+0.5,1/e,-1/e,-f,-d[0],-d[1]);var o=this.hitDetectionContext_;if(o.canvas.width!==m||o.canvas.height!==m){o.canvas.width=m;o.canvas.height=m}else{o.clearRect(0,0,m,m)}var p;if(this.renderBuffer_!==undefined){p=ol.extent.createEmpty();ol.extent.extendCoordinate(p,d);ol.extent.buffer(p,e*(this.renderBuffer_+g),p)}var q=ol.render.canvas.ReplayGroup.getCircleArray_(g);var r;if(this.declutterTree_){r=this.declutterTree_.all().map(function(a){return a.value})}var s;function featureCallback(a){var b=o.getImageData(0,0,m,m).data;for(var i=0;i<m;i++){for(var j=0;j<m;j++){if(q[i][j]){if(b[(j*m+i)*4+3]>0){var c;if(!(r&&(s==ol.render.ReplayType.IMAGE||s==ol.render.ReplayType.TEXT))||r.indexOf(a)!==-1){c=k(a)}if(c){return c}else{o.clearRect(0,0,m,m);return undefined}}}}}}var t=Object.keys(this.replaysByZIndex_).map(Number);t.sort(ol.array.numberSafeCompareFunction);var i,j,replays,replay,result;for(i=t.length-1;i>=0;--i){var u=t[i].toString();replays=this.replaysByZIndex_[u];for(j=ol.render.replay.ORDER.length-1;j>=0;--j){s=ol.render.replay.ORDER[j];replay=replays[s];if(replay!==undefined){if(l&&(s==ol.render.ReplayType.IMAGE||s==ol.render.ReplayType.TEXT)){var v=l[u];if(!v){l[u]=[replay,n.slice(0)]}else{v.push(replay,n.slice(0))}}else{result=replay.replayHitDetection(o,n,f,h,featureCallback,p);if(result){return result}}}}}return undefined};ol.render.canvas.ReplayGroup.prototype.getClipCoords=function(a){var b=this.maxExtent_;var c=b[0];var d=b[1];var e=b[2];var f=b[3];var g=[c,d,c,f,e,f,e,d];ol.geom.flat.transform.transform2D(g,0,8,2,a,g);return g};ol.render.canvas.ReplayGroup.prototype.getReplay=function(a,b){var c=a!==undefined?a.toString():'0';var d=this.replaysByZIndex_[c];if(d===undefined){d={};this.replaysByZIndex_[c]=d}var e=d[b];if(e===undefined){var f=ol.render.canvas.ReplayGroup.BATCH_CONSTRUCTORS_[b];e=new f(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_);d[b]=e}return e};ol.render.canvas.ReplayGroup.prototype.getReplays=function(){return this.replaysByZIndex_};ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return ol.obj.isEmpty(this.replaysByZIndex_)};ol.render.canvas.ReplayGroup.prototype.replay=function(a,b,c,d,e,f){var g=Object.keys(this.replaysByZIndex_).map(Number);g.sort(ol.array.numberSafeCompareFunction);a.save();this.clip(a,b);var h=e?e:ol.render.replay.ORDER;var i,ii,j,jj,replays,replay;for(i=0,ii=g.length;i<ii;++i){var k=g[i].toString();replays=this.replaysByZIndex_[k];for(j=0,jj=h.length;j<jj;++j){var l=h[j];replay=replays[l];if(replay!==undefined){if(f&&(l==ol.render.ReplayType.IMAGE||l==ol.render.ReplayType.TEXT)){var m=f[k];if(!m){f[k]=[replay,b.slice(0)]}else{m.push(replay,b.slice(0))}}else{replay.replay(a,b,c,d)}}}}a.restore()};ol.render.canvas.ReplayGroup.BATCH_CONSTRUCTORS_={'Circle':ol.render.canvas.PolygonReplay,'Default':ol.render.canvas.Replay,'Image':ol.render.canvas.ImageReplay,'LineString':ol.render.canvas.LineStringReplay,'Polygon':ol.render.canvas.PolygonReplay,'Text':ol.render.canvas.TextReplay};bq.provide('ol.renderer.vector');bq.require('ol');bq.require('ol.ImageState');bq.require('ol.geom.GeometryType');bq.require('ol.render.ReplayType');ol.renderer.vector.defaultOrder=function(a,b){return ol.getUid(a)-ol.getUid(b)};ol.renderer.vector.getSquaredTolerance=function(a,b){var c=ol.renderer.vector.getTolerance(a,b);return c*c};ol.renderer.vector.getTolerance=function(a,b){return ol.SIMPLIFY_TOLERANCE*a/b};ol.renderer.vector.renderCircleGeometry_=function(a,b,c,d){var e=c.getFill();var f=c.getStroke();if(e||f){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.CIRCLE);g.setFillStrokeStyle(e,f);g.drawCircle(b,d)}var h=c.getText();if(h){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h,a.addDeclutter(false));i.drawText(b,d)}};ol.renderer.vector.renderFeature=function(a,b,c,d,e,f){var g=false;var h,imageState;h=c.getImage();if(h){imageState=h.getImageState();if(imageState==ol.ImageState.LOADED||imageState==ol.ImageState.ERROR){h.unlistenImageChange(e,f)}else{if(imageState==ol.ImageState.IDLE){h.load()}imageState=h.getImageState();h.listenImageChange(e,f);g=true}}ol.renderer.vector.renderFeature_(a,b,c,d);return g};ol.renderer.vector.renderFeature_=function(a,b,c,d){var e=c.getGeometryFunction()(b);if(!e){return}var f=e.getSimplifiedGeometry(d);var g=c.getRenderer();if(g){ol.renderer.vector.renderGeometry_(a,f,c,b)}else{var h=ol.renderer.vector.GEOMETRY_RENDERERS_[f.getType()];h(a,f,c,b)}};ol.renderer.vector.renderGeometry_=function(a,b,c,d){if(b.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION){var e=(b).getGeometries();for(var i=0,ii=e.length;i<ii;++i){ol.renderer.vector.renderGeometry_(a,e[i],c,d)}return}var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.DEFAULT);f.drawCustom((b),d,c.getRenderer())};ol.renderer.vector.renderGeometryCollectionGeometry_=function(a,b,c,d){var e=b.getGeometriesArray();var i,ii;for(i=0,ii=e.length;i<ii;++i){var f=ol.renderer.vector.GEOMETRY_RENDERERS_[e[i].getType()];f(a,e[i],c,d)}};ol.renderer.vector.renderLineStringGeometry_=function(a,b,c,d){var e=c.getStroke();if(e){var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.LINE_STRING);f.setFillStrokeStyle(null,e);f.drawLineString(b,d)}var g=c.getText();if(g){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g,a.addDeclutter(false));h.drawText(b,d)}};ol.renderer.vector.renderMultiLineStringGeometry_=function(a,b,c,d){var e=c.getStroke();if(e){var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.LINE_STRING);f.setFillStrokeStyle(null,e);f.drawMultiLineString(b,d)}var g=c.getText();if(g){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g,a.addDeclutter(false));h.drawText(b,d)}};ol.renderer.vector.renderMultiPolygonGeometry_=function(a,b,c,d){var e=c.getFill();var f=c.getStroke();if(f||e){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.POLYGON);g.setFillStrokeStyle(e,f);g.drawMultiPolygon(b,d)}var h=c.getText();if(h){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h,a.addDeclutter(false));i.drawText(b,d)}};ol.renderer.vector.renderPointGeometry_=function(a,b,c,d){var e=c.getImage();if(e){if(e.getImageState()!=ol.ImageState.LOADED){return}var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.IMAGE);f.setImageStyle(e,a.addDeclutter(false));f.drawPoint(b,d)}var g=c.getText();if(g){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g,a.addDeclutter(!!e));h.drawText(b,d)}};ol.renderer.vector.renderMultiPointGeometry_=function(a,b,c,d){var e=c.getImage();if(e){if(e.getImageState()!=ol.ImageState.LOADED){return}var f=a.getReplay(c.getZIndex(),ol.render.ReplayType.IMAGE);f.setImageStyle(e,a.addDeclutter(false));f.drawMultiPoint(b,d)}var g=c.getText();if(g){var h=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);h.setTextStyle(g,a.addDeclutter(!!e));h.drawText(b,d)}};ol.renderer.vector.renderPolygonGeometry_=function(a,b,c,d){var e=c.getFill();var f=c.getStroke();if(e||f){var g=a.getReplay(c.getZIndex(),ol.render.ReplayType.POLYGON);g.setFillStrokeStyle(e,f);g.drawPolygon(b,d)}var h=c.getText();if(h){var i=a.getReplay(c.getZIndex(),ol.render.ReplayType.TEXT);i.setTextStyle(h,a.addDeclutter(false));i.drawText(b,d)}};ol.renderer.vector.GEOMETRY_RENDERERS_={'Point':ol.renderer.vector.renderPointGeometry_,'LineString':ol.renderer.vector.renderLineStringGeometry_,'Polygon':ol.renderer.vector.renderPolygonGeometry_,'MultiPoint':ol.renderer.vector.renderMultiPointGeometry_,'MultiLineString':ol.renderer.vector.renderMultiLineStringGeometry_,'MultiPolygon':ol.renderer.vector.renderMultiPolygonGeometry_,'GeometryCollection':ol.renderer.vector.renderGeometryCollectionGeometry_,'Circle':ol.renderer.vector.renderCircleGeometry_};bq.provide('ol.renderer.canvas.VectorLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.ViewHint');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.ext.rbush');bq.require('ol.extent');bq.require('ol.render.EventType');bq.require('ol.render.canvas');bq.require('ol.render.canvas.ReplayGroup');bq.require('ol.renderer.Type');bq.require('ol.renderer.canvas.Layer');bq.require('ol.renderer.vector');ol.renderer.canvas.VectorLayer=function(a){ol.renderer.canvas.Layer.call(this,a);this.declutterTree_=a.getDeclutter()?ol.ext.rbush(9):null;this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.replayGroupChanged=true;this.context=ol.dom.createCanvasContext2D();ol.events.listen(ol.render.canvas.labelCache,ol.events.EventType.CLEAR,this.handleFontsChanged_,this)};ol.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer);ol.renderer.canvas.VectorLayer['handles']=function(a,b){return a===ol.renderer.Type.CANVAS&&b.getType()===ol.LayerType.VECTOR};ol.renderer.canvas.VectorLayer['create']=function(a,b){return new ol.renderer.canvas.VectorLayer((b))};ol.renderer.canvas.VectorLayer.prototype.disposeInternal=function(){ol.events.unlisten(ol.render.canvas.labelCache,ol.events.EventType.CLEAR,this.handleFontsChanged_,this);ol.renderer.canvas.Layer.prototype.disposeInternal.call(this)};ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(a,b,c){var d=a.extent;var e=a.pixelRatio;var f=b.managed?a.skippedFeatureUids:{};var g=a.viewState;var h=g.projection;var i=g.rotation;var j=h.getExtent();var k=(this.getLayer().getSource());var l=this.getTransform(a,0);this.preCompose(c,a,l);var m=b.extent;var n=m!==undefined;if(n){this.clip(c,a,(m))}var o=this.replayGroup_;if(o&&!o.isEmpty()){if(this.declutterTree_){this.declutterTree_.clear()}var p=(this.getLayer());var q=0;var r=0;var s;var t=b.opacity!==1;var u=p.hasListener(ol.render.EventType.RENDER);if(t||u){var v=c.canvas.width;var w=c.canvas.height;if(i){var x=Math.round(Math.sqrt(v*v+w*w));q=(x-v)/2;r=(x-w)/2;v=w=x}this.context.canvas.width=v;this.context.canvas.height=w;s=this.context}else{s=c}var y=s.globalAlpha;if(!t){s.globalAlpha=b.opacity}if(s!=c){s.translate(q,r)}var z=a.size[0]*e;var A=a.size[1]*e;ol.render.canvas.rotateAtOffset(s,-i,z/2,A/2);o.replay(s,l,i,f);if(k.getWrapX()&&h.canWrapX()&&!ol.extent.containsExtent(j,d)){var B=d[0];var C=ol.extent.getWidth(j);var D=0;var E;while(B<j[0]){--D;E=C*D;l=this.getTransform(a,E);o.replay(s,l,i,f);B+=C}D=0;B=d[2];while(B>j[2]){++D;E=C*D;l=this.getTransform(a,E);o.replay(s,l,i,f);B-=C}l=this.getTransform(a,0)}ol.render.canvas.rotateAtOffset(s,i,z/2,A/2);if(s!=c){if(u){this.dispatchRenderEvent(s,a,l)}if(t){var F=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(s.canvas,-q,-r);c.globalAlpha=F}else{c.drawImage(s.canvas,-q,-r)}s.translate(-q,-r)}if(!t){s.globalAlpha=y}}if(n){c.restore()}this.postCompose(c,a,b,l)};ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(c,d,e,f,g){if(!this.replayGroup_){return undefined}else{var h=d.viewState.resolution;var i=d.viewState.rotation;var j=(this.getLayer());var k={};var l=this.replayGroup_.forEachFeatureAtCoordinate(c,h,i,e,{},function(a){var b=ol.getUid(a).toString();if(!(b in k)){k[b]=true;return f.call(g,a,j)}},null);return l}};ol.renderer.canvas.VectorLayer.prototype.handleFontsChanged_=function(a){var b=this.getLayer();if(b.getVisible()&&this.replayGroup_){b.changed()}};ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(e,f){var g=(this.getLayer());var h=g.getSource();this.updateLogos(e,h);var j=e.viewHints[ol.ViewHint.ANIMATING];var k=e.viewHints[ol.ViewHint.INTERACTING];var l=g.getUpdateWhileAnimating();var m=g.getUpdateWhileInteracting();if(!this.dirty_&&(!l&&j)||(!m&&k)){return true}var n=e.extent;var o=e.viewState;var p=o.projection;var q=o.resolution;var r=e.pixelRatio;var s=g.getRevision();var t=g.getRenderBuffer();var u=g.getRenderOrder();if(u===undefined){u=ol.renderer.vector.defaultOrder}var v=ol.extent.buffer(n,t*q);var w=o.projection.getExtent();if(h.getWrapX()&&o.projection.canWrapX()&&!ol.extent.containsExtent(w,e.extent)){var x=ol.extent.getWidth(w);var y=Math.max(ol.extent.getWidth(v)/2,x);v[0]=w[0]-y;v[2]=w[2]+y}if(!this.dirty_&&this.renderedResolution_==q&&this.renderedRevision_==s&&this.renderedRenderOrder_==u&&ol.extent.containsExtent(this.renderedExtent_,v)){this.replayGroupChanged=false;return true}this.replayGroup_=null;this.dirty_=false;var z=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(q,r),v,q,r,h.getOverlaps(),this.declutterTree_,g.getRenderBuffer());h.loadFeatures(v,q,p);var A=function(a){var b;var c=a.getStyleFunction();if(c){b=c.call(a,q)}else{c=g.getStyleFunction();if(c){b=c(a,q)}}if(b){var d=this.renderFeature(a,q,r,b,z);this.dirty_=this.dirty_||d}}.bind(this);if(u){var B=[];h.forEachFeatureInExtent(v,function(a){B.push(a)},this);B.sort(u);for(var i=0,ii=B.length;i<ii;++i){A(B[i])}}else{h.forEachFeatureInExtent(v,A,this)}z.finish();this.renderedResolution_=q;this.renderedRevision_=s;this.renderedRenderOrder_=u;this.renderedExtent_=v;this.replayGroup_=z;this.replayGroupChanged=true;return true};ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(a,b,c,d,e){if(!d){return false}var f=false;if(Array.isArray(d)){for(var i=0,ii=d.length;i<ii;++i){f=ol.renderer.vector.renderFeature(e,a,d[i],ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||f}}else{f=ol.renderer.vector.renderFeature(e,a,d,ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)}return f};bq.provide('ol.layer.VectorTileRenderType');ol.layer.VectorTileRenderType={IMAGE:'image',HYBRID:'hybrid',VECTOR:'vector'};bq.provide('ol.renderer.canvas.VectorTileLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.TileState');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.ext.rbush');bq.require('ol.extent');bq.require('ol.layer.VectorTileRenderType');bq.require('ol.proj');bq.require('ol.proj.Units');bq.require('ol.render.ReplayType');bq.require('ol.render.canvas');bq.require('ol.render.canvas.ReplayGroup');bq.require('ol.render.replay');bq.require('ol.renderer.Type');bq.require('ol.renderer.canvas.TileLayer');bq.require('ol.renderer.vector');bq.require('ol.transform');ol.renderer.canvas.VectorTileLayer=function(a){this.context=null;ol.renderer.canvas.TileLayer.call(this,a);this.declutterTree_=a.getDeclutter()?ol.ext.rbush(9):null;this.dirty_=false;this.renderedLayerRevision_;this.tmpTransform_=ol.transform.create();this.zDirection=a.getRenderMode()==ol.layer.VectorTileRenderType.VECTOR?1:0;ol.events.listen(ol.render.canvas.labelCache,ol.events.EventType.CLEAR,this.handleFontsChanged_,this)};ol.inherits(ol.renderer.canvas.VectorTileLayer,ol.renderer.canvas.TileLayer);ol.renderer.canvas.VectorTileLayer['handles']=function(a,b){return a===ol.renderer.Type.CANVAS&&b.getType()===ol.LayerType.VECTOR_TILE};ol.renderer.canvas.VectorTileLayer['create']=function(a,b){return new ol.renderer.canvas.VectorTileLayer((b))};ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS={'image':[ol.render.ReplayType.POLYGON,ol.render.ReplayType.CIRCLE,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT],'hybrid':[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING]};ol.renderer.canvas.VectorTileLayer.VECTOR_REPLAYS={'image':[ol.render.ReplayType.DEFAULT],'hybrid':[ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT,ol.render.ReplayType.DEFAULT],'vector':ol.render.replay.ORDER};ol.renderer.canvas.VectorTileLayer.prototype.disposeInternal=function(){ol.events.unlisten(ol.render.canvas.labelCache,ol.events.EventType.CLEAR,this.handleFontsChanged_,this);ol.renderer.canvas.TileLayer.prototype.disposeInternal.call(this)};ol.renderer.canvas.VectorTileLayer.prototype.prepareFrame=function(a,b){var c=this.getLayer();var d=c.getRevision();if(this.renderedLayerRevision_!=d){this.renderedTiles.length=0;var e=c.getRenderMode();if(!this.context&&e!=ol.layer.VectorTileRenderType.VECTOR){this.context=ol.dom.createCanvasContext2D()}if(this.context&&e==ol.layer.VectorTileRenderType.VECTOR){this.context=null}}this.renderedLayerRevision_=d;return ol.renderer.canvas.TileLayer.prototype.prepareFrame.apply(this,arguments)};ol.renderer.canvas.VectorTileLayer.prototype.createReplayGroup_=function(e,f){var g=this.getLayer();var h=f.pixelRatio;var j=f.viewState.projection;var k=g.getRevision();var l=(g.getRenderOrder())||null;var m=e.getReplayState(g);if(!m.dirty&&m.renderedRevision==k&&m.renderedRenderOrder==l){return}var n=(g.getSource());var o=n.getTileGrid();var p=n.getTileGridForProjection(j);var q=p.getResolution(e.tileCoord[0]);var s=p.getTileCoordExtent(e.wrappedTileCoord);var u={};for(var t=0,tt=e.tileKeys.length;t<tt;++t){var v=e.getTile(e.tileKeys[t]);if(v.getState()==ol.TileState.ERROR){continue}var w=v.tileCoord;var x=o.getTileCoordExtent(w);var y=ol.extent.getIntersection(s,x);var z=ol.extent.equals(x,y)?null:ol.extent.buffer(y,g.getRenderBuffer()*q);var A=v.getProjection();var B=false;if(!ol.proj.equivalent(j,A)){B=true;v.setProjection(j)}m.dirty=false;var C=new ol.render.canvas.ReplayGroup(0,y,q,h,n.getOverlaps(),this.declutterTree_,g.getRenderBuffer());var D=ol.renderer.vector.getSquaredTolerance(q,h);var E=function(a){var b;var c=a.getStyleFunction();if(c){b=c.call((a),q)}else{c=g.getStyleFunction();if(c){b=c(a,q)}}if(b){var d=this.renderFeature(a,D,b,C);this.dirty_=this.dirty_||d;m.dirty=m.dirty||d}};var F=v.getFeatures();if(l&&l!==m.renderedRenderOrder){F.sort(l)}var G;for(var i=0,ii=F.length;i<ii;++i){G=F[i];if(B){if(A.getUnits()==ol.proj.Units.TILE_PIXELS){A.setWorldExtent(x);A.setExtent(v.getExtent())}G.getGeometry().transform(A,j)}if(!z||ol.extent.intersects(z,G.getGeometry().getExtent())){E.call(this,G)}}C.finish();for(var r in C.getReplays()){u[r]=true}v.setReplayGroup(g,e.tileCoord.toString(),C)}m.renderedRevision=k;m.renderedRenderOrder=l};ol.renderer.canvas.VectorTileLayer.prototype.drawTileImage=function(a,b,c,x,y,w,h,d,e){var f=(a);this.createReplayGroup_(f,b);if(this.context){this.renderTileImage_(f,b,c);ol.renderer.canvas.TileLayer.prototype.drawTileImage.apply(this,arguments)}};ol.renderer.canvas.VectorTileLayer.prototype.forEachFeatureAtCoordinate=function(c,d,e,f,g){var h=d.viewState.resolution;var j=d.viewState.rotation;e=e==undefined?0:e;var k=this.getLayer();var l={};var m=this.renderedTiles;var n=(k.getSource());var o=n.getTileGridForProjection(d.viewState.projection);var p,found;var i,ii,replayGroup;var q,tileCoord,tileExtent;for(i=0,ii=m.length;i<ii;++i){q=m[i];tileCoord=q.wrappedTileCoord;tileExtent=o.getTileCoordExtent(tileCoord,this.tmpExtent);p=ol.extent.buffer(tileExtent,e*h,p);if(!ol.extent.containsCoordinate(p,c)){continue}for(var t=0,tt=q.tileKeys.length;t<tt;++t){var r=q.getTile(q.tileKeys[t]);if(r.getState()==ol.TileState.ERROR){continue}replayGroup=r.getReplayGroup(k,q.tileCoord.toString());found=found||replayGroup.forEachFeatureAtCoordinate(c,h,j,e,{},function(a){var b=ol.getUid(a).toString();if(!(b in l)){l[b]=true;return f.call(g,a,k)}},null)}}return found};ol.renderer.canvas.VectorTileLayer.prototype.getReplayTransform_=function(a,b){var c=this.getLayer();var d=(c.getSource());var e=d.getTileGrid();var f=a.tileCoord;var g=e.getResolution(f[0]);var h=b.viewState;var i=b.pixelRatio;var j=h.resolution/i;var k=e.getTileCoordExtent(f,this.tmpExtent);var l=h.center;var m=ol.extent.getTopLeft(k);var n=b.size;var o=Math.round(i*n[0]/2);var p=Math.round(i*n[1]/2);return ol.transform.compose(this.tmpTransform_,o,p,g/j,g/j,h.rotation,(m[0]-l[0])/g,(l[1]-m[1])/g)};ol.renderer.canvas.VectorTileLayer.prototype.handleFontsChanged_=function(a){var b=this.getLayer();if(b.getVisible()&&this.renderedLayerRevision_!==undefined){b.changed()}};ol.renderer.canvas.VectorTileLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.canvas.VectorTileLayer.prototype.postCompose=function(a,b,c){var d=this.getLayer();var e=d.getDeclutter()?{}:null;var f=(d.getSource());var g=d.getRenderMode();var h=ol.renderer.canvas.VectorTileLayer.VECTOR_REPLAYS[g];var k=b.pixelRatio;var l=b.viewState.rotation;var m=b.size;var n,offsetY;if(l){n=Math.round(k*m[0]/2);offsetY=Math.round(k*m[1]/2);ol.render.canvas.rotateAtOffset(a,-l,n,offsetY)}if(e){this.declutterTree_.clear()}var o=this.renderedTiles;var p=f.getTileGridForProjection(b.viewState.projection);var q=[];var r=[];for(var i=o.length-1;i>=0;--i){var s=(o[i]);if(s.getState()==ol.TileState.ABORT){continue}var u=s.tileCoord;var v=p.getTileCoordExtent(u)[0]-p.getTileCoordExtent(s.wrappedTileCoord)[0];var w=undefined;for(var t=0,tt=s.tileKeys.length;t<tt;++t){var x=s.getTile(s.tileKeys[t]);if(x.getState()==ol.TileState.ERROR){continue}var y=x.getReplayGroup(d,u.toString());if(g!=ol.layer.VectorTileRenderType.VECTOR&&!y.hasReplays(h)){continue}if(!w){w=this.getTransform(b,v)}var z=x.tileCoord[0];var A=y.getClipCoords(w);a.save();a.globalAlpha=c.opacity;for(var j=0,jj=q.length;j<jj;++j){var B=q[j];if(z<r[j]){a.beginPath();a.moveTo(A[0],A[1]);a.lineTo(A[2],A[3]);a.lineTo(A[4],A[5]);a.lineTo(A[6],A[7]);a.moveTo(B[6],B[7]);a.lineTo(B[4],B[5]);a.lineTo(B[2],B[3]);a.lineTo(B[0],B[1]);a.clip()}}y.replay(a,w,l,{},h,e);a.restore();q.push(A);r.push(z)}}if(e){ol.render.canvas.ReplayGroup.replayDeclutter(e,a,l)}if(l){ol.render.canvas.rotateAtOffset(a,l,(n),(offsetY))}ol.renderer.canvas.TileLayer.prototype.postCompose.apply(this,arguments)};ol.renderer.canvas.VectorTileLayer.prototype.renderFeature=function(a,b,c,d){if(!c){return false}var e=false;if(Array.isArray(c)){for(var i=0,ii=c.length;i<ii;++i){e=ol.renderer.vector.renderFeature(d,a,c[i],b,this.handleStyleImageChange_,this)||e}}else{e=ol.renderer.vector.renderFeature(d,a,c,b,this.handleStyleImageChange_,this)}return e};ol.renderer.canvas.VectorTileLayer.prototype.renderTileImage_=function(a,b,c){var d=this.getLayer();var e=a.getReplayState(d);var f=d.getRevision();var g=ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS[d.getRenderMode()];if(g&&e.renderedTileRevision!==f){e.renderedTileRevision=f;var h=a.wrappedTileCoord;var z=h[0];var j=b.pixelRatio;var k=(d.getSource());var l=k.getTileGridForProjection(b.viewState.projection);var m=l.getResolution(z);var n=a.getContext(d);var o=k.getTilePixelSize(z,j,b.viewState.projection);n.canvas.width=o[0];n.canvas.height=o[1];var p=l.getTileCoordExtent(h);for(var i=0,ii=a.tileKeys.length;i<ii;++i){var q=a.getTile(a.tileKeys[i]);if(q.getState()==ol.TileState.ERROR){continue}var r=j/m;var s=ol.transform.reset(this.tmpTransform_);ol.transform.scale(s,r,-r);ol.transform.translate(s,-p[0],-p[3]);var t=q.getReplayGroup(d,a.tileCoord.toString());t.replay(n,s,0,{},g)}}};bq.provide('ol.CanvasMap');bq.require('ol');bq.require('ol.PluggableMap');bq.require('ol.PluginType');bq.require('ol.control');bq.require('ol.interaction');bq.require('ol.obj');bq.require('ol.plugins');bq.require('ol.renderer.canvas.ImageLayer');bq.require('ol.renderer.canvas.Map');bq.require('ol.renderer.canvas.TileLayer');bq.require('ol.renderer.canvas.VectorLayer');bq.require('ol.renderer.canvas.VectorTileLayer');ol.plugins.register(ol.PluginType.MAP_RENDERER,ol.renderer.canvas.Map);ol.plugins.registerMultiple(ol.PluginType.LAYER_RENDERER,[ol.renderer.canvas.ImageLayer,ol.renderer.canvas.TileLayer,ol.renderer.canvas.VectorLayer,ol.renderer.canvas.VectorTileLayer]);ol.CanvasMap=function(a){a=ol.obj.assign({},a);delete a.renderer;if(!a.controls){a.controls=ol.control.defaults()}if(!a.interactions){a.interactions=ol.interaction.defaults()}ol.PluggableMap.call(this,a)};ol.inherits(ol.CanvasMap,ol.PluggableMap);bq.provide('ol.control.FullScreen');bq.require('ol');bq.require('ol.control.Control');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');ol.control.FullScreen=function(a){var b=a?a:{};this.cssClassName_=b.className!==undefined?b.className:'ol-full-screen';var c=b.label!==undefined?b.label:'\u2922';this.labelNode_=typeof c==='string'?document.createTextNode(c):c;var d=b.labelActive!==undefined?b.labelActive:'\u00d7';this.labelActiveNode_=typeof d==='string'?document.createTextNode(d):d;var e=b.tipLabel?b.tipLabel:'Toggle full-screen';var f=document.createElement('button');f.className=this.cssClassName_+'-'+ol.control.FullScreen.isFullScreen();f.setAttribute('type','button');f.title=e;f.appendChild(this.labelNode_);ol.events.listen(f,ol.events.EventType.CLICK,this.handleClick_,this);var g=this.cssClassName_+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL+' '+(!ol.control.FullScreen.isFullScreenSupported()?ol.css.CLASS_UNSUPPORTED:'');var h=document.createElement('div');h.className=g;h.appendChild(f);ol.control.Control.call(this,{element:h,target:b.target});this.keys_=b.keys!==undefined?b.keys:false;this.source_=b.source};ol.inherits(ol.control.FullScreen,ol.control.Control);ol.control.FullScreen.prototype.handleClick_=function(a){a.preventDefault();this.handleFullScreen_()};ol.control.FullScreen.prototype.handleFullScreen_=function(){if(!ol.control.FullScreen.isFullScreenSupported()){return}var a=this.getMap();if(!a){return}if(ol.control.FullScreen.isFullScreen()){ol.control.FullScreen.exitFullScreen()}else{var b;if(this.source_){b=typeof this.source_==='string'?document.getElementById(this.source_):this.source_}else{b=a.getTargetElement()}if(this.keys_){ol.control.FullScreen.requestFullScreenWithKeys(b)}else{ol.control.FullScreen.requestFullScreen(b)}}};ol.control.FullScreen.prototype.handleFullScreenChange_=function(){var a=this.element.firstElementChild;var b=this.getMap();if(ol.control.FullScreen.isFullScreen()){a.className=this.cssClassName_+'-true';ol.dom.replaceNode(this.labelActiveNode_,this.labelNode_)}else{a.className=this.cssClassName_+'-false';ol.dom.replaceNode(this.labelNode_,this.labelActiveNode_)}if(b){b.updateSize()}};ol.control.FullScreen.prototype.setMap=function(a){ol.control.Control.prototype.setMap.call(this,a);if(a){this.listenerKeys.push(ol.events.listen(document,ol.control.FullScreen.getChangeType_(),this.handleFullScreenChange_,this))}};ol.control.FullScreen.isFullScreenSupported=function(){var a=document.body;return!!(a.webkitRequestFullscreen||(a.mozRequestFullScreen&&document.mozFullScreenEnabled)||(a.msRequestFullscreen&&document.msFullscreenEnabled)||(a.requestFullscreen&&document.fullscreenEnabled))};ol.control.FullScreen.isFullScreen=function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)};ol.control.FullScreen.requestFullScreen=function(a){if(a.requestFullscreen){a.requestFullscreen()}else if(a.msRequestFullscreen){a.msRequestFullscreen()}else if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}};ol.control.FullScreen.requestFullScreenWithKeys=function(a){if(a.mozRequestFullScreenWithKeys){a.mozRequestFullScreenWithKeys()}else if(a.webkitRequestFullscreen){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{ol.control.FullScreen.requestFullScreen(a)}};ol.control.FullScreen.exitFullScreen=function(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}};ol.control.FullScreen.getChangeType_=(function(){var b;return function(){if(!b){var a=document.body;if(a.webkitRequestFullscreen){b='webkitfullscreenchange'}else if(a.mozRequestFullScreen){b='mozfullscreenchange'}else if(a.msRequestFullscreen){b='MSFullscreenChange'}else if(a.requestFullscreen){b='fullscreenchange'}}return b}})();bq.provide('ol.control.MousePosition');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.Object');bq.require('ol.control.Control');bq.require('ol.proj');ol.control.MousePosition=function(a){var b=a?a:{};var c=document.createElement('DIV');c.className=b.className!==undefined?b.className:'ol-mouse-position';var d=b.render?b.render:ol.control.MousePosition.render;ol.control.Control.call(this,{element:c,render:d,target:b.target});ol.events.listen(this,ol.Object.getChangeEventType(ol.control.MousePosition.Property_.PROJECTION),this.handleProjectionChanged_,this);if(b.coordinateFormat){this.setCoordinateFormat(b.coordinateFormat)}if(b.projection){this.setProjection(b.projection)}this.undefinedHTML_=b.undefinedHTML!==undefined?b.undefinedHTML:'';this.renderedHTML_=c.innerHTML;this.mapProjection_=null;this.transform_=null;this.lastMouseMovePixel_=null};ol.inherits(ol.control.MousePosition,ol.control.Control);ol.control.MousePosition.render=function(a){var b=a.frameState;if(!b){this.mapProjection_=null}else{if(this.mapProjection_!=b.viewState.projection){this.mapProjection_=b.viewState.projection;this.transform_=null}}this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleProjectionChanged_=function(){this.transform_=null};ol.control.MousePosition.prototype.getCoordinateFormat=function(){return(this.get(ol.control.MousePosition.Property_.COORDINATE_FORMAT))};ol.control.MousePosition.prototype.getProjection=function(){return(this.get(ol.control.MousePosition.Property_.PROJECTION))};ol.control.MousePosition.prototype.handleMouseMove=function(a){var b=this.getMap();this.lastMouseMovePixel_=b.getEventPixel(a);this.updateHTML_(this.lastMouseMovePixel_)};ol.control.MousePosition.prototype.handleMouseOut=function(a){this.updateHTML_(null);this.lastMouseMovePixel_=null};ol.control.MousePosition.prototype.setMap=function(a){ol.control.Control.prototype.setMap.call(this,a);if(a){var b=a.getViewport();this.listenerKeys.push(ol.events.listen(b,ol.events.EventType.MOUSEMOVE,this.handleMouseMove,this),ol.events.listen(b,ol.events.EventType.MOUSEOUT,this.handleMouseOut,this))}};ol.control.MousePosition.prototype.setCoordinateFormat=function(a){this.set(ol.control.MousePosition.Property_.COORDINATE_FORMAT,a)};ol.control.MousePosition.prototype.setProjection=function(a){this.set(ol.control.MousePosition.Property_.PROJECTION,ol.proj.get(a))};ol.control.MousePosition.prototype.updateHTML_=function(a){var b=this.undefinedHTML_;if(a&&this.mapProjection_){if(!this.transform_){var c=this.getProjection();if(c){this.transform_=ol.proj.getTransformFromProjections(this.mapProjection_,c)}else{this.transform_=ol.proj.identityTransform}}var d=this.getMap();var e=d.getCoordinateFromPixel(a);if(e){this.transform_(e,e);var f=this.getCoordinateFormat();if(f){b=f(e)}else{b=e.toString()}}}if(!this.renderedHTML_||b!=this.renderedHTML_){this.element.innerHTML=b;this.renderedHTML_=b}};ol.control.MousePosition.Property_={PROJECTION:'projection',COORDINATE_FORMAT:'coordinateFormat'};bq.provide('ol.OverlayPositioning');ol.OverlayPositioning={BOTTOM_LEFT:'bottom-left',BOTTOM_CENTER:'bottom-center',BOTTOM_RIGHT:'bottom-right',CENTER_LEFT:'center-left',CENTER_CENTER:'center-center',CENTER_RIGHT:'center-right',TOP_LEFT:'top-left',TOP_CENTER:'top-center',TOP_RIGHT:'top-right'};bq.provide('ol.Overlay');bq.require('ol');bq.require('ol.MapEventType');bq.require('ol.Object');bq.require('ol.OverlayPositioning');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.extent');ol.Overlay=function(a){ol.Object.call(this);this.options=a;this.id=a.id;this.insertFirst=a.insertFirst!==undefined?a.insertFirst:true;this.stopEvent=a.stopEvent!==undefined?a.stopEvent:true;this.element=document.createElement('DIV');this.element.className=a.className!==undefined?a.className:'ol-overlay-container '+ol.css.CLASS_SELECTABLE;this.element.style.position='absolute';this.autoPan=a.autoPan!==undefined?a.autoPan:false;this.autoPanAnimation=a.autoPanAnimation||({});this.autoPanMargin=a.autoPanMargin!==undefined?a.autoPanMargin:20;this.rendered={bottom_:'',left_:'',right_:'',top_:'',visible:true};this.mapPostrenderListenerKey=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property.ELEMENT),this.handleElementChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property.MAP),this.handleMapChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property.OFFSET),this.handleOffsetChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property.POSITION),this.handlePositionChanged,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property.POSITIONING),this.handlePositioningChanged,this);if(a.element!==undefined){this.setElement(a.element)}this.setOffset(a.offset!==undefined?a.offset:[0,0]);this.setPositioning(a.positioning!==undefined?(a.positioning):ol.OverlayPositioning.TOP_LEFT);if(a.position!==undefined){this.setPosition(a.position)}};ol.inherits(ol.Overlay,ol.Object);ol.Overlay.prototype.getElement=function(){return(this.get(ol.Overlay.Property.ELEMENT))};ol.Overlay.prototype.getId=function(){return this.id};ol.Overlay.prototype.getMap=function(){return(this.get(ol.Overlay.Property.MAP))};ol.Overlay.prototype.getOffset=function(){return(this.get(ol.Overlay.Property.OFFSET))};ol.Overlay.prototype.getPosition=function(){return(this.get(ol.Overlay.Property.POSITION))};ol.Overlay.prototype.getPositioning=function(){return(this.get(ol.Overlay.Property.POSITIONING))};ol.Overlay.prototype.handleElementChanged=function(){ol.dom.removeChildren(this.element);var a=this.getElement();if(a){this.element.appendChild(a)}};ol.Overlay.prototype.handleMapChanged=function(){if(this.mapPostrenderListenerKey){ol.dom.removeNode(this.element);ol.events.unlistenByKey(this.mapPostrenderListenerKey);this.mapPostrenderListenerKey=null}var a=this.getMap();if(a){this.mapPostrenderListenerKey=ol.events.listen(a,ol.MapEventType.POSTRENDER,this.render,this);this.updatePixelPosition();var b=this.stopEvent?a.getOverlayContainerStopEvent():a.getOverlayContainer();if(this.insertFirst){b.insertBefore(this.element,b.childNodes[0]||null)}else{b.appendChild(this.element)}}};ol.Overlay.prototype.render=function(){this.updatePixelPosition()};ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition();if(this.get(ol.Overlay.Property.POSITION)&&this.autoPan){this.panIntoView()}};ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()};ol.Overlay.prototype.setElement=function(a){this.set(ol.Overlay.Property.ELEMENT,a)};ol.Overlay.prototype.setMap=function(a){this.set(ol.Overlay.Property.MAP,a)};ol.Overlay.prototype.setOffset=function(a){this.set(ol.Overlay.Property.OFFSET,a)};ol.Overlay.prototype.setPosition=function(a){this.set(ol.Overlay.Property.POSITION,a)};ol.Overlay.prototype.panIntoView=function(){var a=this.getMap();if(!a||!a.getTargetElement()){return}var b=this.getRect(a.getTargetElement(),a.getSize());var c=(this.getElement());var d=this.getRect(c,[ol.dom.outerWidth(c),ol.dom.outerHeight(c)]);var e=this.autoPanMargin;if(!ol.extent.containsExtent(b,d)){var f=d[0]-b[0];var g=b[2]-d[2];var h=d[1]-b[1];var i=b[3]-d[3];var j=[0,0];if(f<0){j[0]=f-e}else if(g<0){j[0]=Math.abs(g)+e}if(h<0){j[1]=h-e}else if(i<0){j[1]=Math.abs(i)+e}if(j[0]!==0||j[1]!==0){var k=(a.getView().getCenter());var l=a.getPixelFromCoordinate(k);var m=[l[0]+j[0],l[1]+j[1]];a.getView().animate({center:a.getCoordinateFromPixel(m),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}};ol.Overlay.prototype.getRect=function(a,b){var c=a.getBoundingClientRect();var d=c.left+window.pageXOffset;var e=c.top+window.pageYOffset;return[d,e,d+b[0],e+b[1]]};ol.Overlay.prototype.setPositioning=function(a){this.set(ol.Overlay.Property.POSITIONING,a)};ol.Overlay.prototype.setVisible=function(a){if(this.rendered.visible!==a){this.element.style.display=a?'':'none';this.rendered.visible=a}};ol.Overlay.prototype.updatePixelPosition=function(){var a=this.getMap();var b=this.getPosition();if(!a||!a.isRendered()||!b){this.setVisible(false);return}var c=a.getPixelFromCoordinate(b);var d=a.getSize();this.updateRenderedPosition(c,d)};ol.Overlay.prototype.updateRenderedPosition=function(a,b){var c=this.element.style;var d=this.getOffset();var e=this.getPositioning();this.setVisible(true);var f=d[0];var g=d[1];if(e==ol.OverlayPositioning.BOTTOM_RIGHT||e==ol.OverlayPositioning.CENTER_RIGHT||e==ol.OverlayPositioning.TOP_RIGHT){if(this.rendered.left_!==''){this.rendered.left_=c.left=''}var h=Math.round(b[0]-a[0]-f)+'px';if(this.rendered.right_!=h){this.rendered.right_=c.right=h}}else{if(this.rendered.right_!==''){this.rendered.right_=c.right=''}if(e==ol.OverlayPositioning.BOTTOM_CENTER||e==ol.OverlayPositioning.CENTER_CENTER||e==ol.OverlayPositioning.TOP_CENTER){f-=this.element.offsetWidth/2}var i=Math.round(a[0]+f)+'px';if(this.rendered.left_!=i){this.rendered.left_=c.left=i}}if(e==ol.OverlayPositioning.BOTTOM_LEFT||e==ol.OverlayPositioning.BOTTOM_CENTER||e==ol.OverlayPositioning.BOTTOM_RIGHT){if(this.rendered.top_!==''){this.rendered.top_=c.top=''}var j=Math.round(b[1]-a[1]-g)+'px';if(this.rendered.bottom_!=j){this.rendered.bottom_=c.bottom=j}}else{if(this.rendered.bottom_!==''){this.rendered.bottom_=c.bottom=''}if(e==ol.OverlayPositioning.CENTER_LEFT||e==ol.OverlayPositioning.CENTER_CENTER||e==ol.OverlayPositioning.CENTER_RIGHT){g-=this.element.offsetHeight/2}var k=Math.round(a[1]+g)+'px';if(this.rendered.top_!=k){this.rendered.top_=c.top=k}}};ol.Overlay.prototype.getOptions=function(){return this.options};ol.Overlay.Property={ELEMENT:'element',MAP:'map',OFFSET:'offset',POSITION:'position',POSITIONING:'positioning'};bq.provide('ol.control.OverviewMap');bq.require('ol');bq.require('ol.Collection');bq.require('ol.PluggableMap');bq.require('ol.MapEventType');bq.require('ol.MapProperty');bq.require('ol.Object');bq.require('ol.ObjectEventType');bq.require('ol.Overlay');bq.require('ol.OverlayPositioning');bq.require('ol.ViewProperty');bq.require('ol.control.Control');bq.require('ol.coordinate');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');ol.control.OverviewMap=function(c){var d=c?c:{};this.collapsed_=d.collapsed!==undefined?d.collapsed:true;this.collapsible_=d.collapsible!==undefined?d.collapsible:true;if(!this.collapsible_){this.collapsed_=false}var e=d.className!==undefined?d.className:'ol-overviewmap';var f=d.tipLabel!==undefined?d.tipLabel:'Overview map';var g=d.collapseLabel!==undefined?d.collapseLabel:'\u00AB';if(typeof g==='string'){this.collapseLabel_=document.createElement('span');this.collapseLabel_.textContent=g}else{this.collapseLabel_=g}var h=d.label!==undefined?d.label:'\u00BB';if(typeof h==='string'){this.label_=document.createElement('span');this.label_.textContent=h}else{this.label_=h}var i=(this.collapsible_&&!this.collapsed_)?this.collapseLabel_:this.label_;var j=document.createElement('button');j.setAttribute('type','button');j.title=f;j.appendChild(i);ol.events.listen(j,ol.events.EventType.CLICK,this.handleClick_,this);this.ovmapDiv_=document.createElement('DIV');this.ovmapDiv_.className='ol-overviewmap-map';this.ovmap_=new ol.PluggableMap({controls:new ol.Collection(),interactions:new ol.Collection(),view:d.view});var k=this.ovmap_;if(d.layers){d.layers.forEach(function(a){k.addLayer(a)},this)}var l=document.createElement('DIV');l.className='ol-overviewmap-box';l.style.boxSizing='border-box';this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:l});this.ovmap_.addOverlay(this.boxOverlay_);var m=e+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?' ol-collapsed':'')+(this.collapsible_?'':' ol-uncollapsible');var n=document.createElement('div');n.className=m;n.appendChild(this.ovmapDiv_);n.appendChild(j);var o=d.render?d.render:ol.control.OverviewMap.render;ol.control.Control.call(this,{element:n,render:o,target:d.target});var p=this;var q=this.boxOverlay_;var r=this.boxOverlay_.getElement();var s=function(a){return{clientX:a.clientX-(r.offsetWidth/2),clientY:a.clientY+(r.offsetHeight/2)}};var t=function(a){var b=k.getEventCoordinate(s(a));q.setPosition(b)};var u=function(a){var b=k.getEventCoordinate(a);p.getMap().getView().setCenter(b);window.removeEventListener('mousemove',t);window.removeEventListener('mouseup',u)};r.addEventListener('mousedown',function(){window.addEventListener('mousemove',t);window.addEventListener('mouseup',u)})};ol.inherits(ol.control.OverviewMap,ol.control.Control);ol.control.OverviewMap.prototype.setMap=function(a){var b=this.getMap();if(a===b){return}if(b){var c=b.getView();if(c){this.unbindView_(c)}this.ovmap_.setTarget(null)}ol.control.Control.prototype.setMap.call(this,a);if(a){this.ovmap_.setTarget(this.ovmapDiv_);this.listenerKeys.push(ol.events.listen(a,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));if(this.ovmap_.getLayers().getLength()===0){this.ovmap_.setLayerGroup(a.getLayerGroup())}var d=a.getView();if(d){this.bindView_(d);if(d.isDef()){this.ovmap_.updateSize();this.resetExtent_()}}}};ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(a){if(a.key===ol.MapProperty.VIEW){var b=(a.oldValue);if(b){this.unbindView_(b)}var c=this.getMap().getView();this.bindView_(c)}};ol.control.OverviewMap.prototype.bindView_=function(a){ol.events.listen(a,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)};ol.control.OverviewMap.prototype.unbindView_=function(a){ol.events.unlisten(a,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)};ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())};ol.control.OverviewMap.render=function(a){this.validateExtent_();this.updateBox_()};ol.control.OverviewMap.prototype.validateExtent_=function(){var a=this.getMap();var b=this.ovmap_;if(!a.isRendered()||!b.isRendered()){return}var c=(a.getSize());var d=a.getView();var e=d.calculateExtent(c);var f=(b.getSize());var g=b.getView();var h=g.calculateExtent(f);var i=b.getPixelFromCoordinate(ol.extent.getTopLeft(e));var j=b.getPixelFromCoordinate(ol.extent.getBottomRight(e));var k=Math.abs(i[0]-j[0]);var l=Math.abs(i[1]-j[1]);var m=f[0];var n=f[1];if(k<m*ol.OVERVIEWMAP_MIN_RATIO||l<n*ol.OVERVIEWMAP_MIN_RATIO||k>m*ol.OVERVIEWMAP_MAX_RATIO||l>n*ol.OVERVIEWMAP_MAX_RATIO){this.resetExtent_()}else if(!ol.extent.containsExtent(h,e)){this.recenter_()}};ol.control.OverviewMap.prototype.resetExtent_=function(){if(ol.OVERVIEWMAP_MAX_RATIO===0||ol.OVERVIEWMAP_MIN_RATIO===0){return}var a=this.getMap();var b=this.ovmap_;var c=(a.getSize());var d=a.getView();var e=d.calculateExtent(c);var f=b.getView();var g=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2;var h=1/(Math.pow(2,g/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(e,h);f.fit(e)};ol.control.OverviewMap.prototype.recenter_=function(){var a=this.getMap();var b=this.ovmap_;var c=a.getView();var d=b.getView();d.setCenter(c.getCenter())};ol.control.OverviewMap.prototype.updateBox_=function(){var a=this.getMap();var b=this.ovmap_;if(!a.isRendered()||!b.isRendered()){return}var c=(a.getSize());var d=a.getView();var e=b.getView();var f=d.getRotation();var g=this.boxOverlay_;var h=this.boxOverlay_.getElement();var i=d.calculateExtent(c);var j=e.getResolution();var k=ol.extent.getBottomLeft(i);var l=ol.extent.getTopRight(i);var m=this.calculateCoordinateRotate_(f,k);g.setPosition(m);if(h){h.style.width=Math.abs((k[0]-l[0])/j)+'px';h.style.height=Math.abs((l[1]-k[1])/j)+'px'}};ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(a,b){var c;var d=this.getMap();var e=d.getView();var f=e.getCenter();if(f){c=[b[0]-f[0],b[1]-f[1]];ol.coordinate.rotate(c,a);ol.coordinate.add(c,f)}return c};ol.control.OverviewMap.prototype.handleClick_=function(a){a.preventDefault();this.handleToggle_()};ol.control.OverviewMap.prototype.handleToggle_=function(){this.element.classList.toggle('ol-collapsed');if(this.collapsed_){ol.dom.replaceNode(this.collapseLabel_,this.label_)}else{ol.dom.replaceNode(this.label_,this.collapseLabel_)}this.collapsed_=!this.collapsed_;var b=this.ovmap_;if(!this.collapsed_&&!b.isRendered()){b.updateSize();this.resetExtent_();ol.events.listenOnce(b,ol.MapEventType.POSTRENDER,function(a){this.updateBox_()},this)}};ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_};ol.control.OverviewMap.prototype.setCollapsible=function(a){if(this.collapsible_===a){return}this.collapsible_=a;this.element.classList.toggle('ol-uncollapsible');if(!a&&this.collapsed_){this.handleToggle_()}};ol.control.OverviewMap.prototype.setCollapsed=function(a){if(!this.collapsible_||this.collapsed_===a){return}this.handleToggle_()};ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_};ol.control.OverviewMap.prototype.getOverviewMap=function(){return this.ovmap_};bq.provide('ol.control.ScaleLineUnits');ol.control.ScaleLineUnits={DEGREES:'degrees',IMPERIAL:'imperial',NAUTICAL:'nautical',METRIC:'metric',US:'us'};bq.provide('ol.control.ScaleLine');bq.require('ol');bq.require('ol.Object');bq.require('ol.asserts');bq.require('ol.control.Control');bq.require('ol.control.ScaleLineUnits');bq.require('ol.css');bq.require('ol.events');bq.require('ol.proj');bq.require('ol.proj.Units');ol.control.ScaleLine=function(a){var b=a?a:{};var c=b.className!==undefined?b.className:'ol-scale-line';this.innerElement_=document.createElement('DIV');this.innerElement_.className=c+'-inner';this.element_=document.createElement('DIV');this.element_.className=c+' '+ol.css.CLASS_UNSELECTABLE;this.element_.appendChild(this.innerElement_);this.viewState_=null;this.minWidth_=b.minWidth!==undefined?b.minWidth:64;this.renderedVisible_=false;this.renderedWidth_=undefined;this.renderedHTML_='';var d=b.render?b.render:ol.control.ScaleLine.render;ol.control.Control.call(this,{element:this.element_,render:d,target:b.target});ol.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLine.Property_.UNITS),this.handleUnitsChanged_,this);this.setUnits((b.units)||ol.control.ScaleLineUnits.METRIC)};ol.inherits(ol.control.ScaleLine,ol.control.Control);ol.control.ScaleLine.LEADING_DIGITS=[1,2,5];ol.control.ScaleLine.prototype.getUnits=function(){return(this.get(ol.control.ScaleLine.Property_.UNITS))};ol.control.ScaleLine.render=function(a){var b=a.frameState;if(!b){this.viewState_=null}else{this.viewState_=b.viewState}this.updateElement_()};ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()};ol.control.ScaleLine.prototype.setUnits=function(a){this.set(ol.control.ScaleLine.Property_.UNITS,a)};ol.control.ScaleLine.prototype.updateElement_=function(){var a=this.viewState_;if(!a){if(this.renderedVisible_){this.element_.style.display='none';this.renderedVisible_=false}return}var b=a.center;var c=a.projection;var d=this.getUnits();var e=d==ol.control.ScaleLineUnits.DEGREES?ol.proj.Units.DEGREES:ol.proj.Units.METERS;var f=ol.proj.getPointResolution(c,a.resolution,b,e);if(d!=ol.control.ScaleLineUnits.DEGREES){f*=c.getMetersPerUnit()}var g=this.minWidth_*f;var h='';if(d==ol.control.ScaleLineUnits.DEGREES){var j=ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES];if(c.getUnits()==ol.proj.Units.DEGREES){g*=j}else{f/=j}if(g<j/60){h='\u2033';f*=3600}else if(g<j){h='\u2032';f*=60}else{h='\u00b0'}}else if(d==ol.control.ScaleLineUnits.IMPERIAL){if(g<0.9144){h='in';f/=0.0254}else if(g<1609.344){h='ft';f/=0.3048}else{h='mi';f/=1609.344}}else if(d==ol.control.ScaleLineUnits.NAUTICAL){f/=1852;h='nm'}else if(d==ol.control.ScaleLineUnits.METRIC){if(g<0.001){h='m';f*=1000000}else if(g<1){h='mm';f*=1000}else if(g<1000){h='m'}else{h='km';f/=1000}}else if(d==ol.control.ScaleLineUnits.US){if(g<0.9144){h='in';f*=39.37}else if(g<1609.344){h='ft';f/=0.30480061}else{h='mi';f/=1609.3472}}else{ol.asserts.assert(false,33)}var i=3*Math.floor(Math.log(this.minWidth_*f)/Math.log(10));var k,width;while(true){k=ol.control.ScaleLine.LEADING_DIGITS[((i%3)+3)%3]*Math.pow(10,Math.floor(i/3));width=Math.round(k/f);if(isNaN(width)){this.element_.style.display='none';this.renderedVisible_=false;return}else if(width>=this.minWidth_){break}++i}var l=k+' '+h;if(this.renderedHTML_!=l){this.innerElement_.innerHTML=l;this.renderedHTML_=l}if(this.renderedWidth_!=width){this.innerElement_.style.width=width+'px';this.renderedWidth_=width}if(!this.renderedVisible_){this.element_.style.display='';this.renderedVisible_=true}};ol.control.ScaleLine.Property_={UNITS:'units'};bq.provide('ol.control.ZoomSlider');bq.require('ol');bq.require('ol.ViewHint');bq.require('ol.control.Control');bq.require('ol.css');bq.require('ol.easing');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.math');bq.require('ol.pointer.EventType');bq.require('ol.pointer.PointerEventHandler');ol.control.ZoomSlider=function(a){var b=a?a:{};this.currentResolution_=undefined;this.direction_=ol.control.ZoomSlider.Direction_.VERTICAL;this.dragging_;this.heightLimit_=0;this.widthLimit_=0;this.previousX_;this.previousY_;this.thumbSize_=null;this.sliderInitialized_=false;this.duration_=b.duration!==undefined?b.duration:200;var c=b.className!==undefined?b.className:'ol-zoomslider';var d=document.createElement('button');d.setAttribute('type','button');d.className=c+'-thumb '+ol.css.CLASS_UNSELECTABLE;var e=document.createElement('div');e.className=c+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL;e.appendChild(d);this.dragger_=new ol.pointer.PointerEventHandler(e);ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERDOWN,this.handleDraggerStart_,this);ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERMOVE,this.handleDraggerDrag_,this);ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERUP,this.handleDraggerEnd_,this);ol.events.listen(e,ol.events.EventType.CLICK,this.handleContainerClick_,this);ol.events.listen(d,ol.events.EventType.CLICK,ol.events.Event.stopPropagation);var f=b.render?b.render:ol.control.ZoomSlider.render;ol.control.Control.call(this,{element:e,render:f})};ol.inherits(ol.control.ZoomSlider,ol.control.Control);ol.control.ZoomSlider.prototype.disposeInternal=function(){this.dragger_.dispose();ol.control.Control.prototype.disposeInternal.call(this)};ol.control.ZoomSlider.Direction_={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(a){ol.control.Control.prototype.setMap.call(this,a);if(a){a.render()}};ol.control.ZoomSlider.prototype.initSlider_=function(){var a=this.element;var b={width:a.offsetWidth,height:a.offsetHeight};var c=a.firstElementChild;var d=getComputedStyle(c);var e=c.offsetWidth+parseFloat(d['marginRight'])+parseFloat(d['marginLeft']);var f=c.offsetHeight+parseFloat(d['marginTop'])+parseFloat(d['marginBottom']);this.thumbSize_=[e,f];if(b.width>b.height){this.direction_=ol.control.ZoomSlider.Direction_.HORIZONTAL;this.widthLimit_=b.width-e}else{this.direction_=ol.control.ZoomSlider.Direction_.VERTICAL;this.heightLimit_=b.height-f}this.sliderInitialized_=true};ol.control.ZoomSlider.render=function(a){if(!a.frameState){return}if(!this.sliderInitialized_){this.initSlider_()}var b=a.frameState.viewState.resolution;if(b!==this.currentResolution_){this.currentResolution_=b;this.setThumbPosition_(b)}};ol.control.ZoomSlider.prototype.handleContainerClick_=function(a){var b=this.getMap().getView();var c=this.getRelativePosition_(a.offsetX-this.thumbSize_[0]/2,a.offsetY-this.thumbSize_[1]/2);var d=this.getResolutionForPosition_(c);b.animate({resolution:b.constrainResolution(d),duration:this.duration_,easing:ol.easing.easeOut})};ol.control.ZoomSlider.prototype.handleDraggerStart_=function(a){if(!this.dragging_&&a.originalEvent.target===this.element.firstElementChild){this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1);this.previousX_=a.clientX;this.previousY_=a.clientY;this.dragging_=true}};ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(a){if(this.dragging_){var b=this.element.firstElementChild;var c=a.clientX-this.previousX_+parseInt(b.style.left,10);var d=a.clientY-this.previousY_+parseInt(b.style.top,10);var e=this.getRelativePosition_(c,d);this.currentResolution_=this.getResolutionForPosition_(e);this.getMap().getView().setResolution(this.currentResolution_);this.setThumbPosition_(this.currentResolution_);this.previousX_=a.clientX;this.previousY_=a.clientY}};ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(a){if(this.dragging_){var b=this.getMap().getView();b.setHint(ol.ViewHint.INTERACTING,-1);b.animate({resolution:b.constrainResolution(this.currentResolution_),duration:this.duration_,easing:ol.easing.easeOut});this.dragging_=false;this.previousX_=undefined;this.previousY_=undefined}};ol.control.ZoomSlider.prototype.setThumbPosition_=function(a){var b=this.getPositionForResolution_(a);var c=this.element.firstElementChild;if(this.direction_==ol.control.ZoomSlider.Direction_.HORIZONTAL){c.style.left=this.widthLimit_*b+'px'}else{c.style.top=this.heightLimit_*b+'px'}};ol.control.ZoomSlider.prototype.getRelativePosition_=function(x,y){var a;if(this.direction_===ol.control.ZoomSlider.Direction_.HORIZONTAL){a=x/this.widthLimit_}else{a=y/this.heightLimit_}return ol.math.clamp(a,0,1)};ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(a){var b=this.getMap().getView().getResolutionForValueFunction();return b(1-a)};ol.control.ZoomSlider.prototype.getPositionForResolution_=function(a){var b=this.getMap().getView().getValueForResolutionFunction();return 1-b(a)};bq.provide('ol.control.ZoomToExtent');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.control.Control');bq.require('ol.css');ol.control.ZoomToExtent=function(a){var b=a?a:{};this.extent=b.extent?b.extent:null;var c=b.className!==undefined?b.className:'ol-zoom-extent';var d=b.label!==undefined?b.label:'E';var e=b.tipLabel!==undefined?b.tipLabel:'Fit to extent';var f=document.createElement('button');f.setAttribute('type','button');f.title=e;f.appendChild(typeof d==='string'?document.createTextNode(d):d);ol.events.listen(f,ol.events.EventType.CLICK,this.handleClick_,this);var g=c+' '+ol.css.CLASS_UNSELECTABLE+' '+ol.css.CLASS_CONTROL;var h=document.createElement('div');h.className=g;h.appendChild(f);ol.control.Control.call(this,{element:h,target:b.target})};ol.inherits(ol.control.ZoomToExtent,ol.control.Control);ol.control.ZoomToExtent.prototype.handleClick_=function(a){a.preventDefault();this.handleZoomToExtent()};ol.control.ZoomToExtent.prototype.handleZoomToExtent=function(){var a=this.getMap();var b=a.getView();var c=!this.extent?b.getProjection().getExtent():this.extent;b.fit(c)};bq.provide('ol.DeviceOrientation');bq.require('ol.events');bq.require('ol');bq.require('ol.Object');bq.require('ol.has');bq.require('ol.math');ol.DeviceOrientation=function(a){ol.Object.call(this);var b=a?a:{};this.listenerKey_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.DeviceOrientation.Property_.TRACKING),this.handleTrackingChanged_,this);this.setTracking(b.tracking!==undefined?b.tracking:false)};ol.inherits(ol.DeviceOrientation,ol.Object);ol.DeviceOrientation.prototype.disposeInternal=function(){this.setTracking(false);ol.Object.prototype.disposeInternal.call(this)};ol.DeviceOrientation.prototype.orientationChange_=function(a){var b=(a);if(b.alpha!==null){var c=ol.math.toRadians(b.alpha);this.set(ol.DeviceOrientation.Property_.ALPHA,c);if(typeof b.absolute==='boolean'&&b.absolute){this.set(ol.DeviceOrientation.Property_.HEADING,c)}else if(typeof b.webkitCompassHeading==='number'&&b.webkitCompassAccuracy!=-1){var d=ol.math.toRadians(b.webkitCompassHeading);this.set(ol.DeviceOrientation.Property_.HEADING,d)}}if(b.beta!==null){this.set(ol.DeviceOrientation.Property_.BETA,ol.math.toRadians(b.beta))}if(b.gamma!==null){this.set(ol.DeviceOrientation.Property_.GAMMA,ol.math.toRadians(b.gamma))}this.changed()};ol.DeviceOrientation.prototype.getAlpha=function(){return(this.get(ol.DeviceOrientation.Property_.ALPHA))};ol.DeviceOrientation.prototype.getBeta=function(){return(this.get(ol.DeviceOrientation.Property_.BETA))};ol.DeviceOrientation.prototype.getGamma=function(){return(this.get(ol.DeviceOrientation.Property_.GAMMA))};ol.DeviceOrientation.prototype.getHeading=function(){return(this.get(ol.DeviceOrientation.Property_.HEADING))};ol.DeviceOrientation.prototype.getTracking=function(){return(this.get(ol.DeviceOrientation.Property_.TRACKING))};ol.DeviceOrientation.prototype.handleTrackingChanged_=function(){if(ol.has.DEVICE_ORIENTATION){var a=this.getTracking();if(a&&!this.listenerKey_){this.listenerKey_=ol.events.listen(window,'deviceorientation',this.orientationChange_,this)}else if(!a&&this.listenerKey_!==null){ol.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}}};ol.DeviceOrientation.prototype.setTracking=function(a){this.set(ol.DeviceOrientation.Property_.TRACKING,a)};ol.DeviceOrientation.Property_={ALPHA:'alpha',BETA:'beta',GAMMA:'gamma',HEADING:'heading',TRACKING:'tracking'};bq.provide('ol.style.Image');ol.style.Image=function(a){this.opacity_=a.opacity;this.rotateWithView_=a.rotateWithView;this.rotation_=a.rotation;this.scale_=a.scale;this.snapToPixel_=a.snapToPixel};ol.style.Image.prototype.getOpacity=function(){return this.opacity_};ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Image.prototype.getRotation=function(){return this.rotation_};ol.style.Image.prototype.getScale=function(){return this.scale_};ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_};ol.style.Image.prototype.getAnchor=function(){};ol.style.Image.prototype.getImage=function(a){};ol.style.Image.prototype.getHitDetectionImage=function(a){};ol.style.Image.prototype.getImageState=function(){};ol.style.Image.prototype.getImageSize=function(){};ol.style.Image.prototype.getHitDetectionImageSize=function(){};ol.style.Image.prototype.getOrigin=function(){};ol.style.Image.prototype.getSize=function(){};ol.style.Image.prototype.setOpacity=function(a){this.opacity_=a};ol.style.Image.prototype.setRotateWithView=function(a){this.rotateWithView_=a};ol.style.Image.prototype.setRotation=function(a){this.rotation_=a};ol.style.Image.prototype.setScale=function(a){this.scale_=a};ol.style.Image.prototype.setSnapToPixel=function(a){this.snapToPixel_=a};ol.style.Image.prototype.listenImageChange=function(a,b){};ol.style.Image.prototype.load=function(){};ol.style.Image.prototype.unlistenImageChange=function(a,b){};bq.provide('ol.style.RegularShape');bq.require('ol');bq.require('ol.colorlike');bq.require('ol.dom');bq.require('ol.has');bq.require('ol.ImageState');bq.require('ol.render.canvas');bq.require('ol.style.Image');ol.style.RegularShape=function(a){this.checksums_=null;this.canvas_=null;this.hitDetectionCanvas_=null;this.fill_=a.fill!==undefined?a.fill:null;this.origin_=[0,0];this.points_=a.points;this.radius_=(a.radius!==undefined?a.radius:a.radius1);this.radius2_=a.radius2;this.angle_=a.angle!==undefined?a.angle:0;this.stroke_=a.stroke!==undefined?a.stroke:null;this.anchor_=null;this.size_=null;this.imageSize_=null;this.hitDetectionImageSize_=null;this.atlasManager_=a.atlasManager;this.render_(this.atlasManager_);var b=a.snapToPixel!==undefined?a.snapToPixel:true;var c=a.rotateWithView!==undefined?a.rotateWithView:false;ol.style.Image.call(this,{opacity:1,rotateWithView:c,rotation:a.rotation!==undefined?a.rotation:0,scale:1,snapToPixel:b})};ol.inherits(ol.style.RegularShape,ol.style.Image);ol.style.RegularShape.prototype.clone=function(){var a=new ol.style.RegularShape({fill:this.getFill()?this.getFill().clone():undefined,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():undefined,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});a.setOpacity(this.getOpacity());a.setScale(this.getScale());return a};ol.style.RegularShape.prototype.getAnchor=function(){return this.anchor_};ol.style.RegularShape.prototype.getAngle=function(){return this.angle_};ol.style.RegularShape.prototype.getFill=function(){return this.fill_};ol.style.RegularShape.prototype.getHitDetectionImage=function(a){return this.hitDetectionCanvas_};ol.style.RegularShape.prototype.getImage=function(a){return this.canvas_};ol.style.RegularShape.prototype.getImageSize=function(){return this.imageSize_};ol.style.RegularShape.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_};ol.style.RegularShape.prototype.getImageState=function(){return ol.ImageState.LOADED};ol.style.RegularShape.prototype.getOrigin=function(){return this.origin_};ol.style.RegularShape.prototype.getPoints=function(){return this.points_};ol.style.RegularShape.prototype.getRadius=function(){return this.radius_};ol.style.RegularShape.prototype.getRadius2=function(){return this.radius2_};ol.style.RegularShape.prototype.getSize=function(){return this.size_};ol.style.RegularShape.prototype.getStroke=function(){return this.stroke_};ol.style.RegularShape.prototype.listenImageChange=function(a,b){};ol.style.RegularShape.prototype.load=function(){};ol.style.RegularShape.prototype.unlistenImageChange=function(a,b){};ol.style.RegularShape.prototype.render_=function(a){var b;var c='';var d='';var e=0;var f=null;var g=0;var h;var i=0;if(this.stroke_){h=this.stroke_.getColor();if(h===null){h=ol.render.canvas.defaultStrokeStyle}h=ol.colorlike.asColorLike(h);i=this.stroke_.getWidth();if(i===undefined){i=ol.render.canvas.defaultLineWidth}f=this.stroke_.getLineDash();g=this.stroke_.getLineDashOffset();if(!ol.has.CANVAS_LINE_DASH){f=null;g=0}d=this.stroke_.getLineJoin();if(d===undefined){d=ol.render.canvas.defaultLineJoin}c=this.stroke_.getLineCap();if(c===undefined){c=ol.render.canvas.defaultLineCap}e=this.stroke_.getMiterLimit();if(e===undefined){e=ol.render.canvas.defaultMiterLimit}}var j=2*(this.radius_+i)+1;var k={strokeStyle:h,strokeWidth:i,size:j,lineCap:c,lineDash:f,lineDashOffset:g,lineJoin:d,miterLimit:e};if(a===undefined){var l=ol.dom.createCanvasContext2D(j,j);this.canvas_=l.canvas;j=this.canvas_.width;b=j;this.draw_(k,l,0,0);this.createHitDetectionCanvas_(k)}else{j=Math.round(j);var m=!this.fill_;var n;if(m){n=this.drawHitDetectionCanvas_.bind(this,k)}var o=this.getChecksum();var p=a.add(o,j,j,this.draw_.bind(this,k),n);this.canvas_=p.image;this.origin_=[p.offsetX,p.offsetY];b=p.image.width;if(m){this.hitDetectionCanvas_=p.hitImage;this.hitDetectionImageSize_=[p.hitImage.width,p.hitImage.height]}else{this.hitDetectionCanvas_=this.canvas_;this.hitDetectionImageSize_=[b,b]}}this.anchor_=[j/2,j/2];this.size_=[j,j];this.imageSize_=[b,b]};ol.style.RegularShape.prototype.draw_=function(a,b,x,y){var i,angle0,radiusC;b.setTransform(1,0,0,1,0,0);b.translate(x,y);b.beginPath();var c=this.points_;if(c===Infinity){b.arc(a.size/2,a.size/2,this.radius_,0,2*Math.PI,true)}else{var d=(this.radius2_!==undefined)?this.radius2_:this.radius_;if(d!==this.radius_){c=2*c}for(i=0;i<=c;i++){angle0=i*2*Math.PI/c-Math.PI/2+this.angle_;radiusC=i%2===0?this.radius_:d;b.lineTo(a.size/2+radiusC*Math.cos(angle0),a.size/2+radiusC*Math.sin(angle0))}}if(this.fill_){var e=this.fill_.getColor();if(e===null){e=ol.render.canvas.defaultFillStyle}b.fillStyle=ol.colorlike.asColorLike(e);b.fill()}if(this.stroke_){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(a.lineDash){b.setLineDash(a.lineDash);b.lineDashOffset=a.lineDashOffset}b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.miterLimit=a.miterLimit;b.stroke()}b.closePath()};ol.style.RegularShape.prototype.createHitDetectionCanvas_=function(a){this.hitDetectionImageSize_=[a.size,a.size];if(this.fill_){this.hitDetectionCanvas_=this.canvas_;return}var b=ol.dom.createCanvasContext2D(a.size,a.size);this.hitDetectionCanvas_=b.canvas;this.drawHitDetectionCanvas_(a,b,0,0)};ol.style.RegularShape.prototype.drawHitDetectionCanvas_=function(a,b,x,y){b.setTransform(1,0,0,1,0,0);b.translate(x,y);b.beginPath();var c=this.points_;if(c===Infinity){b.arc(a.size/2,a.size/2,this.radius_,0,2*Math.PI,true)}else{var d=(this.radius2_!==undefined)?this.radius2_:this.radius_;if(d!==this.radius_){c=2*c}var i,radiusC,angle0;for(i=0;i<=c;i++){angle0=i*2*Math.PI/c-Math.PI/2+this.angle_;radiusC=i%2===0?this.radius_:d;b.lineTo(a.size/2+radiusC*Math.cos(angle0),a.size/2+radiusC*Math.sin(angle0))}}b.fillStyle=ol.render.canvas.defaultFillStyle;b.fill();if(this.stroke_){b.strokeStyle=a.strokeStyle;b.lineWidth=a.strokeWidth;if(a.lineDash){b.setLineDash(a.lineDash);b.lineDashOffset=a.lineDashOffset}b.stroke()}b.closePath()};ol.style.RegularShape.prototype.getChecksum=function(){var a=this.stroke_?this.stroke_.getChecksum():'-';var b=this.fill_?this.fill_.getChecksum():'-';var c=!this.checksums_||(a!=this.checksums_[1]||b!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]);if(c){var d='r'+a+b+(this.radius_!==undefined?this.radius_.toString():'-')+(this.radius2_!==undefined?this.radius2_.toString():'-')+(this.angle_!==undefined?this.angle_.toString():'-')+(this.points_!==undefined?this.points_.toString():'-');this.checksums_=[d,a,b,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};bq.provide('ol.style.Circle');bq.require('ol');bq.require('ol.style.RegularShape');ol.style.Circle=function(a){var b=a||{};ol.style.RegularShape.call(this,{points:Infinity,fill:b.fill,radius:b.radius,snapToPixel:b.snapToPixel,stroke:b.stroke,atlasManager:b.atlasManager})};ol.inherits(ol.style.Circle,ol.style.RegularShape);ol.style.Circle.prototype.clone=function(){var a=new ol.style.Circle({fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});a.setOpacity(this.getOpacity());a.setScale(this.getScale());return a};ol.style.Circle.prototype.setRadius=function(a){this.radius_=a;this.render_(this.atlasManager_)};bq.provide('ol.style.Fill');bq.require('ol');bq.require('ol.color');ol.style.Fill=function(a){var b=a||{};this.color_=b.color!==undefined?b.color:null;this.checksum_=undefined};ol.style.Fill.prototype.clone=function(){var a=this.getColor();return new ol.style.Fill({color:(a&&a.slice)?a.slice():a||undefined})};ol.style.Fill.prototype.getColor=function(){return this.color_};ol.style.Fill.prototype.setColor=function(a){this.color_=a;this.checksum_=undefined};ol.style.Fill.prototype.getChecksum=function(){if(this.checksum_===undefined){if(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient){this.checksum_=ol.getUid(this.color_).toString()}else{this.checksum_='f'+(this.color_?ol.color.asString(this.color_):'-')}}return this.checksum_};bq.provide('ol.style.Stroke');bq.require('ol');ol.style.Stroke=function(a){var b=a||{};this.color_=b.color!==undefined?b.color:null;this.lineCap_=b.lineCap;this.lineDash_=b.lineDash!==undefined?b.lineDash:null;this.lineDashOffset_=b.lineDashOffset;this.lineJoin_=b.lineJoin;this.miterLimit_=b.miterLimit;this.width_=b.width;this.checksum_=undefined};ol.style.Stroke.prototype.clone=function(){var a=this.getColor();return new ol.style.Stroke({color:(a&&a.slice)?a.slice():a||undefined,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():undefined,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})};ol.style.Stroke.prototype.getColor=function(){return this.color_};ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_};ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_};ol.style.Stroke.prototype.getLineDashOffset=function(){return this.lineDashOffset_};ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_};ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_};ol.style.Stroke.prototype.getWidth=function(){return this.width_};ol.style.Stroke.prototype.setColor=function(a){this.color_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineCap=function(a){this.lineCap_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineDash=function(a){this.lineDash_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineDashOffset=function(a){this.lineDashOffset_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setLineJoin=function(a){this.lineJoin_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setMiterLimit=function(a){this.miterLimit_=a;this.checksum_=undefined};ol.style.Stroke.prototype.setWidth=function(a){this.width_=a;this.checksum_=undefined};ol.style.Stroke.prototype.getChecksum=function(){if(this.checksum_===undefined){this.checksum_='s';if(this.color_){if(typeof this.color_==='string'){this.checksum_+=this.color_}else{this.checksum_+=ol.getUid(this.color_).toString()}}else{this.checksum_+='-'}this.checksum_+=','+(this.lineCap_!==undefined?this.lineCap_.toString():'-')+','+(this.lineDash_?this.lineDash_.toString():'-')+','+(this.lineDashOffset_!==undefined?this.lineDashOffset_:'-')+','+(this.lineJoin_!==undefined?this.lineJoin_:'-')+','+(this.miterLimit_!==undefined?this.miterLimit_.toString():'-')+','+(this.width_!==undefined?this.width_.toString():'-')}return this.checksum_};bq.provide('ol.style.Style');bq.require('ol.asserts');bq.require('ol.geom.GeometryType');bq.require('ol.style.Circle');bq.require('ol.style.Fill');bq.require('ol.style.Stroke');ol.style.Style=function(a){var b=a||{};this.geometry_=null;this.geometryFunction_=ol.style.Style.defaultGeometryFunction;if(b.geometry!==undefined){this.setGeometry(b.geometry)}this.fill_=b.fill!==undefined?b.fill:null;this.image_=b.image!==undefined?b.image:null;this.renderer_=b.renderer!==undefined?b.renderer:null;this.stroke_=b.stroke!==undefined?b.stroke:null;this.text_=b.text!==undefined?b.text:null;this.zIndex_=b.zIndex};ol.style.Style.prototype.clone=function(){var a=this.getGeometry();if(a&&a.clone){a=a.clone()}return new ol.style.Style({geometry:a,fill:this.getFill()?this.getFill().clone():undefined,image:this.getImage()?this.getImage().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,text:this.getText()?this.getText().clone():undefined,zIndex:this.getZIndex()})};ol.style.Style.prototype.getRenderer=function(){return this.renderer_};ol.style.Style.prototype.setRenderer=function(a){this.renderer_=a};ol.style.Style.prototype.getGeometry=function(){return this.geometry_};ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_};ol.style.Style.prototype.getFill=function(){return this.fill_};ol.style.Style.prototype.setFill=function(a){this.fill_=a};ol.style.Style.prototype.getImage=function(){return this.image_};ol.style.Style.prototype.setImage=function(a){this.image_=a};ol.style.Style.prototype.getStroke=function(){return this.stroke_};ol.style.Style.prototype.setStroke=function(a){this.stroke_=a};ol.style.Style.prototype.getText=function(){return this.text_};ol.style.Style.prototype.setText=function(a){this.text_=a};ol.style.Style.prototype.getZIndex=function(){return this.zIndex_};ol.style.Style.prototype.setGeometry=function(b){if(typeof b==='function'){this.geometryFunction_=b}else if(typeof b==='string'){this.geometryFunction_=function(a){return(a.get(b))}}else if(!b){this.geometryFunction_=ol.style.Style.defaultGeometryFunction}else if(b!==undefined){this.geometryFunction_=function(){return(b)}}this.geometry_=b};ol.style.Style.prototype.setZIndex=function(a){this.zIndex_=a};ol.style.Style.createFunction=function(a){var b;if(typeof a==='function'){b=a}else{var c;if(Array.isArray(a)){c=a}else{ol.asserts.assert(a instanceof ol.style.Style,41);c=[a]}b=function(){return c}}return b};ol.style.Style.default_=null;ol.style.Style.defaultFunction=function(a,b){if(!ol.style.Style.default_){var c=new ol.style.Fill({color:'rgba(255,255,255,0.4)'});var d=new ol.style.Stroke({color:'#3399CC',width:1.25});ol.style.Style.default_=[new ol.style.Style({image:new ol.style.Circle({fill:c,stroke:d,radius:5}),fill:c,stroke:d})]}return ol.style.Style.default_};ol.style.Style.createDefaultEditing=function(){var a={};var b=[255,255,255,1];var c=[0,153,255,1];var d=3;a[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,0.5]})})];a[ol.geom.GeometryType.MULTI_POLYGON]=a[ol.geom.GeometryType.POLYGON];a[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:b,width:d+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:c,width:d})})];a[ol.geom.GeometryType.MULTI_LINE_STRING]=a[ol.geom.GeometryType.LINE_STRING];a[ol.geom.GeometryType.CIRCLE]=a[ol.geom.GeometryType.POLYGON].concat(a[ol.geom.GeometryType.LINE_STRING]);a[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:d*2,fill:new ol.style.Fill({color:c}),stroke:new ol.style.Stroke({color:b,width:d/2})}),zIndex:Infinity})];a[ol.geom.GeometryType.MULTI_POINT]=a[ol.geom.GeometryType.POINT];a[ol.geom.GeometryType.GEOMETRY_COLLECTION]=a[ol.geom.GeometryType.POLYGON].concat(a[ol.geom.GeometryType.LINE_STRING],a[ol.geom.GeometryType.POINT]);return a};ol.style.Style.defaultGeometryFunction=function(a){return a.getGeometry()};bq.provide('ol.Feature');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol');bq.require('ol.Object');bq.require('ol.geom.Geometry');bq.require('ol.style.Style');ol.Feature=function(a){ol.Object.call(this);this.id_=undefined;this.geometryName_='geometry';this.style_=null;this.styleFunction_=undefined;this.geometryChangeKey_=null;ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);if(a!==undefined){if(a instanceof ol.geom.Geometry||!a){var b=a;this.setGeometry(b)}else{var c=a;this.setProperties(c)}}};ol.inherits(ol.Feature,ol.Object);ol.Feature.prototype.clone=function(){var a=new ol.Feature(this.getProperties());a.setGeometryName(this.getGeometryName());var b=this.getGeometry();if(b){a.setGeometry(b.clone())}var c=this.getStyle();if(c){a.setStyle(c)}return a};ol.Feature.prototype.getGeometry=function(){return(this.get(this.geometryName_))};ol.Feature.prototype.getId=function(){return this.id_};ol.Feature.prototype.getGeometryName=function(){return this.geometryName_};ol.Feature.prototype.getStyle=function(){return this.style_};ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_};ol.Feature.prototype.handleGeometryChange_=function(){this.changed()};ol.Feature.prototype.handleGeometryChanged_=function(){if(this.geometryChangeKey_){ol.events.unlistenByKey(this.geometryChangeKey_);this.geometryChangeKey_=null}var a=this.getGeometry();if(a){this.geometryChangeKey_=ol.events.listen(a,ol.events.EventType.CHANGE,this.handleGeometryChange_,this)}this.changed()};ol.Feature.prototype.setGeometry=function(a){this.set(this.geometryName_,a)};ol.Feature.prototype.setStyle=function(a){this.style_=a;this.styleFunction_=!a?undefined:ol.Feature.createStyleFunction(a);this.changed()};ol.Feature.prototype.setId=function(a){this.id_=a;this.changed()};ol.Feature.prototype.setGeometryName=function(a){ol.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.geometryName_=a;ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this);this.handleGeometryChanged_()};ol.Feature.createStyleFunction=function(b){var c;if(typeof b==='function'){if(b.length==2){c=function(a){return(b)(this,a)}}else{c=b}}else{var d;if(Array.isArray(b)){d=b}else{ol.asserts.assert(b instanceof ol.style.Style,41);d=[b]}c=function(){return d}}return c};bq.provide('ol.format.FormatType');ol.format.FormatType={ARRAY_BUFFER:'arraybuffer',JSON:'json',TEXT:'text',XML:'xml'};bq.provide('ol.xml');bq.require('ol.array');ol.xml.DOCUMENT=document.implementation.createDocument('','',null);ol.xml.createElementNS=function(a,b){return ol.xml.DOCUMENT.createElementNS(a,b)};ol.xml.getAllTextContent=function(a,b){return ol.xml.getAllTextContent_(a,b,[]).join('')};ol.xml.getAllTextContent_=function(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE){if(b){c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,''))}else{c.push(a.nodeValue)}}else{var n;for(n=a.firstChild;n;n=n.nextSibling){ol.xml.getAllTextContent_(n,b,c)}}return c};ol.xml.isDocument=function(a){return a instanceof Document};ol.xml.isNode=function(a){return a instanceof Node};ol.xml.getAttributeNS=function(a,b,c){return a.getAttributeNS(b,c)||''};ol.xml.setAttributeNS=function(a,b,c,d){a.setAttributeNS(b,c,d)};ol.xml.parse=function(a){return new DOMParser().parseFromString(a,'application/xml')};ol.xml.makeArrayExtender=function(e,f){return(function(a,b){var c=e.call(f,a,b);if(c!==undefined){var d=(b[b.length-1]);ol.array.extend(d,c)}})};ol.xml.makeArrayPusher=function(e,f){return(function(a,b){var c=e.call(f!==undefined?f:this,a,b);if(c!==undefined){var d=b[b.length-1];d.push(c)}})};ol.xml.makeReplacer=function(d,e){return(function(a,b){var c=d.call(e!==undefined?e:this,a,b);if(c!==undefined){b[b.length-1]=c}})};ol.xml.makeObjectPropertyPusher=function(g,h,i){return(function(a,b){var c=g.call(i!==undefined?i:this,a,b);if(c!==undefined){var d=(b[b.length-1]);var e=h!==undefined?h:a.localName;var f;if(e in d){f=d[e]}else{f=d[e]=[]}f.push(c)}})};ol.xml.makeObjectPropertySetter=function(f,g,h){return(function(a,b){var c=f.call(h!==undefined?h:this,a,b);if(c!==undefined){var d=(b[b.length-1]);var e=g!==undefined?g:a.localName;d[e]=c}})};ol.xml.makeChildAppender=function(f,g){return function(a,b,c){f.call(g!==undefined?g:this,a,b,c);var d=c[c.length-1];var e=d.node;e.appendChild(a)}};ol.xml.makeArraySerializer=function(e,f){var g,nodeFactory;return function(a,b,c){if(g===undefined){g={};var d={};d[a.localName]=e;g[a.namespaceURI]=d;nodeFactory=ol.xml.makeSimpleNodeFactory(a.localName)}ol.xml.serialize(g,nodeFactory,b,c)}};ol.xml.makeSimpleNodeFactory=function(h,i){var j=h;return(function(a,b,c){var d=b[b.length-1];var e=d.node;var f=j;if(f===undefined){f=c}var g=i;if(i===undefined){g=e.namespaceURI}return ol.xml.createElementNS(g,(f))})};ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory();ol.xml.makeSequence=function(a,b){var c=b.length;var d=new Array(c);for(var i=0;i<c;++i){d[i]=a[b[i]]}return d};ol.xml.makeStructureNS=function(a,b,c){var d=c!==undefined?c:{};var i,ii;for(i=0,ii=a.length;i<ii;++i){d[a[i]]=b}return d};ol.xml.parseNode=function(a,b,c,d){var n;for(n=b.firstElementChild;n;n=n.nextElementSibling){var e=a[n.namespaceURI];if(e!==undefined){var f=e[n.localName];if(f!==undefined){f.call(d,n,c)}}}};ol.xml.pushParseAndPop=function(a,b,c,d,e){d.push(a);ol.xml.parseNode(b,c,d,e);return d.pop()};ol.xml.serialize=function(a,b,c,d,e,f){var g=(e!==undefined?e:c).length;var h,node;for(var i=0;i<g;++i){h=c[i];if(h!==undefined){node=b.call(f,h,d,e!==undefined?e[i]:undefined);if(node!==undefined){a[node.namespaceURI][node.localName].call(f,node,h,d)}}}};ol.xml.pushSerializeAndPop=function(a,b,c,d,e,f,g){e.push(a);ol.xml.serialize(b,c,d,e,f,g);return e.pop()};bq.provide('ol.featureloader');bq.require('ol');bq.require('ol.format.FormatType');bq.require('ol.xml');ol.featureloader.loadFeaturesXhr=function(h,i,j,k){return(function(d,e,f){var g=new XMLHttpRequest();g.open('GET',typeof h==='function'?h(d,e,f):h,true);if(i.getType()==ol.format.FormatType.ARRAY_BUFFER){g.responseType='arraybuffer'}g.onload=function(a){if(!g.status||g.status>=200&&g.status<300){var b=i.getType();var c;if(b==ol.format.FormatType.JSON||b==ol.format.FormatType.TEXT){c=g.responseText}else if(b==ol.format.FormatType.XML){c=g.responseXML;if(!c){c=ol.xml.parse(g.responseText)}}else if(b==ol.format.FormatType.ARRAY_BUFFER){c=(g.response)}if(c){j.call(this,i.readFeatures(c,{featureProjection:f}),i.readProjection(c),i.getLastExtent())}else{k.call(this)}}else{k.call(this)}}.bind(this);g.onerror=function(){k.call(this)}.bind(this);g.send()})};ol.featureloader.xhr=function(c,d){return ol.featureloader.loadFeaturesXhr(c,d,function(a,b){this.addFeatures(a)},ol.nullFunction)};bq.provide('ol.format.Feature');bq.require('ol.geom.Geometry');bq.require('ol.obj');bq.require('ol.proj');ol.format.Feature=function(){this.defaultDataProjection=null;this.defaultFeatureProjection=null};ol.format.Feature.prototype.getReadOptions=function(a,b){var c;if(b){c={dataProjection:b.dataProjection?b.dataProjection:this.readProjection(a),featureProjection:b.featureProjection}}return this.adaptOptions(c)};ol.format.Feature.prototype.adaptOptions=function(a){return ol.obj.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},a)};ol.format.Feature.prototype.getLastExtent=function(){return null};ol.format.Feature.prototype.getType=function(){};ol.format.Feature.prototype.readFeature=function(a,b){};ol.format.Feature.prototype.readFeatures=function(a,b){};ol.format.Feature.prototype.readGeometry=function(a,b){};ol.format.Feature.prototype.readProjection=function(a){};ol.format.Feature.prototype.writeFeature=function(a,b){};ol.format.Feature.prototype.writeFeatures=function(a,b){};ol.format.Feature.prototype.writeGeometry=function(a,b){};ol.format.Feature.transformWithOptions=function(b,c,d){var e=d?ol.proj.get(d.featureProjection):null;var f=d?ol.proj.get(d.dataProjection):null;var g;if(e&&f&&!ol.proj.equivalent(e,f)){if(b instanceof ol.geom.Geometry){g=(c?b.clone():b).transform(c?e:f,c?f:e)}else{g=ol.proj.transformExtent(b,f,e)}}else{g=b}if(c&&d&&d.decimals!==undefined){var h=Math.pow(10,d.decimals);var j=function(a){for(var i=0,ii=a.length;i<ii;++i){a[i]=Math.round(a[i]*h)/h}return a};if(g===b){g=g.clone()}g.applyTransform(j)}return g};bq.provide('ol.format.JSONFeature');bq.require('ol');bq.require('ol.format.Feature');bq.require('ol.format.FormatType');ol.format.JSONFeature=function(){ol.format.Feature.call(this)};ol.inherits(ol.format.JSONFeature,ol.format.Feature);ol.format.JSONFeature.prototype.getObject_=function(a){if(typeof a==='string'){var b=JSON.parse(a);return b?(b):null}else if(a!==null){return a}else{return null}};ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON};ol.format.JSONFeature.prototype.readFeature=function(a,b){return this.readFeatureFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readFeatures=function(a,b){return this.readFeaturesFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readFeatureFromObject=function(a,b){};ol.format.JSONFeature.prototype.readFeaturesFromObject=function(a,b){};ol.format.JSONFeature.prototype.readGeometry=function(a,b){return this.readGeometryFromObject(this.getObject_(a),this.getReadOptions(a,b))};ol.format.JSONFeature.prototype.readGeometryFromObject=function(a,b){};ol.format.JSONFeature.prototype.readProjection=function(a){return this.readProjectionFromObject(this.getObject_(a))};ol.format.JSONFeature.prototype.readProjectionFromObject=function(a){};ol.format.JSONFeature.prototype.writeFeature=function(a,b){return JSON.stringify(this.writeFeatureObject(a,b))};ol.format.JSONFeature.prototype.writeFeatureObject=function(a,b){};ol.format.JSONFeature.prototype.writeFeatures=function(a,b){return JSON.stringify(this.writeFeaturesObject(a,b))};ol.format.JSONFeature.prototype.writeFeaturesObject=function(a,b){};ol.format.JSONFeature.prototype.writeGeometry=function(a,b){return JSON.stringify(this.writeGeometryObject(a,b))};ol.format.JSONFeature.prototype.writeGeometryObject=function(a,b){};bq.provide('ol.geom.flat.interpolate');bq.require('ol.array');bq.require('ol.math');ol.geom.flat.interpolate.lineString=function(a,b,c,d,e,f){var g=NaN;var h=NaN;var n=(c-b)/d;if(n===1){g=a[b];h=a[b+1]}else if(n==2){g=(1-e)*a[b]+e*a[b+d];h=(1-e)*a[b+1]+e*a[b+d+1]}else if(n!==0){var j=a[b];var k=a[b+1];var l=0;var m=[0];var i;for(i=b+d;i<c;i+=d){var p=a[i];var q=a[i+1];l+=Math.sqrt((p-j)*(p-j)+(q-k)*(q-k));m.push(l);j=p;k=q}var r=e*l;var s=ol.array.binarySearch(m,r);if(s<0){var t=(r-m[-s-2])/(m[-s-1]-m[-s-2]);var o=b+(-s-2)*d;g=ol.math.lerp(a[o],a[o+d],t);h=ol.math.lerp(a[o+1],a[o+d+1],t)}else{g=a[b+s*d];h=a[b+s*d+1]}}if(f){f[0]=g;f[1]=h;return f}else{return[g,h]}};ol.geom.flat.interpolate.lineStringCoordinateAtM=function(a,b,c,d,m,e){if(c==b){return null}var f;if(m<a[b+d-1]){if(e){f=a.slice(b,b+d);f[d-1]=m;return f}else{return null}}else if(a[c-1]<m){if(e){f=a.slice(c-d,c);f[d-1]=m;return f}else{return null}}if(m==a[b+d-1]){return a.slice(b,b+d)}var g=b/d;var h=c/d;while(g<h){var j=(g+h)>>1;if(m<a[(j+1)*d-1]){h=j}else{g=j+1}}var k=a[g*d-1];if(m==k){return a.slice((g-1)*d,(g-1)*d+d)}var l=a[(g+1)*d-1];var t=(m-k)/(l-k);f=[];var i;for(i=0;i<d-1;++i){f.push(ol.math.lerp(a[(g-1)*d+i],a[g*d+i],t))}f.push(m);return f};ol.geom.flat.interpolate.lineStringsCoordinateAtM=function(a,b,c,d,m,e,f){if(f){return ol.geom.flat.interpolate.lineStringCoordinateAtM(a,b,c[c.length-1],d,m,e)}var g;if(m<a[d-1]){if(e){g=a.slice(0,d);g[d-1]=m;return g}else{return null}}if(a[a.length-1]<m){if(e){g=a.slice(a.length-d);g[d-1]=m;return g}else{return null}}var i,ii;for(i=0,ii=c.length;i<ii;++i){var h=c[i];if(b==h){continue}if(m<a[b+d-1]){return null}else if(m<=a[h-1]){return ol.geom.flat.interpolate.lineStringCoordinateAtM(a,b,h,d,m,false)}b=h}return null};bq.provide('ol.geom.LineString');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.closest');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.interpolate');bq.require('ol.geom.flat.intersectsextent');bq.require('ol.geom.flat.length');bq.require('ol.geom.flat.segments');bq.require('ol.geom.flat.simplify');ol.geom.LineString=function(a,b){ol.geom.SimpleGeometry.call(this);this.flatMidpoint_=null;this.flatMidpointRevision_=-1;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};ol.inherits(ol.geom.LineString,ol.geom.SimpleGeometry);ol.geom.LineString.prototype.appendCoordinate=function(a){if(!this.flatCoordinates){this.flatCoordinates=a.slice()}else{ol.array.extend(this.flatCoordinates,a)}this.changed()};ol.geom.LineString.prototype.clone=function(){var a=new ol.geom.LineString(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.LineString.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,false,x,y,a,b)};ol.geom.LineString.prototype.forEachSegment=function(a,b){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b)};ol.geom.LineString.prototype.getCoordinateAtM=function(m,a){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM){return null}var b=a!==undefined?a:false;return ol.geom.flat.interpolate.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,m,b)};ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getCoordinateAt=function(a,b){return ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b)};ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.LineString.prototype.getFlatMidpoint=function(){if(this.flatMidpointRevision_!=this.getRevision()){this.flatMidpoint_=this.getCoordinateAt(0.5,this.flatMidpoint_);this.flatMidpointRevision_=this.getRevision()}return this.flatMidpoint_};ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(a){var b=[];b.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);var c=new ol.geom.LineString(null);c.setFlatCoordinates(ol.geom.GeometryLayout.XY,b);return c};ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING};ol.geom.LineString.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)};ol.geom.LineString.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.LineString.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};bq.provide('ol.geom.MultiLineString');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LineString');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.closest');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.interpolate');bq.require('ol.geom.flat.intersectsextent');bq.require('ol.geom.flat.simplify');ol.geom.MultiLineString=function(a,b){ol.geom.SimpleGeometry.call(this);this.ends_=[];this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.setCoordinates(a,b)};ol.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry);ol.geom.MultiLineString.prototype.appendLineString=function(a){if(!this.flatCoordinates){this.flatCoordinates=a.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,a.getFlatCoordinates().slice())}this.ends_.push(this.flatCoordinates.length);this.changed()};ol.geom.MultiLineString.prototype.clone=function(){var a=new ol.geom.MultiLineString(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice());return a};ol.geom.MultiLineString.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,false,x,y,a,b)};ol.geom.MultiLineString.prototype.getCoordinateAtM=function(m,a,b){if((this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM)||this.flatCoordinates.length===0){return null}var c=a!==undefined?a:false;var d=b!==undefined?b:false;return ol.geom.flat.interpolate.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,m,c,d)};ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)};ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_};ol.geom.MultiLineString.prototype.getLineString=function(a){if(a<0||this.ends_.length<=a){return null}var b=new ol.geom.LineString(null);b.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a===0?0:this.ends_[a-1],this.ends_[a]));return b};ol.geom.MultiLineString.prototype.getLineStrings=function(){var a=this.flatCoordinates;var b=this.ends_;var c=this.layout;var d=[];var e=0;var i,ii;for(i=0,ii=b.length;i<ii;++i){var f=b[i];var g=new ol.geom.LineString(null);g.setFlatCoordinates(c,a.slice(e,f));d.push(g);e=f}return d};ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var a=[];var b=this.flatCoordinates;var c=0;var d=this.ends_;var e=this.stride;var i,ii;for(i=0,ii=d.length;i<ii;++i){var f=d[i];var g=ol.geom.flat.interpolate.lineString(b,c,f,e,0.5);ol.array.extend(a,g);c=f}return a};ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,a,b,0,c);var d=new ol.geom.MultiLineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING};ol.geom.MultiLineString.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,a)};ol.geom.MultiLineString.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)}else{this.setLayout(b,a,2);if(!this.flatCoordinates){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=c.length===0?0:c[c.length-1];this.changed()}};ol.geom.MultiLineString.prototype.setFlatCoordinates=function(a,b,c){this.setFlatCoordinatesInternal(a,b);this.ends_=c;this.changed()};ol.geom.MultiLineString.prototype.setLineStrings=function(a){var b=this.getLayout();var c=[];var d=[];var i,ii;for(i=0,ii=a.length;i<ii;++i){var e=a[i];if(i===0){b=e.getLayout()}ol.array.extend(c,e.getFlatCoordinates());d.push(c.length)}this.setFlatCoordinates(b,c,d)};bq.provide('ol.geom.MultiPoint');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.Point');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.math');ol.geom.MultiPoint=function(a,b){ol.geom.SimpleGeometry.call(this);this.setCoordinates(a,b)};ol.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry);ol.geom.MultiPoint.prototype.appendPoint=function(a){if(!this.flatCoordinates){this.flatCoordinates=a.getFlatCoordinates().slice()}else{ol.array.extend(this.flatCoordinates,a.getFlatCoordinates())}this.changed()};ol.geom.MultiPoint.prototype.clone=function(){var a=new ol.geom.MultiPoint(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.MultiPoint.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}var c=this.flatCoordinates;var d=this.stride;var i,ii,j;for(i=0,ii=c.length;i<ii;i+=d){var e=ol.math.squaredDistance(x,y,c[i],c[i+1]);if(e<b){b=e;for(j=0;j<d;++j){a[j]=c[i+j]}a.length=d}}return b};ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};ol.geom.MultiPoint.prototype.getPoint=function(a){var n=!this.flatCoordinates?0:this.flatCoordinates.length/this.stride;if(a<0||n<=a){return null}var b=new ol.geom.Point(null);b.setFlatCoordinates(this.layout,this.flatCoordinates.slice(a*this.stride,(a+1)*this.stride));return b};ol.geom.MultiPoint.prototype.getPoints=function(){var a=this.flatCoordinates;var b=this.layout;var c=this.stride;var d=[];var i,ii;for(i=0,ii=a.length;i<ii;i+=c){var e=new ol.geom.Point(null);e.setFlatCoordinates(b,a.slice(i,i+c));d.push(e)}return d};ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT};ol.geom.MultiPoint.prototype.intersectsExtent=function(a){var b=this.flatCoordinates;var c=this.stride;var i,ii,x,y;for(i=0,ii=b.length;i<ii;i+=c){x=b[i];y=b[i+1];if(ol.extent.containsXY(a,x,y)){return true}}return false};ol.geom.MultiPoint.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(b,a,1);if(!this.flatCoordinates){this.flatCoordinates=[]}this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,a,this.stride);this.changed()}};ol.geom.MultiPoint.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};bq.provide('ol.geom.flat.center');bq.require('ol.extent');ol.geom.flat.center.linearRingss=function(a,b,c,d){var e=[];var i,ii;var f=ol.extent.createEmpty();for(i=0,ii=c.length;i<ii;++i){var g=c[i];f=ol.extent.createOrUpdateFromFlatCoordinates(a,b,g[0],d);e.push((f[0]+f[2])/2,(f[1]+f[3])/2);b=g[g.length-1]}return e};bq.provide('ol.geom.MultiPolygon');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.Polygon');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.area');bq.require('ol.geom.flat.center');bq.require('ol.geom.flat.closest');bq.require('ol.geom.flat.contains');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.inflate');bq.require('ol.geom.flat.interiorpoint');bq.require('ol.geom.flat.intersectsextent');bq.require('ol.geom.flat.orient');bq.require('ol.geom.flat.simplify');ol.geom.MultiPolygon=function(a,b){ol.geom.SimpleGeometry.call(this);this.endss_=[];this.flatInteriorPointsRevision_=-1;this.flatInteriorPoints_=null;this.maxDelta_=-1;this.maxDeltaRevision_=-1;this.orientedRevision_=-1;this.orientedFlatCoordinates_=null;this.setCoordinates(a,b)};ol.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry);ol.geom.MultiPolygon.prototype.appendPolygon=function(a){var b;if(!this.flatCoordinates){this.flatCoordinates=a.getFlatCoordinates().slice();b=a.getEnds().slice();this.endss_.push()}else{var c=this.flatCoordinates.length;ol.array.extend(this.flatCoordinates,a.getFlatCoordinates());b=a.getEnds().slice();var i,ii;for(i=0,ii=b.length;i<ii;++i){b[i]+=c}}this.endss_.push(b);this.changed()};ol.geom.MultiPolygon.prototype.clone=function(){var a=new ol.geom.MultiPolygon(null);var b=this.endss_.length;var c=new Array(b);for(var i=0;i<b;++i){c[i]=this.endss_[i].slice()}a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),c);return a};ol.geom.MultiPolygon.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}if(this.maxDeltaRevision_!=this.getRevision()){this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0));this.maxDeltaRevision_=this.getRevision()}return ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,true,x,y,a,b)};ol.geom.MultiPolygon.prototype.containsXY=function(x,y){return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,x,y)};ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getCoordinates=function(a){var b;if(a!==undefined){b=this.getOrientedFlatCoordinates().slice();ol.geom.flat.orient.orientLinearRingss(b,0,this.endss_,this.stride,a)}else{b=this.flatCoordinates}return ol.geom.flat.inflate.coordinatesss(b,0,this.endss_,this.stride)};ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_};ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var a=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a);this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_};ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var a=new ol.geom.MultiPoint(null);a.setFlatCoordinates(ol.geom.GeometryLayout.XYM,this.getFlatInteriorPoints().slice());return a};ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;if(ol.geom.flat.orient.linearRingssAreOriented(a,0,this.endss_,this.stride)){this.orientedFlatCoordinates_=a}else{this.orientedFlatCoordinates_=a.slice();this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)}this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_};ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(a){var b=[];var c=[];b.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(a),b,0,c);var d=new ol.geom.MultiPolygon(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XY,b,c);return d};ol.geom.MultiPolygon.prototype.getPolygon=function(a){if(a<0||this.endss_.length<=a){return null}var b;if(a===0){b=0}else{var c=this.endss_[a-1];b=c[c.length-1]}var d=this.endss_[a].slice();var e=d[d.length-1];if(b!==0){var i,ii;for(i=0,ii=d.length;i<ii;++i){d[i]-=b}}var f=new ol.geom.Polygon(null);f.setFlatCoordinates(this.layout,this.flatCoordinates.slice(b,e),d);return f};ol.geom.MultiPolygon.prototype.getPolygons=function(){var a=this.layout;var b=this.flatCoordinates;var c=this.endss_;var d=[];var e=0;var i,ii,j,jj;for(i=0,ii=c.length;i<ii;++i){var f=c[i].slice();var g=f[f.length-1];if(e!==0){for(j=0,jj=f.length;j<jj;++j){f[j]-=e}}var h=new ol.geom.Polygon(null);h.setFlatCoordinates(a,b.slice(e,g),f);d.push(h);e=g}return d};ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON};ol.geom.MultiPolygon.prototype.intersectsExtent=function(a){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a)};ol.geom.MultiPolygon.prototype.setCoordinates=function(a,b){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_)}else{this.setLayout(b,a,3);if(!this.flatCoordinates){this.flatCoordinates=[]}var c=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,a,this.stride,this.endss_);if(c.length===0){this.flatCoordinates.length=0}else{var d=c[c.length-1];this.flatCoordinates.length=d.length===0?0:d[d.length-1]}this.changed()}};ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(a,b,c){this.setFlatCoordinatesInternal(a,b);this.endss_=c;this.changed()};ol.geom.MultiPolygon.prototype.setPolygons=function(a){var b=this.getLayout();var c=[];var d=[];var i,ii,ends;for(i=0,ii=a.length;i<ii;++i){var e=a[i];if(i===0){b=e.getLayout()}var f=c.length;ends=e.getEnds();var j,jj;for(j=0,jj=ends.length;j<jj;++j){ends[j]+=f}ol.array.extend(c,e.getFlatCoordinates());d.push(ends)}this.setFlatCoordinates(b,c,d)};bq.provide('ol.format.EsriJSON');bq.require('ol');bq.require('ol.Feature');bq.require('ol.asserts');bq.require('ol.extent');bq.require('ol.format.Feature');bq.require('ol.format.JSONFeature');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LineString');bq.require('ol.geom.LinearRing');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.geom.flat.deflate');bq.require('ol.geom.flat.orient');bq.require('ol.obj');bq.require('ol.proj');ol.format.EsriJSON=function(a){var b=a?a:{};ol.format.JSONFeature.call(this);this.geometryName_=b.geometryName};ol.inherits(ol.format.EsriJSON,ol.format.JSONFeature);ol.format.EsriJSON.readGeometry_=function(a,b){if(!a){return null}var c;if(typeof a.x==='number'&&typeof a.y==='number'){c=ol.geom.GeometryType.POINT}else if(a.points){c=ol.geom.GeometryType.MULTI_POINT}else if(a.paths){if(a.paths.length===1){c=ol.geom.GeometryType.LINE_STRING}else{c=ol.geom.GeometryType.MULTI_LINE_STRING}}else if(a.rings){var d=ol.format.EsriJSON.getGeometryLayout_(a);var e=ol.format.EsriJSON.convertRings_(a.rings,d);a=(ol.obj.assign({},a));if(e.length===1){c=ol.geom.GeometryType.POLYGON;a.rings=e[0]}else{c=ol.geom.GeometryType.MULTI_POLYGON;a.rings=e}}var f=ol.format.EsriJSON.GEOMETRY_READERS_[c];return(ol.format.Feature.transformWithOptions(f(a),false,b))};ol.format.EsriJSON.convertRings_=function(a,b){var c=[];var d=[];var e=[];var i,ii;for(i=0,ii=a.length;i<ii;++i){c.length=0;ol.geom.flat.deflate.coordinates(c,0,a[i],b.length);var f=ol.geom.flat.orient.linearRingIsClockwise(c,0,c.length,b.length);if(f){d.push([a[i]])}else{e.push(a[i])}}while(e.length){var g=e.shift();var h=false;for(i=d.length-1;i>=0;i--){var j=d[i][0];var k=ol.extent.containsExtent(new ol.geom.LinearRing(j).getExtent(),new ol.geom.LinearRing(g).getExtent());if(k){d[i].push(g);h=true;break}}if(!h){d.push([g.reverse()])}}return d};ol.format.EsriJSON.readPointGeometry_=function(a){var b;if(a.m!==undefined&&a.z!==undefined){b=new ol.geom.Point([a.x,a.y,a.z,a.m],ol.geom.GeometryLayout.XYZM)}else if(a.z!==undefined){b=new ol.geom.Point([a.x,a.y,a.z],ol.geom.GeometryLayout.XYZ)}else if(a.m!==undefined){b=new ol.geom.Point([a.x,a.y,a.m],ol.geom.GeometryLayout.XYM)}else{b=new ol.geom.Point([a.x,a.y])}return b};ol.format.EsriJSON.readLineStringGeometry_=function(a){var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.LineString(a.paths[0],b)};ol.format.EsriJSON.readMultiLineStringGeometry_=function(a){var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiLineString(a.paths,b)};ol.format.EsriJSON.getGeometryLayout_=function(a){var b=ol.geom.GeometryLayout.XY;if(a.hasZ===true&&a.hasM===true){b=ol.geom.GeometryLayout.XYZM}else if(a.hasZ===true){b=ol.geom.GeometryLayout.XYZ}else if(a.hasM===true){b=ol.geom.GeometryLayout.XYM}return b};ol.format.EsriJSON.readMultiPointGeometry_=function(a){var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiPoint(a.points,b)};ol.format.EsriJSON.readMultiPolygonGeometry_=function(a){var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.MultiPolygon((a.rings),b)};ol.format.EsriJSON.readPolygonGeometry_=function(a){var b=ol.format.EsriJSON.getGeometryLayout_(a);return new ol.geom.Polygon(a.rings,b)};ol.format.EsriJSON.writePointGeometry_=function(a,b){var c=(a).getCoordinates();var d;var e=(a).getLayout();if(e===ol.geom.GeometryLayout.XYZ){d=({x:c[0],y:c[1],z:c[2]})}else if(e===ol.geom.GeometryLayout.XYM){d=({x:c[0],y:c[1],m:c[2]})}else if(e===ol.geom.GeometryLayout.XYZM){d=({x:c[0],y:c[1],z:c[2],m:c[3]})}else if(e===ol.geom.GeometryLayout.XY){d=({x:c[0],y:c[1]})}else{ol.asserts.assert(false,34)}return(d)};ol.format.EsriJSON.getHasZM_=function(a){var b=a.getLayout();return{hasZ:(b===ol.geom.GeometryLayout.XYZ||b===ol.geom.GeometryLayout.XYZM),hasM:(b===ol.geom.GeometryLayout.XYM||b===ol.geom.GeometryLayout.XYZM)}};ol.format.EsriJSON.writeLineStringGeometry_=function(a,b){var c=ol.format.EsriJSON.getHasZM_((a));return({hasZ:c.hasZ,hasM:c.hasM,paths:[(a).getCoordinates()]})};ol.format.EsriJSON.writePolygonGeometry_=function(a,b){var c=ol.format.EsriJSON.getHasZM_((a));return({hasZ:c.hasZ,hasM:c.hasM,rings:(a).getCoordinates(false)})};ol.format.EsriJSON.writeMultiLineStringGeometry_=function(a,b){var c=ol.format.EsriJSON.getHasZM_((a));return({hasZ:c.hasZ,hasM:c.hasM,paths:(a).getCoordinates()})};ol.format.EsriJSON.writeMultiPointGeometry_=function(a,b){var c=ol.format.EsriJSON.getHasZM_((a));return({hasZ:c.hasZ,hasM:c.hasM,points:(a).getCoordinates()})};ol.format.EsriJSON.writeMultiPolygonGeometry_=function(a,b){var c=ol.format.EsriJSON.getHasZM_((a));var d=(a).getCoordinates(false);var e=[];for(var i=0;i<d.length;i++){for(var x=d[i].length-1;x>=0;x--){e.push(d[i][x])}}return({hasZ:c.hasZ,hasM:c.hasM,rings:e})};ol.format.EsriJSON.GEOMETRY_READERS_={};ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.readPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.readLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.readPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.readMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.readMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.readMultiPolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_={};ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.writePointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.writeLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.writePolygonGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.writeMultiPointGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.writeMultiLineStringGeometry_;ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.writeMultiPolygonGeometry_;ol.format.EsriJSON.prototype.readFeature;ol.format.EsriJSON.prototype.readFeatures;ol.format.EsriJSON.prototype.readFeatureFromObject=function(a,b){var c=(a);var d=ol.format.EsriJSON.readGeometry_(c.geometry,b);var e=new ol.Feature();if(this.geometryName_){e.setGeometryName(this.geometryName_)}e.setGeometry(d);if(b&&b.idField&&c.attributes[b.idField]){e.setId((c.attributes[b.idField]))}if(c.attributes){e.setProperties(c.attributes)}return e};ol.format.EsriJSON.prototype.readFeaturesFromObject=function(a,b){var c=(a);var d=b?b:{};if(c.features){var e=(a);var f=[];var g=e.features;var i,ii;d.idField=a.objectIdFieldName;for(i=0,ii=g.length;i<ii;++i){f.push(this.readFeatureFromObject(g[i],d))}return f}else{return[this.readFeatureFromObject(a,d)]}};ol.format.EsriJSON.prototype.readGeometry;ol.format.EsriJSON.prototype.readGeometryFromObject=function(a,b){return ol.format.EsriJSON.readGeometry_((a),b)};ol.format.EsriJSON.prototype.readProjection;ol.format.EsriJSON.prototype.readProjectionFromObject=function(a){var b=(a);if(b.spatialReference&&b.spatialReference.wkid){var c=b.spatialReference.wkid;return ol.proj.get('EPSG:'+c)}else{return null}};ol.format.EsriJSON.writeGeometry_=function(a,b){var c=ol.format.EsriJSON.GEOMETRY_WRITERS_[a.getType()];return c((ol.format.Feature.transformWithOptions(a,true,b)),b)};ol.format.EsriJSON.prototype.writeGeometry;ol.format.EsriJSON.prototype.writeGeometryObject=function(a,b){return ol.format.EsriJSON.writeGeometry_(a,this.adaptOptions(b))};ol.format.EsriJSON.prototype.writeFeature;ol.format.EsriJSON.prototype.writeFeatureObject=function(a,b){b=this.adaptOptions(b);var c={};var d=a.getGeometry();if(d){c['geometry']=ol.format.EsriJSON.writeGeometry_(d,b);if(b&&b.featureProjection){c['geometry']['spatialReference']=({wkid:ol.proj.get(b.featureProjection).getCode().split(':').pop()})}}var e=a.getProperties();delete e[a.getGeometryName()];if(!ol.obj.isEmpty(e)){c['attributes']=e}else{c['attributes']={}}return c};ol.format.EsriJSON.prototype.writeFeatures;ol.format.EsriJSON.prototype.writeFeaturesObject=function(a,b){b=this.adaptOptions(b);var c=[];var i,ii;for(i=0,ii=a.length;i<ii;++i){c.push(this.writeFeatureObject(a[i],b))}return({'features':c})};bq.provide('ol.format.filter.Filter');ol.format.filter.Filter=function(a){this.tagName_=a};ol.format.filter.Filter.prototype.getTagName=function(){return this.tagName_};bq.provide('ol.format.filter.LogicalNary');bq.require('ol');bq.require('ol.asserts');bq.require('ol.format.filter.Filter');ol.format.filter.LogicalNary=function(a,b){ol.format.filter.Filter.call(this,a);this.conditions=Array.prototype.slice.call(arguments,1);ol.asserts.assert(this.conditions.length>=2,57)};ol.inherits(ol.format.filter.LogicalNary,ol.format.filter.Filter);bq.provide('ol.format.filter.And');bq.require('ol');bq.require('ol.format.filter.LogicalNary');ol.format.filter.And=function(a){var b=['And'].concat(Array.prototype.slice.call(arguments));ol.format.filter.LogicalNary.apply(this,b)};ol.inherits(ol.format.filter.And,ol.format.filter.LogicalNary);bq.provide('ol.format.filter.Bbox');bq.require('ol');bq.require('ol.format.filter.Filter');ol.format.filter.Bbox=function(a,b,c){ol.format.filter.Filter.call(this,'BBOX');this.geometryName=a;this.extent=b;this.srsName=c};ol.inherits(ol.format.filter.Bbox,ol.format.filter.Filter);bq.provide('ol.format.filter.Spatial');bq.require('ol');bq.require('ol.format.filter.Filter');ol.format.filter.Spatial=function(a,b,c,d){ol.format.filter.Filter.call(this,a);this.geometryName=b||'the_geom';this.geometry=c;this.srsName=d};ol.inherits(ol.format.filter.Spatial,ol.format.filter.Filter);bq.provide('ol.format.filter.Contains');bq.require('ol');bq.require('ol.format.filter.Spatial');ol.format.filter.Contains=function(a,b,c){ol.format.filter.Spatial.call(this,'Contains',a,b,c)};ol.inherits(ol.format.filter.Contains,ol.format.filter.Spatial);bq.provide('ol.format.filter.Comparison');bq.require('ol');bq.require('ol.format.filter.Filter');ol.format.filter.Comparison=function(a,b){ol.format.filter.Filter.call(this,a);this.propertyName=b};ol.inherits(ol.format.filter.Comparison,ol.format.filter.Filter);bq.provide('ol.format.filter.During');bq.require('ol');bq.require('ol.format.filter.Comparison');ol.format.filter.During=function(a,b,c){ol.format.filter.Comparison.call(this,'During',a);this.begin=b;this.end=c};ol.inherits(ol.format.filter.During,ol.format.filter.Comparison);bq.provide('ol.format.filter.ComparisonBinary');bq.require('ol');bq.require('ol.format.filter.Comparison');ol.format.filter.ComparisonBinary=function(a,b,c,d){ol.format.filter.Comparison.call(this,a,b);this.expression=c;this.matchCase=d};ol.inherits(ol.format.filter.ComparisonBinary,ol.format.filter.Comparison);bq.provide('ol.format.filter.EqualTo');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.EqualTo=function(a,b,c){ol.format.filter.ComparisonBinary.call(this,'PropertyIsEqualTo',a,b,c)};ol.inherits(ol.format.filter.EqualTo,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.GreaterThan');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.GreaterThan=function(a,b){ol.format.filter.ComparisonBinary.call(this,'PropertyIsGreaterThan',a,b)};ol.inherits(ol.format.filter.GreaterThan,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.GreaterThanOrEqualTo');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.GreaterThanOrEqualTo=function(a,b){ol.format.filter.ComparisonBinary.call(this,'PropertyIsGreaterThanOrEqualTo',a,b)};ol.inherits(ol.format.filter.GreaterThanOrEqualTo,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.Intersects');bq.require('ol');bq.require('ol.format.filter.Spatial');ol.format.filter.Intersects=function(a,b,c){ol.format.filter.Spatial.call(this,'Intersects',a,b,c)};ol.inherits(ol.format.filter.Intersects,ol.format.filter.Spatial);bq.provide('ol.format.filter.IsBetween');bq.require('ol');bq.require('ol.format.filter.Comparison');ol.format.filter.IsBetween=function(a,b,c){ol.format.filter.Comparison.call(this,'PropertyIsBetween',a);this.lowerBoundary=b;this.upperBoundary=c};ol.inherits(ol.format.filter.IsBetween,ol.format.filter.Comparison);bq.provide('ol.format.filter.IsLike');bq.require('ol');bq.require('ol.format.filter.Comparison');ol.format.filter.IsLike=function(a,b,c,d,e,f){ol.format.filter.Comparison.call(this,'PropertyIsLike',a);this.pattern=b;this.wildCard=(c!==undefined)?c:'*';this.singleChar=(d!==undefined)?d:'.';this.escapeChar=(e!==undefined)?e:'!';this.matchCase=f};ol.inherits(ol.format.filter.IsLike,ol.format.filter.Comparison);bq.provide('ol.format.filter.IsNull');bq.require('ol');bq.require('ol.format.filter.Comparison');ol.format.filter.IsNull=function(a){ol.format.filter.Comparison.call(this,'PropertyIsNull',a)};ol.inherits(ol.format.filter.IsNull,ol.format.filter.Comparison);bq.provide('ol.format.filter.LessThan');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.LessThan=function(a,b){ol.format.filter.ComparisonBinary.call(this,'PropertyIsLessThan',a,b)};ol.inherits(ol.format.filter.LessThan,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.LessThanOrEqualTo');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.LessThanOrEqualTo=function(a,b){ol.format.filter.ComparisonBinary.call(this,'PropertyIsLessThanOrEqualTo',a,b)};ol.inherits(ol.format.filter.LessThanOrEqualTo,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.Not');bq.require('ol');bq.require('ol.format.filter.Filter');ol.format.filter.Not=function(a){ol.format.filter.Filter.call(this,'Not');this.condition=a};ol.inherits(ol.format.filter.Not,ol.format.filter.Filter);bq.provide('ol.format.filter.NotEqualTo');bq.require('ol');bq.require('ol.format.filter.ComparisonBinary');ol.format.filter.NotEqualTo=function(a,b,c){ol.format.filter.ComparisonBinary.call(this,'PropertyIsNotEqualTo',a,b,c)};ol.inherits(ol.format.filter.NotEqualTo,ol.format.filter.ComparisonBinary);bq.provide('ol.format.filter.Or');bq.require('ol');bq.require('ol.format.filter.LogicalNary');ol.format.filter.Or=function(a){var b=['Or'].concat(Array.prototype.slice.call(arguments));ol.format.filter.LogicalNary.apply(this,b)};ol.inherits(ol.format.filter.Or,ol.format.filter.LogicalNary);bq.provide('ol.format.filter.Within');bq.require('ol');bq.require('ol.format.filter.Spatial');ol.format.filter.Within=function(a,b,c){ol.format.filter.Spatial.call(this,'Within',a,b,c)};ol.inherits(ol.format.filter.Within,ol.format.filter.Spatial);bq.provide('ol.format.filter');bq.require('ol.format.filter.And');bq.require('ol.format.filter.Bbox');bq.require('ol.format.filter.Contains');bq.require('ol.format.filter.During');bq.require('ol.format.filter.EqualTo');bq.require('ol.format.filter.GreaterThan');bq.require('ol.format.filter.GreaterThanOrEqualTo');bq.require('ol.format.filter.Intersects');bq.require('ol.format.filter.IsBetween');bq.require('ol.format.filter.IsLike');bq.require('ol.format.filter.IsNull');bq.require('ol.format.filter.LessThan');bq.require('ol.format.filter.LessThanOrEqualTo');bq.require('ol.format.filter.Not');bq.require('ol.format.filter.NotEqualTo');bq.require('ol.format.filter.Or');bq.require('ol.format.filter.Within');ol.format.filter.and=function(a){var b=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ol.format.filter.And,b))};ol.format.filter.or=function(a){var b=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ol.format.filter.Or,b))};ol.format.filter.not=function(a){return new ol.format.filter.Not(a)};ol.format.filter.bbox=function(a,b,c){return new ol.format.filter.Bbox(a,b,c)};ol.format.filter.contains=function(a,b,c){return new ol.format.filter.Contains(a,b,c)};ol.format.filter.intersects=function(a,b,c){return new ol.format.filter.Intersects(a,b,c)};ol.format.filter.within=function(a,b,c){return new ol.format.filter.Within(a,b,c)};ol.format.filter.equalTo=function(a,b,c){return new ol.format.filter.EqualTo(a,b,c)};ol.format.filter.notEqualTo=function(a,b,c){return new ol.format.filter.NotEqualTo(a,b,c)};ol.format.filter.lessThan=function(a,b){return new ol.format.filter.LessThan(a,b)};ol.format.filter.lessThanOrEqualTo=function(a,b){return new ol.format.filter.LessThanOrEqualTo(a,b)};ol.format.filter.greaterThan=function(a,b){return new ol.format.filter.GreaterThan(a,b)};ol.format.filter.greaterThanOrEqualTo=function(a,b){return new ol.format.filter.GreaterThanOrEqualTo(a,b)};ol.format.filter.isNull=function(a){return new ol.format.filter.IsNull(a)};ol.format.filter.between=function(a,b,c){return new ol.format.filter.IsBetween(a,b,c)};ol.format.filter.like=function(a,b,c,d,e,f){return new ol.format.filter.IsLike(a,b,c,d,e,f)};ol.format.filter.during=function(a,b,c){return new ol.format.filter.During(a,b,c)};bq.provide('ol.geom.GeometryCollection');bq.require('ol');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.geom.Geometry');bq.require('ol.geom.GeometryType');bq.require('ol.obj');ol.geom.GeometryCollection=function(a){ol.geom.Geometry.call(this);this.geometries_=a?a:null;this.listenGeometriesChange_()};ol.inherits(ol.geom.GeometryCollection,ol.geom.Geometry);ol.geom.GeometryCollection.cloneGeometries_=function(a){var b=[];var i,ii;for(i=0,ii=a.length;i<ii;++i){b.push(a[i].clone())}return b};ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var i,ii;if(!this.geometries_){return}for(i=0,ii=this.geometries_.length;i<ii;++i){ol.events.unlisten(this.geometries_[i],ol.events.EventType.CHANGE,this.changed,this)}};ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var i,ii;if(!this.geometries_){return}for(i=0,ii=this.geometries_.length;i<ii;++i){ol.events.listen(this.geometries_[i],ol.events.EventType.CHANGE,this.changed,this)}};ol.geom.GeometryCollection.prototype.clone=function(){var a=new ol.geom.GeometryCollection(null);a.setGeometries(this.geometries_);return a};ol.geom.GeometryCollection.prototype.closestPointXY=function(x,y,a,b){if(b<ol.extent.closestSquaredDistanceXY(this.getExtent(),x,y)){return b}var c=this.geometries_;var i,ii;for(i=0,ii=c.length;i<ii;++i){b=c[i].closestPointXY(x,y,a,b)}return b};ol.geom.GeometryCollection.prototype.containsXY=function(x,y){var a=this.geometries_;var i,ii;for(i=0,ii=a.length;i<ii;++i){if(a[i].containsXY(x,y)){return true}}return false};ol.geom.GeometryCollection.prototype.computeExtent=function(a){ol.extent.createOrUpdateEmpty(a);var b=this.geometries_;for(var i=0,ii=b.length;i<ii;++i){ol.extent.extend(a,b[i].getExtent())}return a};ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)};ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_};ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!=this.getRevision()){ol.obj.clear(this.simplifiedGeometryCache);this.simplifiedGeometryMaxMinSquaredTolerance=0;this.simplifiedGeometryRevision=this.getRevision()}if(a<0||(this.simplifiedGeometryMaxMinSquaredTolerance!==0&&a<this.simplifiedGeometryMaxMinSquaredTolerance)){return this}var b=a.toString();if(this.simplifiedGeometryCache.hasOwnProperty(b)){return this.simplifiedGeometryCache[b]}else{var c=[];var d=this.geometries_;var e=false;var i,ii;for(i=0,ii=d.length;i<ii;++i){var f=d[i];var g=f.getSimplifiedGeometry(a);c.push(g);if(g!==f){e=true}}if(e){var h=new ol.geom.GeometryCollection(null);h.setGeometriesArray(c);this.simplifiedGeometryCache[b]=h;return h}else{this.simplifiedGeometryMaxMinSquaredTolerance=a;return this}}};ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION};ol.geom.GeometryCollection.prototype.intersectsExtent=function(a){var b=this.geometries_;var i,ii;for(i=0,ii=b.length;i<ii;++i){if(b[i].intersectsExtent(a)){return true}}return false};ol.geom.GeometryCollection.prototype.isEmpty=function(){return this.geometries_.length===0};ol.geom.GeometryCollection.prototype.rotate=function(a,b){var c=this.geometries_;for(var i=0,ii=c.length;i<ii;++i){c[i].rotate(a,b)}this.changed()};ol.geom.GeometryCollection.prototype.scale=function(a,b,c){var d=c;if(!d){d=ol.extent.getCenter(this.getExtent())}var e=this.geometries_;for(var i=0,ii=e.length;i<ii;++i){e[i].scale(a,b,d)}this.changed()};ol.geom.GeometryCollection.prototype.setGeometries=function(a){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(a))};ol.geom.GeometryCollection.prototype.setGeometriesArray=function(a){this.unlistenGeometriesChange_();this.geometries_=a;this.listenGeometriesChange_();this.changed()};ol.geom.GeometryCollection.prototype.applyTransform=function(a){var b=this.geometries_;var i,ii;for(i=0,ii=b.length;i<ii;++i){b[i].applyTransform(a)}this.changed()};ol.geom.GeometryCollection.prototype.translate=function(a,b){var c=this.geometries_;var i,ii;for(i=0,ii=c.length;i<ii;++i){c[i].translate(a,b)}this.changed()};ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_();ol.geom.Geometry.prototype.disposeInternal.call(this)};bq.provide('ol.format.GeoJSON');bq.require('ol');bq.require('ol.asserts');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.JSONFeature');bq.require('ol.geom.GeometryCollection');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.obj');bq.require('ol.proj');ol.format.GeoJSON=function(a){var b=a?a:{};ol.format.JSONFeature.call(this);this.defaultDataProjection=ol.proj.get(b.defaultDataProjection?b.defaultDataProjection:'EPSG:4326');if(b.featureProjection){this.defaultFeatureProjection=ol.proj.get(b.featureProjection)}this.geometryName_=b.geometryName;this.extractGeometryName_=b.extractGeometryName};ol.inherits(ol.format.GeoJSON,ol.format.JSONFeature);ol.format.GeoJSON.readGeometry_=function(a,b){if(!a){return null}var c=ol.format.GeoJSON.GEOMETRY_READERS_[a.type];return(ol.format.Feature.transformWithOptions(c(a),false,b))};ol.format.GeoJSON.readGeometryCollectionGeometry_=function(b,c){var d=b.geometries.map(function(a){return ol.format.GeoJSON.readGeometry_(a,c)});return new ol.geom.GeometryCollection(d)};ol.format.GeoJSON.readPointGeometry_=function(a){return new ol.geom.Point(a.coordinates)};ol.format.GeoJSON.readLineStringGeometry_=function(a){return new ol.geom.LineString(a.coordinates)};ol.format.GeoJSON.readMultiLineStringGeometry_=function(a){return new ol.geom.MultiLineString(a.coordinates)};ol.format.GeoJSON.readMultiPointGeometry_=function(a){return new ol.geom.MultiPoint(a.coordinates)};ol.format.GeoJSON.readMultiPolygonGeometry_=function(a){return new ol.geom.MultiPolygon(a.coordinates)};ol.format.GeoJSON.readPolygonGeometry_=function(a){return new ol.geom.Polygon(a.coordinates)};ol.format.GeoJSON.writeGeometry_=function(a,b){var c=ol.format.GeoJSON.GEOMETRY_WRITERS_[a.getType()];return c((ol.format.Feature.transformWithOptions(a,true,b)),b)};ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(a){return({type:'GeometryCollection',geometries:[]})};ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(c,d){var e=c.getGeometriesArray().map(function(a){var b=ol.obj.assign({},d);delete b.featureProjection;return ol.format.GeoJSON.writeGeometry_(a,b)});return({type:'GeometryCollection',geometries:e})};ol.format.GeoJSON.writeLineStringGeometry_=function(a,b){return({type:'LineString',coordinates:a.getCoordinates()})};ol.format.GeoJSON.writeMultiLineStringGeometry_=function(a,b){return({type:'MultiLineString',coordinates:a.getCoordinates()})};ol.format.GeoJSON.writeMultiPointGeometry_=function(a,b){return({type:'MultiPoint',coordinates:a.getCoordinates()})};ol.format.GeoJSON.writeMultiPolygonGeometry_=function(a,b){var c;if(b){c=b.rightHanded}return({type:'MultiPolygon',coordinates:a.getCoordinates(c)})};ol.format.GeoJSON.writePointGeometry_=function(a,b){return({type:'Point',coordinates:a.getCoordinates()})};ol.format.GeoJSON.writePolygonGeometry_=function(a,b){var c;if(b){c=b.rightHanded}return({type:'Polygon',coordinates:a.getCoordinates(c)})};ol.format.GeoJSON.GEOMETRY_READERS_={'Point':ol.format.GeoJSON.readPointGeometry_,'LineString':ol.format.GeoJSON.readLineStringGeometry_,'Polygon':ol.format.GeoJSON.readPolygonGeometry_,'MultiPoint':ol.format.GeoJSON.readMultiPointGeometry_,'MultiLineString':ol.format.GeoJSON.readMultiLineStringGeometry_,'MultiPolygon':ol.format.GeoJSON.readMultiPolygonGeometry_,'GeometryCollection':ol.format.GeoJSON.readGeometryCollectionGeometry_};ol.format.GeoJSON.GEOMETRY_WRITERS_={'Point':ol.format.GeoJSON.writePointGeometry_,'LineString':ol.format.GeoJSON.writeLineStringGeometry_,'Polygon':ol.format.GeoJSON.writePolygonGeometry_,'MultiPoint':ol.format.GeoJSON.writeMultiPointGeometry_,'MultiLineString':ol.format.GeoJSON.writeMultiLineStringGeometry_,'MultiPolygon':ol.format.GeoJSON.writeMultiPolygonGeometry_,'GeometryCollection':ol.format.GeoJSON.writeGeometryCollectionGeometry_,'Circle':ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_};ol.format.GeoJSON.prototype.readFeature;ol.format.GeoJSON.prototype.readFeatures;ol.format.GeoJSON.prototype.readFeatureFromObject=function(a,b){var c=null;if(a.type==='Feature'){c=(a)}else{c=({type:'Feature',geometry:(a)})}var d=ol.format.GeoJSON.readGeometry_(c.geometry,b);var e=new ol.Feature();if(this.geometryName_){e.setGeometryName(this.geometryName_)}else if(this.extractGeometryName_&&c.geometry_name!==undefined){e.setGeometryName(c.geometry_name)}e.setGeometry(d);if(c.id!==undefined){e.setId(c.id)}if(c.properties){e.setProperties(c.properties)}return e};ol.format.GeoJSON.prototype.readFeaturesFromObject=function(a,b){var c=(a);var d=null;if(c.type==='FeatureCollection'){var e=(a);d=[];var f=e.features;var i,ii;for(i=0,ii=f.length;i<ii;++i){d.push(this.readFeatureFromObject(f[i],b))}}else{d=[this.readFeatureFromObject(a,b)]}return d};ol.format.GeoJSON.prototype.readGeometry;ol.format.GeoJSON.prototype.readGeometryFromObject=function(a,b){return ol.format.GeoJSON.readGeometry_((a),b)};ol.format.GeoJSON.prototype.readProjection;ol.format.GeoJSON.prototype.readProjectionFromObject=function(a){var b=(a);var c=b.crs;var d;if(c){if(c.type=='name'){d=ol.proj.get(c.properties.name)}else{ol.asserts.assert(false,36)}}else{d=this.defaultDataProjection}return(d)};ol.format.GeoJSON.prototype.writeFeature;ol.format.GeoJSON.prototype.writeFeatureObject=function(a,b){b=this.adaptOptions(b);var c=({'type':'Feature'});var d=a.getId();if(d!==undefined){c.id=d}var e=a.getGeometry();if(e){c.geometry=ol.format.GeoJSON.writeGeometry_(e,b)}else{c.geometry=null}var f=a.getProperties();delete f[a.getGeometryName()];if(!ol.obj.isEmpty(f)){c.properties=f}else{c.properties=null}return c};ol.format.GeoJSON.prototype.writeFeatures;ol.format.GeoJSON.prototype.writeFeaturesObject=function(a,b){b=this.adaptOptions(b);var c=[];var i,ii;for(i=0,ii=a.length;i<ii;++i){c.push(this.writeFeatureObject(a[i],b))}return({type:'FeatureCollection',features:c})};ol.format.GeoJSON.prototype.writeGeometry;ol.format.GeoJSON.prototype.writeGeometryObject=function(a,b){return ol.format.GeoJSON.writeGeometry_(a,this.adaptOptions(b))};bq.provide('ol.format.XMLFeature');bq.require('ol');bq.require('ol.array');bq.require('ol.format.Feature');bq.require('ol.format.FormatType');bq.require('ol.xml');ol.format.XMLFeature=function(){this.xmlSerializer_=new XMLSerializer();ol.format.Feature.call(this)};ol.inherits(ol.format.XMLFeature,ol.format.Feature);ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML};ol.format.XMLFeature.prototype.readFeature=function(a,b){if(ol.xml.isDocument(a)){return this.readFeatureFromDocument((a),b)}else if(ol.xml.isNode(a)){return this.readFeatureFromNode((a),b)}else if(typeof a==='string'){var c=ol.xml.parse(a);return this.readFeatureFromDocument(c,b)}else{return null}};ol.format.XMLFeature.prototype.readFeatureFromDocument=function(a,b){var c=this.readFeaturesFromDocument(a,b);if(c.length>0){return c[0]}else{return null}};ol.format.XMLFeature.prototype.readFeatureFromNode=function(a,b){return null};ol.format.XMLFeature.prototype.readFeatures=function(a,b){if(ol.xml.isDocument(a)){return this.readFeaturesFromDocument((a),b)}else if(ol.xml.isNode(a)){return this.readFeaturesFromNode((a),b)}else if(typeof a==='string'){var c=ol.xml.parse(a);return this.readFeaturesFromDocument(c,b)}else{return[]}};ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(a,b){var c=[];var n;for(n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){ol.array.extend(c,this.readFeaturesFromNode(n,b))}}return c};ol.format.XMLFeature.prototype.readFeaturesFromNode=function(a,b){};ol.format.XMLFeature.prototype.readGeometry=function(a,b){if(ol.xml.isDocument(a)){return this.readGeometryFromDocument((a),b)}else if(ol.xml.isNode(a)){return this.readGeometryFromNode((a),b)}else if(typeof a==='string'){var c=ol.xml.parse(a);return this.readGeometryFromDocument(c,b)}else{return null}};ol.format.XMLFeature.prototype.readGeometryFromDocument=function(a,b){return null};ol.format.XMLFeature.prototype.readGeometryFromNode=function(a,b){return null};ol.format.XMLFeature.prototype.readProjection=function(a){if(ol.xml.isDocument(a)){return this.readProjectionFromDocument((a))}else if(ol.xml.isNode(a)){return this.readProjectionFromNode((a))}else if(typeof a==='string'){var b=ol.xml.parse(a);return this.readProjectionFromDocument(b)}else{return null}};ol.format.XMLFeature.prototype.readProjectionFromDocument=function(a){return this.defaultDataProjection};ol.format.XMLFeature.prototype.readProjectionFromNode=function(a){return this.defaultDataProjection};ol.format.XMLFeature.prototype.writeFeature=function(a,b){var c=this.writeFeatureNode(a,b);return this.xmlSerializer_.serializeToString(c)};ol.format.XMLFeature.prototype.writeFeatureNode=function(a,b){return null};ol.format.XMLFeature.prototype.writeFeatures=function(a,b){var c=this.writeFeaturesNode(a,b);return this.xmlSerializer_.serializeToString(c)};ol.format.XMLFeature.prototype.writeFeaturesNode=function(a,b){return null};ol.format.XMLFeature.prototype.writeGeometry=function(a,b){var c=this.writeGeometryNode(a,b);return this.xmlSerializer_.serializeToString(c)};ol.format.XMLFeature.prototype.writeGeometryNode=function(a,b){return null};bq.provide('ol.format.GMLBase');bq.require('ol');bq.require('ol.array');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.XMLFeature');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.LinearRing');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.xml');ol.format.GMLBase=function(a){var b=(a?a:{});this.featureType=b.featureType;this.featureNS=b.featureNS;this.srsName=b.srsName;this.schemaLocation='';this.FEATURE_COLLECTION_PARSERS={};this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={'featureMember':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),'featureMembers':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)};ol.format.XMLFeature.call(this)};ol.inherits(ol.format.GMLBase,ol.format.XMLFeature);ol.format.GMLBase.GMLNS='http://www.opengis.net/gml';ol.format.GMLBase.ONLY_WHITESPACE_RE_=/^[\s\xa0]*$/;ol.format.GMLBase.prototype.readFeaturesInternal=function(a,b){var c=a.localName;var d=null;if(c=='FeatureCollection'){if(a.namespaceURI==='http://www.opengis.net/wfs'){d=ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,a,b,this)}else{d=ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,a,b,this)}}else if(c=='featureMembers'||c=='featureMember'){var e=b[0];var f=e['featureType'];var g=e['featureNS'];var i,ii,prefix='p',defaultPrefix='p0';if(!f&&a.childNodes){f=[],g={};for(i=0,ii=a.childNodes.length;i<ii;++i){var h=a.childNodes[i];if(h.nodeType===1){var j=h.nodeName.split(':').pop();if(f.indexOf(j)===-1){var k='';var l=0;var m=h.namespaceURI;for(var n in g){if(g[n]===m){k=n;break}++l}if(!k){k=prefix+l;g[k]=m}f.push(k+':'+j)}}}if(c!='featureMember'){e['featureType']=f;e['featureNS']=g}}if(typeof g==='string'){var o=g;g={};g[defaultPrefix]=o}var q={};var r=Array.isArray(f)?f:[f];for(var p in g){var s={};for(i=0,ii=r.length;i<ii;++i){var t=r[i].indexOf(':')===-1?defaultPrefix:r[i].split(':')[0];if(t===p){s[r[i].split(':').pop()]=(c=='featureMembers')?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this)}}q[g[p]]=s}if(c=='featureMember'){d=ol.xml.pushParseAndPop(undefined,q,a,b)}else{d=ol.xml.pushParseAndPop([],q,a,b)}}if(d===null){d=[]}return d};ol.format.GMLBase.prototype.readGeometryElement=function(a,b){var c=(b[0]);c['srsName']=a.firstElementChild.getAttribute('srsName');c['srsDimension']=a.firstElementChild.getAttribute('srsDimension');var d=ol.xml.pushParseAndPop(null,this.GEOMETRY_PARSERS_,a,b,this);if(d){return(ol.format.Feature.transformWithOptions(d,false,c))}else{return undefined}};ol.format.GMLBase.prototype.readFeatureElement=function(a,b){var n;var c=a.getAttribute('fid')||ol.xml.getAttributeNS(a,ol.format.GMLBase.GMLNS,'id');var d={},geometryName;for(n=a.firstElementChild;n;n=n.nextElementSibling){var e=n.localName;if(n.childNodes.length===0||(n.childNodes.length===1&&(n.firstChild.nodeType===3||n.firstChild.nodeType===4))){var f=ol.xml.getAllTextContent(n,false);if(ol.format.GMLBase.ONLY_WHITESPACE_RE_.test(f)){f=undefined}d[e]=f}else{if(e!=='boundedBy'){geometryName=e}d[e]=this.readGeometryElement(n,b)}}var g=new ol.Feature(d);if(geometryName){g.setGeometryName(geometryName)}if(c){g.setId(c)}return g};ol.format.GMLBase.prototype.readPoint=function(a,b){var c=this.readFlatCoordinatesFromNode_(a,b);if(c){var d=new ol.geom.Point(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}};ol.format.GMLBase.prototype.readMultiPoint=function(a,b){var c=ol.xml.pushParseAndPop([],this.MULTIPOINT_PARSERS_,a,b,this);if(c){return new ol.geom.MultiPoint(c)}else{return undefined}};ol.format.GMLBase.prototype.readMultiLineString=function(a,b){var c=ol.xml.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,a,b,this);if(c){var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d}else{return undefined}};ol.format.GMLBase.prototype.readMultiPolygon=function(a,b){var c=ol.xml.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,a,b,this);if(c){var d=new ol.geom.MultiPolygon(null);d.setPolygons(c);return d}else{return undefined}};ol.format.GMLBase.prototype.pointMemberParser_=function(a,b){ol.xml.parseNode(this.POINTMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.lineStringMemberParser_=function(a,b){ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.polygonMemberParser_=function(a,b){ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.readLineString=function(a,b){var c=this.readFlatCoordinatesFromNode_(a,b);if(c){var d=new ol.geom.LineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GMLBase.prototype.readFlatLinearRing_=function(a,b){var c=ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this);if(c){return c}else{return undefined}};ol.format.GMLBase.prototype.readLinearRing=function(a,b){var c=this.readFlatCoordinatesFromNode_(a,b);if(c){var d=new ol.geom.LinearRing(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GMLBase.prototype.readPolygon=function(a,b){var c=ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,a,b,this);if(c&&c[0]){var d=new ol.geom.Polygon(null);var e=c[0];var f=[e.length];var i,ii;for(i=1,ii=c.length;i<ii;++i){ol.array.extend(e,c[i]);f.push(e.length)}d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,e,f);return d}else{return undefined}};ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(a,b){return ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this)};ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_={'http://www.opengis.net/gml':{'pointMember':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),'pointMembers':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}};ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_={'http://www.opengis.net/gml':{'lineStringMember':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),'lineStringMembers':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}};ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_={'http://www.opengis.net/gml':{'polygonMember':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),'polygonMembers':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}};ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_={'http://www.opengis.net/gml':{'Point':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}};ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_={'http://www.opengis.net/gml':{'LineString':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}};ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_={'http://www.opengis.net/gml':{'Polygon':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}};ol.format.GMLBase.prototype.RING_PARSERS={'http://www.opengis.net/gml':{'LinearRing':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}};ol.format.GMLBase.prototype.readGeometryFromNode=function(a,b){var c=this.readGeometryElement(a,[this.getReadOptions(a,b?b:{})]);return c?c:null};ol.format.GMLBase.prototype.readFeatures;ol.format.GMLBase.prototype.readFeaturesFromNode=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};if(b){ol.obj.assign(c,this.getReadOptions(a,b))}var d=this.readFeaturesInternal(a,[c]);return d||[]};ol.format.GMLBase.prototype.readProjectionFromNode=function(a){return ol.proj.get(this.srsName?this.srsName:a.firstElementChild.getAttribute('srsName'))};bq.provide('ol.format.XSD');bq.require('ol.xml');bq.require('ol.string');ol.format.XSD.NAMESPACE_URI='http://www.w3.org/2001/XMLSchema';ol.format.XSD.readBoolean=function(a){var s=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readBooleanString(s)};ol.format.XSD.readBooleanString=function(a){var m=/^\s*(true|1)|(false|0)\s*$/.exec(a);if(m){return m[1]!==undefined||false}else{return undefined}};ol.format.XSD.readDateTime=function(a){var s=ol.xml.getAllTextContent(a,false);var b=Date.parse(s);return isNaN(b)?undefined:b/1000};ol.format.XSD.readDecimal=function(a){var s=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readDecimalString(s)};ol.format.XSD.readDecimalString=function(a){var m=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a);if(m){return parseFloat(m[1])}else{return undefined}};ol.format.XSD.readNonNegativeInteger=function(a){var s=ol.xml.getAllTextContent(a,false);return ol.format.XSD.readNonNegativeIntegerString(s)};ol.format.XSD.readNonNegativeIntegerString=function(a){var m=/^\s*(\d+)\s*$/.exec(a);if(m){return parseInt(m[1],10)}else{return undefined}};ol.format.XSD.readString=function(a){return ol.xml.getAllTextContent(a,false).trim()};ol.format.XSD.writeBooleanTextNode=function(a,b){ol.format.XSD.writeStringTextNode(a,(b)?'1':'0')};ol.format.XSD.writeCDATASection=function(a,b){a.appendChild(ol.xml.DOCUMENT.createCDATASection(b))};ol.format.XSD.writeDateTimeTextNode=function(a,b){var c=new Date(b*1000);var d=c.getUTCFullYear()+'-'+ol.string.padNumber(c.getUTCMonth()+1,2)+'-'+ol.string.padNumber(c.getUTCDate(),2)+'T'+ol.string.padNumber(c.getUTCHours(),2)+':'+ol.string.padNumber(c.getUTCMinutes(),2)+':'+ol.string.padNumber(c.getUTCSeconds(),2)+'Z';a.appendChild(ol.xml.DOCUMENT.createTextNode(d))};ol.format.XSD.writeDecimalTextNode=function(a,b){var c=b.toPrecision();a.appendChild(ol.xml.DOCUMENT.createTextNode(c))};ol.format.XSD.writeNonNegativeIntegerTextNode=function(a,b){var c=b.toString();a.appendChild(ol.xml.DOCUMENT.createTextNode(c))};ol.format.XSD.writeStringTextNode=function(a,b){a.appendChild(ol.xml.DOCUMENT.createTextNode(b))};bq.provide('ol.format.GML3');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.format.Feature');bq.require('ol.format.GMLBase');bq.require('ol.format.XSD');bq.require('ol.geom.Geometry');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Polygon');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.xml');ol.format.GML3=function(a){var b=(a?a:{});ol.format.GMLBase.call(this,b);this.surface_=b.surface!==undefined?b.surface:false;this.curve_=b.curve!==undefined?b.curve:false;this.multiCurve_=b.multiCurve!==undefined?b.multiCurve:true;this.multiSurface_=b.multiSurface!==undefined?b.multiSurface:true;this.schemaLocation=b.schemaLocation?b.schemaLocation:ol.format.GML3.schemaLocation_;this.hasZ=b.hasZ!==undefined?b.hasZ:false};ol.inherits(ol.format.GML3,ol.format.GMLBase);ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+' http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/'+'1.0.0/gmlsf.xsd';ol.format.GML3.prototype.readMultiCurve_=function(a,b){var c=ol.xml.pushParseAndPop([],this.MULTICURVE_PARSERS_,a,b,this);if(c){var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d}else{return undefined}};ol.format.GML3.prototype.readMultiSurface_=function(a,b){var c=ol.xml.pushParseAndPop([],this.MULTISURFACE_PARSERS_,a,b,this);if(c){var d=new ol.geom.MultiPolygon(null);d.setPolygons(c);return d}else{return undefined}};ol.format.GML3.prototype.curveMemberParser_=function(a,b){ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,a,b,this)};ol.format.GML3.prototype.surfaceMemberParser_=function(a,b){ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,a,b,this)};ol.format.GML3.prototype.readPatch_=function(a,b){return ol.xml.pushParseAndPop([null],this.PATCHES_PARSERS_,a,b,this)};ol.format.GML3.prototype.readSegment_=function(a,b){return ol.xml.pushParseAndPop([null],this.SEGMENTS_PARSERS_,a,b,this)};ol.format.GML3.prototype.readPolygonPatch_=function(a,b){return ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,a,b,this)};ol.format.GML3.prototype.readLineStringSegment_=function(a,b){return ol.xml.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b,this)};ol.format.GML3.prototype.interiorParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(c){var d=(b[b.length-1]);d.push(c)}};ol.format.GML3.prototype.exteriorParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(c){var d=(b[b.length-1]);d[0]=c}};ol.format.GML3.prototype.readSurface_=function(a,b){var c=ol.xml.pushParseAndPop([null],this.SURFACE_PARSERS_,a,b,this);if(c&&c[0]){var d=new ol.geom.Polygon(null);var e=c[0];var f=[e.length];var i,ii;for(i=1,ii=c.length;i<ii;++i){ol.array.extend(e,c[i]);f.push(e.length)}d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,e,f);return d}else{return undefined}};ol.format.GML3.prototype.readCurve_=function(a,b){var c=ol.xml.pushParseAndPop([null],this.CURVE_PARSERS_,a,b,this);if(c){var d=new ol.geom.LineString(null);d.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,c);return d}else{return undefined}};ol.format.GML3.prototype.readEnvelope_=function(a,b){var c=ol.xml.pushParseAndPop([null],this.ENVELOPE_PARSERS_,a,b,this);return ol.extent.createOrUpdate(c[1][0],c[1][1],c[2][0],c[2][1])};ol.format.GML3.prototype.readFlatPos_=function(a,b){var s=ol.xml.getAllTextContent(a,false);var c=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;var d=[];var m;while((m=c.exec(s))){d.push(parseFloat(m[1]));s=s.substr(m[0].length)}if(s!==''){return undefined}var e=b[0];var f=e['srsName'];var g='enu';if(f){var h=ol.proj.get(f);g=h.getAxisOrientation()}if(g==='neu'){var i,ii;for(i=0,ii=d.length;i<ii;i+=3){var y=d[i];var x=d[i+1];d[i]=x;d[i+1]=y}}var j=d.length;if(j==2){d.push(0)}if(j===0){return undefined}return d};ol.format.GML3.prototype.readFlatPosList_=function(a,b){var s=ol.xml.getAllTextContent(a,false).replace(/^\s*|\s*$/g,'');var c=b[0];var d=c['srsName'];var e=c['srsDimension'];var f='enu';if(d){var g=ol.proj.get(d);f=g.getAxisOrientation()}var h=s.split(/\s+/);var j=2;if(a.getAttribute('srsDimension')){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute('srsDimension'))}else if(a.getAttribute('dimension')){j=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute('dimension'))}else if(a.parentNode.getAttribute('srsDimension')){j=ol.format.XSD.readNonNegativeIntegerString(a.parentNode.getAttribute('srsDimension'))}else if(e){j=ol.format.XSD.readNonNegativeIntegerString(e)}var x,y,z;var k=[];for(var i=0,ii=h.length;i<ii;i+=j){x=parseFloat(h[i]);y=parseFloat(h[i+1]);z=(j===3)?parseFloat(h[i+2]):0;if(f.substr(0,2)==='en'){k.push(x,y,z)}else{k.push(y,x,z)}}return k};ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={'http://www.opengis.net/gml':{'pos':ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),'posList':ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}};ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_={'http://www.opengis.net/gml':{'interior':ol.format.GML3.prototype.interiorParser_,'exterior':ol.format.GML3.prototype.exteriorParser_}};ol.format.GML3.prototype.GEOMETRY_PARSERS_={'http://www.opengis.net/gml':{'Point':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),'MultiPoint':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),'LineString':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),'MultiLineString':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),'LinearRing':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),'Polygon':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),'MultiPolygon':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),'Surface':ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),'MultiSurface':ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),'Curve':ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),'MultiCurve':ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),'Envelope':ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}};ol.format.GML3.prototype.MULTICURVE_PARSERS_={'http://www.opengis.net/gml':{'curveMember':ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),'curveMembers':ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}};ol.format.GML3.prototype.MULTISURFACE_PARSERS_={'http://www.opengis.net/gml':{'surfaceMember':ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),'surfaceMembers':ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}};ol.format.GML3.prototype.CURVEMEMBER_PARSERS_={'http://www.opengis.net/gml':{'LineString':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),'Curve':ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}};ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_={'http://www.opengis.net/gml':{'Polygon':ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),'Surface':ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}};ol.format.GML3.prototype.SURFACE_PARSERS_={'http://www.opengis.net/gml':{'patches':ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}};ol.format.GML3.prototype.CURVE_PARSERS_={'http://www.opengis.net/gml':{'segments':ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}};ol.format.GML3.prototype.ENVELOPE_PARSERS_={'http://www.opengis.net/gml':{'lowerCorner':ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),'upperCorner':ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}};ol.format.GML3.prototype.PATCHES_PARSERS_={'http://www.opengis.net/gml':{'PolygonPatch':ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}};ol.format.GML3.prototype.SEGMENTS_PARSERS_={'http://www.opengis.net/gml':{'LineStringSegment':ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}};ol.format.GML3.prototype.writePos_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=e?3:2;a.setAttribute('srsDimension',f);var g=d['srsName'];var h='enu';if(g){h=ol.proj.get(g).getAxisOrientation()}var i=b.getCoordinates();var j;if(h.substr(0,2)==='en'){j=(i[0]+' '+i[1])}else{j=(i[1]+' '+i[0])}if(e){var z=i[2]||0;j+=' '+z}ol.format.XSD.writeStringTextNode(a,j)};ol.format.GML3.prototype.getCoords_=function(a,b,c){var d='enu';if(b){d=ol.proj.get(b).getAxisOrientation()}var e=((d.substr(0,2)==='en')?a[0]+' '+a[1]:a[1]+' '+a[0]);if(c){var z=a[2]||0;e+=' '+z}return e};ol.format.GML3.prototype.writePosList_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=e?3:2;a.setAttribute('srsDimension',f);var g=d['srsName'];var h=b.getCoordinates();var j=h.length;var k=new Array(j);var l;for(var i=0;i<j;++i){l=h[i];k[i]=this.getCoords_(l,g,e)}ol.format.XSD.writeStringTextNode(a,k.join(' '))};ol.format.GML3.prototype.writePoint_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(e){a.setAttribute('srsName',e)}var f=ol.xml.createElementNS(a.namespaceURI,'pos');a.appendChild(f);this.writePos_(f,b,c)};ol.format.GML3.ENVELOPE_SERIALIZERS_={'http://www.opengis.net/gml':{'lowerCorner':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'upperCorner':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.GML3.prototype.writeEnvelope=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(e){a.setAttribute('srsName',e)}var f=['lowerCorner','upperCorner'];var g=[b[0]+' '+b[1],b[2]+' '+b[3]];ol.xml.pushSerializeAndPop(({node:a}),ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,c,f,this)};ol.format.GML3.prototype.writeLinearRing_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(e){a.setAttribute('srsName',e)}var f=ol.xml.createElementNS(a.namespaceURI,'posList');a.appendChild(f);this.writePosList_(f,b,c)};ol.format.GML3.prototype.RING_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];var e=d.node;var f=d['exteriorWritten'];if(f===undefined){d['exteriorWritten']=true}return ol.xml.createElementNS(e.namespaceURI,f!==undefined?'interior':'exterior')};ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];if(a.nodeName!=='PolygonPatch'&&f){a.setAttribute('srsName',f)}if(a.nodeName==='Polygon'||a.nodeName==='PolygonPatch'){var g=b.getLinearRings();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,g,c,undefined,this)}else if(a.nodeName==='Surface'){var h=ol.xml.createElementNS(a.namespaceURI,'patches');a.appendChild(h);this.writeSurfacePatches_(h,b,c)}};ol.format.GML3.prototype.writeCurveOrLineString_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(a.nodeName!=='LineStringSegment'&&e){a.setAttribute('srsName',e)}if(a.nodeName==='LineString'||a.nodeName==='LineStringSegment'){var f=ol.xml.createElementNS(a.namespaceURI,'posList');a.appendChild(f);this.writePosList_(f,b,c)}else if(a.nodeName==='Curve'){var g=ol.xml.createElementNS(a.namespaceURI,'segments');a.appendChild(g);this.writeCurveSegments_(g,b,c)}};ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];var g=d['surface'];if(f){a.setAttribute('srsName',f)}var h=b.getPolygons();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f,surface:g},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,c,undefined,this)};ol.format.GML3.prototype.writeMultiPoint_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];var f=d['hasZ'];if(e){a.setAttribute('srsName',e)}var g=b.getPoints();ol.xml.pushSerializeAndPop({node:a,hasZ:f,srsName:e},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('pointMember'),g,c,undefined,this)};ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];var g=d['curve'];if(f){a.setAttribute('srsName',f)}var h=b.getLineStrings();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f,curve:g},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,c,undefined,this)};ol.format.GML3.prototype.writeRing_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'LinearRing');a.appendChild(d);this.writeLinearRing_(d,b,c)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(a,b,c){var d=this.GEOMETRY_NODE_FACTORY_(b,c);if(d){a.appendChild(d);this.writeSurfaceOrPolygon_(d,b,c)}};ol.format.GML3.prototype.writePointMember_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'Point');a.appendChild(d);this.writePoint_(d,b,c)};ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(a,b,c){var d=this.GEOMETRY_NODE_FACTORY_(b,c);if(d){a.appendChild(d);this.writeCurveOrLineString_(d,b,c)}};ol.format.GML3.prototype.writeSurfacePatches_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'PolygonPatch');a.appendChild(d);this.writeSurfaceOrPolygon_(d,b,c)};ol.format.GML3.prototype.writeCurveSegments_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'LineStringSegment');a.appendChild(d);this.writeCurveOrLineString_(d,b,c)};ol.format.GML3.prototype.writeGeometryElement=function(a,b,c){var d=(c[c.length-1]);var e=ol.obj.assign({},d);e.node=a;var f;if(Array.isArray(b)){if(d.dataProjection){f=ol.proj.transformExtent(b,d.featureProjection,d.dataProjection)}else{f=b}}else{f=ol.format.Feature.transformWithOptions((b),true,d)}ol.xml.pushSerializeAndPop((e),ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[f],c,undefined,this)};ol.format.GML3.prototype.writeFeatureElement=function(a,b,c){var d=b.getId();if(d){a.setAttribute('fid',d)}var e=(c[c.length-1]);var f=e['featureNS'];var g=b.getGeometryName();if(!e.serializers){e.serializers={};e.serializers[f]={}}var h=b.getProperties();var i=[],values=[];for(var j in h){var k=h[j];if(k!==null){i.push(j);values.push(k);if(j==g||k instanceof ol.geom.Geometry){if(!(j in e.serializers[f])){e.serializers[f][j]=ol.xml.makeChildAppender(this.writeGeometryElement,this)}}else{if(!(j in e.serializers[f])){e.serializers[f][j]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}}}}var l=ol.obj.assign({},e);l.node=a;ol.xml.pushSerializeAndPop((l),e.serializers,ol.xml.makeSimpleNodeFactory(undefined,f),values,c,i)};ol.format.GML3.prototype.writeFeatureMembers_=function(a,b,c){var d=(c[c.length-1]);var e=d['featureType'];var f=d['featureNS'];var g={};g[f]={};g[f][e]=ol.xml.makeChildAppender(this.writeFeatureElement,this);var h=ol.obj.assign({},d);h.node=a;ol.xml.pushSerializeAndPop((h),g,ol.xml.makeSimpleNodeFactory(e,f),b,c)};ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'surfaceMember':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),'polygonMember':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML3.POINTMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'pointMember':ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}};ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'lineStringMember':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),'curveMember':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}};ol.format.GML3.RING_SERIALIZERS_={'http://www.opengis.net/gml':{'exterior':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),'interior':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}};ol.format.GML3.GEOMETRY_SERIALIZERS_={'http://www.opengis.net/gml':{'Curve':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),'MultiCurve':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),'Point':ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),'MultiPoint':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),'LineString':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),'MultiLineString':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),'LinearRing':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),'Polygon':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),'MultiPolygon':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),'Surface':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),'MultiSurface':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),'Envelope':ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}};ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={'MultiLineString':'lineStringMember','MultiCurve':'curveMember','MultiPolygon':'polygonMember','MultiSurface':'surfaceMember'};ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1].node;return ol.xml.createElementNS('http://www.opengis.net/gml',ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[d.nodeName])};ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];var e=d['multiSurface'];var f=d['surface'];var g=d['curve'];var h=d['multiCurve'];var i;if(!Array.isArray(a)){i=(a).getType();if(i==='MultiPolygon'&&e===true){i='MultiSurface'}else if(i==='Polygon'&&f===true){i='Surface'}else if(i==='LineString'&&g===true){i='Curve'}else if(i==='MultiLineString'&&h===true){i='MultiCurve'}}else{i='Envelope'}return ol.xml.createElementNS('http://www.opengis.net/gml',i)};ol.format.GML3.prototype.writeGeometryNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS('http://www.opengis.net/gml','geom');var d={node:c,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};if(b){ol.obj.assign(d,b)}this.writeGeometryElement(c,a,[d]);return c};ol.format.GML3.prototype.writeFeatures;ol.format.GML3.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS('http://www.opengis.net/gml','featureMembers');ol.xml.setAttributeNS(c,'http://www.w3.org/2001/XMLSchema-instance','xsi:schemaLocation',this.schemaLocation);var d={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};if(b){ol.obj.assign(d,b)}this.writeFeatureMembers_(c,a,[d]);return c};bq.provide('ol.format.GML');bq.require('ol.format.GML3');ol.format.GML=ol.format.GML3;ol.format.GML.prototype.writeFeatures;ol.format.GML.prototype.writeFeaturesNode;bq.provide('ol.format.GML2');bq.require('ol');bq.require('ol.extent');bq.require('ol.format.Feature');bq.require('ol.format.GMLBase');bq.require('ol.format.XSD');bq.require('ol.geom.Geometry');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.xml');ol.format.GML2=function(a){var b=(a?a:{});ol.format.GMLBase.call(this,b);this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]['featureMember']=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);this.schemaLocation=b.schemaLocation?b.schemaLocation:ol.format.GML2.schemaLocation_};ol.inherits(ol.format.GML2,ol.format.GMLBase);ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+' http://schemas.opengis.net/gml/2.1.2/feature.xsd';ol.format.GML2.prototype.readFlatCoordinates_=function(a,b){var s=ol.xml.getAllTextContent(a,false).replace(/^\s*|\s*$/g,'');var c=(b[0]);var d=c['srsName'];var e='enu';if(d){var f=ol.proj.get(d);if(f){e=f.getAxisOrientation()}}var g=s.trim().split(/\s+/);var x,y,z;var h=[];for(var i=0,ii=g.length;i<ii;i++){var j=g[i].split(/,+/);x=parseFloat(j[0]);y=parseFloat(j[1]);z=(j.length===3)?parseFloat(j[2]):0;if(e.substr(0,2)==='en'){h.push(x,y,z)}else{h.push(y,x,z)}}return h};ol.format.GML2.prototype.readBox_=function(a,b){var c=ol.xml.pushParseAndPop([null],this.BOX_PARSERS_,a,b,this);return ol.extent.createOrUpdate(c[1][0],c[1][1],c[1][3],c[1][4])};ol.format.GML2.prototype.innerBoundaryIsParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(c){var d=(b[b.length-1]);d.push(c)}};ol.format.GML2.prototype.outerBoundaryIsParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,this.RING_PARSERS,a,b,this);if(c){var d=(b[b.length-1]);d[0]=c}};ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={'http://www.opengis.net/gml':{'coordinates':ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}};ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_={'http://www.opengis.net/gml':{'innerBoundaryIs':ol.format.GML2.prototype.innerBoundaryIsParser_,'outerBoundaryIs':ol.format.GML2.prototype.outerBoundaryIsParser_}};ol.format.GML2.prototype.BOX_PARSERS_={'http://www.opengis.net/gml':{'coordinates':ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}};ol.format.GML2.prototype.GEOMETRY_PARSERS_={'http://www.opengis.net/gml':{'Point':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),'MultiPoint':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),'LineString':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),'MultiLineString':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),'LinearRing':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),'Polygon':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),'MultiPolygon':ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),'Box':ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}};ol.format.GML2.prototype.GEOMETRY_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];var e=d['multiSurface'];var f=d['surface'];var g=d['multiCurve'];var h;if(!Array.isArray(a)){h=(a).getType();if(h==='MultiPolygon'&&e===true){h='MultiSurface'}else if(h==='Polygon'&&f===true){h='Surface'}else if(h==='MultiLineString'&&g===true){h='MultiCurve'}}else{h='Envelope'}return ol.xml.createElementNS('http://www.opengis.net/gml',h)};ol.format.GML2.prototype.writeFeatureElement=function(a,b,c){var d=b.getId();if(d){a.setAttribute('fid',d)}var e=(c[c.length-1]);var f=e['featureNS'];var g=b.getGeometryName();if(!e.serializers){e.serializers={};e.serializers[f]={}}var h=b.getProperties();var i=[],values=[];for(var j in h){var k=h[j];if(k!==null){i.push(j);values.push(k);if(j==g||k instanceof ol.geom.Geometry){if(!(j in e.serializers[f])){e.serializers[f][j]=ol.xml.makeChildAppender(this.writeGeometryElement,this)}}else{if(!(j in e.serializers[f])){e.serializers[f][j]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}}}}var l=ol.obj.assign({},e);l.node=a;ol.xml.pushSerializeAndPop((l),e.serializers,ol.xml.makeSimpleNodeFactory(undefined,f),values,c,i)};ol.format.GML2.prototype.writeGeometryElement=function(a,b,c){var d=(c[c.length-1]);var e=ol.obj.assign({},d);e.node=a;var f;if(Array.isArray(b)){if(d.dataProjection){f=ol.proj.transformExtent(b,d.featureProjection,d.dataProjection)}else{f=b}}else{f=ol.format.Feature.transformWithOptions((b),true,d)}ol.xml.pushSerializeAndPop((e),ol.format.GML2.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[f],c,undefined,this)};ol.format.GML2.prototype.writeCurveOrLineString_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(a.nodeName!=='LineStringSegment'&&e){a.setAttribute('srsName',e)}if(a.nodeName==='LineString'||a.nodeName==='LineStringSegment'){var f=this.createCoordinatesNode_(a.namespaceURI);a.appendChild(f);this.writeCoordinates_(f,b,c)}else if(a.nodeName==='Curve'){var g=ol.xml.createElementNS(a.namespaceURI,'segments');a.appendChild(g);this.writeCurveSegments_(g,b,c)}};ol.format.GML2.prototype.createCoordinatesNode_=function(a){var b=ol.xml.createElementNS(a,'coordinates');b.setAttribute('decimal','.');b.setAttribute('cs',',');b.setAttribute('ts',' ');return b};ol.format.GML2.prototype.writeCoordinates_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];var g=b.getCoordinates();var h=g.length;var j=new Array(h);var k;for(var i=0;i<h;++i){k=g[i];j[i]=this.getCoords_(k,f,e)}ol.format.XSD.writeStringTextNode(a,j.join(' '))};ol.format.GML2.prototype.writeCurveSegments_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'LineStringSegment');a.appendChild(d);this.writeCurveOrLineString_(d,b,c)};ol.format.GML2.prototype.writeSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];if(a.nodeName!=='PolygonPatch'&&f){a.setAttribute('srsName',f)}if(a.nodeName==='Polygon'||a.nodeName==='PolygonPatch'){var g=b.getLinearRings();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f},ol.format.GML2.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,g,c,undefined,this)}else if(a.nodeName==='Surface'){var h=ol.xml.createElementNS(a.namespaceURI,'patches');a.appendChild(h);this.writeSurfacePatches_(h,b,c)}};ol.format.GML2.prototype.RING_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1];var e=d.node;var f=d['exteriorWritten'];if(f===undefined){d['exteriorWritten']=true}return ol.xml.createElementNS(e.namespaceURI,f!==undefined?'innerBoundaryIs':'outerBoundaryIs')};ol.format.GML2.prototype.writeSurfacePatches_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'PolygonPatch');a.appendChild(d);this.writeSurfaceOrPolygon_(d,b,c)};ol.format.GML2.prototype.writeRing_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'LinearRing');a.appendChild(d);this.writeLinearRing_(d,b,c)};ol.format.GML2.prototype.getCoords_=function(a,b,c){var d='enu';if(b){d=ol.proj.get(b).getAxisOrientation()}var e=((d.substr(0,2)==='en')?a[0]+','+a[1]:a[1]+','+a[0]);if(c){var z=a[2]||0;e+=','+z}return e};ol.format.GML2.prototype.writeMultiCurveOrLineString_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];var g=d['curve'];if(f){a.setAttribute('srsName',f)}var h=b.getLineStrings();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f,curve:g},ol.format.GML2.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,c,undefined,this)};ol.format.GML2.prototype.writePoint_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];if(f){a.setAttribute('srsName',f)}var g=this.createCoordinatesNode_(a.namespaceURI);a.appendChild(g);var h=b.getCoordinates();var i=this.getCoords_(h,f,e);ol.format.XSD.writeStringTextNode(g,i)};ol.format.GML2.prototype.writeMultiPoint_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];if(f){a.setAttribute('srsName',f)}var g=b.getPoints();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f},ol.format.GML2.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('pointMember'),g,c,undefined,this)};ol.format.GML2.prototype.writePointMember_=function(a,b,c){var d=ol.xml.createElementNS(a.namespaceURI,'Point');a.appendChild(d);this.writePoint_(d,b,c)};ol.format.GML2.prototype.writeLineStringOrCurveMember_=function(a,b,c){var d=this.GEOMETRY_NODE_FACTORY_(b,c);if(d){a.appendChild(d);this.writeCurveOrLineString_(d,b,c)}};ol.format.GML2.prototype.writeLinearRing_=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(e){a.setAttribute('srsName',e)}var f=this.createCoordinatesNode_(a.namespaceURI);a.appendChild(f);this.writeCoordinates_(f,b,c)};ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_=function(a,b,c){var d=c[c.length-1];var e=d['hasZ'];var f=d['srsName'];var g=d['surface'];if(f){a.setAttribute('srsName',f)}var h=b.getPolygons();ol.xml.pushSerializeAndPop({node:a,hasZ:e,srsName:f,surface:g},ol.format.GML2.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,h,c,undefined,this)};ol.format.GML2.prototype.writeSurfaceOrPolygonMember_=function(a,b,c){var d=this.GEOMETRY_NODE_FACTORY_(b,c);if(d){a.appendChild(d);this.writeSurfaceOrPolygon_(d,b,c)}};ol.format.GML2.prototype.writeEnvelope=function(a,b,c){var d=c[c.length-1];var e=d['srsName'];if(e){a.setAttribute('srsName',e)}var f=['lowerCorner','upperCorner'];var g=[b[0]+' '+b[1],b[2]+' '+b[3]];ol.xml.pushSerializeAndPop(({node:a}),ol.format.GML2.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,c,f,this)};ol.format.GML2.GEOMETRY_SERIALIZERS_={'http://www.opengis.net/gml':{'Curve':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeCurveOrLineString_),'MultiCurve':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiCurveOrLineString_),'Point':ol.xml.makeChildAppender(ol.format.GML2.prototype.writePoint_),'MultiPoint':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiPoint_),'LineString':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeCurveOrLineString_),'MultiLineString':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiCurveOrLineString_),'LinearRing':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLinearRing_),'Polygon':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygon_),'MultiPolygon':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_),'Surface':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygon_),'MultiSurface':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_),'Envelope':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeEnvelope)}};ol.format.GML2.RING_SERIALIZERS_={'http://www.opengis.net/gml':{'outerBoundaryIs':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeRing_),'innerBoundaryIs':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeRing_)}};ol.format.GML2.POINTMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'pointMember':ol.xml.makeChildAppender(ol.format.GML2.prototype.writePointMember_)}};ol.format.GML2.LINESTRINGORCURVEMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'lineStringMember':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLineStringOrCurveMember_),'curveMember':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLineStringOrCurveMember_)}};ol.format.GML2.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1].node;return ol.xml.createElementNS('http://www.opengis.net/gml',ol.format.GML2.MULTIGEOMETRY_TO_MEMBER_NODENAME_[d.nodeName])};ol.format.GML2.MULTIGEOMETRY_TO_MEMBER_NODENAME_={'MultiLineString':'lineStringMember','MultiCurve':'curveMember','MultiPolygon':'polygonMember','MultiSurface':'surfaceMember'};ol.format.GML2.SURFACEORPOLYGONMEMBER_SERIALIZERS_={'http://www.opengis.net/gml':{'surfaceMember':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygonMember_),'polygonMember':ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygonMember_)}};ol.format.GML2.ENVELOPE_SERIALIZERS_={'http://www.opengis.net/gml':{'lowerCorner':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'upperCorner':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};bq.provide('ol.format.GPX');bq.require('ol');bq.require('ol.Feature');bq.require('ol.array');bq.require('ol.format.Feature');bq.require('ol.format.XMLFeature');bq.require('ol.format.XSD');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.Point');bq.require('ol.proj');bq.require('ol.xml');ol.format.GPX=function(a){var b=a?a:{};ol.format.XMLFeature.call(this);this.defaultDataProjection=ol.proj.get('EPSG:4326');this.readExtensions_=b.readExtensions};ol.inherits(ol.format.GPX,ol.format.XMLFeature);ol.format.GPX.NAMESPACE_URIS_=[null,'http://www.topografix.com/GPX/1/0','http://www.topografix.com/GPX/1/1'];ol.format.GPX.SCHEMA_LOCATION_='http://www.topografix.com/GPX/1/1 '+'http://www.topografix.com/GPX/1/1/gpx.xsd';ol.format.GPX.appendCoordinate_=function(a,b,c,d){a.push(parseFloat(c.getAttribute('lon')),parseFloat(c.getAttribute('lat')));if('ele'in d){a.push((d['ele']));delete d['ele'];b.hasZ=true}else{a.push(0)}if('time'in d){a.push((d['time']));delete d['time'];b.hasM=true}else{a.push(0)}return a};ol.format.GPX.applyLayoutOptions_=function(a,b,c){var d=ol.geom.GeometryLayout.XY;var e=2;if(a.hasZ&&a.hasM){d=ol.geom.GeometryLayout.XYZM;e=4}else if(a.hasZ){d=ol.geom.GeometryLayout.XYZ;e=3}else if(a.hasM){d=ol.geom.GeometryLayout.XYM;e=3}if(e!==4){var i,ii;for(i=0,ii=b.length/4;i<ii;i++){b[i*e]=b[i*4];b[i*e+1]=b[i*4+1];if(a.hasZ){b[i*e+2]=b[i*4+2]}if(a.hasM){b[i*e+2]=b[i*4+3]}}b.length=b.length/4*e;if(c){for(i=0,ii=c.length;i<ii;i++){c[i]=c[i]/4*e}}}return d};ol.format.GPX.parseLink_=function(a,b){var c=(b[b.length-1]);var d=a.getAttribute('href');if(d!==null){c['link']=d}ol.xml.parseNode(ol.format.GPX.LINK_PARSERS_,a,b)};ol.format.GPX.parseExtensions_=function(a,b){var c=(b[b.length-1]);c['extensionsNode_']=a};ol.format.GPX.parseRtePt_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.GPX.RTEPT_PARSERS_,a,b);if(c){var d=(b[b.length-1]);var e=(d['flatCoordinates']);var f=(d['layoutOptions']);ol.format.GPX.appendCoordinate_(e,f,a,c)}};ol.format.GPX.parseTrkPt_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.GPX.TRKPT_PARSERS_,a,b);if(c){var d=(b[b.length-1]);var e=(d['flatCoordinates']);var f=(d['layoutOptions']);ol.format.GPX.appendCoordinate_(e,f,a,c)}};ol.format.GPX.parseTrkSeg_=function(a,b){var c=(b[b.length-1]);ol.xml.parseNode(ol.format.GPX.TRKSEG_PARSERS_,a,b);var d=(c['flatCoordinates']);var e=(c['ends']);e.push(d.length)};ol.format.GPX.readRte_=function(a,b){var c=(b[0]);var d=ol.xml.pushParseAndPop({'flatCoordinates':[],'layoutOptions':{}},ol.format.GPX.RTE_PARSERS_,a,b);if(!d){return undefined}var e=(d['flatCoordinates']);delete d['flatCoordinates'];var f=(d['layoutOptions']);delete d['layoutOptions'];var g=ol.format.GPX.applyLayoutOptions_(f,e);var h=new ol.geom.LineString(null);h.setFlatCoordinates(g,e);ol.format.Feature.transformWithOptions(h,false,c);var i=new ol.Feature(h);i.setProperties(d);return i};ol.format.GPX.readTrk_=function(a,b){var c=(b[0]);var d=ol.xml.pushParseAndPop({'flatCoordinates':[],'ends':[],'layoutOptions':{}},ol.format.GPX.TRK_PARSERS_,a,b);if(!d){return undefined}var e=(d['flatCoordinates']);delete d['flatCoordinates'];var f=(d['ends']);delete d['ends'];var g=(d['layoutOptions']);delete d['layoutOptions'];var h=ol.format.GPX.applyLayoutOptions_(g,e,f);var i=new ol.geom.MultiLineString(null);i.setFlatCoordinates(h,e,f);ol.format.Feature.transformWithOptions(i,false,c);var j=new ol.Feature(i);j.setProperties(d);return j};ol.format.GPX.readWpt_=function(a,b){var c=(b[0]);var d=ol.xml.pushParseAndPop({},ol.format.GPX.WPT_PARSERS_,a,b);if(!d){return undefined}var e=({});var f=ol.format.GPX.appendCoordinate_([],e,a,d);var g=ol.format.GPX.applyLayoutOptions_(e,f);var h=new ol.geom.Point(f,g);ol.format.Feature.transformWithOptions(h,false,c);var i=new ol.Feature(h);i.setProperties(d);return i};ol.format.GPX.FEATURE_READER_={'rte':ol.format.GPX.readRte_,'trk':ol.format.GPX.readTrk_,'wpt':ol.format.GPX.readWpt_};ol.format.GPX.GPX_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'rte':ol.xml.makeArrayPusher(ol.format.GPX.readRte_),'trk':ol.xml.makeArrayPusher(ol.format.GPX.readTrk_),'wpt':ol.xml.makeArrayPusher(ol.format.GPX.readWpt_)});ol.format.GPX.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'text':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,'linkText'),'type':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,'linkType')});ol.format.GPX.RTE_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'cmt':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'desc':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'src':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'link':ol.format.GPX.parseLink_,'number':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'extensions':ol.format.GPX.parseExtensions_,'type':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'rtept':ol.format.GPX.parseRtePt_});ol.format.GPX.RTEPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'ele':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'time':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.TRK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'cmt':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'desc':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'src':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'link':ol.format.GPX.parseLink_,'number':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'type':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'extensions':ol.format.GPX.parseExtensions_,'trkseg':ol.format.GPX.parseTrkSeg_});ol.format.GPX.TRKSEG_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'trkpt':ol.format.GPX.parseTrkPt_});ol.format.GPX.TRKPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'ele':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'time':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)});ol.format.GPX.WPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'ele':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'time':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime),'magvar':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'geoidheight':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'cmt':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'desc':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'src':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'link':ol.format.GPX.parseLink_,'sym':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'type':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'fix':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'sat':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'hdop':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'vdop':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'pdop':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'ageofdgpsdata':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'dgpsid':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'extensions':ol.format.GPX.parseExtensions_});ol.format.GPX.prototype.handleReadExtensions_=function(a){if(!a){a=[]}for(var i=0,ii=a.length;i<ii;++i){var b=a[i];if(this.readExtensions_){var c=b.get('extensionsNode_')||null;this.readExtensions_(b,c)}b.set('extensionsNode_',undefined)}};ol.format.GPX.prototype.readFeature;ol.format.GPX.prototype.readFeatureFromNode=function(a,b){if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,a.namespaceURI)){return null}var c=ol.format.GPX.FEATURE_READER_[a.localName];if(!c){return null}var d=c(a,[this.getReadOptions(a,b)]);if(!d){return null}this.handleReadExtensions_([d]);return d};ol.format.GPX.prototype.readFeatures;ol.format.GPX.prototype.readFeaturesFromNode=function(a,b){if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,a.namespaceURI)){return[]}if(a.localName=='gpx'){var c=ol.xml.pushParseAndPop([],ol.format.GPX.GPX_PARSERS_,a,[this.getReadOptions(a,b)]);if(c){this.handleReadExtensions_(c);return c}else{return[]}}return[]};ol.format.GPX.prototype.readProjection;ol.format.GPX.writeLink_=function(a,b,c){a.setAttribute('href',b);var d=c[c.length-1];var e=d['properties'];var f=[e['linkText'],e['linkType']];ol.xml.pushSerializeAndPop(({node:a}),ol.format.GPX.LINK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,f,c,ol.format.GPX.LINK_SEQUENCE_)};ol.format.GPX.writeWptType_=function(a,b,c){var d=c[c.length-1];var e=d.node;var f=e.namespaceURI;var g=d['properties'];ol.xml.setAttributeNS(a,null,'lat',b[1]);ol.xml.setAttributeNS(a,null,'lon',b[0]);var h=d['geometryLayout'];switch(h){case ol.geom.GeometryLayout.XYZM:if(b[3]!==0){g['time']=b[3]}case ol.geom.GeometryLayout.XYZ:if(b[2]!==0){g['ele']=b[2]}break;case ol.geom.GeometryLayout.XYM:if(b[2]!==0){g['time']=b[2]}break;default:}var i=(a.nodeName=='rtept')?ol.format.GPX.RTEPT_TYPE_SEQUENCE_[f]:ol.format.GPX.WPT_TYPE_SEQUENCE_[f];var j=ol.xml.makeSequence(g,i);ol.xml.pushSerializeAndPop(({node:a,'properties':g}),ol.format.GPX.WPT_TYPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeRte_=function(a,b,c){var d=(c[0]);var e=b.getProperties();var f={node:a,'properties':e};var g=b.getGeometry();if(g){g=(ol.format.Feature.transformWithOptions(g,true,d));f['geometryLayout']=g.getLayout();e['rtept']=g.getCoordinates()}var h=c[c.length-1].node;var i=ol.format.GPX.RTE_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(f,ol.format.GPX.RTE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeTrk_=function(a,b,c){var d=(c[0]);var e=b.getProperties();var f={node:a,'properties':e};var g=b.getGeometry();if(g){g=(ol.format.Feature.transformWithOptions(g,true,d));e['trkseg']=g.getLineStrings()}var h=c[c.length-1].node;var i=ol.format.GPX.TRK_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(f,ol.format.GPX.TRK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.GPX.writeTrkSeg_=function(a,b,c){var d={node:a,'geometryLayout':b.getLayout(),'properties':{}};ol.xml.pushSerializeAndPop(d,ol.format.GPX.TRKSEG_SERIALIZERS_,ol.format.GPX.TRKSEG_NODE_FACTORY_,b.getCoordinates(),c)};ol.format.GPX.writeWpt_=function(a,b,c){var d=(c[0]);var e=c[c.length-1];e['properties']=b.getProperties();var f=b.getGeometry();if(f){f=(ol.format.Feature.transformWithOptions(f,true,d));e['geometryLayout']=f.getLayout();ol.format.GPX.writeWptType_(a,f.getCoordinates(),c)}};ol.format.GPX.LINK_SEQUENCE_=['text','type'];ol.format.GPX.LINK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'text':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'type':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)});ol.format.GPX.RTE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,['name','cmt','desc','src','link','number','type','rtept']);ol.format.GPX.RTE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'name':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'cmt':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'desc':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'src':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'link':ol.xml.makeChildAppender(ol.format.GPX.writeLink_),'number':ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),'type':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'rtept':ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeWptType_))});ol.format.GPX.RTEPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,['ele','time']);ol.format.GPX.TRK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,['name','cmt','desc','src','link','number','type','trkseg']);ol.format.GPX.TRK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'name':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'cmt':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'desc':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'src':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'link':ol.xml.makeChildAppender(ol.format.GPX.writeLink_),'number':ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),'type':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'trkseg':ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeTrkSeg_))});ol.format.GPX.TRKSEG_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('trkpt');ol.format.GPX.TRKSEG_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'trkpt':ol.xml.makeChildAppender(ol.format.GPX.writeWptType_)});ol.format.GPX.WPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,['ele','time','magvar','geoidheight','name','cmt','desc','src','link','sym','type','fix','sat','hdop','vdop','pdop','ageofdgpsdata','dgpsid']);ol.format.GPX.WPT_TYPE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'ele':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'time':ol.xml.makeChildAppender(ol.format.XSD.writeDateTimeTextNode),'magvar':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'geoidheight':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'name':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'cmt':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'desc':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'src':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'link':ol.xml.makeChildAppender(ol.format.GPX.writeLink_),'sym':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'type':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'fix':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'sat':ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),'hdop':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'vdop':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'pdop':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'ageofdgpsdata':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'dgpsid':ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode)});ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_={'Point':'wpt','LineString':'rte','MultiLineString':'trk'};ol.format.GPX.GPX_NODE_FACTORY_=function(a,b,c){var d=(a).getGeometry();if(d){var e=ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_[d.getType()];if(e){var f=b[b.length-1].node;return ol.xml.createElementNS(f.namespaceURI,e)}}};ol.format.GPX.GPX_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{'rte':ol.xml.makeChildAppender(ol.format.GPX.writeRte_),'trk':ol.xml.makeChildAppender(ol.format.GPX.writeTrk_),'wpt':ol.xml.makeChildAppender(ol.format.GPX.writeWpt_)});ol.format.GPX.prototype.writeFeatures;ol.format.GPX.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS('http://www.topografix.com/GPX/1/1','gpx');var d='http://www.w3.org/2000/xmlns/';var e='http://www.w3.org/2001/XMLSchema-instance';ol.xml.setAttributeNS(c,d,'xmlns:xsi',e);ol.xml.setAttributeNS(c,e,'xsi:schemaLocation',ol.format.GPX.SCHEMA_LOCATION_);c.setAttribute('version','1.1');c.setAttribute('creator','OpenLayers');ol.xml.pushSerializeAndPop(({node:c}),ol.format.GPX.GPX_SERIALIZERS_,ol.format.GPX.GPX_NODE_FACTORY_,a,[b]);return c};bq.provide('ol.format.IGCZ');ol.format.IGCZ={BAROMETRIC:'barometric',GPS:'gps',NONE:'none'};bq.provide('ol.format.TextFeature');bq.require('ol');bq.require('ol.format.Feature');bq.require('ol.format.FormatType');ol.format.TextFeature=function(){ol.format.Feature.call(this)};ol.inherits(ol.format.TextFeature,ol.format.Feature);ol.format.TextFeature.prototype.getText_=function(a){if(typeof a==='string'){return a}else{return''}};ol.format.TextFeature.prototype.getType=function(){return ol.format.FormatType.TEXT};ol.format.TextFeature.prototype.readFeature=function(a,b){return this.readFeatureFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readFeatureFromText=function(a,b){};ol.format.TextFeature.prototype.readFeatures=function(a,b){return this.readFeaturesFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readFeaturesFromText=function(a,b){};ol.format.TextFeature.prototype.readGeometry=function(a,b){return this.readGeometryFromText(this.getText_(a),this.adaptOptions(b))};ol.format.TextFeature.prototype.readGeometryFromText=function(a,b){};ol.format.TextFeature.prototype.readProjection=function(a){return this.readProjectionFromText(this.getText_(a))};ol.format.TextFeature.prototype.readProjectionFromText=function(a){return this.defaultDataProjection};ol.format.TextFeature.prototype.writeFeature=function(a,b){return this.writeFeatureText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeFeatureText=function(a,b){};ol.format.TextFeature.prototype.writeFeatures=function(a,b){return this.writeFeaturesText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeFeaturesText=function(a,b){};ol.format.TextFeature.prototype.writeGeometry=function(a,b){return this.writeGeometryText(a,this.adaptOptions(b))};ol.format.TextFeature.prototype.writeGeometryText=function(a,b){};bq.provide('ol.format.IGC');bq.require('ol');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.IGCZ');bq.require('ol.format.TextFeature');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.proj');ol.format.IGC=function(a){var b=a?a:{};ol.format.TextFeature.call(this);this.defaultDataProjection=ol.proj.get('EPSG:4326');this.altitudeMode_=b.altitudeMode?b.altitudeMode:ol.format.IGCZ.NONE};ol.inherits(ol.format.IGC,ol.format.TextFeature);ol.format.IGC.B_RECORD_RE_=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/;ol.format.IGC.H_RECORD_RE_=/^H.([A-Z]{3}).*?:(.*)/;ol.format.IGC.HFDTE_RECORD_RE_=/^HFDTE(\d{2})(\d{2})(\d{2})/;ol.format.IGC.NEWLINE_RE_=/\r\n|\r|\n/;ol.format.IGC.prototype.readFeature;ol.format.IGC.prototype.readFeatureFromText=function(a,b){var c=this.altitudeMode_;var d=a.split(ol.format.IGC.NEWLINE_RE_);var e={};var f=[];var g=2000;var h=0;var j=1;var k=-1;var i,ii;for(i=0,ii=d.length;i<ii;++i){var l=d[i];var m;if(l.charAt(0)=='B'){m=ol.format.IGC.B_RECORD_RE_.exec(l);if(m){var n=parseInt(m[1],10);var o=parseInt(m[2],10);var p=parseInt(m[3],10);var y=parseInt(m[4],10)+parseInt(m[5],10)/60000;if(m[6]=='S'){y=-y}var x=parseInt(m[7],10)+parseInt(m[8],10)/60000;if(m[9]=='W'){x=-x}f.push(x,y);if(c!=ol.format.IGCZ.NONE){var z;if(c==ol.format.IGCZ.GPS){z=parseInt(m[11],10)}else if(c==ol.format.IGCZ.BAROMETRIC){z=parseInt(m[12],10)}else{z=0}f.push(z)}var q=Date.UTC(g,h,j,n,o,p);if(q<k){q=Date.UTC(g,h,j+1,n,o,p)}f.push(q/1000);k=q}}else if(l.charAt(0)=='H'){m=ol.format.IGC.HFDTE_RECORD_RE_.exec(l);if(m){j=parseInt(m[1],10);h=parseInt(m[2],10)-1;g=2000+parseInt(m[3],10)}else{m=ol.format.IGC.H_RECORD_RE_.exec(l);if(m){e[m[1]]=m[2].trim()}}}}if(f.length===0){return null}var r=new ol.geom.LineString(null);var s=c==ol.format.IGCZ.NONE?ol.geom.GeometryLayout.XYM:ol.geom.GeometryLayout.XYZM;r.setFlatCoordinates(s,f);var t=new ol.Feature(ol.format.Feature.transformWithOptions(r,false,b));t.setProperties(e);return t};ol.format.IGC.prototype.readFeatures;ol.format.IGC.prototype.readFeaturesFromText=function(a,b){var c=this.readFeatureFromText(a,b);if(c){return[c]}else{return[]}};ol.format.IGC.prototype.readProjection;ol.format.IGC.prototype.writeFeatureText=function(a,b){};ol.format.IGC.prototype.writeFeaturesText=function(a,b){};ol.format.IGC.prototype.writeGeometryText=function(a,b){};ol.format.IGC.prototype.readGeometryFromText=function(a,b){};bq.provide('ol.style.IconAnchorUnits');ol.style.IconAnchorUnits={FRACTION:'fraction',PIXELS:'pixels'};bq.provide('ol.style.IconImage');bq.require('ol');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventTarget');bq.require('ol.events.EventType');bq.require('ol.ImageState');bq.require('ol.style');ol.style.IconImage=function(a,b,c,d,e,f){ol.events.EventTarget.call(this);this.hitDetectionImage_=null;this.image_=!a?new Image():a;if(d!==null){this.image_.crossOrigin=d}this.canvas_=f?(document.createElement('CANVAS')):null;this.color_=f;this.imageListenerKeys_=null;this.imageState_=e;this.size_=c;this.src_=b;this.tainting_=false;if(this.imageState_==ol.ImageState.LOADED){this.determineTainting_()}};ol.inherits(ol.style.IconImage,ol.events.EventTarget);ol.style.IconImage.get=function(a,b,c,d,e,f){var g=ol.style.iconImageCache;var h=g.get(b,d,f);if(!h){h=new ol.style.IconImage(a,b,c,d,e,f);g.set(b,d,f,h)}return h};ol.style.IconImage.prototype.determineTainting_=function(){var a=ol.dom.createCanvasContext2D(1,1);try{a.drawImage(this.image_,0,0);a.getImageData(0,0,1,1)}catch(e){this.tainting_=true}};ol.style.IconImage.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.style.IconImage.prototype.handleImageError_=function(){this.imageState_=ol.ImageState.ERROR;this.unlistenImage_();this.dispatchChangeEvent_()};ol.style.IconImage.prototype.handleImageLoad_=function(){this.imageState_=ol.ImageState.LOADED;if(this.size_){this.image_.width=this.size_[0];this.image_.height=this.size_[1]}this.size_=[this.image_.width,this.image_.height];this.unlistenImage_();this.determineTainting_();this.replaceColor_();this.dispatchChangeEvent_()};ol.style.IconImage.prototype.getImage=function(a){return this.canvas_?this.canvas_:this.image_};ol.style.IconImage.prototype.getImageState=function(){return this.imageState_};ol.style.IconImage.prototype.getHitDetectionImage=function(a){if(!this.hitDetectionImage_){if(this.tainting_){var b=this.size_[0];var c=this.size_[1];var d=ol.dom.createCanvasContext2D(b,c);d.fillRect(0,0,b,c);this.hitDetectionImage_=d.canvas}else{this.hitDetectionImage_=this.image_}}return this.hitDetectionImage_};ol.style.IconImage.prototype.getSize=function(){return this.size_};ol.style.IconImage.prototype.getSrc=function(){return this.src_};ol.style.IconImage.prototype.load=function(){if(this.imageState_==ol.ImageState.IDLE){this.imageState_=ol.ImageState.LOADING;this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}};ol.style.IconImage.prototype.replaceColor_=function(){if(this.tainting_||this.color_===null){return}this.canvas_.width=this.image_.width;this.canvas_.height=this.image_.height;var a=this.canvas_.getContext('2d');a.drawImage(this.image_,0,0);var c=a.getImageData(0,0,this.image_.width,this.image_.height);var d=c.data;var r=this.color_[0]/255.0;var g=this.color_[1]/255.0;var b=this.color_[2]/255.0;for(var i=0,ii=d.length;i<ii;i+=4){d[i]*=r;d[i+1]*=g;d[i+2]*=b}a.putImageData(c,0,0)};ol.style.IconImage.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};bq.provide('ol.style.IconOrigin');ol.style.IconOrigin={BOTTOM_LEFT:'bottom-left',BOTTOM_RIGHT:'bottom-right',TOP_LEFT:'top-left',TOP_RIGHT:'top-right'};bq.provide('ol.style.Icon');bq.require('ol');bq.require('ol.ImageState');bq.require('ol.asserts');bq.require('ol.color');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.style.IconAnchorUnits');bq.require('ol.style.IconImage');bq.require('ol.style.IconOrigin');bq.require('ol.style.Image');ol.style.Icon=function(a){var b=a||{};this.anchor_=b.anchor!==undefined?b.anchor:[0.5,0.5];this.normalizedAnchor_=null;this.anchorOrigin_=b.anchorOrigin!==undefined?b.anchorOrigin:ol.style.IconOrigin.TOP_LEFT;this.anchorXUnits_=b.anchorXUnits!==undefined?b.anchorXUnits:ol.style.IconAnchorUnits.FRACTION;this.anchorYUnits_=b.anchorYUnits!==undefined?b.anchorYUnits:ol.style.IconAnchorUnits.FRACTION;this.crossOrigin_=b.crossOrigin!==undefined?b.crossOrigin:null;var c=b.img!==undefined?b.img:null;var d=b.imgSize!==undefined?b.imgSize:null;var e=b.src;ol.asserts.assert(!(e!==undefined&&c),4);ol.asserts.assert(!c||(c&&d),5);if((e===undefined||e.length===0)&&c){e=c.src||ol.getUid(c).toString()}ol.asserts.assert(e!==undefined&&e.length>0,6);var f=b.src!==undefined?ol.ImageState.IDLE:ol.ImageState.LOADED;this.color_=b.color!==undefined?ol.color.asArray(b.color):null;this.iconImage_=ol.style.IconImage.get(c,(e),d,this.crossOrigin_,f,this.color_);this.offset_=b.offset!==undefined?b.offset:[0,0];this.offsetOrigin_=b.offsetOrigin!==undefined?b.offsetOrigin:ol.style.IconOrigin.TOP_LEFT;this.origin_=null;this.size_=b.size!==undefined?b.size:null;var g=b.opacity!==undefined?b.opacity:1;var h=b.rotateWithView!==undefined?b.rotateWithView:false;var i=b.rotation!==undefined?b.rotation:0;var j=b.scale!==undefined?b.scale:1;var k=b.snapToPixel!==undefined?b.snapToPixel:true;ol.style.Image.call(this,{opacity:g,rotation:i,scale:j,snapToPixel:k,rotateWithView:h})};ol.inherits(ol.style.Icon,ol.style.Image);ol.style.Icon.prototype.clone=function(){return new ol.style.Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:(this.color_&&this.color_.slice)?this.color_.slice():this.color_||undefined,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():undefined,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})};ol.style.Icon.prototype.getAnchor=function(){if(this.normalizedAnchor_){return this.normalizedAnchor_}var a=this.anchor_;var b=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(!b){return null}a=this.anchor_.slice();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION){a[0]*=b[0]}if(this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){a[1]*=b[1]}}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(!b){return null}if(a===this.anchor_){a=this.anchor_.slice()}if(this.anchorOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[0]=-a[0]+b[0]}if(this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.anchorOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[1]=-a[1]+b[1]}}this.normalizedAnchor_=a;return this.normalizedAnchor_};ol.style.Icon.prototype.getColor=function(){return this.color_};ol.style.Icon.prototype.getImage=function(a){return this.iconImage_.getImage(a)};ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()};ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()};ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()};ol.style.Icon.prototype.getHitDetectionImage=function(a){return this.iconImage_.getHitDetectionImage(a)};ol.style.Icon.prototype.getOrigin=function(){if(this.origin_){return this.origin_}var a=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var b=this.getSize();var c=this.iconImage_.getSize();if(!b||!c){return null}a=a.slice();if(this.offsetOrigin_==ol.style.IconOrigin.TOP_RIGHT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[0]=c[0]-b[0]-a[0]}if(this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_LEFT||this.offsetOrigin_==ol.style.IconOrigin.BOTTOM_RIGHT){a[1]=c[1]-b[1]-a[1]}}this.origin_=a;return this.origin_};ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()};ol.style.Icon.prototype.getSize=function(){return!this.size_?this.iconImage_.getSize():this.size_};ol.style.Icon.prototype.listenImageChange=function(a,b){return ol.events.listen(this.iconImage_,ol.events.EventType.CHANGE,a,b)};ol.style.Icon.prototype.load=function(){this.iconImage_.load()};ol.style.Icon.prototype.unlistenImageChange=function(a,b){ol.events.unlisten(this.iconImage_,ol.events.EventType.CHANGE,a,b)};bq.provide('ol.style.Text');bq.require('ol.style.Fill');bq.require('ol.style.TextPlacement');ol.style.Text=function(a){var b=a||{};this.font_=b.font;this.rotation_=b.rotation;this.rotateWithView_=b.rotateWithView;this.scale_=b.scale;this.text_=b.text;this.textAlign_=b.textAlign;this.textBaseline_=b.textBaseline;this.fill_=b.fill!==undefined?b.fill:new ol.style.Fill({color:ol.style.Text.DEFAULT_FILL_COLOR_});this.maxAngle_=b.maxAngle!==undefined?b.maxAngle:Math.PI/4;this.placement_=b.placement!==undefined?b.placement:ol.style.TextPlacement.POINT;var c=b.overflow===undefined?b.exceedLength:b.overflow;this.overflow_=c!==undefined?c:false;this.stroke_=b.stroke!==undefined?b.stroke:null;this.offsetX_=b.offsetX!==undefined?b.offsetX:0;this.offsetY_=b.offsetY!==undefined?b.offsetY:0;this.backgroundFill_=b.backgroundFill?b.backgroundFill:null;this.backgroundStroke_=b.backgroundStroke?b.backgroundStroke:null;this.padding_=b.padding===undefined?null:b.padding};ol.style.Text.DEFAULT_FILL_COLOR_='#333';ol.style.Text.prototype.clone=function(){return new ol.style.Text({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():undefined,stroke:this.getStroke()?this.getStroke().clone():undefined,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})};ol.style.Text.prototype.getOverflow=function(){return this.overflow_};ol.style.Text.prototype.getFont=function(){return this.font_};ol.style.Text.prototype.getMaxAngle=function(){return this.maxAngle_};ol.style.Text.prototype.getPlacement=function(){return this.placement_};ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_};ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_};ol.style.Text.prototype.getFill=function(){return this.fill_};ol.style.Text.prototype.getRotateWithView=function(){return this.rotateWithView_};ol.style.Text.prototype.getRotation=function(){return this.rotation_};ol.style.Text.prototype.getScale=function(){return this.scale_};ol.style.Text.prototype.getStroke=function(){return this.stroke_};ol.style.Text.prototype.getText=function(){return this.text_};ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_};ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_};ol.style.Text.prototype.getBackgroundFill=function(){return this.backgroundFill_};ol.style.Text.prototype.getBackgroundStroke=function(){return this.backgroundStroke_};ol.style.Text.prototype.getPadding=function(){return this.padding_};ol.style.Text.prototype.setOverflow=function(a){this.overflow_=a};ol.style.Text.prototype.setFont=function(a){this.font_=a};ol.style.Text.prototype.setMaxAngle=function(a){this.maxAngle_=a};ol.style.Text.prototype.setOffsetX=function(a){this.offsetX_=a};ol.style.Text.prototype.setOffsetY=function(a){this.offsetY_=a};ol.style.Text.prototype.setPlacement=function(a){this.placement_=a};ol.style.Text.prototype.setFill=function(a){this.fill_=a};ol.style.Text.prototype.setRotation=function(a){this.rotation_=a};ol.style.Text.prototype.setScale=function(a){this.scale_=a};ol.style.Text.prototype.setStroke=function(a){this.stroke_=a};ol.style.Text.prototype.setText=function(a){this.text_=a};ol.style.Text.prototype.setTextAlign=function(a){this.textAlign_=a};ol.style.Text.prototype.setTextBaseline=function(a){this.textBaseline_=a};ol.style.Text.prototype.setBackgroundFill=function(a){this.backgroundFill_=a};ol.style.Text.prototype.setBackgroundStroke=function(a){this.backgroundStroke_=a};ol.style.Text.prototype.setPadding=function(a){this.padding_=a};bq.provide('ol.format.KML');bq.require('ol');bq.require('ol.Feature');bq.require('ol.array');bq.require('ol.asserts');bq.require('ol.color');bq.require('ol.format.Feature');bq.require('ol.format.XMLFeature');bq.require('ol.format.XSD');bq.require('ol.geom.GeometryCollection');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.math');bq.require('ol.proj');bq.require('ol.style.Fill');bq.require('ol.style.Icon');bq.require('ol.style.IconAnchorUnits');bq.require('ol.style.IconOrigin');bq.require('ol.style.Stroke');bq.require('ol.style.Style');bq.require('ol.style.Text');bq.require('ol.xml');ol.format.KML=function(a){var b=a?a:{};ol.format.XMLFeature.call(this);if(!ol.format.KML.DEFAULT_STYLE_ARRAY_){ol.format.KML.createStyleDefaults_()}this.defaultDataProjection=ol.proj.get('EPSG:4326');this.defaultStyle_=b.defaultStyle?b.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_;this.extractStyles_=b.extractStyles!==undefined?b.extractStyles:true;this.writeStyles_=b.writeStyles!==undefined?b.writeStyles:true;this.sharedStyles_={};this.showPointNames_=b.showPointNames!==undefined?b.showPointNames:true};ol.inherits(ol.format.KML,ol.format.XMLFeature);ol.format.KML.GX_NAMESPACE_URIS_=['http://www.google.com/kml/ext/2.2'];ol.format.KML.NAMESPACE_URIS_=[null,'http://earth.google.com/kml/2.0','http://earth.google.com/kml/2.1','http://earth.google.com/kml/2.2','http://www.opengis.net/kml/2.2'];ol.format.KML.SCHEMA_LOCATION_='http://www.opengis.net/kml/2.2 '+'https://developers.google.com/kml/schema/kml22gx.xsd';ol.format.KML.createStyleDefaults_=function(){ol.format.KML.DEFAULT_COLOR_=[255,255,255,1];ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_});ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2];ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS;ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64];ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_='https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_=0.5;ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:'anonymous',rotation:0,scale:ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_});ol.format.KML.DEFAULT_NO_IMAGE_STYLE_='NO_IMAGE';ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1});ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_=new ol.style.Stroke({color:[51,51,51,1],width:2});ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:'bold 16px Helvetica',fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_,scale:0.8});ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0});ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_];return ol.format.KML.DEFAULT_STYLE_ARRAY_};ol.format.KML.ICON_ANCHOR_UNITS_MAP_={'fraction':ol.style.IconAnchorUnits.FRACTION,'pixels':ol.style.IconAnchorUnits.PIXELS,'insetPixels':ol.style.IconAnchorUnits.PIXELS};ol.format.KML.createNameStyleFunction_=function(a,b){var c=null;var d=[0,0];var e='start';if(a.getImage()){var f=a.getImage().getImageSize();if(f===null){f=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_}if(f.length==2){var g=a.getImage().getScale();d[0]=g*f[0]/2;d[1]=-g*f[1]/2;e='left'}}if(a.getText()!==null){var h=a.getText();c=h.clone();c.setFont(h.getFont()||ol.format.KML.DEFAULT_TEXT_STYLE_.getFont());c.setScale(h.getScale()||ol.format.KML.DEFAULT_TEXT_STYLE_.getScale());c.setFill(h.getFill()||ol.format.KML.DEFAULT_TEXT_STYLE_.getFill());c.setStroke(h.getStroke()||ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_)}else{c=ol.format.KML.DEFAULT_TEXT_STYLE_.clone()}c.setText(b);c.setOffsetX(d[0]);c.setOffsetY(d[1]);c.setTextAlign(e);var i=new ol.style.Style({text:c});return i};ol.format.KML.createFeatureStyleFunction_=function(f,g,h,i,j){return(function(a){var b=j;var c;var d='';if(b){if(this.getGeometry()){b=(this.getGeometry().getType()===ol.geom.GeometryType.POINT)}}if(b){d=(this.get('name'));b=b&&d}if(f){if(b){c=ol.format.KML.createNameStyleFunction_(f[0],d);return f.concat(c)}return f}if(g){var e=ol.format.KML.findStyle_(g,h,i);if(b){c=ol.format.KML.createNameStyleFunction_(e[0],d);return e.concat(c)}return e}if(b){c=ol.format.KML.createNameStyleFunction_(h[0],d);return h.concat(c)}return h})};ol.format.KML.findStyle_=function(a,b,c){if(Array.isArray(a)){return a}else if(typeof a==='string'){if(!(a in c)&&('#'+a in c)){a='#'+a}return ol.format.KML.findStyle_(c[a],b,c)}else{return b}};ol.format.KML.readColor_=function(a){var s=ol.xml.getAllTextContent(a,false);var m=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(s);if(m){var b=m[1];return[parseInt(b.substr(6,2),16),parseInt(b.substr(4,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(0,2),16)/255]}else{return undefined}};ol.format.KML.readFlatCoordinates_=function(a){var s=ol.xml.getAllTextContent(a,false);var b=[];var c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;var m;while((m=c.exec(s))){var x=parseFloat(m[1]);var y=parseFloat(m[2]);var z=m[3]?parseFloat(m[3]):0;b.push(x,y,z);s=s.substr(m[0].length)}if(s!==''){return undefined}return b};ol.format.KML.readURI_=function(a){var s=ol.xml.getAllTextContent(a,false).trim();var b=a.baseURI;if(!b||b=='about:blank'){b=window.location.href}if(b){var c=new URL(s,b);return c.href}else{return s}};ol.format.KML.readVec2_=function(a){var b=a.getAttribute('xunits');var c=a.getAttribute('yunits');var d;if(b!=='insetPixels'){if(c!=='insetPixels'){d=ol.style.IconOrigin.BOTTOM_LEFT}else{d=ol.style.IconOrigin.TOP_LEFT}}else{if(c!=='insetPixels'){d=ol.style.IconOrigin.BOTTOM_RIGHT}else{d=ol.style.IconOrigin.TOP_RIGHT}}return{x:parseFloat(a.getAttribute('x')),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[b],y:parseFloat(a.getAttribute('y')),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[c],origin:d}};ol.format.KML.readScale_=function(a){return ol.format.XSD.readDecimal(a)};ol.format.KML.readStyleMapValue_=function(a,b){return ol.xml.pushParseAndPop(undefined,ol.format.KML.STYLE_MAP_PARSERS_,a,b)};ol.format.KML.IconStyleParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,a,b);if(!c){return}var d=(b[b.length-1]);var e='Icon'in c?c['Icon']:{};var f=(!('Icon'in c)||Object.keys(e).length>0);var g;var i=(e['href']);if(i){g=i}else if(f){g=ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_}var j,anchorXUnits,anchorYUnits;var k=ol.style.IconOrigin.BOTTOM_LEFT;var l=(c['hotSpot']);if(l){j=[l.x,l.y];anchorXUnits=l.xunits;anchorYUnits=l.yunits;k=l.origin}else if(g===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){j=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_;anchorXUnits=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_;anchorYUnits=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_}else if(/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)){j=[0.5,0];anchorXUnits=ol.style.IconAnchorUnits.FRACTION;anchorYUnits=ol.style.IconAnchorUnits.FRACTION}var m;var x=(e['x']);var y=(e['y']);if(x!==undefined&&y!==undefined){m=[x,y]}var n;var w=(e['w']);var h=(e['h']);if(w!==undefined&&h!==undefined){n=[w,h]}var o;var p=(c['heading']);if(p!==undefined){o=ol.math.toRadians(p)}var q=(c['scale']);if(f){if(g==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_){n=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_;if(q===undefined){q=ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_}}var r=new ol.style.Icon({anchor:j,anchorOrigin:k,anchorXUnits:anchorXUnits,anchorYUnits:anchorYUnits,crossOrigin:'anonymous',offset:m,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:o,scale:q,size:n,src:g});d['imageStyle']=r}else{d['imageStyle']=ol.format.KML.DEFAULT_NO_IMAGE_STYLE_}};ol.format.KML.LabelStyleParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,a,b);if(!c){return}var d=b[b.length-1];var e=new ol.style.Text({fill:new ol.style.Fill({color:('color'in c?c['color']:ol.format.KML.DEFAULT_COLOR_)}),scale:(c['scale'])});d['textStyle']=e};ol.format.KML.LineStyleParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,a,b);if(!c){return}var d=b[b.length-1];var e=new ol.style.Stroke({color:('color'in c?c['color']:ol.format.KML.DEFAULT_COLOR_),width:('width'in c?c['width']:1)});d['strokeStyle']=e};ol.format.KML.PolyStyleParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,a,b);if(!c){return}var d=b[b.length-1];var e=new ol.style.Fill({color:('color'in c?c['color']:ol.format.KML.DEFAULT_COLOR_)});d['fillStyle']=e;var f=(c['fill']);if(f!==undefined){d['fill']=f}var g=(c['outline']);if(g!==undefined){d['outline']=g}};ol.format.KML.readFlatLinearRing_=function(a,b){return ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,a,b)};ol.format.KML.gxCoordParser_=function(a,b){var c=(b[b.length-1]);var d=c.flatCoordinates;var s=ol.xml.getAllTextContent(a,false);var e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i;var m=e.exec(s);if(m){var x=parseFloat(m[1]);var y=parseFloat(m[2]);var z=parseFloat(m[3]);d.push(x,y,z,0)}else{d.push(0,0,0,0)}};ol.format.KML.readGxMultiTrack_=function(a,b){var c=ol.xml.pushParseAndPop([],ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,a,b);if(!c){return undefined}var d=new ol.geom.MultiLineString(null);d.setLineStrings(c);return d};ol.format.KML.readGxTrack_=function(a,b){var c=ol.xml.pushParseAndPop(({flatCoordinates:[],whens:[]}),ol.format.KML.GX_TRACK_PARSERS_,a,b);if(!c){return undefined}var d=c.flatCoordinates;var e=c.whens;var i,ii;for(i=0,ii=Math.min(d.length,e.length);i<ii;++i){d[4*i+3]=e[i]}var f=new ol.geom.LineString(null);f.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,d);return f};ol.format.KML.readIcon_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,a,b);if(c){return c}else{return null}};ol.format.KML.readFlatCoordinatesFromNode_=function(a,b){return ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,a,b)};ol.format.KML.readLineString_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(d){var e=new ol.geom.LineString(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readLinearRing_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(d){var e=new ol.geom.Polygon(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d,[d.length]);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readMultiGeometry_=function(a,b){var c=ol.xml.pushParseAndPop([],ol.format.KML.MULTI_GEOMETRY_PARSERS_,a,b);if(!c){return null}if(c.length===0){return new ol.geom.GeometryCollection(c)}var d;var e=true;var f=c[0].getType();var g,i,ii;for(i=1,ii=c.length;i<ii;++i){g=c[i];if(g.getType()!=f){e=false;break}}if(e){var h;var j;if(f==ol.geom.GeometryType.POINT){var k=c[0];h=k.getLayout();j=k.getFlatCoordinates();for(i=1,ii=c.length;i<ii;++i){g=c[i];ol.array.extend(j,g.getFlatCoordinates())}d=new ol.geom.MultiPoint(null);d.setFlatCoordinates(h,j);ol.format.KML.setCommonGeometryProperties_(d,c)}else if(f==ol.geom.GeometryType.LINE_STRING){d=new ol.geom.MultiLineString(null);d.setLineStrings(c);ol.format.KML.setCommonGeometryProperties_(d,c)}else if(f==ol.geom.GeometryType.POLYGON){d=new ol.geom.MultiPolygon(null);d.setPolygons(c);ol.format.KML.setCommonGeometryProperties_(d,c)}else if(f==ol.geom.GeometryType.GEOMETRY_COLLECTION){d=new ol.geom.GeometryCollection(c)}else{ol.asserts.assert(false,37)}}else{d=new ol.geom.GeometryCollection(c)}return(d)};ol.format.KML.readPoint_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.format.KML.readFlatCoordinatesFromNode_(a,b);if(d){var e=new ol.geom.Point(null);e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,d);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readPolygon_=function(a,b){var c=ol.xml.pushParseAndPop(({}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,a,b);var d=ol.xml.pushParseAndPop([null],ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,a,b);if(d&&d[0]){var e=new ol.geom.Polygon(null);var f=d[0];var g=[f.length];var i,ii;for(i=1,ii=d.length;i<ii;++i){ol.array.extend(f,d[i]);g.push(f.length)}e.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,f,g);e.setProperties(c);return e}else{return undefined}};ol.format.KML.readStyle_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,a,b);if(!c){return null}var d=('fillStyle'in c?c['fillStyle']:ol.format.KML.DEFAULT_FILL_STYLE_);var e=(c['fill']);if(e!==undefined&&!e){d=null}var f=('imageStyle'in c?c['imageStyle']:ol.format.KML.DEFAULT_IMAGE_STYLE_);if(f==ol.format.KML.DEFAULT_NO_IMAGE_STYLE_){f=undefined}var g=('textStyle'in c?c['textStyle']:ol.format.KML.DEFAULT_TEXT_STYLE_);var h=('strokeStyle'in c?c['strokeStyle']:ol.format.KML.DEFAULT_STROKE_STYLE_);var i=(c['outline']);if(i!==undefined&&!i){h=null}return[new ol.style.Style({fill:d,image:f,stroke:h,text:g,zIndex:undefined})]};ol.format.KML.setCommonGeometryProperties_=function(a,b){var c=b.length;var d=new Array(b.length);var e=new Array(b.length);var f=new Array(b.length);var g,i,hasExtrude,hasTessellate,hasAltitudeMode;hasExtrude=hasTessellate=hasAltitudeMode=false;for(i=0;i<c;++i){g=b[i];d[i]=g.get('extrude');e[i]=g.get('tessellate');f[i]=g.get('altitudeMode');hasExtrude=hasExtrude||d[i]!==undefined;hasTessellate=hasTessellate||e[i]!==undefined;hasAltitudeMode=hasAltitudeMode||f[i]}if(hasExtrude){a.set('extrude',d)}if(hasTessellate){a.set('tessellate',e)}if(hasAltitudeMode){a.set('altitudeMode',f)}};ol.format.KML.DataParser_=function(a,b){var c=a.getAttribute('name');ol.xml.parseNode(ol.format.KML.DATA_PARSERS_,a,b);var d=(b[b.length-1]);if(c!==null){d[c]=d.value}else if(d.displayName!==null){d[d.displayName]=d.value}delete d['value']};ol.format.KML.ExtendedDataParser_=function(a,b){ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,a,b)};ol.format.KML.RegionParser_=function(a,b){ol.xml.parseNode(ol.format.KML.REGION_PARSERS_,a,b)};ol.format.KML.PairDataParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,a,b);if(!c){return}var d=(c['key']);if(d&&d=='normal'){var e=(c['styleUrl']);if(e){b[b.length-1]=e}var f=(c['Style']);if(f){b[b.length-1]=f}}};ol.format.KML.PlacemarkStyleMapParser_=function(a,b){var c=ol.format.KML.readStyleMapValue_(a,b);if(!c){return}var d=b[b.length-1];if(Array.isArray(c)){d['Style']=c}else if(typeof c==='string'){d['styleUrl']=c}else{ol.asserts.assert(false,38)}};ol.format.KML.SchemaDataParser_=function(a,b){ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,a,b)};ol.format.KML.SimpleDataParser_=function(a,b){var c=a.getAttribute('name');if(c!==null){var d=ol.format.XSD.readString(a);var e=(b[b.length-1]);e[c]=d}};ol.format.KML.LatLonAltBoxParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.LAT_LON_ALT_BOX_PARSERS_,a,b);if(!c){return}var d=(b[b.length-1]);var e=[parseFloat(c['west']),parseFloat(c['south']),parseFloat(c['east']),parseFloat(c['north'])];d['extent']=e;d['altitudeMode']=c['altitudeMode'];d['minAltitude']=parseFloat(c['minAltitude']);d['maxAltitude']=parseFloat(c['maxAltitude'])};ol.format.KML.LodParser_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.KML.LOD_PARSERS_,a,b);if(!c){return}var d=(b[b.length-1]);d['minLodPixels']=parseFloat(c['minLodPixels']);d['maxLodPixels']=parseFloat(c['maxLodPixels']);d['minFadeExtent']=parseFloat(c['minFadeExtent']);d['maxFadeExtent']=parseFloat(c['maxFadeExtent'])};ol.format.KML.innerBoundaryIsParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,a,b);if(c){var d=(b[b.length-1]);d.push(c)}};ol.format.KML.outerBoundaryIsParser_=function(a,b){var c=ol.xml.pushParseAndPop(undefined,ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,a,b);if(c){var d=(b[b.length-1]);d[0]=c}};ol.format.KML.LinkParser_=function(a,b){ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,a,b)};ol.format.KML.whenParser_=function(a,b){var c=(b[b.length-1]);var d=c.whens;var s=ol.xml.getAllTextContent(a,false);var e=Date.parse(s);d.push(isNaN(e)?0:e)};ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'displayName':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'value':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Data':ol.format.KML.DataParser_,'SchemaData':ol.format.KML.SchemaDataParser_});ol.format.KML.REGION_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LatLonAltBox':ol.format.KML.LatLonAltBoxParser_,'Lod':ol.format.KML.LodParser_});ol.format.KML.LAT_LON_ALT_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'altitudeMode':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'minAltitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'maxAltitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'north':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'south':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'east':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'west':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.LOD_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'minLodPixels':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'maxLodPixels':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'minFadeExtent':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'maxFadeExtent':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'extrude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),'tessellate':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),'altitudeMode':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'coordinates':ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'innerBoundaryIs':ol.format.KML.innerBoundaryIsParser_,'outerBoundaryIs':ol.format.KML.outerBoundaryIsParser_});ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'when':ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{'coord':ol.format.KML.gxCoordParser_}));ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'coordinates':ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)});ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'href':ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{'x':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'y':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'w':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'h':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}));ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Icon':ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),'heading':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'hotSpot':ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),'scale':ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LinearRing':ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),'scale':ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)});ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),'width':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LineString':ol.xml.makeArrayPusher(ol.format.KML.readLineString_),'LinearRing':ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),'MultiGeometry':ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),'Point':ol.xml.makeArrayPusher(ol.format.KML.readPoint_),'Polygon':ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)});ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{'Track':ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)});ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'ExtendedData':ol.format.KML.ExtendedDataParser_,'Region':ol.format.KML.RegionParser_,'Link':ol.format.KML.LinkParser_,'address':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'description':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'open':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),'phoneNumber':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'visibility':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'href':ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LinearRing':ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)});ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Style':ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),'key':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'styleUrl':ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)});ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'ExtendedData':ol.format.KML.ExtendedDataParser_,'Region':ol.format.KML.RegionParser_,'MultiGeometry':ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,'geometry'),'LineString':ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,'geometry'),'LinearRing':ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,'geometry'),'Point':ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,'geometry'),'Polygon':ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,'geometry'),'Style':ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),'StyleMap':ol.format.KML.PlacemarkStyleMapParser_,'address':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'description':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'open':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),'phoneNumber':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'styleUrl':ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),'visibility':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{'MultiTrack':ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,'geometry'),'Track':ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,'geometry')}));ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),'fill':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),'outline':ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)});ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'SimpleData':ol.format.KML.SimpleDataParser_});ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'IconStyle':ol.format.KML.IconStyleParser_,'LabelStyle':ol.format.KML.LabelStyleParser_,'LineStyle':ol.format.KML.LineStyleParser_,'PolyStyle':ol.format.KML.PolyStyleParser_});ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Pair':ol.format.KML.PairDataParser_});ol.format.KML.prototype.readDocumentOrFolder_=function(a,b){var c=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Document':ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),'Folder':ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),'Placemark':ol.xml.makeArrayPusher(this.readPlacemark_,this),'Style':this.readSharedStyle_.bind(this),'StyleMap':this.readSharedStyleMap_.bind(this)});var d=ol.xml.pushParseAndPop([],c,a,b,this);if(d){return d}else{return undefined}};ol.format.KML.prototype.readPlacemark_=function(a,b){var c=ol.xml.pushParseAndPop({'geometry':null},ol.format.KML.PLACEMARK_PARSERS_,a,b);if(!c){return undefined}var d=new ol.Feature();var e=a.getAttribute('id');if(e!==null){d.setId(e)}var f=(b[0]);var g=c['geometry'];if(g){ol.format.Feature.transformWithOptions(g,false,f)}d.setGeometry(g);delete c['geometry'];if(this.extractStyles_){var h=c['Style'];var i=c['styleUrl'];var j=ol.format.KML.createFeatureStyleFunction_(h,i,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);d.setStyle(j)}delete c['Style'];d.setProperties(c);return d};ol.format.KML.prototype.readSharedStyle_=function(a,b){var c=a.getAttribute('id');if(c!==null){var d=ol.format.KML.readStyle_(a,b);if(d){var e;var f=a.baseURI;if(!f||f=='about:blank'){f=window.location.href}if(f){var g=new URL('#'+c,f);e=g.href}else{e='#'+c}this.sharedStyles_[e]=d}}};ol.format.KML.prototype.readSharedStyleMap_=function(a,b){var c=a.getAttribute('id');if(c===null){return}var d=ol.format.KML.readStyleMapValue_(a,b);if(!d){return}var e;var f=a.baseURI;if(!f||f=='about:blank'){f=window.location.href}if(f){var g=new URL('#'+c,f);e=g.href}else{e='#'+c}this.sharedStyles_[e]=d};ol.format.KML.prototype.readFeature;ol.format.KML.prototype.readFeatureFromNode=function(a,b){if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,a.namespaceURI)){return null}var c=this.readPlacemark_(a,[this.getReadOptions(a,b)]);if(c){return c}else{return null}};ol.format.KML.prototype.readFeatures;ol.format.KML.prototype.readFeaturesFromNode=function(a,b){if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,a.namespaceURI)){return[]}var c;var d=a.localName;if(d=='Document'||d=='Folder'){c=this.readDocumentOrFolder_(a,[this.getReadOptions(a,b)]);if(c){return c}else{return[]}}else if(d=='Placemark'){var e=this.readPlacemark_(a,[this.getReadOptions(a,b)]);if(e){return[e]}else{return[]}}else if(d=='kml'){c=[];var n;for(n=a.firstElementChild;n;n=n.nextElementSibling){var f=this.readFeaturesFromNode(n,b);if(f){ol.array.extend(c,f)}}return c}else{return[]}};ol.format.KML.prototype.readName=function(a){if(ol.xml.isDocument(a)){return this.readNameFromDocument((a))}else if(ol.xml.isNode(a)){return this.readNameFromNode((a))}else if(typeof a==='string'){var b=ol.xml.parse(a);return this.readNameFromDocument(b)}else{return undefined}};ol.format.KML.prototype.readNameFromDocument=function(a){var n;for(n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){var b=this.readNameFromNode(n);if(b){return b}}}return undefined};ol.format.KML.prototype.readNameFromNode=function(a){var n;for(n=a.firstElementChild;n;n=n.nextElementSibling){if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&n.localName=='name'){return ol.format.XSD.readString(n)}}for(n=a.firstElementChild;n;n=n.nextElementSibling){var b=n.localName;if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&(b=='Document'||b=='Folder'||b=='Placemark'||b=='kml')){var c=this.readNameFromNode(n);if(c){return c}}}return undefined};ol.format.KML.prototype.readNetworkLinks=function(a){var b=[];if(ol.xml.isDocument(a)){ol.array.extend(b,this.readNetworkLinksFromDocument((a)))}else if(ol.xml.isNode(a)){ol.array.extend(b,this.readNetworkLinksFromNode((a)))}else if(typeof a==='string'){var c=ol.xml.parse(a);ol.array.extend(b,this.readNetworkLinksFromDocument(c))}return b};ol.format.KML.prototype.readNetworkLinksFromDocument=function(a){var n,networkLinks=[];for(n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){ol.array.extend(networkLinks,this.readNetworkLinksFromNode(n))}}return networkLinks};ol.format.KML.prototype.readNetworkLinksFromNode=function(a){var n,networkLinks=[];for(n=a.firstElementChild;n;n=n.nextElementSibling){if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&n.localName=='NetworkLink'){var b=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,n,[]);networkLinks.push(b)}}for(n=a.firstElementChild;n;n=n.nextElementSibling){var c=n.localName;if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&(c=='Document'||c=='Folder'||c=='kml')){ol.array.extend(networkLinks,this.readNetworkLinksFromNode(n))}}return networkLinks};ol.format.KML.prototype.readRegion=function(a){var b=[];if(ol.xml.isDocument(a)){ol.array.extend(b,this.readRegionFromDocument((a)))}else if(ol.xml.isNode(a)){ol.array.extend(b,this.readRegionFromNode((a)))}else if(typeof a==='string'){var c=ol.xml.parse(a);ol.array.extend(b,this.readRegionFromDocument(c))}return b};ol.format.KML.prototype.readRegionFromDocument=function(a){var n,regions=[];for(n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){ol.array.extend(regions,this.readRegionFromNode(n))}}return regions};ol.format.KML.prototype.readRegionFromNode=function(a){var n,regions=[];for(n=a.firstElementChild;n;n=n.nextElementSibling){if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&n.localName=='Region'){var b=ol.xml.pushParseAndPop({},ol.format.KML.REGION_PARSERS_,n,[]);regions.push(b)}}for(n=a.firstElementChild;n;n=n.nextElementSibling){var c=n.localName;if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,n.namespaceURI)&&(c=='Document'||c=='Folder'||c=='kml')){ol.array.extend(regions,this.readRegionFromNode(n))}}return regions};ol.format.KML.prototype.readProjection;ol.format.KML.writeColorTextNode_=function(a,b){var c=ol.color.asArray(b);var d=(c.length==4)?c[3]:1;var e=[d*255,c[2],c[1],c[0]];var i;for(i=0;i<4;++i){var f=parseInt(e[i],10).toString(16);e[i]=(f.length==1)?'0'+f:f}ol.format.XSD.writeStringTextNode(a,e.join(''))};ol.format.KML.writeCoordinatesTextNode_=function(a,b,c){var e=c[c.length-1];var f=e['layout'];var g=e['stride'];var h;if(f==ol.geom.GeometryLayout.XY||f==ol.geom.GeometryLayout.XYM){h=2}else if(f==ol.geom.GeometryLayout.XYZ||f==ol.geom.GeometryLayout.XYZM){h=3}else{ol.asserts.assert(false,34)}var d,i;var j=b.length;var k='';if(j>0){k+=b[0];for(d=1;d<h;++d){k+=','+b[d]}for(i=g;i<j;i+=g){k+=' '+b[i];for(d=1;d<h;++d){k+=','+b[i+d]}}}ol.format.XSD.writeStringTextNode(a,k)};ol.format.KML.writeDataNode_=function(a,b,c){a.setAttribute('name',b.name);var d={node:a};var e=b.value;if(typeof e=='object'){if(e!==null&&e.displayName){ol.xml.pushSerializeAndPop(d,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[e.displayName],c,['displayName'])}if(e!==null&&e.value){ol.xml.pushSerializeAndPop(d,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[e.value],c,['value'])}}else{ol.xml.pushSerializeAndPop(d,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[e],c,['value'])}};ol.format.KML.writeDataNodeName_=function(a,b){ol.format.XSD.writeCDATASection(a,b)};ol.format.KML.writeDataNodeValue_=function(a,b){ol.format.XSD.writeStringTextNode(a,b)};ol.format.KML.writeDocument_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,b,c,undefined,this)};ol.format.KML.writeExtendedData_=function(a,b,c){var d={node:a};var e=b.names,values=b.values;var f=e.length;for(var i=0;i<f;i++){ol.xml.pushSerializeAndPop(d,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.format.KML.DATA_NODE_FACTORY_,[{name:e[i],value:values[i]}],c)}};ol.format.KML.writeIcon_=function(a,b,c){var d={node:a};var e=c[c.length-1].node;var f=ol.format.KML.ICON_SEQUENCE_[e.namespaceURI];var g=ol.xml.makeSequence(b,f);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,g,c,f);f=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]];g=ol.xml.makeSequence(b,f);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,g,c,f)};ol.format.KML.writeIconStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getSrc();var g=b.getSize();var h=b.getImageSize();var i={'href':f};if(g){i['w']=g[0];i['h']=g[1];var j=b.getAnchor();var k=b.getOrigin();if(k&&h&&k[0]!==0&&k[1]!==g[1]){i['x']=k[0];i['y']=h[1]-(k[1]+g[1])}if(j&&(j[0]!==g[0]/2||j[1]!==g[1]/2)){var l={x:j[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:g[1]-j[1],yunits:ol.style.IconAnchorUnits.PIXELS};e['hotSpot']=l}}e['Icon']=i;var m=b.getScale();if(m!==1){e['scale']=m}var n=b.getRotation();if(n!==0){e['heading']=n}var o=c[c.length-1].node;var p=ol.format.KML.ICON_STYLE_SEQUENCE_[o.namespaceURI];var q=ol.xml.makeSequence(e,p);ol.xml.pushSerializeAndPop(d,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,q,c,p)};ol.format.KML.writeLabelStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getFill();if(f){e['color']=f.getColor()}var g=b.getScale();if(g&&g!==1){e['scale']=g}var h=c[c.length-1].node;var i=ol.format.KML.LABEL_STYLE_SEQUENCE_[h.namespaceURI];var j=ol.xml.makeSequence(e,i);ol.xml.pushSerializeAndPop(d,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,j,c,i)};ol.format.KML.writeLineStyle_=function(a,b,c){var d={node:a};var e={'color':b.getColor(),'width':b.getWidth()};var f=c[c.length-1].node;var g=ol.format.KML.LINE_STYLE_SEQUENCE_[f.namespaceURI];var h=ol.xml.makeSequence(e,g);ol.xml.pushSerializeAndPop(d,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,h,c,g)};ol.format.KML.writeMultiGeometry_=function(a,b,c){var d={node:a};var e=b.getType();var f;var g;if(e==ol.geom.GeometryType.GEOMETRY_COLLECTION){f=(b).getGeometries();g=ol.format.KML.GEOMETRY_NODE_FACTORY_}else if(e==ol.geom.GeometryType.MULTI_POINT){f=(b).getPoints();g=ol.format.KML.POINT_NODE_FACTORY_}else if(e==ol.geom.GeometryType.MULTI_LINE_STRING){f=((b)).getLineStrings();g=ol.format.KML.LINE_STRING_NODE_FACTORY_}else if(e==ol.geom.GeometryType.MULTI_POLYGON){f=((b)).getPolygons();g=ol.format.KML.POLYGON_NODE_FACTORY_}else{ol.asserts.assert(false,39)}ol.xml.pushSerializeAndPop(d,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,g,f,c)};ol.format.KML.writeBoundaryIs_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[b],c)};ol.format.KML.writePlacemark_=function(a,b,c){var d={node:a};if(b.getId()){a.setAttribute('id',b.getId())}var e=b.getProperties();var f={'address':1,'description':1,'name':1,'open':1,'phoneNumber':1,'styleUrl':1,'visibility':1};f[b.getGeometryName()]=1;var g=Object.keys(e||{}).sort().filter(function(v){return!f[v]});if(g.length>0){var h=ol.xml.makeSequence(e,g);var i={names:g,values:h};ol.xml.pushSerializeAndPop(d,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.EXTENDEDDATA_NODE_FACTORY_,[i],c)}var j=b.getStyleFunction();if(j){var k=j.call(b,0);if(k){var l=Array.isArray(k)?k[0]:k;if(this.writeStyles_){e['Style']=l}var m=l.getText();if(m){e['name']=m.getText()}}}var n=c[c.length-1].node;var o=ol.format.KML.PLACEMARK_SEQUENCE_[n.namespaceURI];var p=ol.xml.makeSequence(e,o);ol.xml.pushSerializeAndPop(d,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,p,c,o);var q=(c[0]);var r=b.getGeometry();if(r){r=ol.format.Feature.transformWithOptions(r,true,q)}ol.xml.pushSerializeAndPop(d,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[r],c)};ol.format.KML.writePrimitiveGeometry_=function(a,b,c){var d=b.getFlatCoordinates();var e={node:a};e['layout']=b.getLayout();e['stride']=b.getStride();var f=b.getProperties();f.coordinates=d;var g=c[c.length-1].node;var h=ol.format.KML.PRIMITIVE_GEOMETRY_SEQUENCE_[g.namespaceURI];var i=ol.xml.makeSequence(f,h);ol.xml.pushSerializeAndPop(e,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,i,c,h)};ol.format.KML.writePolygon_=function(a,b,c){var d=b.getLinearRings();var e=d.shift();var f={node:a};ol.xml.pushSerializeAndPop(f,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,d,c);ol.xml.pushSerializeAndPop(f,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[e],c)};ol.format.KML.writePolyStyle_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[b.getColor()],c)};ol.format.KML.writeScaleTextNode_=function(a,b){ol.format.XSD.writeDecimalTextNode(a,Math.round(b*1e6)/1e6)};ol.format.KML.writeStyle_=function(a,b,c){var d={node:a};var e={};var f=b.getFill();var g=b.getStroke();var h=b.getImage();var i=b.getText();if(h instanceof ol.style.Icon){e['IconStyle']=h}if(i){e['LabelStyle']=i}if(g){e['LineStyle']=g}if(f){e['PolyStyle']=f}var j=c[c.length-1].node;var k=ol.format.KML.STYLE_SEQUENCE_[j.namespaceURI];var l=ol.xml.makeSequence(e,k);ol.xml.pushSerializeAndPop(d,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,l,c,k)};ol.format.KML.writeVec2_=function(a,b){a.setAttribute('x',b.x);a.setAttribute('y',b.y);a.setAttribute('xunits',b.xunits);a.setAttribute('yunits',b.yunits)};ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['Document','Placemark']);ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Document':ol.xml.makeChildAppender(ol.format.KML.writeDocument_),'Placemark':ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Placemark':ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)});ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Data':ol.xml.makeChildAppender(ol.format.KML.writeDataNode_),'value':ol.xml.makeChildAppender(ol.format.KML.writeDataNodeValue_),'displayName':ol.xml.makeChildAppender(ol.format.KML.writeDataNodeName_)});ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={'Point':'Point','LineString':'LineString','LinearRing':'LinearRing','Polygon':'Polygon','MultiPoint':'MultiGeometry','MultiLineString':'MultiGeometry','MultiPolygon':'MultiGeometry','GeometryCollection':'MultiGeometry'};ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['href'],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,['x','y','w','h']));ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'href':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{'x':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'y':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'w':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'h':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}));ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['scale','heading','Icon','hotSpot']);ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'Icon':ol.xml.makeChildAppender(ol.format.KML.writeIcon_),'heading':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),'hotSpot':ol.xml.makeChildAppender(ol.format.KML.writeVec2_),'scale':ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['color','scale']);ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),'scale':ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)});ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['color','width']);ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),'width':ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)});ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LinearRing':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)});ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'LineString':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),'Point':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),'Polygon':ol.xml.makeChildAppender(ol.format.KML.writePolygon_),'GeometryCollection':ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_)});ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['name','open','visibility','address','phoneNumber','description','styleUrl','Style']);ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'ExtendedData':ol.xml.makeChildAppender(ol.format.KML.writeExtendedData_),'MultiGeometry':ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),'LineString':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),'LinearRing':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),'Point':ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),'Polygon':ol.xml.makeChildAppender(ol.format.KML.writePolygon_),'Style':ol.xml.makeChildAppender(ol.format.KML.writeStyle_),'address':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'description':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'name':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'open':ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),'phoneNumber':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'styleUrl':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'visibility':ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)});ol.format.KML.PRIMITIVE_GEOMETRY_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['extrude','tessellate','altitudeMode','coordinates']);ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'extrude':ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),'tessellate':ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),'altitudeMode':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),'coordinates':ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)});ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'outerBoundaryIs':ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),'innerBoundaryIs':ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)});ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'color':ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)});ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,['IconStyle','LabelStyle','LineStyle','PolyStyle']);ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{'IconStyle':ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),'LabelStyle':ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),'LineStyle':ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),'PolyStyle':ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)});ol.format.KML.GX_NODE_FACTORY_=function(a,b,c){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],'gx:'+c)};ol.format.KML.DOCUMENT_NODE_FACTORY_=function(a,b,c){var d=b[b.length-1].node;return ol.xml.createElementNS(d.namespaceURI,'Placemark')};ol.format.KML.GEOMETRY_NODE_FACTORY_=function(a,b,c){if(a){var d=b[b.length-1].node;return ol.xml.createElementNS(d.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[(a).getType()])}};ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('color');ol.format.KML.DATA_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('Data');ol.format.KML.EXTENDEDDATA_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('ExtendedData');ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('innerBoundaryIs');ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('Point');ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('LineString');ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('LinearRing');ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('Polygon');ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory('outerBoundaryIs');ol.format.KML.prototype.writeFeatures;ol.format.KML.prototype.writeFeaturesNode=function(a,b){b=this.adaptOptions(b);var c=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],'kml');var d='http://www.w3.org/2000/xmlns/';var e='http://www.w3.org/2001/XMLSchema-instance';ol.xml.setAttributeNS(c,d,'xmlns:gx',ol.format.KML.GX_NAMESPACE_URIS_[0]);ol.xml.setAttributeNS(c,d,'xmlns:xsi',e);ol.xml.setAttributeNS(c,e,'xsi:schemaLocation',ol.format.KML.SCHEMA_LOCATION_);var f={node:c};var g={};if(a.length>1){g['Document']=a}else if(a.length==1){g['Placemark']=a[0]}var h=ol.format.KML.KML_SEQUENCE_[c.namespaceURI];var i=ol.xml.makeSequence(g,h);ol.xml.pushSerializeAndPop(f,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,i,[b],h,this);return c};bq.provide('ol.ext.PBF');ol.ext.PBF=function(){};(function(){(function(q){'use strict';var r=function(a,b,c,f,g){var e,m;var h=(g*8)-f-1;var j=(1<<h)-1;var k=j>>1;var l=-7;var i=c?(g-1):0;var d=c?-1:1;var s=a[b+i];i+=d;e=s&((1<<(-l))-1);s>>=(-l);l+=h;for(;l>0;e=(e*256)+a[b+i],i+=d,l-=8){}m=e&((1<<(-l))-1);e>>=(-l);l+=f;for(;l>0;m=(m*256)+a[b+i],i+=d,l-=8){}if(e===0){e=1-k}else if(e===j){return m?NaN:((s?-1:1)*Infinity)}else{m=m+Math.pow(2,f);e=e-k}return(s?-1:1)*m*Math.pow(2,e-f)};var t=function(a,b,f,g,h,j){var e,m,c;var k=(j*8)-h-1;var l=(1<<k)-1;var n=l>>1;var o=(h===23?Math.pow(2,-24)-Math.pow(2,-77):0);var i=g?0:(j-1);var d=g?1:-1;var s=b<0||(b===0&&1/b<0)?1:0;b=Math.abs(b);if(isNaN(b)||b===Infinity){m=isNaN(b)?1:0;e=l}else{e=Math.floor(Math.log(b)/Math.LN2);if(b*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+n>=1){b+=o/c}else{b+=o*Math.pow(2,1-n)}if(b*c>=2){e++;c/=2}if(e+n>=l){m=0;e=l}else if(e+n>=1){m=((b*c)-1)*Math.pow(2,h);e=e+n}else{m=b*Math.pow(2,n-1)*Math.pow(2,h);e=0}}for(;h>=8;a[f+i]=m&0xff,i+=d,m/=256,h-=8){}e=(e<<h)|m;k+=h;for(;k>0;a[f+i]=e&0xff,i+=d,e/=256,k-=8){}a[f+i-d]|=s*128};var u={read:r,write:t};var v=Pbf;function Pbf(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0);this.pos=0;this.type=0;this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var w=(1<<16)*(1<<16);var x=1/w;Pbf.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){c=c||this.length;while(this.pos<c){var d=this.readVarint(),tag=d>>3,startPos=this.pos;this.type=d&0x7;a(tag,b,this);if(this.pos===startPos)this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=readUInt32(this.buf,this.pos);this.pos+=4;return a},readSFixed32:function(){var a=readInt32(this.buf,this.pos);this.pos+=4;return a},readFixed64:function(){var a=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*w;this.pos+=8;return a},readSFixed64:function(){var a=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*w;this.pos+=8;return a},readFloat:function(){var a=u.read(this.buf,this.pos,true,23,4);this.pos+=4;return a},readDouble:function(){var a=u.read(this.buf,this.pos,true,52,8);this.pos+=8;return a},readVarint:function(a){var c=this.buf,val,b;b=c[this.pos++];val=b&0x7f;if(b<0x80)return val;b=c[this.pos++];val|=(b&0x7f)<<7;if(b<0x80)return val;b=c[this.pos++];val|=(b&0x7f)<<14;if(b<0x80)return val;b=c[this.pos++];val|=(b&0x7f)<<21;if(b<0x80)return val;b=c[this.pos];val|=(b&0x0f)<<28;return readVarintRemainder(val,a,this)},readVarint64:function(){return this.readVarint(true)},readSVarint:function(){var a=this.readVarint();return a%2===1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,str=readUtf8(this.buf,this.pos,a);this.pos=a;return str},readBytes:function(){var a=this.readVarint()+this.pos,buffer=this.buf.subarray(this.pos,a);this.pos=a;return buffer},readPackedVarint:function(a,b){var c=readPackedEnd(this);a=a||[];while(this.pos<c)a.push(this.readVarint(b));return a},readPackedSVarint:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readSVarint());return a},readPackedBoolean:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readBoolean());return a},readPackedFloat:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readFloat());return a},readPackedDouble:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readDouble());return a},readPackedFixed32:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){var b=readPackedEnd(this);a=a||[];while(this.pos<b)a.push(this.readSFixed64());return a},skip:function(a){var b=a&0x7;if(b===Pbf.Varint)while(this.buf[this.pos++]>0x7f){}else if(b===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(b===Pbf.Fixed32)this.pos+=4;else if(b===Pbf.Fixed64)this.pos+=8;else throw new Error('Unimplemented type: '+b);},writeTag:function(a,b){this.writeVarint((a<<3)|b)},realloc:function(a){var b=this.length||16;while(b<this.pos+a)b*=2;if(b!==this.length){var c=new Uint8Array(b);c.set(this.buf);this.buf=c;this.length=b}},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4);writeInt32(this.buf,a,this.pos);this.pos+=4},writeSFixed32:function(a){this.realloc(4);writeInt32(this.buf,a,this.pos);this.pos+=4},writeFixed64:function(a){this.realloc(8);writeInt32(this.buf,a&-1,this.pos);writeInt32(this.buf,Math.floor(a*x),this.pos+4);this.pos+=8},writeSFixed64:function(a){this.realloc(8);writeInt32(this.buf,a&-1,this.pos);writeInt32(this.buf,Math.floor(a*x),this.pos+4);this.pos+=8},writeVarint:function(a){a=+a||0;if(a>0xfffffff||a<0){writeBigVarint(a,this);return}this.realloc(4);this.buf[this.pos++]=a&0x7f|(a>0x7f?0x80:0);if(a<=0x7f)return;this.buf[this.pos++]=((a>>>=7)&0x7f)|(a>0x7f?0x80:0);if(a<=0x7f)return;this.buf[this.pos++]=((a>>>=7)&0x7f)|(a>0x7f?0x80:0);if(a<=0x7f)return;this.buf[this.pos++]=(a>>>7)&0x7f},writeSVarint:function(a){this.writeVarint(a<0?-a*2-1:a*2)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);this.realloc(a.length*4);this.pos++;var b=this.pos;this.pos=writeUtf8(this.buf,a,this.pos);var c=this.pos-b;if(c>=0x80)makeRoomForExtraLength(b,c,this);this.pos=b-1;this.writeVarint(c);this.pos+=c},writeFloat:function(a){this.realloc(4);u.write(this.buf,a,this.pos,true,23,4);this.pos+=4},writeDouble:function(a){this.realloc(8);u.write(this.buf,a,this.pos,true,52,8);this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b);this.realloc(b);for(var i=0;i<b;i++)this.buf[this.pos++]=a[i]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;if(d>=0x80)makeRoomForExtraLength(c,d,this);this.pos=c-1;this.writeVarint(d);this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,Pbf.Bytes);this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,writePackedVarint,b)},writePackedSVarint:function(a,b){this.writeMessage(a,writePackedSVarint,b)},writePackedBoolean:function(a,b){this.writeMessage(a,writePackedBoolean,b)},writePackedFloat:function(a,b){this.writeMessage(a,writePackedFloat,b)},writePackedDouble:function(a,b){this.writeMessage(a,writePackedDouble,b)},writePackedFixed32:function(a,b){this.writeMessage(a,writePackedFixed32,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,writePackedSFixed32,b)},writePackedFixed64:function(a,b){this.writeMessage(a,writePackedFixed64,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,writePackedSFixed64,b)},writeBytesField:function(a,b){this.writeTag(a,Pbf.Bytes);this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,Pbf.Fixed32);this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,Pbf.Fixed32);this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,Pbf.Fixed64);this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,Pbf.Fixed64);this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,Pbf.Varint);this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,Pbf.Varint);this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,Pbf.Bytes);this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,Pbf.Fixed32);this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,Pbf.Fixed64);this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}};function readVarintRemainder(l,s,p){var a=p.buf,h,b;b=a[p.pos++];h=(b&0x70)>>4;if(b<0x80)return toNum(l,h,s);b=a[p.pos++];h|=(b&0x7f)<<3;if(b<0x80)return toNum(l,h,s);b=a[p.pos++];h|=(b&0x7f)<<10;if(b<0x80)return toNum(l,h,s);b=a[p.pos++];h|=(b&0x7f)<<17;if(b<0x80)return toNum(l,h,s);b=a[p.pos++];h|=(b&0x7f)<<24;if(b<0x80)return toNum(l,h,s);b=a[p.pos++];h|=(b&0x01)<<31;if(b<0x80)return toNum(l,h,s);throw new Error('Expected varint not more than 10 bytes');}function readPackedEnd(a){return a.type===Pbf.Bytes?a.readVarint()+a.pos:a.pos+1}function toNum(a,b,c){if(c){return b*0x100000000+(a>>>0)}return((b>>>0)*0x100000000)+(a>>>0)}function writeBigVarint(a,b){var c,high;if(a>=0){c=(a%0x100000000)|0;high=(a/0x100000000)|0}else{c=~(-a%0x100000000);high=~(-a/0x100000000);if(c^0xffffffff){c=(c+1)|0}else{c=0;high=(high+1)|0}}if(a>=0x10000000000000000||a<-0x10000000000000000){throw new Error('Given varint doesn\'t fit into 10 bytes');}b.realloc(10);writeBigVarintLow(c,high,b);writeBigVarintHigh(high,b)}function writeBigVarintLow(a,b,c){c.buf[c.pos++]=a&0x7f|0x80;a>>>=7;c.buf[c.pos++]=a&0x7f|0x80;a>>>=7;c.buf[c.pos++]=a&0x7f|0x80;a>>>=7;c.buf[c.pos++]=a&0x7f|0x80;a>>>=7;c.buf[c.pos]=a&0x7f}function writeBigVarintHigh(a,b){var c=(a&0x07)<<4;b.buf[b.pos++]|=c|((a>>>=3)?0x80:0);if(!a)return;b.buf[b.pos++]=a&0x7f|((a>>>=7)?0x80:0);if(!a)return;b.buf[b.pos++]=a&0x7f|((a>>>=7)?0x80:0);if(!a)return;b.buf[b.pos++]=a&0x7f|((a>>>=7)?0x80:0);if(!a)return;b.buf[b.pos++]=a&0x7f|((a>>>=7)?0x80:0);if(!a)return;b.buf[b.pos++]=a&0x7f}function makeRoomForExtraLength(a,b,c){var d=b<=0x3fff?1:b<=0x1fffff?2:b<=0xfffffff?3:Math.ceil(Math.log(b)/(Math.LN2*7));c.realloc(d);for(var i=c.pos-1;i>=a;i--)c.buf[i+d]=c.buf[i]}function writePackedVarint(a,b){for(var i=0;i<a.length;i++)b.writeVarint(a[i])}function writePackedSVarint(a,b){for(var i=0;i<a.length;i++)b.writeSVarint(a[i])}function writePackedFloat(a,b){for(var i=0;i<a.length;i++)b.writeFloat(a[i])}function writePackedDouble(a,b){for(var i=0;i<a.length;i++)b.writeDouble(a[i])}function writePackedBoolean(a,b){for(var i=0;i<a.length;i++)b.writeBoolean(a[i])}function writePackedFixed32(a,b){for(var i=0;i<a.length;i++)b.writeFixed32(a[i])}function writePackedSFixed32(a,b){for(var i=0;i<a.length;i++)b.writeSFixed32(a[i])}function writePackedFixed64(a,b){for(var i=0;i<a.length;i++)b.writeFixed64(a[i])}function writePackedSFixed64(a,b){for(var i=0;i<a.length;i++)b.writeSFixed64(a[i])}function readUInt32(a,b){return((a[b])|(a[b+1]<<8)|(a[b+2]<<16))+(a[b+3]*0x1000000)}function writeInt32(a,b,c){a[c]=b;a[c+1]=(b>>>8);a[c+2]=(b>>>16);a[c+3]=(b>>>24)}function readInt32(a,b){return((a[b])|(a[b+1]<<8)|(a[b+2]<<16))+(a[b+3]<<24)}function readUtf8(a,b,d){var e='';var i=b;while(i<d){var f=a[i];var c=null;var g=f>0xEF?4:f>0xDF?3:f>0xBF?2:1;if(i+g>d)break;var h,b2,b3;if(g===1){if(f<0x80){c=f}}else if(g===2){h=a[i+1];if((h&0xC0)===0x80){c=(f&0x1F)<<0x6|(h&0x3F);if(c<=0x7F){c=null}}}else if(g===3){h=a[i+1];b2=a[i+2];if((h&0xC0)===0x80&&(b2&0xC0)===0x80){c=(f&0xF)<<0xC|(h&0x3F)<<0x6|(b2&0x3F);if(c<=0x7FF||(c>=0xD800&&c<=0xDFFF)){c=null}}}else if(g===4){h=a[i+1];b2=a[i+2];b3=a[i+3];if((h&0xC0)===0x80&&(b2&0xC0)===0x80&&(b3&0xC0)===0x80){c=(f&0xF)<<0x12|(h&0x3F)<<0xC|(b2&0x3F)<<0x6|(b3&0x3F);if(c<=0xFFFF||c>=0x110000){c=null}}}if(c===null){c=0xFFFD;g=1}else if(c>0xFFFF){c-=0x10000;e+=String.fromCharCode(c>>>10&0x3FF|0xD800);c=0xDC00|c&0x3FF}e+=String.fromCharCode(c);i+=g}return e}function writeUtf8(a,b,d){for(var i=0,c,lead;i<b.length;i++){c=b.charCodeAt(i);if(c>0xD7FF&&c<0xE000){if(lead){if(c<0xDC00){a[d++]=0xEF;a[d++]=0xBF;a[d++]=0xBD;lead=c;continue}else{c=lead-0xD800<<10|c-0xDC00|0x10000;lead=null}}else{if(c>0xDBFF||(i+1===b.length)){a[d++]=0xEF;a[d++]=0xBF;a[d++]=0xBD}else{lead=c}continue}}else if(lead){a[d++]=0xEF;a[d++]=0xBF;a[d++]=0xBD;lead=null}if(c<0x80){a[d++]=c}else{if(c<0x800){a[d++]=c>>0x6|0xC0}else{if(c<0x10000){a[d++]=c>>0xC|0xE0}else{a[d++]=c>>0x12|0xF0;a[d++]=c>>0xC&0x3F|0x80}a[d++]=c>>0x6&0x3F|0x80}a[d++]=c&0x3F|0x80}}return d}q['default']=v}((this.PBF=this.PBF||{})))}).call(ol.ext);ol.ext.PBF=ol.ext.PBF.default;bq.provide('ol.render.Feature');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.geom.flat.center');bq.require('ol.geom.flat.interiorpoint');bq.require('ol.geom.flat.interpolate');bq.require('ol.geom.flat.transform');bq.require('ol.transform');ol.render.Feature=function(a,b,c,d,e){this.extent_;this.id_=e;this.type_=a;this.flatCoordinates_=b;this.flatInteriorPoints_=null;this.flatMidpoints_=null;this.ends_=c;this.properties_=d;this.tmpTransform_=ol.transform.create()};ol.render.Feature.prototype.get=function(a){return this.properties_[a]};ol.render.Feature.prototype.getEnds=ol.render.Feature.prototype.getEndss=function(){return this.ends_};ol.render.Feature.prototype.getExtent=function(){if(!this.extent_){this.extent_=this.type_===ol.geom.GeometryType.POINT?ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates_):ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)}return this.extent_};ol.render.Feature.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var a=ol.extent.getCenter(this.getExtent());this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRings(this.flatCoordinates_,0,this.ends_,2,a,0)}return this.flatInteriorPoints_};ol.render.Feature.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var a=ol.geom.flat.center.linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.flatCoordinates_,0,this.ends_,2,a)}return this.flatInteriorPoints_};ol.render.Feature.prototype.getFlatMidpoint=function(){if(!this.flatMidpoints_){this.flatMidpoints_=ol.geom.flat.interpolate.lineString(this.flatCoordinates_,0,this.flatCoordinates_.length,2,0.5)}return this.flatMidpoints_};ol.render.Feature.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];var a=this.flatCoordinates_;var b=0;var c=this.ends_;for(var i=0,ii=c.length;i<ii;++i){var d=c[i];var e=ol.geom.flat.interpolate.lineString(a,b,d,2,0.5);ol.array.extend(this.flatMidpoints_,e);b=d}}return this.flatMidpoints_};ol.render.Feature.prototype.getId=function(){return this.id_};ol.render.Feature.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_};ol.render.Feature.prototype.getFlatCoordinates=ol.render.Feature.prototype.getOrientedFlatCoordinates;ol.render.Feature.prototype.getGeometry=function(){return this};ol.render.Feature.prototype.getProperties=function(){return this.properties_};ol.render.Feature.prototype.getSimplifiedGeometry=ol.render.Feature.prototype.getGeometry;ol.render.Feature.prototype.getStride=function(){return 2};ol.render.Feature.prototype.getStyleFunction=ol.nullFunction;ol.render.Feature.prototype.getType=function(){return this.type_};ol.render.Feature.prototype.transform=function(a,b){var c=a.getExtent();var d=a.getWorldExtent();var e=ol.extent.getHeight(d)/ol.extent.getHeight(c);var f=this.tmpTransform_;ol.transform.compose(f,d[0],d[3],e,-e,0,0,0);ol.geom.flat.transform.transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,f,this.flatCoordinates_)};bq.provide('ol.format.MVT');bq.require('ol');bq.require('ol.asserts');bq.require('ol.ext.PBF');bq.require('ol.format.Feature');bq.require('ol.format.FormatType');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.geom.flat.orient');bq.require('ol.proj.Projection');bq.require('ol.proj.Units');bq.require('ol.render.Feature');ol.format.MVT=function(a){ol.format.Feature.call(this);var b=a?a:{};this.defaultDataProjection=new ol.proj.Projection({code:'EPSG:3857',units:ol.proj.Units.TILE_PIXELS});this.featureClass_=b.featureClass?b.featureClass:ol.render.Feature;this.geometryName_=b.geometryName;this.layerName_=b.layerName?b.layerName:'layer';this.layers_=b.layers?b.layers:null;this.extent_=null};ol.inherits(ol.format.MVT,ol.format.Feature);ol.format.MVT.pbfReaders_={layers:function(a,b,c){if(a===3){var d={keys:[],values:[],features:[]};var e=c.readVarint()+c.pos;c.readFields(ol.format.MVT.pbfReaders_.layer,d,e);d.length=d.features.length;if(d.length){b[d.name]=d}}},layer:function(a,b,c){if(a===15){b.version=c.readVarint()}else if(a===1){b.name=c.readString()}else if(a===5){b.extent=c.readVarint()}else if(a===2){b.features.push(c.pos)}else if(a===3){b.keys.push(c.readString())}else if(a===4){var d=null;var e=c.readVarint()+c.pos;while(c.pos<e){a=c.readVarint()>>3;d=a===1?c.readString():a===2?c.readFloat():a===3?c.readDouble():a===4?c.readVarint64():a===5?c.readVarint():a===6?c.readSVarint():a===7?c.readBoolean():null}b.values.push(d)}},feature:function(a,b,c){if(a==1){b.id=c.readVarint()}else if(a==2){var d=c.readVarint()+c.pos;while(c.pos<d){var e=b.layer.keys[c.readVarint()];var f=b.layer.values[c.readVarint()];b.properties[e]=f}}else if(a==3){b.type=c.readVarint()}else if(a==4){b.geometry=c.pos}}};ol.format.MVT.readRawFeature_=function(a,b,i){a.pos=b.features[i];var c=a.readVarint()+a.pos;var d={layer:b,type:0,properties:{}};a.readFields(ol.format.MVT.pbfReaders_.feature,d,c);return d};ol.format.MVT.readRawGeometry_=function(a,b,c,d){a.pos=b.geometry;var e=a.readVarint()+a.pos;var f=1;var g=0;var x=0;var y=0;var h=0;var i=0;while(a.pos<e){if(!g){var j=a.readVarint();f=j&0x7;g=j>>3}g--;if(f===1||f===2){x+=a.readSVarint();y+=a.readSVarint();if(f===1){if(h>i){d.push(h);i=h}}c.push(x,y);h+=2}else if(f===7){if(h>i){c.push(c[i],c[i+1]);h+=2}}else{ol.asserts.assert(false,59)}}if(h>i){d.push(h);i=h}};ol.format.MVT.getGeometryType_=function(a,b){var c;if(a===1){c=b===1?ol.geom.GeometryType.POINT:ol.geom.GeometryType.MULTI_POINT}else if(a===2){c=b===1?ol.geom.GeometryType.LINE_STRING:ol.geom.GeometryType.MULTI_LINE_STRING}else if(a===3){c=ol.geom.GeometryType.POLYGON}return c};ol.format.MVT.prototype.createFeature_=function(a,b,c){var d=b.type;if(d===0){return null}var e;var f=b.id;var g=b.properties;g[this.layerName_]=b.layer.name;var h=[];var j=[];ol.format.MVT.readRawGeometry_(a,b,h,j);var k=ol.format.MVT.getGeometryType_(d,j.length);if(this.featureClass_===ol.render.Feature){e=new this.featureClass_(k,h,j,g,f)}else{var l;if(k==ol.geom.GeometryType.POLYGON){var m=[];var n=0;var o=0;for(var i=0,ii=j.length;i<ii;++i){var p=j[i];if(!ol.geom.flat.orient.linearRingIsClockwise(h,n,p,2)){m.push(j.slice(o,i));o=i}n=p}if(m.length>1){j=m;l=new ol.geom.MultiPolygon(null)}else{l=new ol.geom.Polygon(null)}}else{l=k===ol.geom.GeometryType.POINT?new ol.geom.Point(null):k===ol.geom.GeometryType.LINE_STRING?new ol.geom.LineString(null):k===ol.geom.GeometryType.POLYGON?new ol.geom.Polygon(null):k===ol.geom.GeometryType.MULTI_POINT?new ol.geom.MultiPoint(null):k===ol.geom.GeometryType.MULTI_LINE_STRING?new ol.geom.MultiLineString(null):null}l.setFlatCoordinates(ol.geom.GeometryLayout.XY,h,j);e=new this.featureClass_();if(this.geometryName_){e.setGeometryName(this.geometryName_)}var q=ol.format.Feature.transformWithOptions(l,false,this.adaptOptions(c));e.setGeometry(q);e.setId(f);e.setProperties(g)}return e};ol.format.MVT.prototype.getLastExtent=function(){return this.extent_};ol.format.MVT.prototype.getType=function(){return ol.format.FormatType.ARRAY_BUFFER};ol.format.MVT.prototype.readFeatures=function(a,b){var c=this.layers_;var d=new ol.ext.PBF((a));var e=d.readFields(ol.format.MVT.pbfReaders_.layers,{});var f=[];var g;for(var h in e){if(c&&c.indexOf(h)==-1){continue}g=e[h];var j;for(var i=0,ii=g.length;i<ii;++i){j=ol.format.MVT.readRawFeature_(d,g,i);f.push(this.createFeature_(d,j))}this.extent_=g?[0,0,g.extent,g.extent]:null}return f};ol.format.MVT.prototype.readProjection=function(a){return this.defaultDataProjection};ol.format.MVT.prototype.setLayers=function(a){this.layers_=a};ol.format.MVT.prototype.readFeature=function(){};ol.format.MVT.prototype.readGeometry=function(){};ol.format.MVT.prototype.writeFeature=function(){};ol.format.MVT.prototype.writeGeometry=function(){};ol.format.MVT.prototype.writeFeatures=function(){};bq.provide('ol.format.OSMXML');bq.require('ol');bq.require('ol.array');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.XMLFeature');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.xml');ol.format.OSMXML=function(){ol.format.XMLFeature.call(this);this.defaultDataProjection=ol.proj.get('EPSG:4326')};ol.inherits(ol.format.OSMXML,ol.format.XMLFeature);ol.format.OSMXML.readNode_=function(a,b){var c=(b[0]);var d=(b[b.length-1]);var e=a.getAttribute('id');var f=[parseFloat(a.getAttribute('lon')),parseFloat(a.getAttribute('lat'))];d.nodes[e]=f;var g=ol.xml.pushParseAndPop({tags:{}},ol.format.OSMXML.NODE_PARSERS_,a,b);if(!ol.obj.isEmpty(g.tags)){var h=new ol.geom.Point(f);ol.format.Feature.transformWithOptions(h,false,c);var i=new ol.Feature(h);i.setId(e);i.setProperties(g.tags);d.features.push(i)}};ol.format.OSMXML.readWay_=function(a,b){var c=a.getAttribute('id');var d=ol.xml.pushParseAndPop({id:c,ndrefs:[],tags:{}},ol.format.OSMXML.WAY_PARSERS_,a,b);var e=(b[b.length-1]);e.ways.push(d)};ol.format.OSMXML.readNd_=function(a,b){var c=(b[b.length-1]);c.ndrefs.push(a.getAttribute('ref'))};ol.format.OSMXML.readTag_=function(a,b){var c=(b[b.length-1]);c.tags[a.getAttribute('k')]=a.getAttribute('v')};ol.format.OSMXML.NAMESPACE_URIS_=[null];ol.format.OSMXML.WAY_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{'nd':ol.format.OSMXML.readNd_,'tag':ol.format.OSMXML.readTag_});ol.format.OSMXML.PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{'node':ol.format.OSMXML.readNode_,'way':ol.format.OSMXML.readWay_});ol.format.OSMXML.NODE_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{'tag':ol.format.OSMXML.readTag_});ol.format.OSMXML.prototype.readFeatures;ol.format.OSMXML.prototype.readFeaturesFromNode=function(a,b){var c=this.getReadOptions(a,b);if(a.localName=='osm'){var d=ol.xml.pushParseAndPop({nodes:{},ways:[],features:[]},ol.format.OSMXML.PARSERS_,a,[c]);for(var j=0;j<d.ways.length;j++){var e=(d.ways[j]);var f=[];for(var i=0,ii=e.ndrefs.length;i<ii;i++){var g=d.nodes[e.ndrefs[i]];ol.array.extend(f,g)}var h;if(e.ndrefs[0]==e.ndrefs[e.ndrefs.length-1]){h=new ol.geom.Polygon(null);h.setFlatCoordinates(ol.geom.GeometryLayout.XY,f,[f.length])}else{h=new ol.geom.LineString(null);h.setFlatCoordinates(ol.geom.GeometryLayout.XY,f)}ol.format.Feature.transformWithOptions(h,false,c);var k=new ol.Feature(h);k.setId(e.id);k.setProperties(e.tags);d.features.push(k)}if(d.features){return d.features}}return[]};ol.format.OSMXML.prototype.readProjection;ol.format.OSMXML.prototype.writeFeatureNode=function(a,b){};ol.format.OSMXML.prototype.writeFeaturesNode=function(a,b){};ol.format.OSMXML.prototype.writeGeometryNode=function(a,b){};bq.provide('ol.format.XLink');ol.format.XLink.NAMESPACE_URI='http://www.w3.org/1999/xlink';ol.format.XLink.readHref=function(a){return a.getAttributeNS(ol.format.XLink.NAMESPACE_URI,'href')};bq.provide('ol.format.XML');bq.require('ol.xml');ol.format.XML=function(){};ol.format.XML.prototype.read=function(a){if(ol.xml.isDocument(a)){return this.readFromDocument((a))}else if(ol.xml.isNode(a)){return this.readFromNode((a))}else if(typeof a==='string'){var b=ol.xml.parse(a);return this.readFromDocument(b)}else{return null}};ol.format.XML.prototype.readFromDocument=function(a){};ol.format.XML.prototype.readFromNode=function(a){};bq.provide('ol.format.OWS');bq.require('ol');bq.require('ol.format.XLink');bq.require('ol.format.XML');bq.require('ol.format.XSD');bq.require('ol.xml');ol.format.OWS=function(){ol.format.XML.call(this)};ol.inherits(ol.format.OWS,ol.format.XML);ol.format.OWS.prototype.readFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readFromNode(n)}}return null};ol.format.OWS.prototype.readFromNode=function(a){var b=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,a,[]);return b?b:null};ol.format.OWS.readAddress_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,a,b)};ol.format.OWS.readAllowedValues_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,a,b)};ol.format.OWS.readConstraint_=function(a,b){var c=a.getAttribute('name');if(!c){return undefined}return ol.xml.pushParseAndPop({'name':c},ol.format.OWS.CONSTRAINT_PARSERS_,a,b)};ol.format.OWS.readContactInfo_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,a,b)};ol.format.OWS.readDcp_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,a,b)};ol.format.OWS.readGet_=function(a,b){var c=ol.format.XLink.readHref(a);if(!c){return undefined}return ol.xml.pushParseAndPop({'href':c},ol.format.OWS.REQUEST_METHOD_PARSERS_,a,b)};ol.format.OWS.readHttp_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,a,b)};ol.format.OWS.readOperation_=function(a,b){var c=a.getAttribute('name');var d=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,a,b);if(!d){return undefined}var e=(b[b.length-1]);e[c]=d};ol.format.OWS.readOperationsMetadata_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,a,b)};ol.format.OWS.readPhone_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,a,b)};ol.format.OWS.readServiceIdentification_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,a,b)};ol.format.OWS.readServiceContact_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,a,b)};ol.format.OWS.readServiceProvider_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,a,b)};ol.format.OWS.readValue_=function(a,b){return ol.format.XSD.readString(a)};ol.format.OWS.NAMESPACE_URIS_=[null,'http://www.opengis.net/ows/1.1'];ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'ServiceIdentification':ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),'ServiceProvider':ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),'OperationsMetadata':ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)});ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'DeliveryPoint':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'City':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'AdministrativeArea':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'PostalCode':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Country':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ElectronicMailAddress':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Value':ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)});ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'AllowedValues':ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)});ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Phone':ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),'Address':ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)});ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'HTTP':ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)});ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Get':ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),'Post':undefined});ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'DCP':ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)});ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Operation':ol.format.OWS.readOperation_});ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Voice':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Facsimile':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Constraint':ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)});ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'IndividualName':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'PositionName':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ContactInfo':ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)});ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'Abstract':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'AccessConstraints':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Fees':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ServiceTypeVersion':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ServiceType':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{'ProviderName':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ProviderSite':ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),'ServiceContact':ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)});bq.provide('ol.geom.flat.flip');ol.geom.flat.flip.flipXY=function(a,b,c,d,e,f){var g,destOffset;if(e!==undefined){g=e;destOffset=f!==undefined?f:0}else{g=[];destOffset=0}var j=b;while(j<c){var x=a[j++];g[destOffset++]=a[j++];g[destOffset++]=x;for(var k=2;k<d;++k){g[destOffset++]=a[j++]}}g.length=destOffset;return g};bq.provide('ol.format.Polyline');bq.require('ol');bq.require('ol.asserts');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.TextFeature');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.flip');bq.require('ol.geom.flat.inflate');bq.require('ol.proj');ol.format.Polyline=function(a){var b=a?a:{};ol.format.TextFeature.call(this);this.defaultDataProjection=ol.proj.get('EPSG:4326');this.factor_=b.factor?b.factor:1e5;this.geometryLayout_=b.geometryLayout?b.geometryLayout:ol.geom.GeometryLayout.XY};ol.inherits(ol.format.Polyline,ol.format.TextFeature);ol.format.Polyline.encodeDeltas=function(a,b,c){var e=c?c:1e5;var d;var f=new Array(b);for(d=0;d<b;++d){f[d]=0}var i,ii;for(i=0,ii=a.length;i<ii;){for(d=0;d<b;++d,++i){var g=a[i];var h=g-f[d];f[d]=g;a[i]=h}}return ol.format.Polyline.encodeFloats(a,e)};ol.format.Polyline.decodeDeltas=function(a,b,c){var e=c?c:1e5;var d;var f=new Array(b);for(d=0;d<b;++d){f[d]=0}var g=ol.format.Polyline.decodeFloats(a,e);var i,ii;for(i=0,ii=g.length;i<ii;){for(d=0;d<b;++d,++i){f[d]+=g[i];g[i]=f[d]}}return g};ol.format.Polyline.encodeFloats=function(a,b){var c=b?b:1e5;var i,ii;for(i=0,ii=a.length;i<ii;++i){a[i]=Math.round(a[i]*c)}return ol.format.Polyline.encodeSignedIntegers(a)};ol.format.Polyline.decodeFloats=function(a,b){var c=b?b:1e5;var d=ol.format.Polyline.decodeSignedIntegers(a);var i,ii;for(i=0,ii=d.length;i<ii;++i){d[i]/=c}return d};ol.format.Polyline.encodeSignedIntegers=function(a){var i,ii;for(i=0,ii=a.length;i<ii;++i){var b=a[i];a[i]=(b<0)?~(b<<1):(b<<1)}return ol.format.Polyline.encodeUnsignedIntegers(a)};ol.format.Polyline.decodeSignedIntegers=function(a){var b=ol.format.Polyline.decodeUnsignedIntegers(a);var i,ii;for(i=0,ii=b.length;i<ii;++i){var c=b[i];b[i]=(c&1)?~(c>>1):(c>>1)}return b};ol.format.Polyline.encodeUnsignedIntegers=function(a){var b='';var i,ii;for(i=0,ii=a.length;i<ii;++i){b+=ol.format.Polyline.encodeUnsignedInteger(a[i])}return b};ol.format.Polyline.decodeUnsignedIntegers=function(a){var c=[];var d=0;var e=0;var i,ii;for(i=0,ii=a.length;i<ii;++i){var b=a.charCodeAt(i)-63;d|=(b&0x1f)<<e;if(b<0x20){c.push(d);d=0;e=0}else{e+=5}}return c};ol.format.Polyline.encodeUnsignedInteger=function(a){var b,encoded='';while(a>=0x20){b=(0x20|(a&0x1f))+63;encoded+=String.fromCharCode(b);a>>=5}b=a+63;encoded+=String.fromCharCode(b);return encoded};ol.format.Polyline.prototype.readFeature;ol.format.Polyline.prototype.readFeatureFromText=function(a,b){var c=this.readGeometryFromText(a,b);return new ol.Feature(c)};ol.format.Polyline.prototype.readFeatures;ol.format.Polyline.prototype.readFeaturesFromText=function(a,b){var c=this.readFeatureFromText(a,b);return[c]};ol.format.Polyline.prototype.readGeometry;ol.format.Polyline.prototype.readGeometryFromText=function(a,b){var c=ol.geom.SimpleGeometry.getStrideForLayout(this.geometryLayout_);var d=ol.format.Polyline.decodeDeltas(a,c,this.factor_);ol.geom.flat.flip.flipXY(d,0,d.length,c,d);var e=ol.geom.flat.inflate.coordinates(d,0,d.length,c);return(ol.format.Feature.transformWithOptions(new ol.geom.LineString(e,this.geometryLayout_),false,this.adaptOptions(b)))};ol.format.Polyline.prototype.readProjection;ol.format.Polyline.prototype.writeFeatureText=function(a,b){var c=a.getGeometry();if(c){return this.writeGeometryText(c,b)}else{ol.asserts.assert(false,40);return''}};ol.format.Polyline.prototype.writeFeaturesText=function(a,b){return this.writeFeatureText(a[0],b)};ol.format.Polyline.prototype.writeGeometry;ol.format.Polyline.prototype.writeGeometryText=function(a,b){a=(ol.format.Feature.transformWithOptions(a,true,this.adaptOptions(b)));var c=a.getFlatCoordinates();var d=a.getStride();ol.geom.flat.flip.flipXY(c,0,c.length,d,c);return ol.format.Polyline.encodeDeltas(c,d,this.factor_)};bq.provide('ol.format.TopoJSON');bq.require('ol');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.JSONFeature');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.proj');ol.format.TopoJSON=function(a){var b=a?a:{};ol.format.JSONFeature.call(this);this.layerName_=b.layerName;this.layers_=b.layers?b.layers:null;this.defaultDataProjection=ol.proj.get(b.defaultDataProjection?b.defaultDataProjection:'EPSG:4326')};ol.inherits(ol.format.TopoJSON,ol.format.JSONFeature);ol.format.TopoJSON.concatenateArcs_=function(a,b){var c=[];var d,arc;var i,ii;var j,jj;for(i=0,ii=a.length;i<ii;++i){d=a[i];if(i>0){c.pop()}if(d>=0){arc=b[d]}else{arc=b[~d].slice().reverse()}c.push.apply(c,arc)}for(j=0,jj=c.length;j<jj;++j){c[j]=c[j].slice()}return c};ol.format.TopoJSON.readPointGeometry_=function(a,b,c){var d=a.coordinates;if(b&&c){ol.format.TopoJSON.transformVertex_(d,b,c)}return new ol.geom.Point(d)};ol.format.TopoJSON.readMultiPointGeometry_=function(a,b,c){var d=a.coordinates;var i,ii;if(b&&c){for(i=0,ii=d.length;i<ii;++i){ol.format.TopoJSON.transformVertex_(d[i],b,c)}}return new ol.geom.MultiPoint(d)};ol.format.TopoJSON.readLineStringGeometry_=function(a,b){var c=ol.format.TopoJSON.concatenateArcs_(a.arcs,b);return new ol.geom.LineString(c)};ol.format.TopoJSON.readMultiLineStringGeometry_=function(a,b){var c=[];var i,ii;for(i=0,ii=a.arcs.length;i<ii;++i){c[i]=ol.format.TopoJSON.concatenateArcs_(a.arcs[i],b)}return new ol.geom.MultiLineString(c)};ol.format.TopoJSON.readPolygonGeometry_=function(a,b){var c=[];var i,ii;for(i=0,ii=a.arcs.length;i<ii;++i){c[i]=ol.format.TopoJSON.concatenateArcs_(a.arcs[i],b)}return new ol.geom.Polygon(c)};ol.format.TopoJSON.readMultiPolygonGeometry_=function(a,b){var c=[];var d,ringCoords,j,jj;var i,ii;for(i=0,ii=a.arcs.length;i<ii;++i){d=a.arcs[i];ringCoords=[];for(j=0,jj=d.length;j<jj;++j){ringCoords[j]=ol.format.TopoJSON.concatenateArcs_(d[j],b)}c[i]=ringCoords}return new ol.geom.MultiPolygon(c)};ol.format.TopoJSON.readFeaturesFromGeometryCollection_=function(a,b,c,d,e,f,g){var h=a.geometries;var j=[];var i,ii;for(i=0,ii=h.length;i<ii;++i){j[i]=ol.format.TopoJSON.readFeatureFromGeometry_(h[i],b,c,d,e,f,g)}return j};ol.format.TopoJSON.readFeatureFromGeometry_=function(a,b,c,d,e,f,g){var h;var i=a.type;var j=ol.format.TopoJSON.GEOMETRY_READERS_[i];if((i==='Point')||(i==='MultiPoint')){h=j(a,c,d)}else{h=j(a,b)}var k=new ol.Feature();k.setGeometry((ol.format.Feature.transformWithOptions(h,false,g)));if(a.id!==undefined){k.setId(a.id)}var l=a.properties;if(e){if(!l){l={}}l[e]=f}if(l){k.setProperties(l)}return k};ol.format.TopoJSON.prototype.readFeatures;ol.format.TopoJSON.prototype.readFeaturesFromObject=function(a,b){if(a.type=='Topology'){var c=(a);var d,scale=null,translate=null;if(c.transform){d=c.transform;scale=d.scale;translate=d.translate}var e=c.arcs;if(d){ol.format.TopoJSON.transformArcs_(e,scale,translate)}var f=[];var g=c.objects;var h=this.layerName_;var i,feature;for(i in g){if(this.layers_&&this.layers_.indexOf(i)==-1){continue}if(g[i].type==='GeometryCollection'){feature=(g[i]);f.push.apply(f,ol.format.TopoJSON.readFeaturesFromGeometryCollection_(feature,e,scale,translate,h,i,b))}else{feature=(g[i]);f.push(ol.format.TopoJSON.readFeatureFromGeometry_(feature,e,scale,translate,h,i,b))}}return f}else{return[]}};ol.format.TopoJSON.transformArcs_=function(a,b,c){var i,ii;for(i=0,ii=a.length;i<ii;++i){ol.format.TopoJSON.transformArc_(a[i],b,c)}};ol.format.TopoJSON.transformArc_=function(a,b,c){var x=0;var y=0;var d;var i,ii;for(i=0,ii=a.length;i<ii;++i){d=a[i];x+=d[0];y+=d[1];d[0]=x;d[1]=y;ol.format.TopoJSON.transformVertex_(d,b,c)}};ol.format.TopoJSON.transformVertex_=function(a,b,c){a[0]=a[0]*b[0]+c[0];a[1]=a[1]*b[1]+c[1]};ol.format.TopoJSON.prototype.readProjection;ol.format.TopoJSON.prototype.readProjectionFromObject=function(a){return this.defaultDataProjection};ol.format.TopoJSON.GEOMETRY_READERS_={'Point':ol.format.TopoJSON.readPointGeometry_,'LineString':ol.format.TopoJSON.readLineStringGeometry_,'Polygon':ol.format.TopoJSON.readPolygonGeometry_,'MultiPoint':ol.format.TopoJSON.readMultiPointGeometry_,'MultiLineString':ol.format.TopoJSON.readMultiLineStringGeometry_,'MultiPolygon':ol.format.TopoJSON.readMultiPolygonGeometry_};ol.format.TopoJSON.prototype.writeFeatureObject=function(a,b){};ol.format.TopoJSON.prototype.writeFeaturesObject=function(a,b){};ol.format.TopoJSON.prototype.writeGeometryObject=function(a,b){};ol.format.TopoJSON.prototype.readGeometryFromObject=function(){};ol.format.TopoJSON.prototype.readFeatureFromObject=function(){};bq.provide('ol.format.WFS');bq.require('ol');bq.require('ol.asserts');bq.require('ol.format.GML2');bq.require('ol.format.GML3');bq.require('ol.format.GMLBase');bq.require('ol.format.filter');bq.require('ol.format.XMLFeature');bq.require('ol.format.XSD');bq.require('ol.geom.Geometry');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.xml');ol.format.WFS=function(a){var b=a?a:{};this.featureType_=b.featureType;this.featureNS_=b.featureNS;this.gmlFormat_=b.gmlFormat?b.gmlFormat:new ol.format.GML3();this.schemaLocation_=b.schemaLocation?b.schemaLocation:ol.format.WFS.SCHEMA_LOCATIONS[ol.format.WFS.DEFAULT_VERSION];ol.format.XMLFeature.call(this)};ol.inherits(ol.format.WFS,ol.format.XMLFeature);ol.format.WFS.FEATURE_PREFIX='feature';ol.format.WFS.XMLNS='http://www.w3.org/2000/xmlns/';ol.format.WFS.OGCNS='http://www.opengis.net/ogc';ol.format.WFS.WFSNS='http://www.opengis.net/wfs';ol.format.WFS.FESNS='http://www.opengis.net/fes';ol.format.WFS.SCHEMA_LOCATIONS={'1.1.0':'http://www.opengis.net/wfs '+'http://schemas.opengis.net/wfs/1.1.0/wfs.xsd','1.0.0':'http://www.opengis.net/wfs '+'http://schemas.opengis.net/wfs/1.0.0/wfs.xsd'};ol.format.WFS.DEFAULT_VERSION='1.1.0';ol.format.WFS.prototype.getFeatureType=function(){return this.featureType_};ol.format.WFS.prototype.setFeatureType=function(a){this.featureType_=a};ol.format.WFS.prototype.readFeatures;ol.format.WFS.prototype.readFeaturesFromNode=function(a,b){var c=({'featureType':this.featureType_,'featureNS':this.featureNS_});ol.obj.assign(c,this.getReadOptions(a,b?b:{}));var d=[c];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]['featureMember']=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);var e=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,a,d,this.gmlFormat_);if(!e){e=[]}return e};ol.format.WFS.prototype.readTransactionResponse=function(a){if(ol.xml.isDocument(a)){return this.readTransactionResponseFromDocument((a))}else if(ol.xml.isNode(a)){return this.readTransactionResponseFromNode((a))}else if(typeof a==='string'){var b=ol.xml.parse(a);return this.readTransactionResponseFromDocument(b)}else{return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadata=function(a){if(ol.xml.isDocument(a)){return this.readFeatureCollectionMetadataFromDocument((a))}else if(ol.xml.isNode(a)){return this.readFeatureCollectionMetadataFromNode((a))}else if(typeof a==='string'){var b=ol.xml.parse(a);return this.readFeatureCollectionMetadataFromDocument(b)}else{return undefined}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readFeatureCollectionMetadataFromNode(n)}}return undefined};ol.format.WFS.FEATURE_COLLECTION_PARSERS_={'http://www.opengis.net/gml':{'boundedBy':ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,'bounds')}};ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(a){var b={};var c=ol.format.XSD.readNonNegativeIntegerString(a.getAttribute('numberOfFeatures'));b['numberOfFeatures']=c;return ol.xml.pushParseAndPop((b),ol.format.WFS.FEATURE_COLLECTION_PARSERS_,a,[],this.gmlFormat_)};ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={'http://www.opengis.net/wfs':{'totalInserted':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'totalUpdated':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'totalDeleted':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}};ol.format.WFS.readTransactionSummary_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,a,b)};ol.format.WFS.OGC_FID_PARSERS_={'http://www.opengis.net/ogc':{'FeatureId':ol.xml.makeArrayPusher(function(a,b){return a.getAttribute('fid')})}};ol.format.WFS.fidParser_=function(a,b){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,a,b)};ol.format.WFS.INSERT_RESULTS_PARSERS_={'http://www.opengis.net/wfs':{'Feature':ol.format.WFS.fidParser_}};ol.format.WFS.readInsertResults_=function(a,b){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,a,b)};ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={'http://www.opengis.net/wfs':{'TransactionSummary':ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,'transactionSummary'),'InsertResults':ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,'insertIds')}};ol.format.WFS.prototype.readTransactionResponseFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readTransactionResponseFromNode(n)}}return undefined};ol.format.WFS.prototype.readTransactionResponseFromNode=function(a){return ol.xml.pushParseAndPop(({}),ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,a,[])};ol.format.WFS.QUERY_SERIALIZERS_={'http://www.opengis.net/wfs':{'PropertyName':ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}};ol.format.WFS.writeFeature_=function(a,b,c){var d=c[c.length-1];var e=d['featureType'];var f=d['featureNS'];var g=d['gmlVersion'];var h=ol.xml.createElementNS(f,e);a.appendChild(h);if(g===2){ol.format.GML2.prototype.writeFeatureElement(h,b,c)}else{ol.format.GML3.prototype.writeFeatureElement(h,b,c)}};ol.format.WFS.writeOgcFidFilter_=function(a,b,c){var d=ol.xml.createElementNS(ol.format.WFS.OGCNS,'Filter');var e=ol.xml.createElementNS(ol.format.WFS.OGCNS,'FeatureId');d.appendChild(e);e.setAttribute('fid',b);a.appendChild(d)};ol.format.WFS.getTypeName_=function(a,b){a=a?a:ol.format.WFS.FEATURE_PREFIX;var c=a+':';if(b.indexOf(c)===0){return b}else{return c+b}};ol.format.WFS.writeDelete_=function(a,b,c){var d=c[c.length-1];ol.asserts.assert(b.getId()!==undefined,26);var e=d['featureType'];var f=d['featurePrefix'];var g=d['featureNS'];var h=ol.format.WFS.getTypeName_(f,e);a.setAttribute('typeName',h);ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,'xmlns:'+f,g);var i=b.getId();if(i!==undefined){ol.format.WFS.writeOgcFidFilter_(a,i,c)}};ol.format.WFS.writeUpdate_=function(a,b,c){var d=c[c.length-1];ol.asserts.assert(b.getId()!==undefined,27);var e=d['featureType'];var f=d['featurePrefix'];var g=d['featureNS'];var h=ol.format.WFS.getTypeName_(f,e);var j=b.getGeometryName();a.setAttribute('typeName',h);ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,'xmlns:'+f,g);var k=b.getId();if(k!==undefined){var l=b.getKeys();var m=[];for(var i=0,ii=l.length;i<ii;i++){var n=b.get(l[i]);if(n!==undefined){var o=l[i];if(n instanceof ol.geom.Geometry){o=j}m.push({name:o,value:n})}}ol.xml.pushSerializeAndPop(({'gmlVersion':d['gmlVersion'],node:a,'hasZ':d['hasZ'],'srsName':d['srsName']}),ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Property'),m,c);ol.format.WFS.writeOgcFidFilter_(a,k,c)}};ol.format.WFS.writeProperty_=function(a,b,c){var d=ol.xml.createElementNS(ol.format.WFS.WFSNS,'Name');var e=c[c.length-1];var f=e['gmlVersion'];a.appendChild(d);ol.format.XSD.writeStringTextNode(d,b.name);if(b.value!==undefined&&b.value!==null){var g=ol.xml.createElementNS(ol.format.WFS.WFSNS,'Value');a.appendChild(g);if(b.value instanceof ol.geom.Geometry){if(f===2){ol.format.GML2.prototype.writeGeometryElement(g,b.value,c)}else{ol.format.GML3.prototype.writeGeometryElement(g,b.value,c)}}else{ol.format.XSD.writeStringTextNode(g,b.value)}}};ol.format.WFS.writeNative_=function(a,b,c){if(b.vendorId){a.setAttribute('vendorId',b.vendorId)}if(b.safeToIgnore!==undefined){a.setAttribute('safeToIgnore',b.safeToIgnore)}if(b.value!==undefined){ol.format.XSD.writeStringTextNode(a,b.value)}};ol.format.WFS.TRANSACTION_SERIALIZERS_={'http://www.opengis.net/wfs':{'Insert':ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),'Update':ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),'Delete':ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),'Property':ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),'Native':ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}};ol.format.WFS.writeQuery_=function(a,b,c){var d=(c[c.length-1]);var e=d['featurePrefix'];var f=d['featureNS'];var g=d['propertyNames'];var h=d['srsName'];var i;if(e){i=ol.format.WFS.getTypeName_(e,b)}else{i=b}a.setAttribute('typeName',i);if(h){a.setAttribute('srsName',h)}if(f){ol.xml.setAttributeNS(a,ol.format.WFS.XMLNS,'xmlns:'+e,f)}var j=(ol.obj.assign({},d));j.node=a;ol.xml.pushSerializeAndPop(j,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('PropertyName'),g,c);var k=d['filter'];if(k){var l=ol.xml.createElementNS(ol.format.WFS.OGCNS,'Filter');a.appendChild(l);ol.format.WFS.writeFilterCondition_(l,k,c)}};ol.format.WFS.writeFilterCondition_=function(a,b,c){var d={node:a};ol.xml.pushSerializeAndPop(d,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(b.getTagName()),[b],c)};ol.format.WFS.writeBboxFilter_=function(a,b,c){var d=c[c.length-1];d['srsName']=b.srsName;ol.format.WFS.writeOgcPropertyName_(a,b.geometryName);ol.format.GML3.prototype.writeGeometryElement(a,b.extent,c)};ol.format.WFS.writeContainsFilter_=function(a,b,c){var d=c[c.length-1];d['srsName']=b.srsName;ol.format.WFS.writeOgcPropertyName_(a,b.geometryName);ol.format.GML3.prototype.writeGeometryElement(a,b.geometry,c)};ol.format.WFS.writeIntersectsFilter_=function(a,b,c){var d=c[c.length-1];d['srsName']=b.srsName;ol.format.WFS.writeOgcPropertyName_(a,b.geometryName);ol.format.GML3.prototype.writeGeometryElement(a,b.geometry,c)};ol.format.WFS.writeWithinFilter_=function(a,b,c){var d=c[c.length-1];d['srsName']=b.srsName;ol.format.WFS.writeOgcPropertyName_(a,b.geometryName);ol.format.GML3.prototype.writeGeometryElement(a,b.geometry,c)};ol.format.WFS.writeDuringFilter_=function(a,b,c){var d=ol.xml.createElementNS(ol.format.WFS.FESNS,'ValueReference');ol.format.XSD.writeStringTextNode(d,b.propertyName);a.appendChild(d);var e=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,'TimePeriod');a.appendChild(e);var f=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,'begin');e.appendChild(f);ol.format.WFS.writeTimeInstant_(f,b.begin);var g=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,'end');e.appendChild(g);ol.format.WFS.writeTimeInstant_(g,b.end)};ol.format.WFS.writeLogicalFilter_=function(a,b,c){var d={node:a};var e=b.conditions;for(var i=0,ii=e.length;i<ii;++i){var f=e[i];ol.xml.pushSerializeAndPop(d,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(f.getTagName()),[f],c)}};ol.format.WFS.writeNotFilter_=function(a,b,c){var d={node:a};var e=b.condition;ol.xml.pushSerializeAndPop(d,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(e.getTagName()),[e],c)};ol.format.WFS.writeComparisonFilter_=function(a,b,c){if(b.matchCase!==undefined){a.setAttribute('matchCase',b.matchCase.toString())}ol.format.WFS.writeOgcPropertyName_(a,b.propertyName);ol.format.WFS.writeOgcLiteral_(a,''+b.expression)};ol.format.WFS.writeIsNullFilter_=function(a,b,c){ol.format.WFS.writeOgcPropertyName_(a,b.propertyName)};ol.format.WFS.writeIsBetweenFilter_=function(a,b,c){ol.format.WFS.writeOgcPropertyName_(a,b.propertyName);var d=ol.xml.createElementNS(ol.format.WFS.OGCNS,'LowerBoundary');a.appendChild(d);ol.format.WFS.writeOgcLiteral_(d,''+b.lowerBoundary);var e=ol.xml.createElementNS(ol.format.WFS.OGCNS,'UpperBoundary');a.appendChild(e);ol.format.WFS.writeOgcLiteral_(e,''+b.upperBoundary)};ol.format.WFS.writeIsLikeFilter_=function(a,b,c){a.setAttribute('wildCard',b.wildCard);a.setAttribute('singleChar',b.singleChar);a.setAttribute('escapeChar',b.escapeChar);if(b.matchCase!==undefined){a.setAttribute('matchCase',b.matchCase.toString())}ol.format.WFS.writeOgcPropertyName_(a,b.propertyName);ol.format.WFS.writeOgcLiteral_(a,''+b.pattern)};ol.format.WFS.writeOgcExpression_=function(a,b,c){var d=ol.xml.createElementNS(ol.format.WFS.OGCNS,a);ol.format.XSD.writeStringTextNode(d,c);b.appendChild(d)};ol.format.WFS.writeOgcPropertyName_=function(a,b){ol.format.WFS.writeOgcExpression_('PropertyName',a,b)};ol.format.WFS.writeOgcLiteral_=function(a,b){ol.format.WFS.writeOgcExpression_('Literal',a,b)};ol.format.WFS.writeTimeInstant_=function(a,b){var c=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,'TimeInstant');a.appendChild(c);var d=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,'timePosition');c.appendChild(d);ol.format.XSD.writeStringTextNode(d,b)};ol.format.WFS.GETFEATURE_SERIALIZERS_={'http://www.opengis.net/wfs':{'Query':ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)},'http://www.opengis.net/ogc':{'During':ol.xml.makeChildAppender(ol.format.WFS.writeDuringFilter_),'And':ol.xml.makeChildAppender(ol.format.WFS.writeLogicalFilter_),'Or':ol.xml.makeChildAppender(ol.format.WFS.writeLogicalFilter_),'Not':ol.xml.makeChildAppender(ol.format.WFS.writeNotFilter_),'BBOX':ol.xml.makeChildAppender(ol.format.WFS.writeBboxFilter_),'Contains':ol.xml.makeChildAppender(ol.format.WFS.writeContainsFilter_),'Intersects':ol.xml.makeChildAppender(ol.format.WFS.writeIntersectsFilter_),'Within':ol.xml.makeChildAppender(ol.format.WFS.writeWithinFilter_),'PropertyIsEqualTo':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsNotEqualTo':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsLessThan':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsLessThanOrEqualTo':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsGreaterThan':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsGreaterThanOrEqualTo':ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),'PropertyIsNull':ol.xml.makeChildAppender(ol.format.WFS.writeIsNullFilter_),'PropertyIsBetween':ol.xml.makeChildAppender(ol.format.WFS.writeIsBetweenFilter_),'PropertyIsLike':ol.xml.makeChildAppender(ol.format.WFS.writeIsLikeFilter_)}};ol.format.WFS.writeFilter=function(a){var b=ol.xml.createElementNS(ol.format.WFS.OGCNS,'Filter');ol.format.WFS.writeFilterCondition_(b,a,[]);return b};ol.format.WFS.writeGetFeature_=function(a,b,c){var d=(c[c.length-1]);var e=(ol.obj.assign({},d));e.node=a;ol.xml.pushSerializeAndPop(e,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Query'),b,c)};ol.format.WFS.prototype.writeGetFeature=function(a){var b=ol.xml.createElementNS(ol.format.WFS.WFSNS,'GetFeature');b.setAttribute('service','WFS');b.setAttribute('version','1.1.0');var c;if(a){if(a.handle){b.setAttribute('handle',a.handle)}if(a.outputFormat){b.setAttribute('outputFormat',a.outputFormat)}if(a.maxFeatures!==undefined){b.setAttribute('maxFeatures',a.maxFeatures)}if(a.resultType){b.setAttribute('resultType',a.resultType)}if(a.startIndex!==undefined){b.setAttribute('startIndex',a.startIndex)}if(a.count!==undefined){b.setAttribute('count',a.count)}c=a.filter;if(a.bbox){ol.asserts.assert(a.geometryName,12);var d=ol.format.filter.bbox((a.geometryName),a.bbox,a.srsName);if(c){c=ol.format.filter.and(c,d)}else{c=d}}}ol.xml.setAttributeNS(b,'http://www.w3.org/2001/XMLSchema-instance','xsi:schemaLocation',this.schemaLocation_);var e={node:b,'srsName':a.srsName,'featureNS':a.featureNS?a.featureNS:this.featureNS_,'featurePrefix':a.featurePrefix,'geometryName':a.geometryName,'filter':c,'propertyNames':a.propertyNames?a.propertyNames:[]};ol.asserts.assert(Array.isArray(a.featureTypes),11);ol.format.WFS.writeGetFeature_(b,(a.featureTypes),[e]);return b};ol.format.WFS.prototype.writeTransaction=function(a,b,c,d){var e=[];var f=ol.xml.createElementNS(ol.format.WFS.WFSNS,'Transaction');var g=d.version?d.version:ol.format.WFS.DEFAULT_VERSION;var h=g==='1.0.0'?2:3;f.setAttribute('service','WFS');f.setAttribute('version',g);var i;var j;if(d){i=d.gmlOptions?d.gmlOptions:{};if(d.handle){f.setAttribute('handle',d.handle)}}var k=ol.format.WFS.SCHEMA_LOCATIONS[g];ol.xml.setAttributeNS(f,'http://www.w3.org/2001/XMLSchema-instance','xsi:schemaLocation',k);var l=d.featurePrefix?d.featurePrefix:ol.format.WFS.FEATURE_PREFIX;if(a){j={node:f,'featureNS':d.featureNS,'featureType':d.featureType,'featurePrefix':l,'gmlVersion':h,'hasZ':d.hasZ,'srsName':d.srsName};ol.obj.assign(j,i);ol.xml.pushSerializeAndPop(j,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Insert'),a,e)}if(b){j={node:f,'featureNS':d.featureNS,'featureType':d.featureType,'featurePrefix':l,'gmlVersion':h,'hasZ':d.hasZ,'srsName':d.srsName};ol.obj.assign(j,i);ol.xml.pushSerializeAndPop(j,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Update'),b,e)}if(c){ol.xml.pushSerializeAndPop({node:f,'featureNS':d.featureNS,'featureType':d.featureType,'featurePrefix':l,'gmlVersion':h,'srsName':d.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Delete'),c,e)}if(d.nativeElements){ol.xml.pushSerializeAndPop({node:f,'featureNS':d.featureNS,'featureType':d.featureType,'featurePrefix':l,'gmlVersion':h,'srsName':d.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory('Native'),d.nativeElements,e)}return f};ol.format.WFS.prototype.readProjection;ol.format.WFS.prototype.readProjectionFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readProjectionFromNode(n)}}return null};ol.format.WFS.prototype.readProjectionFromNode=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild){a=a.firstElementChild.firstElementChild;for(var n=a.firstElementChild;n;n=n.nextElementSibling){if(!(n.childNodes.length===0||(n.childNodes.length===1&&n.firstChild.nodeType===3))){var b=[{}];this.gmlFormat_.readGeometryElement(n,b);return ol.proj.get(b.pop().srsName)}}}return null};bq.provide('ol.format.WKT');bq.require('ol');bq.require('ol.Feature');bq.require('ol.format.Feature');bq.require('ol.format.TextFeature');bq.require('ol.geom.GeometryCollection');bq.require('ol.geom.GeometryType');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.geom.SimpleGeometry');ol.format.WKT=function(a){var b=a?a:{};ol.format.TextFeature.call(this);this.splitCollection_=b.splitCollection!==undefined?b.splitCollection:false};ol.inherits(ol.format.WKT,ol.format.TextFeature);ol.format.WKT.EMPTY='EMPTY';ol.format.WKT.Z='Z';ol.format.WKT.M='M';ol.format.WKT.ZM='ZM';ol.format.WKT.encodePointGeometry_=function(a){var b=a.getCoordinates();if(b.length===0){return''}return b.join(' ')};ol.format.WKT.encodeMultiPointGeometry_=function(a){var b=[];var c=a.getPoints();for(var i=0,ii=c.length;i<ii;++i){b.push('('+ol.format.WKT.encodePointGeometry_(c[i])+')')}return b.join(',')};ol.format.WKT.encodeGeometryCollectionGeometry_=function(a){var b=[];var c=a.getGeometries();for(var i=0,ii=c.length;i<ii;++i){b.push(ol.format.WKT.encode_(c[i]))}return b.join(',')};ol.format.WKT.encodeLineStringGeometry_=function(a){var b=a.getCoordinates();var c=[];for(var i=0,ii=b.length;i<ii;++i){c.push(b[i].join(' '))}return c.join(',')};ol.format.WKT.encodeMultiLineStringGeometry_=function(a){var b=[];var c=a.getLineStrings();for(var i=0,ii=c.length;i<ii;++i){b.push('('+ol.format.WKT.encodeLineStringGeometry_(c[i])+')')}return b.join(',')};ol.format.WKT.encodePolygonGeometry_=function(a){var b=[];var c=a.getLinearRings();for(var i=0,ii=c.length;i<ii;++i){b.push('('+ol.format.WKT.encodeLineStringGeometry_(c[i])+')')}return b.join(',')};ol.format.WKT.encodeMultiPolygonGeometry_=function(a){var b=[];var c=a.getPolygons();for(var i=0,ii=c.length;i<ii;++i){b.push('('+ol.format.WKT.encodePolygonGeometry_(c[i])+')')}return b.join(',')};ol.format.WKT.encodeGeometryLayout_=function(a){var b=a.getLayout();var c='';if(b===ol.geom.GeometryLayout.XYZ||b===ol.geom.GeometryLayout.XYZM){c+=ol.format.WKT.Z}if(b===ol.geom.GeometryLayout.XYM||b===ol.geom.GeometryLayout.XYZM){c+=ol.format.WKT.M}return c};ol.format.WKT.encode_=function(a){var b=a.getType();var c=ol.format.WKT.GeometryEncoder_[b];var d=c(a);b=b.toUpperCase();if(a instanceof ol.geom.SimpleGeometry){var e=ol.format.WKT.encodeGeometryLayout_(a);if(e.length>0){b+=' '+e}}if(d.length===0){return b+' '+ol.format.WKT.EMPTY}return b+'('+d+')'};ol.format.WKT.GeometryEncoder_={'Point':ol.format.WKT.encodePointGeometry_,'LineString':ol.format.WKT.encodeLineStringGeometry_,'Polygon':ol.format.WKT.encodePolygonGeometry_,'MultiPoint':ol.format.WKT.encodeMultiPointGeometry_,'MultiLineString':ol.format.WKT.encodeMultiLineStringGeometry_,'MultiPolygon':ol.format.WKT.encodeMultiPolygonGeometry_,'GeometryCollection':ol.format.WKT.encodeGeometryCollectionGeometry_};ol.format.WKT.prototype.parse_=function(a){var b=new ol.format.WKT.Lexer(a);var c=new ol.format.WKT.Parser(b);return c.parse()};ol.format.WKT.prototype.readFeature;ol.format.WKT.prototype.readFeatureFromText=function(a,b){var c=this.readGeometryFromText(a,b);if(c){var d=new ol.Feature();d.setGeometry(c);return d}return null};ol.format.WKT.prototype.readFeatures;ol.format.WKT.prototype.readFeaturesFromText=function(a,b){var c=[];var d=this.readGeometryFromText(a,b);if(this.splitCollection_&&d.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION){c=((d)).getGeometriesArray()}else{c=[d]}var e,features=[];for(var i=0,ii=c.length;i<ii;++i){e=new ol.Feature();e.setGeometry(c[i]);features.push(e)}return features};ol.format.WKT.prototype.readGeometry;ol.format.WKT.prototype.readGeometryFromText=function(a,b){var c=this.parse_(a);if(c){return(ol.format.Feature.transformWithOptions(c,false,b))}else{return null}};ol.format.WKT.prototype.writeFeature;ol.format.WKT.prototype.writeFeatureText=function(a,b){var c=a.getGeometry();if(c){return this.writeGeometryText(c,b)}return''};ol.format.WKT.prototype.writeFeatures;ol.format.WKT.prototype.writeFeaturesText=function(a,b){if(a.length==1){return this.writeFeatureText(a[0],b)}var c=[];for(var i=0,ii=a.length;i<ii;++i){c.push(a[i].getGeometry())}var d=new ol.geom.GeometryCollection(c);return this.writeGeometryText(d,b)};ol.format.WKT.prototype.writeGeometry;ol.format.WKT.prototype.writeGeometryText=function(a,b){return ol.format.WKT.encode_((ol.format.Feature.transformWithOptions(a,true,b)))};ol.format.WKT.TokenType_={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6};ol.format.WKT.Lexer=function(a){this.wkt=a;this.index_=-1};ol.format.WKT.Lexer.prototype.isAlpha_=function(c){return c>='a'&&c<='z'||c>='A'&&c<='Z'};ol.format.WKT.Lexer.prototype.isNumeric_=function(c,a){var b=a!==undefined?a:false;return c>='0'&&c<='9'||c=='.'&&!b};ol.format.WKT.Lexer.prototype.isWhiteSpace_=function(c){return c==' '||c=='\t'||c=='\r'||c=='\n'};ol.format.WKT.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)};ol.format.WKT.Lexer.prototype.nextToken=function(){var c=this.nextChar_();var a={position:this.index_,value:c};if(c=='('){a.type=ol.format.WKT.TokenType_.LEFT_PAREN}else if(c==','){a.type=ol.format.WKT.TokenType_.COMMA}else if(c==')'){a.type=ol.format.WKT.TokenType_.RIGHT_PAREN}else if(this.isNumeric_(c)||c=='-'){a.type=ol.format.WKT.TokenType_.NUMBER;a.value=this.readNumber_()}else if(this.isAlpha_(c)){a.type=ol.format.WKT.TokenType_.TEXT;a.value=this.readText_()}else if(this.isWhiteSpace_(c)){return this.nextToken()}else if(c===''){a.type=ol.format.WKT.TokenType_.EOF}else{throw new Error('Unexpected character: '+c);}return a};ol.format.WKT.Lexer.prototype.readNumber_=function(){var c,index=this.index_;var a=false;var b=false;do{if(c=='.'){a=true}else if(c=='e'||c=='E'){b=true}c=this.nextChar_()}while(this.isNumeric_(c,a)||!b&&(c=='e'||c=='E')||b&&(c=='-'||c=='+'));return parseFloat(this.wkt.substring(index,this.index_--))};ol.format.WKT.Lexer.prototype.readText_=function(){var c,index=this.index_;do{c=this.nextChar_()}while(this.isAlpha_(c));return this.wkt.substring(index,this.index_--).toUpperCase()};ol.format.WKT.Parser=function(a){this.lexer_=a;this.token_;this.layout_=ol.geom.GeometryLayout.XY};ol.format.WKT.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()};ol.format.WKT.Parser.prototype.isTokenType=function(a){var b=this.token_.type==a;return b};ol.format.WKT.Parser.prototype.match=function(a){var b=this.isTokenType(a);if(b){this.consume_()}return b};ol.format.WKT.Parser.prototype.parse=function(){this.consume_();var a=this.parseGeometry_();return a};ol.format.WKT.Parser.prototype.parseGeometryLayout_=function(){var a=ol.geom.GeometryLayout.XY;var b=this.token_;if(this.isTokenType(ol.format.WKT.TokenType_.TEXT)){var c=b.value;if(c===ol.format.WKT.Z){a=ol.geom.GeometryLayout.XYZ}else if(c===ol.format.WKT.M){a=ol.geom.GeometryLayout.XYM}else if(c===ol.format.WKT.ZM){a=ol.geom.GeometryLayout.XYZM}if(a!==ol.geom.GeometryLayout.XY){this.consume_()}}return a};ol.format.WKT.Parser.prototype.parseGeometry_=function(){var a=this.token_;if(this.match(ol.format.WKT.TokenType_.TEXT)){var b=a.value;this.layout_=this.parseGeometryLayout_();if(b==ol.geom.GeometryType.GEOMETRY_COLLECTION.toUpperCase()){var c=this.parseGeometryCollectionText_();return new ol.geom.GeometryCollection(c)}else{var d=ol.format.WKT.Parser.GeometryParser_[b];var e=ol.format.WKT.Parser.GeometryConstructor_[b];if(!d||!e){throw new Error('Invalid geometry type: '+b);}var f=d.call(this);return new e(f,this.layout_)}}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=[];do{a.push(this.parseGeometry_())}while(this.match(ol.format.WKT.TokenType_.COMMA));if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parsePointText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=this.parsePoint_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return null}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parseLineStringText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=this.parsePointList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parsePolygonText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parseMultiPointText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a;if(this.token_.type==ol.format.WKT.TokenType_.LEFT_PAREN){a=this.parsePointTextList_()}else{a=this.parsePointList_()}if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var a=this.parsePolygonTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN)){return a}}else if(this.isEmptyGeometry_()){return[]}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parsePoint_=function(){var a=[];var b=this.layout_.length;for(var i=0;i<b;++i){var c=this.token_;if(this.match(ol.format.WKT.TokenType_.NUMBER)){a.push(c.value)}else{break}}if(a.length==b){return a}throw new Error(this.formatErrorMessage_());};ol.format.WKT.Parser.prototype.parsePointList_=function(){var a=[this.parsePoint_()];while(this.match(ol.format.WKT.TokenType_.COMMA)){a.push(this.parsePoint_())}return a};ol.format.WKT.Parser.prototype.parsePointTextList_=function(){var a=[this.parsePointText_()];while(this.match(ol.format.WKT.TokenType_.COMMA)){a.push(this.parsePointText_())}return a};ol.format.WKT.Parser.prototype.parseLineStringTextList_=function(){var a=[this.parseLineStringText_()];while(this.match(ol.format.WKT.TokenType_.COMMA)){a.push(this.parseLineStringText_())}return a};ol.format.WKT.Parser.prototype.parsePolygonTextList_=function(){var a=[this.parsePolygonText_()];while(this.match(ol.format.WKT.TokenType_.COMMA)){a.push(this.parsePolygonText_())}return a};ol.format.WKT.Parser.prototype.isEmptyGeometry_=function(){var a=this.isTokenType(ol.format.WKT.TokenType_.TEXT)&&this.token_.value==ol.format.WKT.EMPTY;if(a){this.consume_()}return a};ol.format.WKT.Parser.prototype.formatErrorMessage_=function(){return'Unexpected `'+this.token_.value+'` at position '+this.token_.position+' in `'+this.lexer_.wkt+'`'};ol.format.WKT.Parser.GeometryConstructor_={'POINT':ol.geom.Point,'LINESTRING':ol.geom.LineString,'POLYGON':ol.geom.Polygon,'MULTIPOINT':ol.geom.MultiPoint,'MULTILINESTRING':ol.geom.MultiLineString,'MULTIPOLYGON':ol.geom.MultiPolygon};ol.format.WKT.Parser.GeometryParser_={'POINT':ol.format.WKT.Parser.prototype.parsePointText_,'LINESTRING':ol.format.WKT.Parser.prototype.parseLineStringText_,'POLYGON':ol.format.WKT.Parser.prototype.parsePolygonText_,'MULTIPOINT':ol.format.WKT.Parser.prototype.parseMultiPointText_,'MULTILINESTRING':ol.format.WKT.Parser.prototype.parseMultiLineStringText_,'MULTIPOLYGON':ol.format.WKT.Parser.prototype.parseMultiPolygonText_};bq.provide('ol.format.WMSCapabilities');bq.require('ol');bq.require('ol.format.XLink');bq.require('ol.format.XML');bq.require('ol.format.XSD');bq.require('ol.xml');ol.format.WMSCapabilities=function(){ol.format.XML.call(this);this.version=undefined};ol.inherits(ol.format.WMSCapabilities,ol.format.XML);ol.format.WMSCapabilities.prototype.read;ol.format.WMSCapabilities.prototype.readFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readFromNode(n)}}return null};ol.format.WMSCapabilities.prototype.readFromNode=function(a){this.version=a.getAttribute('version').trim();var b=ol.xml.pushParseAndPop({'version':this.version},ol.format.WMSCapabilities.PARSERS_,a,[]);return b?b:null};ol.format.WMSCapabilities.readAttribution_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,a,b)};ol.format.WMSCapabilities.readBoundingBox_=function(a,b){var c=[ol.format.XSD.readDecimalString(a.getAttribute('minx')),ol.format.XSD.readDecimalString(a.getAttribute('miny')),ol.format.XSD.readDecimalString(a.getAttribute('maxx')),ol.format.XSD.readDecimalString(a.getAttribute('maxy'))];var d=[ol.format.XSD.readDecimalString(a.getAttribute('resx')),ol.format.XSD.readDecimalString(a.getAttribute('resy'))];return{'crs':a.getAttribute('CRS'),'extent':c,'res':d}};ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,a,b);if(!c){return undefined}var d=(c['westBoundLongitude']);var e=(c['southBoundLatitude']);var f=(c['eastBoundLongitude']);var g=(c['northBoundLatitude']);if(d===undefined||e===undefined||f===undefined||g===undefined){return undefined}return[d,e,f,g]};ol.format.WMSCapabilities.readCapability_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,a,b)};ol.format.WMSCapabilities.readService_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactInformation_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactPersonPrimary_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,a,b)};ol.format.WMSCapabilities.readContactAddress_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,a,b)};ol.format.WMSCapabilities.readException_=function(a,b){return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,a,b)};ol.format.WMSCapabilities.readCapabilityLayer_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,a,b)};ol.format.WMSCapabilities.readLayer_=function(c,d){var e=(d[d.length-1]);var f=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,c,d);if(!f){return undefined}var g=ol.format.XSD.readBooleanString(c.getAttribute('queryable'));if(g===undefined){g=e['queryable']}f['queryable']=g!==undefined?g:false;var h=ol.format.XSD.readNonNegativeIntegerString(c.getAttribute('cascaded'));if(h===undefined){h=e['cascaded']}f['cascaded']=h;var i=ol.format.XSD.readBooleanString(c.getAttribute('opaque'));if(i===undefined){i=e['opaque']}f['opaque']=i!==undefined?i:false;var j=ol.format.XSD.readBooleanString(c.getAttribute('noSubsets'));if(j===undefined){j=e['noSubsets']}f['noSubsets']=j!==undefined?j:false;var k=ol.format.XSD.readDecimalString(c.getAttribute('fixedWidth'));if(!k){k=e['fixedWidth']}f['fixedWidth']=k;var l=ol.format.XSD.readDecimalString(c.getAttribute('fixedHeight'));if(!l){l=e['fixedHeight']}f['fixedHeight']=l;var m=['Style','CRS','AuthorityURL'];m.forEach(function(a){if(a in e){var b=f[a]||[];f[a]=b.concat(e[a])}});var n=['EX_GeographicBoundingBox','BoundingBox','Dimension','Attribution','MinScaleDenominator','MaxScaleDenominator'];n.forEach(function(a){if(!(a in f)){var b=e[a];f[a]=b}});return f};ol.format.WMSCapabilities.readDimension_=function(a,b){var c={'name':a.getAttribute('name'),'units':a.getAttribute('units'),'unitSymbol':a.getAttribute('unitSymbol'),'default':a.getAttribute('default'),'multipleValues':ol.format.XSD.readBooleanString(a.getAttribute('multipleValues')),'nearestValue':ol.format.XSD.readBooleanString(a.getAttribute('nearestValue')),'current':ol.format.XSD.readBooleanString(a.getAttribute('current')),'values':ol.format.XSD.readString(a)};return c};ol.format.WMSCapabilities.readFormatOnlineresource_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,a,b)};ol.format.WMSCapabilities.readRequest_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,a,b)};ol.format.WMSCapabilities.readDCPType_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,a,b)};ol.format.WMSCapabilities.readHTTP_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,a,b)};ol.format.WMSCapabilities.readOperationType_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,a,b)};ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(a,b){var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(c){var d=[ol.format.XSD.readNonNegativeIntegerString(a.getAttribute('width')),ol.format.XSD.readNonNegativeIntegerString(a.getAttribute('height'))];c['size']=d;return c}return undefined};ol.format.WMSCapabilities.readAuthorityURL_=function(a,b){var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(c){c['name']=a.getAttribute('name');return c}return undefined};ol.format.WMSCapabilities.readMetadataURL_=function(a,b){var c=ol.format.WMSCapabilities.readFormatOnlineresource_(a,b);if(c){c['type']=a.getAttribute('type');return c}return undefined};ol.format.WMSCapabilities.readStyle_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,a,b)};ol.format.WMSCapabilities.readKeywordList_=function(a,b){return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,a,b)};ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,'http://www.opengis.net/wms'];ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Service':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),'Capability':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)});ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Request':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),'Exception':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),'Layer':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)});ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Abstract':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'KeywordList':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),'OnlineResource':ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),'ContactInformation':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),'Fees':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'AccessConstraints':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'LayerLimit':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MaxWidth':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MaxHeight':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'ContactPersonPrimary':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),'ContactPosition':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ContactAddress':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),'ContactVoiceTelephone':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ContactFacsimileTelephone':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ContactElectronicMailAddress':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'ContactPerson':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'ContactOrganization':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'AddressType':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Address':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'City':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'StateOrProvince':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'PostCode':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Country':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)});ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Format':ol.xml.makeArrayPusher(ol.format.XSD.readString)});ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Abstract':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'KeywordList':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),'CRS':ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),'EX_GeographicBoundingBox':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),'BoundingBox':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),'Dimension':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),'Attribution':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),'AuthorityURL':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),'Identifier':ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),'MetadataURL':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),'DataURL':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),'FeatureListURL':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),'Style':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),'MinScaleDenominator':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'MaxScaleDenominator':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'Layer':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)});ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'OnlineResource':ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),'LogoURL':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)});ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'westBoundLongitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'eastBoundLongitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'southBoundLatitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'northBoundLatitude':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)});ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'GetCapabilities':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),'GetMap':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),'GetFeatureInfo':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)});ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Format':ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),'DCPType':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)});ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'HTTP':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)});ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Get':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),'Post':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Name':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Abstract':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'LegendURL':ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),'StyleSheetURL':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),'StyleURL':ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)});ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Format':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'OnlineResource':ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)});ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{'Keyword':ol.xml.makeArrayPusher(ol.format.XSD.readString)});bq.provide('ol.format.WMSGetFeatureInfo');bq.require('ol');bq.require('ol.array');bq.require('ol.format.GML2');bq.require('ol.format.XMLFeature');bq.require('ol.obj');bq.require('ol.xml');ol.format.WMSGetFeatureInfo=function(a){var b=a?a:{};this.featureNS_='http://mapserver.gis.umn.edu/mapserver';this.gmlFormat_=new ol.format.GML2();this.layers_=b.layers?b.layers:null;ol.format.XMLFeature.call(this)};ol.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature);ol.format.WMSGetFeatureInfo.featureIdentifier_='_feature';ol.format.WMSGetFeatureInfo.layerIdentifier_='_layer';ol.format.WMSGetFeatureInfo.prototype.getLayers=function(){return this.layers_};ol.format.WMSGetFeatureInfo.prototype.setLayers=function(a){this.layers_=a};ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(a,b){a.setAttribute('namespaceURI',this.featureNS_);var c=a.localName;var d=[];if(a.childNodes.length===0){return d}if(c=='msGMLOutput'){for(var i=0,ii=a.childNodes.length;i<ii;i++){var e=a.childNodes[i];if(e.nodeType!==Node.ELEMENT_NODE){continue}var f=b[0];var g=ol.format.WMSGetFeatureInfo.layerIdentifier_;var h=e.localName.replace(g,'');if(this.layers_&&!ol.array.includes(this.layers_,h)){continue}var j=h+ol.format.WMSGetFeatureInfo.featureIdentifier_;f['featureType']=j;f['featureNS']=this.featureNS_;var k={};k[j]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var l=ol.xml.makeStructureNS([f['featureNS'],null],k);e.setAttribute('namespaceURI',this.featureNS_);var m=ol.xml.pushParseAndPop([],l,e,b,this.gmlFormat_);if(m){ol.array.extend(d,m)}}}if(c=='FeatureCollection'){var n=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,a,[{}],this.gmlFormat_);if(n){d=n}}return d};ol.format.WMSGetFeatureInfo.prototype.readFeatures;ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(a,b){var c={};if(b){ol.obj.assign(c,this.getReadOptions(a,b))}return this.readFeatures_(a,[c])};ol.format.WMSGetFeatureInfo.prototype.writeFeatureNode=function(a,b){};ol.format.WMSGetFeatureInfo.prototype.writeFeaturesNode=function(a,b){};ol.format.WMSGetFeatureInfo.prototype.writeGeometryNode=function(a,b){};bq.provide('ol.format.WMTSCapabilities');bq.require('ol');bq.require('ol.extent');bq.require('ol.format.OWS');bq.require('ol.format.XLink');bq.require('ol.format.XML');bq.require('ol.format.XSD');bq.require('ol.xml');ol.format.WMTSCapabilities=function(){ol.format.XML.call(this);this.owsParser_=new ol.format.OWS()};ol.inherits(ol.format.WMTSCapabilities,ol.format.XML);ol.format.WMTSCapabilities.prototype.read;ol.format.WMTSCapabilities.prototype.readFromDocument=function(a){for(var n=a.firstChild;n;n=n.nextSibling){if(n.nodeType==Node.ELEMENT_NODE){return this.readFromNode(n)}}return null};ol.format.WMTSCapabilities.prototype.readFromNode=function(a){var b=a.getAttribute('version').trim();var c=this.owsParser_.readFromNode(a);if(!c){return null}c['version']=b;c=ol.xml.pushParseAndPop(c,ol.format.WMTSCapabilities.PARSERS_,a,[]);return c?c:null};ol.format.WMTSCapabilities.readContents_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readLayer_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,a,b)};ol.format.WMTSCapabilities.readTileMatrixSet_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readStyle_=function(a,b){var c=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,a,b);if(!c){return undefined}var d=a.getAttribute('isDefault')==='true';c['isDefault']=d;return c};ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,a,b)};ol.format.WMTSCapabilities.readDimensions_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.DIMENSION_PARSERS_,a,b)};ol.format.WMTSCapabilities.readResourceUrl_=function(a,b){var c=a.getAttribute('format');var d=a.getAttribute('template');var e=a.getAttribute('resourceType');var f={};if(c){f['format']=c}if(d){f['template']=d}if(e){f['resourceType']=e}return f};ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(a,b){var c=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,a,b);if(c.length!=2){return undefined}return ol.extent.boundingExtent(c)};ol.format.WMTSCapabilities.readLegendUrl_=function(a,b){var c={};c['format']=a.getAttribute('format');c['href']=ol.format.XLink.readHref(a);return c};ol.format.WMTSCapabilities.readCoordinates_=function(a,b){var c=ol.format.XSD.readString(a).split(' ');if(!c||c.length!=2){return undefined}var x=+c[0];var y=+c[1];if(isNaN(x)||isNaN(y)){return undefined}return[x,y]};ol.format.WMTSCapabilities.readTileMatrix_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,a,b)};ol.format.WMTSCapabilities.readTileMatrixLimitsList_=function(a,b){return ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.TMS_LIMITS_LIST_PARSERS_,a,b)};ol.format.WMTSCapabilities.readTileMatrixLimits_=function(a,b){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LIMITS_PARSERS_,a,b)};ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,'http://www.opengis.net/wmts/1.0'];ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,'http://www.opengis.net/ows/1.1'];ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'Contents':ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)});ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'Layer':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),'TileMatrixSet':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)});ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'Style':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),'Format':ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),'TileMatrixSetLink':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),'Dimension':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readDimensions_),'ResourceURL':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Abstract':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'WGS84BoundingBox':ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),'Identifier':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'LegendURL':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'Title':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Identifier':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'TileMatrixSet':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'TileMatrixSetLimits':ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readTileMatrixLimitsList_)});ol.format.WMTSCapabilities.TMS_LIMITS_LIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'TileMatrixLimits':ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readTileMatrixLimits_)});ol.format.WMTSCapabilities.TMS_LIMITS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'TileMatrix':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'MinTileRow':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MaxTileRow':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MinTileCol':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MaxTileCol':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)});ol.format.WMTSCapabilities.DIMENSION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'Default':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Value':ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'Identifier':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'LowerCorner':ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),'UpperCorner':ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)});ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'WellKnownScaleSet':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'TileMatrix':ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'SupportedCRS':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),'Identifier':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{'TopLeftCorner':ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),'ScaleDenominator':ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),'TileWidth':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'TileHeight':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MatrixWidth':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),'MatrixHeight':ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{'Identifier':ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}));bq.provide('ol.GeolocationProperty');ol.GeolocationProperty={ACCURACY:'accuracy',ACCURACY_GEOMETRY:'accuracyGeometry',ALTITUDE:'altitude',ALTITUDE_ACCURACY:'altitudeAccuracy',HEADING:'heading',POSITION:'position',PROJECTION:'projection',SPEED:'speed',TRACKING:'tracking',TRACKING_OPTIONS:'trackingOptions'};bq.provide('ol.Geolocation');bq.require('ol');bq.require('ol.GeolocationProperty');bq.require('ol.Object');bq.require('ol.Sphere');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.geom.Polygon');bq.require('ol.has');bq.require('ol.math');bq.require('ol.proj');bq.require('ol.proj.EPSG4326');ol.Geolocation=function(a){ol.Object.call(this);var b=a||{};this.position_=null;this.transform_=ol.proj.identityTransform;this.sphere_=new ol.Sphere(ol.proj.EPSG4326.RADIUS);this.watchId_=undefined;ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.PROJECTION),this.handleProjectionChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.TRACKING),this.handleTrackingChanged_,this);if(b.projection!==undefined){this.setProjection(b.projection)}if(b.trackingOptions!==undefined){this.setTrackingOptions(b.trackingOptions)}this.setTracking(b.tracking!==undefined?b.tracking:false)};ol.inherits(ol.Geolocation,ol.Object);ol.Geolocation.prototype.disposeInternal=function(){this.setTracking(false);ol.Object.prototype.disposeInternal.call(this)};ol.Geolocation.prototype.handleProjectionChanged_=function(){var a=this.getProjection();if(a){this.transform_=ol.proj.getTransformFromProjections(ol.proj.get('EPSG:4326'),a);if(this.position_){this.set(ol.GeolocationProperty.POSITION,this.transform_(this.position_))}}};ol.Geolocation.prototype.handleTrackingChanged_=function(){if(ol.has.GEOLOCATION){var a=this.getTracking();if(a&&this.watchId_===undefined){this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions())}else if(!a&&this.watchId_!==undefined){navigator.geolocation.clearWatch(this.watchId_);this.watchId_=undefined}}};ol.Geolocation.prototype.positionChange_=function(a){var b=a.coords;this.set(ol.GeolocationProperty.ACCURACY,b.accuracy);this.set(ol.GeolocationProperty.ALTITUDE,b.altitude===null?undefined:b.altitude);this.set(ol.GeolocationProperty.ALTITUDE_ACCURACY,b.altitudeAccuracy===null?undefined:b.altitudeAccuracy);this.set(ol.GeolocationProperty.HEADING,b.heading===null?undefined:ol.math.toRadians(b.heading));if(!this.position_){this.position_=[b.longitude,b.latitude]}else{this.position_[0]=b.longitude;this.position_[1]=b.latitude}var c=this.transform_(this.position_);this.set(ol.GeolocationProperty.POSITION,c);this.set(ol.GeolocationProperty.SPEED,b.speed===null?undefined:b.speed);var d=ol.geom.Polygon.circular(this.sphere_,this.position_,b.accuracy);d.applyTransform(this.transform_);this.set(ol.GeolocationProperty.ACCURACY_GEOMETRY,d);this.changed()};ol.Geolocation.prototype.positionError_=function(a){a.type=ol.events.EventType.ERROR;this.setTracking(false);this.dispatchEvent((a))};ol.Geolocation.prototype.getAccuracy=function(){return(this.get(ol.GeolocationProperty.ACCURACY))};ol.Geolocation.prototype.getAccuracyGeometry=function(){return(this.get(ol.GeolocationProperty.ACCURACY_GEOMETRY)||null)};ol.Geolocation.prototype.getAltitude=function(){return(this.get(ol.GeolocationProperty.ALTITUDE))};ol.Geolocation.prototype.getAltitudeAccuracy=function(){return(this.get(ol.GeolocationProperty.ALTITUDE_ACCURACY))};ol.Geolocation.prototype.getHeading=function(){return(this.get(ol.GeolocationProperty.HEADING))};ol.Geolocation.prototype.getPosition=function(){return(this.get(ol.GeolocationProperty.POSITION))};ol.Geolocation.prototype.getProjection=function(){return(this.get(ol.GeolocationProperty.PROJECTION))};ol.Geolocation.prototype.getSpeed=function(){return(this.get(ol.GeolocationProperty.SPEED))};ol.Geolocation.prototype.getTracking=function(){return(this.get(ol.GeolocationProperty.TRACKING))};ol.Geolocation.prototype.getTrackingOptions=function(){return(this.get(ol.GeolocationProperty.TRACKING_OPTIONS))};ol.Geolocation.prototype.setProjection=function(a){this.set(ol.GeolocationProperty.PROJECTION,ol.proj.get(a))};ol.Geolocation.prototype.setTracking=function(a){this.set(ol.GeolocationProperty.TRACKING,a)};ol.Geolocation.prototype.setTrackingOptions=function(a){this.set(ol.GeolocationProperty.TRACKING_OPTIONS,a)};bq.provide('ol.geom.Circle');bq.require('ol');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.GeometryType');bq.require('ol.geom.SimpleGeometry');bq.require('ol.geom.flat.deflate');ol.geom.Circle=function(a,b,c){ol.geom.SimpleGeometry.call(this);var d=b?b:0;this.setCenterAndRadius(a,d,c)};ol.inherits(ol.geom.Circle,ol.geom.SimpleGeometry);ol.geom.Circle.prototype.clone=function(){var a=new ol.geom.Circle(null);a.setFlatCoordinates(this.layout,this.flatCoordinates.slice());return a};ol.geom.Circle.prototype.closestPointXY=function(x,y,a,b){var c=this.flatCoordinates;var d=x-c[0];var e=y-c[1];var f=d*d+e*e;if(f<b){var i;if(f===0){for(i=0;i<this.stride;++i){a[i]=c[i]}}else{var g=this.getRadius()/Math.sqrt(f);a[0]=c[0]+g*d;a[1]=c[1]+g*e;for(i=2;i<this.stride;++i){a[i]=c[i]}}a.length=this.stride;return f}else{return b}};ol.geom.Circle.prototype.containsXY=function(x,y){var a=this.flatCoordinates;var b=x-a[0];var c=y-a[1];return b*b+c*c<=this.getRadiusSquared_()};ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)};ol.geom.Circle.prototype.computeExtent=function(a){var b=this.flatCoordinates;var c=b[this.stride]-b[0];return ol.extent.createOrUpdate(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())};ol.geom.Circle.prototype.getRadiusSquared_=function(){var a=this.flatCoordinates[this.stride]-this.flatCoordinates[0];var b=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return a*a+b*b};ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE};ol.geom.Circle.prototype.intersectsExtent=function(a){var b=this.getExtent();if(ol.extent.intersects(a,b)){var c=this.getCenter();if(a[0]<=c[0]&&a[2]>=c[0]){return true}if(a[1]<=c[1]&&a[3]>=c[1]){return true}return ol.extent.forEachCorner(a,this.intersectsCoordinate,this)}return false};ol.geom.Circle.prototype.setCenter=function(a){var b=this.stride;var c=this.flatCoordinates[b]-this.flatCoordinates[0];var d=a.slice();d[b]=d[0]+c;var i;for(i=1;i<b;++i){d[b+i]=a[i]}this.setFlatCoordinates(this.layout,d)};ol.geom.Circle.prototype.setCenterAndRadius=function(a,b,c){if(!a){this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)}else{this.setLayout(c,a,0);if(!this.flatCoordinates){this.flatCoordinates=[]}var d=this.flatCoordinates;var e=ol.geom.flat.deflate.coordinate(d,0,a,this.stride);d[e++]=d[0]+b;var i,ii;for(i=1,ii=this.stride;i<ii;++i){d[e++]=d[i]}d.length=e;this.changed()}};ol.geom.Circle.prototype.getCoordinates=function(){};ol.geom.Circle.prototype.setCoordinates=function(a,b){};ol.geom.Circle.prototype.setFlatCoordinates=function(a,b){this.setFlatCoordinatesInternal(a,b);this.changed()};ol.geom.Circle.prototype.setRadius=function(a){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+a;this.changed()};ol.geom.Circle.prototype.transform;bq.provide('ol.geom.flat.geodesic');bq.require('ol.math');bq.require('ol.proj');ol.geom.flat.geodesic.line_=function(c,d,e){var f=[];var g=c(0);var h=c(1);var a=d(g);var b=d(h);var i=[h,g];var j=[b,a];var k=[1,0];var l={};var n=1e5;var o,m,fracA,fracB,fracM,key;while(--n>0&&k.length>0){fracA=k.pop();g=i.pop();a=j.pop();key=fracA.toString();if(!(key in l)){f.push(a[0],a[1]);l[key]=true}fracB=k.pop();h=i.pop();b=j.pop();fracM=(fracA+fracB)/2;o=c(fracM);m=d(o);if(ol.math.squaredSegmentDistance(m[0],m[1],a[0],a[1],b[0],b[1])<e){f.push(b[0],b[1]);key=fracB.toString();l[key]=true}else{k.push(fracB,fracM,fracM,fracA);j.push(b,m,m,a);i.push(h,o,o,g)}}return f};ol.geom.flat.geodesic.greatCircleArc=function(h,i,j,k,l,m){var n=ol.proj.get('EPSG:4326');var o=Math.cos(ol.math.toRadians(i));var p=Math.sin(ol.math.toRadians(i));var q=Math.cos(ol.math.toRadians(k));var r=Math.sin(ol.math.toRadians(k));var s=Math.cos(ol.math.toRadians(j-h));var t=Math.sin(ol.math.toRadians(j-h));var d=p*r+o*q*s;return ol.geom.flat.geodesic.line_(function(a){if(1<=d){return[j,k]}var D=a*Math.acos(d);var b=Math.cos(D);var c=Math.sin(D);var y=t*q;var x=o*r-p*q*s;var e=Math.atan2(y,x);var f=Math.asin(p*b+o*c*Math.cos(e));var g=ol.math.toRadians(h)+Math.atan2(Math.sin(e)*c*o,b-p*Math.sin(f));return[ol.math.toDegrees(g),ol.math.toDegrees(f)]},ol.proj.getTransform(n,l),m)};ol.geom.flat.geodesic.meridian=function(b,c,d,e,f){var g=ol.proj.get('EPSG:4326');return ol.geom.flat.geodesic.line_(function(a){return[b,c+((d-c)*a)]},ol.proj.getTransform(g,e),f)};ol.geom.flat.geodesic.parallel=function(b,c,d,e,f){var g=ol.proj.get('EPSG:4326');return ol.geom.flat.geodesic.line_(function(a){return[c+((d-c)*a),b]},ol.proj.getTransform(g,e),f)};bq.provide('ol.geom.flat.topology');bq.require('ol.geom.flat.area');ol.geom.flat.topology.lineStringIsClosed=function(a,b,c,d){var e=c-d;if(a[b]===a[e]&&a[b+1]===a[e+1]&&(c-b)/d>3){return!!ol.geom.flat.area.linearRing(a,b,c,d)}return false};bq.provide('ol.Graticule');bq.require('ol.coordinate');bq.require('ol.extent');bq.require('ol.geom.GeometryLayout');bq.require('ol.geom.LineString');bq.require('ol.geom.Point');bq.require('ol.geom.flat.geodesic');bq.require('ol.math');bq.require('ol.proj');bq.require('ol.render.EventType');bq.require('ol.style.Fill');bq.require('ol.style.Stroke');bq.require('ol.style.Text');ol.Graticule=function(a){var b=a||{};this.map_=null;this.projection_=null;this.maxLat_=Infinity;this.maxLon_=Infinity;this.minLat_=-Infinity;this.minLon_=-Infinity;this.maxLatP_=Infinity;this.maxLonP_=Infinity;this.minLatP_=-Infinity;this.minLonP_=-Infinity;this.targetSize_=b.targetSize!==undefined?b.targetSize:100;this.maxLines_=b.maxLines!==undefined?b.maxLines:100;this.meridians_=[];this.parallels_=[];this.strokeStyle_=b.strokeStyle!==undefined?b.strokeStyle:ol.Graticule.DEFAULT_STROKE_STYLE_;this.fromLonLatTransform_=undefined;this.toLonLatTransform_=undefined;this.projectionCenterLonLat_=null;this.meridiansLabels_=null;this.parallelsLabels_=null;if(b.showLabels==true){var c=ol.coordinate.degreesToStringHDMS;this.lonLabelFormatter_=b.lonLabelFormatter==undefined?c.bind(this,'EW'):b.lonLabelFormatter;this.latLabelFormatter_=b.latLabelFormatter==undefined?c.bind(this,'NS'):b.latLabelFormatter;this.lonLabelPosition_=b.lonLabelPosition==undefined?0:b.lonLabelPosition;this.latLabelPosition_=b.latLabelPosition==undefined?1:b.latLabelPosition;this.lonLabelStyle_=b.lonLabelStyle!==undefined?b.lonLabelStyle:new ol.style.Text({font:'12px Calibri,sans-serif',textBaseline:'bottom',fill:new ol.style.Fill({color:'rgba(0,0,0,1)'}),stroke:new ol.style.Stroke({color:'rgba(255,255,255,1)',width:3})});this.latLabelStyle_=b.latLabelStyle!==undefined?b.latLabelStyle:new ol.style.Text({font:'12px Calibri,sans-serif',textAlign:'end',fill:new ol.style.Fill({color:'rgba(0,0,0,1)'}),stroke:new ol.style.Stroke({color:'rgba(255,255,255,1)',width:3})});this.meridiansLabels_=[];this.parallelsLabels_=[]}this.setMap(b.map!==undefined?b.map:null)};ol.Graticule.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:'rgba(0,0,0,0.2)'});ol.Graticule.intervals_=[90,45,30,20,10,5,2,1,0.5,0.2,0.1,0.05,0.01,0.005,0.002,0.001];ol.Graticule.prototype.addMeridian_=function(a,b,c,d,e,f){var g=this.getMeridian_(a,b,c,d,f);if(ol.extent.intersects(g.getExtent(),e)){if(this.meridiansLabels_){var h=this.getMeridianPoint_(g,e,f);this.meridiansLabels_[f]={geom:h,text:this.lonLabelFormatter_(a)}}this.meridians_[f++]=g}return f};ol.Graticule.prototype.getMeridianPoint_=function(a,b,c){var d=a.getFlatCoordinates();var e=Math.max(b[1],d[1]);var f=Math.min(b[3],d[d.length-1]);var g=ol.math.clamp(b[1]+Math.abs(b[1]-b[3])*this.lonLabelPosition_,e,f);var h=[d[0],g];var i=this.meridiansLabels_[c]!==undefined?this.meridiansLabels_[c].geom:new ol.geom.Point(null);i.setCoordinates(h);return i};ol.Graticule.prototype.addParallel_=function(a,b,c,d,e,f){var g=this.getParallel_(a,b,c,d,f);if(ol.extent.intersects(g.getExtent(),e)){if(this.parallelsLabels_){var h=this.getParallelPoint_(g,e,f);this.parallelsLabels_[f]={geom:h,text:this.latLabelFormatter_(a)}}this.parallels_[f++]=g}return f};ol.Graticule.prototype.getParallelPoint_=function(a,b,c){var d=a.getFlatCoordinates();var e=Math.max(b[0],d[0]);var f=Math.min(b[2],d[d.length-2]);var g=ol.math.clamp(b[0]+Math.abs(b[0]-b[2])*this.latLabelPosition_,e,f);var h=[g,d[1]];var i=this.parallelsLabels_[c]!==undefined?this.parallelsLabels_[c].geom:new ol.geom.Point(null);i.setCoordinates(h);return i};ol.Graticule.prototype.createGraticule_=function(a,b,c,d){var e=this.getInterval_(c);if(e==-1){this.meridians_.length=this.parallels_.length=0;if(this.meridiansLabels_){this.meridiansLabels_.length=0}if(this.parallelsLabels_){this.parallelsLabels_.length=0}return}var f=this.toLonLatTransform_(b);var g=f[0];var h=f[1];var i=this.maxLines_;var j,idx,lat,lon;var k=[Math.max(a[0],this.minLonP_),Math.max(a[1],this.minLatP_),Math.min(a[2],this.maxLonP_),Math.min(a[3],this.maxLatP_)];k=ol.proj.transformExtent(k,this.projection_,'EPSG:4326');var l=k[3];var m=k[2];var n=k[1];var o=k[0];g=Math.floor(g/e)*e;lon=ol.math.clamp(g,this.minLon_,this.maxLon_);idx=this.addMeridian_(lon,n,l,d,a,0);j=0;while(lon!=this.minLon_&&j++<i){lon=Math.max(lon-e,this.minLon_);idx=this.addMeridian_(lon,n,l,d,a,idx)}lon=ol.math.clamp(g,this.minLon_,this.maxLon_);j=0;while(lon!=this.maxLon_&&j++<i){lon=Math.min(lon+e,this.maxLon_);idx=this.addMeridian_(lon,n,l,d,a,idx)}this.meridians_.length=idx;if(this.meridiansLabels_){this.meridiansLabels_.length=idx}h=Math.floor(h/e)*e;lat=ol.math.clamp(h,this.minLat_,this.maxLat_);idx=this.addParallel_(lat,o,m,d,a,0);j=0;while(lat!=this.minLat_&&j++<i){lat=Math.max(lat-e,this.minLat_);idx=this.addParallel_(lat,o,m,d,a,idx)}lat=ol.math.clamp(h,this.minLat_,this.maxLat_);j=0;while(lat!=this.maxLat_&&j++<i){lat=Math.min(lat+e,this.maxLat_);idx=this.addParallel_(lat,o,m,d,a,idx)}this.parallels_.length=idx;if(this.parallelsLabels_){this.parallelsLabels_.length=idx}};ol.Graticule.prototype.getInterval_=function(a){var b=this.projectionCenterLonLat_[0];var c=this.projectionCenterLonLat_[1];var d=-1;var i,ii,delta,dist;var e=Math.pow(this.targetSize_*a,2);var f=[];var g=[];for(i=0,ii=ol.Graticule.intervals_.length;i<ii;++i){delta=ol.Graticule.intervals_[i]/2;f[0]=b-delta;f[1]=c-delta;g[0]=b+delta;g[1]=c+delta;this.fromLonLatTransform_(f,f);this.fromLonLatTransform_(g,g);dist=Math.pow(g[0]-f[0],2)+Math.pow(g[1]-f[1],2);if(dist<=e){break}d=ol.Graticule.intervals_[i]}return d};ol.Graticule.prototype.getMap=function(){return this.map_};ol.Graticule.prototype.getMeridian_=function(a,b,c,d,e){var f=ol.geom.flat.geodesic.meridian(a,b,c,this.projection_,d);var g=this.meridians_[e]!==undefined?this.meridians_[e]:new ol.geom.LineString(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f);return g};ol.Graticule.prototype.getMeridians=function(){return this.meridians_};ol.Graticule.prototype.getParallel_=function(a,b,c,d,e){var f=ol.geom.flat.geodesic.parallel(a,b,c,this.projection_,d);var g=this.parallels_[e]!==undefined?this.parallels_[e]:new ol.geom.LineString(null);g.setFlatCoordinates(ol.geom.GeometryLayout.XY,f);return g};ol.Graticule.prototype.getParallels=function(){return this.parallels_};ol.Graticule.prototype.handlePostCompose_=function(e){var a=e.vectorContext;var b=e.frameState;var c=b.extent;var d=b.viewState;var f=d.center;var g=d.projection;var h=d.resolution;var j=b.pixelRatio;var k=h*h/(4*j*j);var m=!this.projection_||!ol.proj.equivalent(this.projection_,g);if(m){this.updateProjectionInfo_(g)}this.createGraticule_(c,f,h,k);a.setFillStrokeStyle(null,this.strokeStyle_);var i,l,line;for(i=0,l=this.meridians_.length;i<l;++i){line=this.meridians_[i];a.drawGeometry(line)}for(i=0,l=this.parallels_.length;i<l;++i){line=this.parallels_[i];a.drawGeometry(line)}var n;if(this.meridiansLabels_){for(i=0,l=this.meridiansLabels_.length;i<l;++i){n=this.meridiansLabels_[i];this.lonLabelStyle_.setText(n.text);a.setTextStyle(this.lonLabelStyle_);a.drawGeometry(n.geom)}}if(this.parallelsLabels_){for(i=0,l=this.parallelsLabels_.length;i<l;++i){n=this.parallelsLabels_[i];this.latLabelStyle_.setText(n.text);a.setTextStyle(this.latLabelStyle_);a.drawGeometry(n.geom)}}};ol.Graticule.prototype.updateProjectionInfo_=function(a){var b=ol.proj.get('EPSG:4326');var c=a.getExtent();var d=a.getWorldExtent();var e=ol.proj.transformExtent(d,b,a);var f=d[3];var g=d[2];var h=d[1];var i=d[0];var j=e[3];var k=e[2];var l=e[1];var m=e[0];this.maxLat_=f;this.maxLon_=g;this.minLat_=h;this.minLon_=i;this.maxLatP_=j;this.maxLonP_=k;this.minLatP_=l;this.minLonP_=m;this.fromLonLatTransform_=ol.proj.getTransform(b,a);this.toLonLatTransform_=ol.proj.getTransform(a,b);this.projectionCenterLonLat_=this.toLonLatTransform_(ol.extent.getCenter(c));this.projection_=a};ol.Graticule.prototype.setMap=function(a){if(this.map_){this.map_.un(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);this.map_.render()}if(a){a.on(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this);a.render()}this.map_=a};bq.provide('ol.Image');bq.require('ol');bq.require('ol.ImageBase');bq.require('ol.ImageState');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');ol.Image=function(a,b,c,d,e,f){ol.ImageBase.call(this,a,b,c,ol.ImageState.IDLE);this.src_=d;this.image_=new Image();if(e!==null){this.image_.crossOrigin=e}this.imageListenerKeys_=null;this.state=ol.ImageState.IDLE;this.imageLoadFunction_=f};ol.inherits(ol.Image,ol.ImageBase);ol.Image.prototype.getImage=function(){return this.image_};ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR;this.unlistenImage_();this.changed()};ol.Image.prototype.handleImageLoad_=function(){if(this.resolution===undefined){this.resolution=ol.extent.getHeight(this.extent)/this.image_.height}this.state=ol.ImageState.LOADED;this.unlistenImage_();this.changed()};ol.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE||this.state==ol.ImageState.ERROR){this.state=ol.ImageState.LOADING;this.changed();this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];this.imageLoadFunction_(this,this.src_)}};ol.Image.prototype.setImage=function(a){this.image_=a};ol.Image.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};bq.provide('ol.Tile');bq.require('ol');bq.require('ol.TileState');bq.require('ol.easing');bq.require('ol.events.EventTarget');bq.require('ol.events.EventType');ol.Tile=function(a,b,c){ol.events.EventTarget.call(this);var d=c?c:{};this.tileCoord=a;this.state=b;this.interimTile=null;this.key='';this.transition_=d.transition===undefined?250:d.transition;this.transitionStarts_={}};ol.inherits(ol.Tile,ol.events.EventTarget);ol.Tile.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.Tile.prototype.getKey=function(){return this.key+'/'+this.tileCoord};ol.Tile.prototype.getInterimTile=function(){if(!this.interimTile){return this}var a=this.interimTile;do{if(a.getState()==ol.TileState.LOADED){return a}a=a.interimTile}while(a);return this};ol.Tile.prototype.refreshInterimChain=function(){if(!this.interimTile){return}var a=this.interimTile;var b=this;do{if(a.getState()==ol.TileState.LOADED){a.interimTile=null;break}else if(a.getState()==ol.TileState.LOADING){b=a}else if(a.getState()==ol.TileState.IDLE){b.interimTile=a.interimTile}else{b=a}a=b.interimTile}while(a)};ol.Tile.prototype.getTileCoord=function(){return this.tileCoord};ol.Tile.prototype.getState=function(){return this.state};ol.Tile.prototype.setState=function(a){this.state=a;this.changed()};ol.Tile.prototype.load=function(){};ol.Tile.prototype.getAlpha=function(a,b){if(!this.transition_){return 1}var c=this.transitionStarts_[a];if(!c){c=b;this.transitionStarts_[a]=c}else if(c===-1){return 1}var d=b-c+(1000/60);if(d>=this.transition_){return 1}return ol.easing.easeIn(d/this.transition_)};ol.Tile.prototype.inTransition=function(a){if(!this.transition_){return false}return this.transitionStarts_[a]!==-1};ol.Tile.prototype.endTransition=function(a){if(this.transition_){this.transitionStarts_[a]=-1}};bq.provide('ol.ImageTile');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');ol.ImageTile=function(a,b,c,d,e,f){ol.Tile.call(this,a,b,f);this.crossOrigin_=d;this.src_=c;this.image_=new Image();if(d!==null){this.image_.crossOrigin=d}this.imageListenerKeys_=null;this.tileLoadFunction_=e};ol.inherits(ol.ImageTile,ol.Tile);ol.ImageTile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenImage_();this.image_=ol.ImageTile.getBlankImage()}if(this.interimTile){this.interimTile.dispose()}this.state=ol.TileState.ABORT;this.changed();ol.Tile.prototype.disposeInternal.call(this)};ol.ImageTile.prototype.getImage=function(){return this.image_};ol.ImageTile.prototype.getKey=function(){return this.src_};ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR;this.unlistenImage_();this.image_=ol.ImageTile.getBlankImage();this.changed()};ol.ImageTile.prototype.handleImageLoad_=function(){if(this.image_.naturalWidth&&this.image_.naturalHeight){this.state=ol.TileState.LOADED}else{this.state=ol.TileState.EMPTY}this.unlistenImage_();this.changed()};ol.ImageTile.prototype.load=function(){if(this.state==ol.TileState.ERROR){this.state=ol.TileState.IDLE;this.image_=new Image();if(this.crossOrigin_!==null){this.image_.crossOrigin=this.crossOrigin_}}if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];this.tileLoadFunction_(this,this.src_)}};ol.ImageTile.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey);this.imageListenerKeys_=null};ol.ImageTile.getBlankImage=function(){var a=ol.dom.createCanvasContext2D(1,1);a.fillStyle='rgba(0,0,0,0)';a.fillRect(0,0,1,1);return a.canvas};bq.provide('ol.interaction.DragAndDrop');bq.require('ol');bq.require('ol.functions');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.interaction.Interaction');bq.require('ol.proj');ol.interaction.DragAndDrop=function(a){var b=a?a:{};ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DragAndDrop.handleEvent});this.formatConstructors_=b.formatConstructors?b.formatConstructors:[];this.projection_=b.projection?ol.proj.get(b.projection):null;this.dropListenKeys_=null;this.source_=b.source||null;this.target=b.target?b.target:null};ol.inherits(ol.interaction.DragAndDrop,ol.interaction.Interaction);ol.interaction.DragAndDrop.handleDrop_=function(a){var b=a.dataTransfer.files;var i,ii,file;for(i=0,ii=b.length;i<ii;++i){file=b.item(i);var c=new FileReader();c.addEventListener(ol.events.EventType.LOAD,this.handleResult_.bind(this,file));c.readAsText(file)}};ol.interaction.DragAndDrop.handleStop_=function(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect='copy'};ol.interaction.DragAndDrop.prototype.handleResult_=function(a,b){var c=b.target.result;var d=this.getMap();var e=this.projection_;if(!e){var f=d.getView();e=f.getProjection()}var g=this.formatConstructors_;var h=[];var i,ii;for(i=0,ii=g.length;i<ii;++i){var j=g[i];var k=new j();h=this.tryReadFeatures_(k,c,{featureProjection:e});if(h&&h.length>0){break}}if(this.source_){this.source_.clear();this.source_.addFeatures(h)}this.dispatchEvent(new ol.interaction.DragAndDrop.Event(ol.interaction.DragAndDrop.EventType_.ADD_FEATURES,a,h,e))};ol.interaction.DragAndDrop.handleEvent=ol.functions.TRUE;ol.interaction.DragAndDrop.prototype.registerListeners_=function(){var a=this.getMap();if(a){var b=this.target?this.target:a.getViewport();this.dropListenKeys_=[ol.events.listen(b,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleDrop_,this),ol.events.listen(b,ol.events.EventType.DRAGENTER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(b,ol.events.EventType.DRAGOVER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(b,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleStop_,this)]}};ol.interaction.DragAndDrop.prototype.setActive=function(a){ol.interaction.Interaction.prototype.setActive.call(this,a);if(a){this.registerListeners_()}else{this.unregisterListeners_()}};ol.interaction.DragAndDrop.prototype.setMap=function(a){this.unregisterListeners_();ol.interaction.Interaction.prototype.setMap.call(this,a);if(this.getActive()){this.registerListeners_()}};ol.interaction.DragAndDrop.prototype.tryReadFeatures_=function(a,b,c){try{return a.readFeatures(b,c)}catch(e){return null}};ol.interaction.DragAndDrop.prototype.unregisterListeners_=function(){if(this.dropListenKeys_){this.dropListenKeys_.forEach(ol.events.unlistenByKey);this.dropListenKeys_=null}};ol.interaction.DragAndDrop.EventType_={ADD_FEATURES:'addfeatures'};ol.interaction.DragAndDrop.Event=function(a,b,c,d){ol.events.Event.call(this,a);this.features=c;this.file=b;this.projection=d};ol.inherits(ol.interaction.DragAndDrop.Event,ol.events.Event);bq.provide('ol.interaction.DragRotateAndZoom');bq.require('ol');bq.require('ol.RotationConstraint');bq.require('ol.ViewHint');bq.require('ol.events.condition');bq.require('ol.interaction.Interaction');bq.require('ol.interaction.Pointer');ol.interaction.DragRotateAndZoom=function(a){var b=a?a:{};ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragRotateAndZoom.handleDownEvent_,handleDragEvent:ol.interaction.DragRotateAndZoom.handleDragEvent_,handleUpEvent:ol.interaction.DragRotateAndZoom.handleUpEvent_});this.condition_=b.condition?b.condition:ol.events.condition.shiftKeyOnly;this.lastAngle_=undefined;this.lastMagnitude_=undefined;this.lastScaleDelta_=0;this.duration_=b.duration!==undefined?b.duration:400};ol.inherits(ol.interaction.DragRotateAndZoom,ol.interaction.Pointer);ol.interaction.DragRotateAndZoom.handleDragEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return}var b=a.map;var c=b.getSize();var d=a.pixel;var e=d[0]-c[0]/2;var f=c[1]/2-d[1];var g=Math.atan2(f,e);var h=Math.sqrt(e*e+f*f);var i=b.getView();if(i.getConstraints().rotation!==ol.RotationConstraint.disable&&this.lastAngle_!==undefined){var j=g-this.lastAngle_;ol.interaction.Interaction.rotateWithoutConstraints(i,i.getRotation()-j)}this.lastAngle_=g;if(this.lastMagnitude_!==undefined){var k=this.lastMagnitude_*(i.getResolution()/h);ol.interaction.Interaction.zoomWithoutConstraints(i,k)}if(this.lastMagnitude_!==undefined){this.lastScaleDelta_=this.lastMagnitude_/h}this.lastMagnitude_=h};ol.interaction.DragRotateAndZoom.handleUpEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return true}var b=a.map;var c=b.getView();c.setHint(ol.ViewHint.INTERACTING,-1);var d=this.lastScaleDelta_-1;ol.interaction.Interaction.rotate(c,c.getRotation());ol.interaction.Interaction.zoom(c,c.getResolution(),undefined,this.duration_,d);this.lastScaleDelta_=0;return false};ol.interaction.DragRotateAndZoom.handleDownEvent_=function(a){if(!ol.events.condition.mouseOnly(a)){return false}if(this.condition_(a)){a.map.getView().setHint(ol.ViewHint.INTERACTING,1);this.lastAngle_=undefined;this.lastMagnitude_=undefined;return true}else{return false}};bq.provide('ol.interaction.DrawEventType');ol.interaction.DrawEventType={DRAWSTART:'drawstart',DRAWEND:'drawend'};bq.provide('ol.layer.Vector');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.layer.Layer');bq.require('ol.layer.VectorRenderType');bq.require('ol.obj');bq.require('ol.style.Style');ol.layer.Vector=function(a){var b=a?a:({});var c=ol.obj.assign({},b);delete c.style;delete c.renderBuffer;delete c.updateWhileAnimating;delete c.updateWhileInteracting;ol.layer.Layer.call(this,(c));this.declutter_=b.declutter!==undefined?b.declutter:false;this.renderBuffer_=b.renderBuffer!==undefined?b.renderBuffer:100;this.style_=null;this.styleFunction_=undefined;this.setStyle(b.style);this.updateWhileAnimating_=b.updateWhileAnimating!==undefined?b.updateWhileAnimating:false;this.updateWhileInteracting_=b.updateWhileInteracting!==undefined?b.updateWhileInteracting:false;this.renderMode_=b.renderMode||ol.layer.VectorRenderType.VECTOR;this.type=ol.LayerType.VECTOR};ol.inherits(ol.layer.Vector,ol.layer.Layer);ol.layer.Vector.prototype.getDeclutter=function(){return this.declutter_};ol.layer.Vector.prototype.setDeclutter=function(a){this.declutter_=a};ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_};ol.layer.Vector.prototype.getRenderOrder=function(){return(this.get(ol.layer.Vector.Property_.RENDER_ORDER))};ol.layer.Vector.prototype.getSource;ol.layer.Vector.prototype.getStyle=function(){return this.style_};ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_};ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_};ol.layer.Vector.prototype.setRenderOrder=function(a){this.set(ol.layer.Vector.Property_.RENDER_ORDER,a)};ol.layer.Vector.prototype.setStyle=function(a){this.style_=a!==undefined?a:ol.style.Style.defaultFunction;this.styleFunction_=a===null?undefined:ol.style.Style.createFunction(this.style_);this.changed()};ol.layer.Vector.prototype.getRenderMode=function(){return this.renderMode_};ol.layer.Vector.Property_={RENDER_ORDER:'renderOrder'};bq.provide('ol.loadingstrategy');ol.loadingstrategy.all=function(a,b){return[[-Infinity,-Infinity,Infinity,Infinity]]};ol.loadingstrategy.bbox=function(a,b){return[a]};ol.loadingstrategy.tile=function(f){return(function(a,b){var z=f.getZForResolution(b);var c=f.getTileRangeForExtentAndZ(a,z);var d=[];var e=[z,0,0];for(e[1]=c.minX;e[1]<=c.maxX;++e[1]){for(e[2]=c.minY;e[2]<=c.maxY;++e[2]){d.push(f.getTileCoordExtent(e))}}return d})};bq.provide('ol.source.Source');bq.require('ol');bq.require('ol.Attribution');bq.require('ol.Object');bq.require('ol.proj');bq.require('ol.source.State');ol.source.Source=function(a){ol.Object.call(this);this.projection_=ol.proj.get(a.projection);this.attributions_=null;this.attributions2_=this.adaptAttributions_(a.attributions);this.logo_=a.logo;this.state_=a.state!==undefined?a.state:ol.source.State.READY;this.wrapX_=a.wrapX!==undefined?a.wrapX:false};ol.inherits(ol.source.Source,ol.Object);ol.source.Source.prototype.adaptAttributions_=function(b){if(!b){return null}if(b instanceof ol.Attribution){this.attributions_=[b];return function(a){return[b.getHTML()]}}if(Array.isArray(b)){if(b[0]instanceof ol.Attribution){this.attributions_=b;var c=b.map(function(a){return a.getHTML()});return function(a){return c}}this.attributions_=b.map(function(a){return new ol.Attribution({html:a})});return function(a){return b}}if(typeof b==='function'){return b}this.attributions_=[new ol.Attribution({html:b})];return function(a){return[b]}};ol.source.Source.prototype.forEachFeatureAtCoordinate=ol.nullFunction;ol.source.Source.prototype.getAttributions=function(){return this.attributions_};ol.source.Source.prototype.getAttributions2=function(){return this.attributions2_};ol.source.Source.prototype.getLogo=function(){return this.logo_};ol.source.Source.prototype.getProjection=function(){return this.projection_};ol.source.Source.prototype.getResolutions=function(){};ol.source.Source.prototype.getState=function(){return this.state_};ol.source.Source.prototype.getWrapX=function(){return this.wrapX_};ol.source.Source.prototype.refresh=function(){this.changed()};ol.source.Source.prototype.setAttributions=function(a){this.attributions2_=this.adaptAttributions_(a);this.changed()};ol.source.Source.prototype.setLogo=function(a){this.logo_=a};ol.source.Source.prototype.setState=function(a){this.state_=a;this.changed()};bq.provide('ol.source.VectorEventType');ol.source.VectorEventType={ADDFEATURE:'addfeature',CHANGEFEATURE:'changefeature',CLEAR:'clear',REMOVEFEATURE:'removefeature'};bq.provide('ol.structs.RBush');bq.require('ol');bq.require('ol.ext.rbush');bq.require('ol.extent');bq.require('ol.obj');ol.structs.RBush=function(a){this.rbush_=ol.ext.rbush(a);this.items_={}};ol.structs.RBush.prototype.insert=function(a,b){var c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:b};this.rbush_.insert(c);this.items_[ol.getUid(b)]=c};ol.structs.RBush.prototype.load=function(a,b){var c=new Array(b.length);for(var i=0,l=b.length;i<l;i++){var d=a[i];var e=b[i];var f={minX:d[0],minY:d[1],maxX:d[2],maxY:d[3],value:e};c[i]=f;this.items_[ol.getUid(e)]=f}this.rbush_.load(c)};ol.structs.RBush.prototype.remove=function(a){var b=ol.getUid(a);var c=this.items_[b];delete this.items_[b];return this.rbush_.remove(c)!==null};ol.structs.RBush.prototype.update=function(a,b){var c=this.items_[ol.getUid(b)];var d=[c.minX,c.minY,c.maxX,c.maxY];if(!ol.extent.equals(d,a)){this.remove(b);this.insert(a,b)}};ol.structs.RBush.prototype.getAll=function(){var b=this.rbush_.all();return b.map(function(a){return a.value})};ol.structs.RBush.prototype.getInExtent=function(b){var c={minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]};var d=this.rbush_.search(c);return d.map(function(a){return a.value})};ol.structs.RBush.prototype.forEach=function(a,b){return this.forEach_(this.getAll(),a,b)};ol.structs.RBush.prototype.forEachInExtent=function(a,b,c){return this.forEach_(this.getInExtent(a),b,c)};ol.structs.RBush.prototype.forEach_=function(a,b,c){var d;for(var i=0,l=a.length;i<l;i++){d=b.call(c,a[i]);if(d){return d}}return d};ol.structs.RBush.prototype.isEmpty=function(){return ol.obj.isEmpty(this.items_)};ol.structs.RBush.prototype.clear=function(){this.rbush_.clear();this.items_={}};ol.structs.RBush.prototype.getExtent=function(a){var b=this.rbush_.data;return ol.extent.createOrUpdate(b.minX,b.minY,b.maxX,b.maxY,a)};ol.structs.RBush.prototype.concat=function(a){this.rbush_.load(a.rbush_.all());for(var i in a.items_){this.items_[i|0]=a.items_[i|0]}};bq.provide('ol.source.Vector');bq.require('ol');bq.require('ol.Collection');bq.require('ol.CollectionEventType');bq.require('ol.ObjectEventType');bq.require('ol.array');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.featureloader');bq.require('ol.functions');bq.require('ol.loadingstrategy');bq.require('ol.obj');bq.require('ol.source.Source');bq.require('ol.source.State');bq.require('ol.source.VectorEventType');bq.require('ol.structs.RBush');ol.source.Vector=function(a){var b=a||{};ol.source.Source.call(this,{attributions:b.attributions,logo:b.logo,projection:undefined,state:ol.source.State.READY,wrapX:b.wrapX!==undefined?b.wrapX:true});this.loader_=ol.nullFunction;this.format_=b.format;this.overlaps_=b.overlaps==undefined?true:b.overlaps;this.url_=b.url;if(b.loader!==undefined){this.loader_=b.loader}else if(this.url_!==undefined){ol.asserts.assert(this.format_,7);this.loader_=ol.featureloader.xhr(this.url_,(this.format_))}this.strategy_=b.strategy!==undefined?b.strategy:ol.loadingstrategy.all;var c=b.useSpatialIndex!==undefined?b.useSpatialIndex:true;this.featuresRtree_=c?new ol.structs.RBush():null;this.loadedExtentsRtree_=new ol.structs.RBush();this.nullGeometryFeatures_={};this.idIndex_={};this.undefIdIndex_={};this.featureChangeKeys_={};this.featuresCollection_=null;var d,features;if(b.features instanceof ol.Collection){d=b.features;features=d.getArray()}else if(Array.isArray(b.features)){features=b.features}if(!c&&d===undefined){d=new ol.Collection(features)}if(features!==undefined){this.addFeaturesInternal(features)}if(d!==undefined){this.bindFeaturesCollection_(d)}};ol.inherits(ol.source.Vector,ol.source.Source);ol.source.Vector.prototype.addFeature=function(a){this.addFeatureInternal(a);this.changed()};ol.source.Vector.prototype.addFeatureInternal=function(a){var b=ol.getUid(a).toString();if(!this.addToIndex_(b,a)){return}this.setupChangeEvents_(b,a);var c=a.getGeometry();if(c){var d=c.getExtent();if(this.featuresRtree_){this.featuresRtree_.insert(d,a)}}else{this.nullGeometryFeatures_[b]=a}this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.ADDFEATURE,a))};ol.source.Vector.prototype.setupChangeEvents_=function(a,b){this.featureChangeKeys_[a]=[ol.events.listen(b,ol.events.EventType.CHANGE,this.handleFeatureChange_,this),ol.events.listen(b,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)]};ol.source.Vector.prototype.addToIndex_=function(a,b){var c=true;var d=b.getId();if(d!==undefined){if(!(d.toString()in this.idIndex_)){this.idIndex_[d.toString()]=b}else{c=false}}else{ol.asserts.assert(!(a in this.undefIdIndex_),30);this.undefIdIndex_[a]=b}return c};ol.source.Vector.prototype.addFeatures=function(a){this.addFeaturesInternal(a);this.changed()};ol.source.Vector.prototype.addFeaturesInternal=function(a){var b,i,length,feature;var c=[];var d=[];var e=[];for(i=0,length=a.length;i<length;i++){feature=a[i];b=ol.getUid(feature).toString();if(this.addToIndex_(b,feature)){d.push(feature)}}for(i=0,length=d.length;i<length;i++){feature=d[i];b=ol.getUid(feature).toString();this.setupChangeEvents_(b,feature);var f=feature.getGeometry();if(f){var g=f.getExtent();c.push(g);e.push(feature)}else{this.nullGeometryFeatures_[b]=feature}}if(this.featuresRtree_){this.featuresRtree_.load(c,e)}for(i=0,length=d.length;i<length;i++){this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.ADDFEATURE,d[i]))}};ol.source.Vector.prototype.bindFeaturesCollection_=function(b){var c=false;ol.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(a){if(!c){c=true;b.push(a.feature);c=false}});ol.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(a){if(!c){c=true;b.remove(a.feature);c=false}});ol.events.listen(b,ol.CollectionEventType.ADD,function(a){if(!c){c=true;this.addFeature((a.element));c=false}},this);ol.events.listen(b,ol.CollectionEventType.REMOVE,function(a){if(!c){c=true;this.removeFeature((a.element));c=false}},this);this.featuresCollection_=b};ol.source.Vector.prototype.clear=function(a){if(a){for(var b in this.featureChangeKeys_){var c=this.featureChangeKeys_[b];c.forEach(ol.events.unlistenByKey)}if(!this.featuresCollection_){this.featureChangeKeys_={};this.idIndex_={};this.undefIdIndex_={}}}else{if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var d in this.nullGeometryFeatures_){this.removeFeatureInternal(this.nullGeometryFeatures_[d])}}}if(this.featuresCollection_){this.featuresCollection_.clear()}if(this.featuresRtree_){this.featuresRtree_.clear()}this.loadedExtentsRtree_.clear();this.nullGeometryFeatures_={};var e=new ol.source.Vector.Event(ol.source.VectorEventType.CLEAR);this.dispatchEvent(e);this.changed()};ol.source.Vector.prototype.forEachFeature=function(a,b){if(this.featuresRtree_){return this.featuresRtree_.forEach(a,b)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(a,b)}};ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(c,d,e){var f=[c[0],c[1],c[0],c[1]];return this.forEachFeatureInExtent(f,function(a){var b=a.getGeometry();if(b.intersectsCoordinate(c)){return d.call(e,a)}else{return undefined}})};ol.source.Vector.prototype.forEachFeatureInExtent=function(a,b,c){if(this.featuresRtree_){return this.featuresRtree_.forEachInExtent(a,b,c)}else if(this.featuresCollection_){return this.featuresCollection_.forEach(b,c)}};ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(d,e,f){return this.forEachFeatureInExtent(d,function(a){var b=a.getGeometry();if(b.intersectsExtent(d)){var c=e.call(f,a);if(c){return c}}})};ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_};ol.source.Vector.prototype.getFeatures=function(){var a;if(this.featuresCollection_){a=this.featuresCollection_.getArray()}else if(this.featuresRtree_){a=this.featuresRtree_.getAll();if(!ol.obj.isEmpty(this.nullGeometryFeatures_)){ol.array.extend(a,ol.obj.getValues(this.nullGeometryFeatures_))}}return(a)};ol.source.Vector.prototype.getFeaturesAtCoordinate=function(b){var c=[];this.forEachFeatureAtCoordinateDirect(b,function(a){c.push(a)});return c};ol.source.Vector.prototype.getFeaturesInExtent=function(a){return this.featuresRtree_.getInExtent(a)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(e,f){var x=e[0];var y=e[1];var g=null;var h=[NaN,NaN];var i=Infinity;var j=[-Infinity,-Infinity,Infinity,Infinity];var k=f?f:ol.functions.TRUE;this.featuresRtree_.forEachInExtent(j,function(a){if(k(a)){var b=a.getGeometry();var c=i;i=b.closestPointXY(x,y,h,i);if(i<c){g=a;var d=Math.sqrt(i);j[0]=x-d;j[1]=y-d;j[2]=x+d;j[3]=y+d}}});return g};ol.source.Vector.prototype.getExtent=function(a){return this.featuresRtree_.getExtent(a)};ol.source.Vector.prototype.getFeatureById=function(a){var b=this.idIndex_[a.toString()];return b!==undefined?b:null};ol.source.Vector.prototype.getFormat=function(){return this.format_};ol.source.Vector.prototype.getOverlaps=function(){return this.overlaps_};ol.source.Vector.prototype.getResolutions=function(){};ol.source.Vector.prototype.getUrl=function(){return this.url_};ol.source.Vector.prototype.handleFeatureChange_=function(a){var b=(a.target);var c=ol.getUid(b).toString();var d=b.getGeometry();if(!d){if(!(c in this.nullGeometryFeatures_)){if(this.featuresRtree_){this.featuresRtree_.remove(b)}this.nullGeometryFeatures_[c]=b}}else{var e=d.getExtent();if(c in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[c];if(this.featuresRtree_){this.featuresRtree_.insert(e,b)}}else{if(this.featuresRtree_){this.featuresRtree_.update(e,b)}}}var f=b.getId();if(f!==undefined){var g=f.toString();if(c in this.undefIdIndex_){delete this.undefIdIndex_[c];this.idIndex_[g]=b}else{if(this.idIndex_[g]!==b){this.removeFromIdIndex_(b);this.idIndex_[g]=b}}}else{if(!(c in this.undefIdIndex_)){this.removeFromIdIndex_(b);this.undefIdIndex_[c]=b}}this.changed();this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.CHANGEFEATURE,b))};ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&ol.obj.isEmpty(this.nullGeometryFeatures_)};ol.source.Vector.prototype.loadFeatures=function(b,c,d){var e=this.loadedExtentsRtree_;var f=this.strategy_(b,c);var i,ii;for(i=0,ii=f.length;i<ii;++i){var g=f[i];var h=e.forEachInExtent(g,function(a){return ol.extent.containsExtent(a.extent,g)});if(!h){this.loader_.call(this,g,c,d);e.insert(g,{extent:g.slice()})}}};ol.source.Vector.prototype.removeLoadedExtent=function(b){var c=this.loadedExtentsRtree_;var d;c.forEachInExtent(b,function(a){if(ol.extent.equals(a.extent,b)){d=a;return true}});if(d){c.remove(d)}};ol.source.Vector.prototype.removeFeature=function(a){var b=ol.getUid(a).toString();if(b in this.nullGeometryFeatures_){delete this.nullGeometryFeatures_[b]}else{if(this.featuresRtree_){this.featuresRtree_.remove(a)}}this.removeFeatureInternal(a);this.changed()};ol.source.Vector.prototype.removeFeatureInternal=function(a){var b=ol.getUid(a).toString();this.featureChangeKeys_[b].forEach(ol.events.unlistenByKey);delete this.featureChangeKeys_[b];var c=a.getId();if(c!==undefined){delete this.idIndex_[c.toString()]}else{delete this.undefIdIndex_[b]}this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.REMOVEFEATURE,a))};ol.source.Vector.prototype.removeFromIdIndex_=function(a){var b=false;for(var c in this.idIndex_){if(this.idIndex_[c]===a){delete this.idIndex_[c];b=true;break}}return b};ol.source.Vector.prototype.setLoader=function(a){this.loader_=a};ol.source.Vector.Event=function(a,b){ol.events.Event.call(this,a);this.feature=b};ol.inherits(ol.source.Vector.Event,ol.events.Event);bq.provide('ol.interaction.Draw');bq.require('ol');bq.require('ol.Feature');bq.require('ol.MapBrowserEventType');bq.require('ol.Object');bq.require('ol.coordinate');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.condition');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.geom.Circle');bq.require('ol.geom.GeometryType');bq.require('ol.geom.LineString');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.interaction.DrawEventType');bq.require('ol.interaction.Pointer');bq.require('ol.interaction.Property');bq.require('ol.layer.Vector');bq.require('ol.source.Vector');bq.require('ol.style.Style');ol.interaction.Draw=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_});this.shouldHandle_=false;this.downPx_=null;this.freehand_=false;this.source_=e.source?e.source:null;this.features_=e.features?e.features:null;this.snapTolerance_=e.snapTolerance?e.snapTolerance:12;this.type_=(e.type);this.mode_=ol.interaction.Draw.getMode_(this.type_);this.stopClick_=!!e.stopClick;this.minPoints_=e.minPoints?e.minPoints:(this.mode_===ol.interaction.Draw.Mode_.POLYGON?3:2);this.maxPoints_=e.maxPoints?e.maxPoints:Infinity;this.finishCondition_=e.finishCondition?e.finishCondition:ol.functions.TRUE;var f=e.geometryFunction;if(!f){if(this.type_===ol.geom.GeometryType.CIRCLE){f=function(a,b){var c=b?(b):new ol.geom.Circle([NaN,NaN]);var d=ol.coordinate.squaredDistance(a[0],a[1]);c.setCenterAndRadius(a[0],Math.sqrt(d));return c}}else{var g;var h=this.mode_;if(h===ol.interaction.Draw.Mode_.POINT){g=ol.geom.Point}else if(h===ol.interaction.Draw.Mode_.LINE_STRING){g=ol.geom.LineString}else if(h===ol.interaction.Draw.Mode_.POLYGON){g=ol.geom.Polygon}f=function(a,b){var c=b;if(c){if(h===ol.interaction.Draw.Mode_.POLYGON){if(a[0].length){c.setCoordinates([a[0].concat([a[0][0]])])}else{c.setCoordinates([])}}else{c.setCoordinates(a)}}else{c=new g(a)}return c}}}this.geometryFunction_=f;this.finishCoordinate_=null;this.sketchFeature_=null;this.sketchPoint_=null;this.sketchCoords_=null;this.sketchLine_=null;this.sketchLineCoords_=null;this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36;this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:e.wrapX?e.wrapX:false}),style:e.style?e.style:ol.interaction.Draw.getDefaultStyleFunction()});this.geometryName_=e.geometryName;this.condition_=e.condition?e.condition:ol.events.condition.noModifierKeys;this.freehandCondition_;if(e.freehand){this.freehandCondition_=ol.events.condition.always}else{this.freehandCondition_=e.freehandCondition?e.freehandCondition:ol.events.condition.shiftKeyOnly}ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.Property.ACTIVE),this.updateState_,this)};ol.inherits(ol.interaction.Draw,ol.interaction.Pointer);ol.interaction.Draw.getDefaultStyleFunction=function(){var c=ol.style.Style.createDefaultEditing();return function(a,b){return c[a.getGeometry().getType()]}};ol.interaction.Draw.prototype.setMap=function(a){ol.interaction.Pointer.prototype.setMap.call(this,a);this.updateState_()};ol.interaction.Draw.handleEvent=function(a){this.freehand_=this.mode_!==ol.interaction.Draw.Mode_.POINT&&this.freehandCondition_(a);var b=true;if(this.freehand_&&a.type===ol.MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null){this.addToDrawing_(a);b=false}else if(this.freehand_&&a.type===ol.MapBrowserEventType.POINTERDOWN){b=false}else if(a.type===ol.MapBrowserEventType.POINTERMOVE){b=this.handlePointerMove_(a)}else if(a.type===ol.MapBrowserEventType.DBLCLICK){b=false}return ol.interaction.Pointer.handleEvent.call(this,a)&&b};ol.interaction.Draw.handleDownEvent_=function(a){this.shouldHandle_=!this.freehand_;if(this.freehand_){this.downPx_=a.pixel;if(!this.finishCoordinate_){this.startDrawing_(a)}return true}else if(this.condition_(a)){this.downPx_=a.pixel;return true}else{return false}};ol.interaction.Draw.handleUpEvent_=function(a){var b=true;this.handlePointerMove_(a);var c=this.mode_===ol.interaction.Draw.Mode_.CIRCLE;if(this.shouldHandle_){if(!this.finishCoordinate_){this.startDrawing_(a);if(this.mode_===ol.interaction.Draw.Mode_.POINT){this.finishDrawing()}}else if(this.freehand_||c){this.finishDrawing()}else if(this.atFinish_(a)){if(this.finishCondition_(a)){this.finishDrawing()}}else{this.addToDrawing_(a)}b=false}else if(this.freehand_){this.finishCoordinate_=null;this.abortDrawing_()}if(!b&&this.stopClick_){a.stopPropagation()}return b};ol.interaction.Draw.prototype.handlePointerMove_=function(a){if(this.downPx_&&((!this.freehand_&&this.shouldHandle_)||(this.freehand_&&!this.shouldHandle_))){var b=this.downPx_;var c=a.pixel;var d=b[0]-c[0];var e=b[1]-c[1];var f=d*d+e*e;this.shouldHandle_=this.freehand_?f>this.squaredClickTolerance_:f<=this.squaredClickTolerance_}if(this.finishCoordinate_){this.modifyDrawing_(a)}else{this.createOrUpdateSketchPoint_(a)}return true};ol.interaction.Draw.prototype.atFinish_=function(a){var b=false;if(this.sketchFeature_){var c=false;var d=[this.finishCoordinate_];if(this.mode_===ol.interaction.Draw.Mode_.LINE_STRING){c=this.sketchCoords_.length>this.minPoints_}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){c=this.sketchCoords_[0].length>this.minPoints_;d=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]}if(c){var e=a.map;for(var i=0,ii=d.length;i<ii;i++){var f=d[i];var g=e.getPixelFromCoordinate(f);var h=a.pixel;var j=h[0]-g[0];var k=h[1]-g[1];var l=this.freehand_?1:this.snapTolerance_;b=Math.sqrt(j*j+k*k)<=l;if(b){this.finishCoordinate_=f;break}}}}return b};ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(a){var b=a.coordinate.slice();if(!this.sketchPoint_){this.sketchPoint_=new ol.Feature(new ol.geom.Point(b));this.updateSketchFeatures_()}else{var c=(this.sketchPoint_.getGeometry());c.setCoordinates(b)}};ol.interaction.Draw.prototype.startDrawing_=function(a){var b=a.coordinate;this.finishCoordinate_=b;if(this.mode_===ol.interaction.Draw.Mode_.POINT){this.sketchCoords_=b.slice()}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){this.sketchCoords_=[[b.slice(),b.slice()]];this.sketchLineCoords_=this.sketchCoords_[0]}else{this.sketchCoords_=[b.slice(),b.slice()];if(this.mode_===ol.interaction.Draw.Mode_.CIRCLE){this.sketchLineCoords_=this.sketchCoords_}}if(this.sketchLineCoords_){this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_))}var c=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new ol.Feature();if(this.geometryName_){this.sketchFeature_.setGeometryName(this.geometryName_)}this.sketchFeature_.setGeometry(c);this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.modifyDrawing_=function(a){var b=a.coordinate;var c=(this.sketchFeature_.getGeometry());var d,last;if(this.mode_===ol.interaction.Draw.Mode_.POINT){last=this.sketchCoords_}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){d=this.sketchCoords_[0];last=d[d.length-1];if(this.atFinish_(a)){b=this.finishCoordinate_.slice()}}else{d=this.sketchCoords_;last=d[d.length-1]}last[0]=b[0];last[1]=b[1];this.geometryFunction_((this.sketchCoords_),c);if(this.sketchPoint_){var e=(this.sketchPoint_.getGeometry());e.setCoordinates(b)}var f;if(c instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.Draw.Mode_.POLYGON){if(!this.sketchLine_){this.sketchLine_=new ol.Feature(new ol.geom.LineString(null))}var g=c.getLinearRing(0);f=(this.sketchLine_.getGeometry());f.setFlatCoordinates(g.getLayout(),g.getFlatCoordinates())}else if(this.sketchLineCoords_){f=(this.sketchLine_.getGeometry());f.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.addToDrawing_=function(a){var b=a.coordinate;var c=(this.sketchFeature_.getGeometry());var d;var e;if(this.mode_===ol.interaction.Draw.Mode_.LINE_STRING){this.finishCoordinate_=b.slice();e=this.sketchCoords_;if(e.length>=this.maxPoints_){if(this.freehand_){e.pop()}else{d=true}}e.push(b.slice());this.geometryFunction_(e,c)}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){e=this.sketchCoords_[0];if(e.length>=this.maxPoints_){if(this.freehand_){e.pop()}else{d=true}}e.push(b.slice());if(d){this.finishCoordinate_=e[0]}this.geometryFunction_(this.sketchCoords_,c)}this.updateSketchFeatures_();if(d){this.finishDrawing()}};ol.interaction.Draw.prototype.removeLastPoint=function(){if(!this.sketchFeature_){return}var a=(this.sketchFeature_.getGeometry());var b,sketchLineGeom;if(this.mode_===ol.interaction.Draw.Mode_.LINE_STRING){b=this.sketchCoords_;b.splice(-2,1);this.geometryFunction_(b,a);if(b.length>=2){this.finishCoordinate_=b[b.length-2].slice()}}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){b=this.sketchCoords_[0];b.splice(-2,1);sketchLineGeom=(this.sketchLine_.getGeometry());sketchLineGeom.setCoordinates(b);this.geometryFunction_(this.sketchCoords_,a)}if(b.length===0){this.finishCoordinate_=null}this.updateSketchFeatures_()};ol.interaction.Draw.prototype.finishDrawing=function(){var a=this.abortDrawing_();var b=this.sketchCoords_;var c=(a.getGeometry());if(this.mode_===ol.interaction.Draw.Mode_.LINE_STRING){b.pop();this.geometryFunction_(b,c)}else if(this.mode_===ol.interaction.Draw.Mode_.POLYGON){b[0].pop();this.geometryFunction_(b,c);b=c.getCoordinates()}if(this.type_===ol.geom.GeometryType.MULTI_POINT){a.setGeometry(new ol.geom.MultiPoint([b]))}else if(this.type_===ol.geom.GeometryType.MULTI_LINE_STRING){a.setGeometry(new ol.geom.MultiLineString([b]))}else if(this.type_===ol.geom.GeometryType.MULTI_POLYGON){a.setGeometry(new ol.geom.MultiPolygon([b]))}this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWEND,a));if(this.features_){this.features_.push(a)}if(this.source_){this.source_.addFeature(a)}};ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var a=this.sketchFeature_;if(a){this.sketchFeature_=null;this.sketchPoint_=null;this.sketchLine_=null;this.overlay_.getSource().clear(true)}return a};ol.interaction.Draw.prototype.extend=function(a){var b=a.getGeometry();var c=(b);this.sketchFeature_=a;this.sketchCoords_=c.getCoordinates();var d=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=d.slice();this.sketchCoords_.push(d.slice());this.updateSketchFeatures_();this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))};ol.interaction.Draw.prototype.shouldStopEvent=ol.functions.FALSE;ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var a=[];if(this.sketchFeature_){a.push(this.sketchFeature_)}if(this.sketchLine_){a.push(this.sketchLine_)}if(this.sketchPoint_){a.push(this.sketchPoint_)}var b=this.overlay_.getSource();b.clear(true);b.addFeatures(a)};ol.interaction.Draw.prototype.updateState_=function(){var a=this.getMap();var b=this.getActive();if(!a||!b){this.abortDrawing_()}this.overlay_.setMap(b?a:null)};ol.interaction.Draw.createRegularPolygon=function(h,i){return(function(a,b){var c=a[0];var d=a[1];var e=Math.sqrt(ol.coordinate.squaredDistance(c,d));var f=b?(b):ol.geom.Polygon.fromCircle(new ol.geom.Circle(c),h);var g=i?i:Math.atan((d[1]-c[1])/(d[0]-c[0]));ol.geom.Polygon.makeRegular(f,c,e,g);return f})};ol.interaction.Draw.createBox=function(){return(function(a,b){var c=ol.extent.boundingExtent(a);var d=b||new ol.geom.Polygon(null);d.setCoordinates([[ol.extent.getBottomLeft(c),ol.extent.getBottomRight(c),ol.extent.getTopRight(c),ol.extent.getTopLeft(c),ol.extent.getBottomLeft(c)]]);return d})};ol.interaction.Draw.getMode_=function(a){var b;if(a===ol.geom.GeometryType.POINT||a===ol.geom.GeometryType.MULTI_POINT){b=ol.interaction.Draw.Mode_.POINT}else if(a===ol.geom.GeometryType.LINE_STRING||a===ol.geom.GeometryType.MULTI_LINE_STRING){b=ol.interaction.Draw.Mode_.LINE_STRING}else if(a===ol.geom.GeometryType.POLYGON||a===ol.geom.GeometryType.MULTI_POLYGON){b=ol.interaction.Draw.Mode_.POLYGON}else if(a===ol.geom.GeometryType.CIRCLE){b=ol.interaction.Draw.Mode_.CIRCLE}return(b)};ol.interaction.Draw.Mode_={POINT:'Point',LINE_STRING:'LineString',POLYGON:'Polygon',CIRCLE:'Circle'};ol.interaction.Draw.Event=function(a,b){ol.events.Event.call(this,a);this.feature=b};ol.inherits(ol.interaction.Draw.Event,ol.events.Event);bq.provide('ol.interaction.ExtentEventType');ol.interaction.ExtentEventType={EXTENTCHANGED:'extentchanged'};bq.provide('ol.interaction.Extent');bq.require('ol');bq.require('ol.Feature');bq.require('ol.MapBrowserEventType');bq.require('ol.MapBrowserPointerEvent');bq.require('ol.coordinate');bq.require('ol.events.Event');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.interaction.ExtentEventType');bq.require('ol.interaction.Pointer');bq.require('ol.layer.Vector');bq.require('ol.source.Vector');bq.require('ol.style.Style');ol.interaction.Extent=function(a){var b=a||{};this.extent_=null;this.pointerHandler_=null;this.pixelTolerance_=b.pixelTolerance!==undefined?b.pixelTolerance:10;this.snappedToVertex_=false;this.extentFeature_=null;this.vertexFeature_=null;if(!a){a={}}ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Extent.handleDownEvent_,handleDragEvent:ol.interaction.Extent.handleDragEvent_,handleEvent:ol.interaction.Extent.handleEvent_,handleUpEvent:ol.interaction.Extent.handleUpEvent_});this.extentOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:!!a.wrapX}),style:a.boxStyle?a.boxStyle:ol.interaction.Extent.getDefaultExtentStyleFunction_(),updateWhileAnimating:true,updateWhileInteracting:true});this.vertexOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:!!a.wrapX}),style:a.pointerStyle?a.pointerStyle:ol.interaction.Extent.getDefaultPointerStyleFunction_(),updateWhileAnimating:true,updateWhileInteracting:true});if(a.extent){this.setExtent(a.extent)}};ol.inherits(ol.interaction.Extent,ol.interaction.Pointer);ol.interaction.Extent.handleEvent_=function(a){if(!(a instanceof ol.MapBrowserPointerEvent)){return true}if(a.type==ol.MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(a)}ol.interaction.Pointer.handleEvent.call(this,a);return false};ol.interaction.Extent.handleDownEvent_=function(d){var e=d.pixel;var f=d.map;var g=this.getExtent();var h=this.snapToVertex_(e,f);var i=function(a){var b=null;var c=null;if(a[0]==g[0]){b=g[2]}else if(a[0]==g[2]){b=g[0]}if(a[1]==g[1]){c=g[3]}else if(a[1]==g[3]){c=g[1]}if(b!==null&&c!==null){return[b,c]}return null};if(h&&g){var x=(h[0]==g[0]||h[0]==g[2])?h[0]:null;var y=(h[1]==g[1]||h[1]==g[3])?h[1]:null;if(x!==null&&y!==null){this.pointerHandler_=ol.interaction.Extent.getPointHandler_(i(h))}else if(x!==null){this.pointerHandler_=ol.interaction.Extent.getEdgeHandler_(i([x,g[1]]),i([x,g[3]]))}else if(y!==null){this.pointerHandler_=ol.interaction.Extent.getEdgeHandler_(i([g[0],y]),i([g[2],y]))}}else{h=f.getCoordinateFromPixel(e);this.setExtent([h[0],h[1],h[0],h[1]]);this.pointerHandler_=ol.interaction.Extent.getPointHandler_(h)}return true};ol.interaction.Extent.handleDragEvent_=function(a){if(this.pointerHandler_){var b=a.coordinate;this.setExtent(this.pointerHandler_(b));this.createOrUpdatePointerFeature_(b)}return true};ol.interaction.Extent.handleUpEvent_=function(a){this.pointerHandler_=null;var b=this.getExtent();if(!b||ol.extent.getArea(b)===0){this.setExtent(null)}return false};ol.interaction.Extent.getDefaultExtentStyleFunction_=function(){var c=ol.style.Style.createDefaultEditing();return function(a,b){return c[ol.geom.GeometryType.POLYGON]}};ol.interaction.Extent.getDefaultPointerStyleFunction_=function(){var c=ol.style.Style.createDefaultEditing();return function(a,b){return c[ol.geom.GeometryType.POINT]}};ol.interaction.Extent.getPointHandler_=function(b){return function(a){return ol.extent.boundingExtent([b,a])}};ol.interaction.Extent.getEdgeHandler_=function(b,c){if(b[0]==c[0]){return function(a){return ol.extent.boundingExtent([b,[a[0],c[1]]])}}else if(b[1]==c[1]){return function(a){return ol.extent.boundingExtent([b,[c[0],a[1]]])}}else{return null}};ol.interaction.Extent.getSegments_=function(a){return[[[a[0],a[1]],[a[0],a[3]]],[[a[0],a[3]],[a[2],a[3]]],[[a[2],a[3]],[a[2],a[1]]],[[a[2],a[1]],[a[0],a[1]]]]};ol.interaction.Extent.prototype.snapToVertex_=function(c,d){var e=d.getCoordinateFromPixel(c);var f=function(a,b){return ol.coordinate.squaredDistanceToSegment(e,a)-ol.coordinate.squaredDistanceToSegment(e,b)};var g=this.getExtent();if(g){var h=ol.interaction.Extent.getSegments_(g);h.sort(f);var i=h[0];var j=(ol.coordinate.closestOnSegment(e,i));var k=d.getPixelFromCoordinate(j);if(ol.coordinate.distance(c,k)<=this.pixelTolerance_){var l=d.getPixelFromCoordinate(i[0]);var m=d.getPixelFromCoordinate(i[1]);var n=ol.coordinate.squaredDistance(k,l);var o=ol.coordinate.squaredDistance(k,m);var p=Math.sqrt(Math.min(n,o));this.snappedToVertex_=p<=this.pixelTolerance_;if(this.snappedToVertex_){j=n>o?i[1]:i[0]}return j}}return null};ol.interaction.Extent.prototype.handlePointerMove_=function(a){var b=a.pixel;var c=a.map;var d=this.snapToVertex_(b,c);if(!d){d=c.getCoordinateFromPixel(b)}this.createOrUpdatePointerFeature_(d)};ol.interaction.Extent.prototype.createOrUpdateExtentFeature_=function(a){var b=this.extentFeature_;if(!b){if(!a){b=new ol.Feature({})}else{b=new ol.Feature(ol.geom.Polygon.fromExtent(a))}this.extentFeature_=b;this.extentOverlay_.getSource().addFeature(b)}else{if(!a){b.setGeometry(undefined)}else{b.setGeometry(ol.geom.Polygon.fromExtent(a))}}return b};ol.interaction.Extent.prototype.createOrUpdatePointerFeature_=function(a){var b=this.vertexFeature_;if(!b){b=new ol.Feature(new ol.geom.Point(a));this.vertexFeature_=b;this.vertexOverlay_.getSource().addFeature(b)}else{var c=(b.getGeometry());c.setCoordinates(a)}return b};ol.interaction.Extent.prototype.setMap=function(a){this.extentOverlay_.setMap(a);this.vertexOverlay_.setMap(a);ol.interaction.Pointer.prototype.setMap.call(this,a)};ol.interaction.Extent.prototype.getExtent=function(){return this.extent_};ol.interaction.Extent.prototype.setExtent=function(a){this.extent_=a?a:null;this.createOrUpdateExtentFeature_(a);this.dispatchEvent(new ol.interaction.Extent.Event(this.extent_))};ol.interaction.Extent.Event=function(a){ol.events.Event.call(this,ol.interaction.ExtentEventType.EXTENTCHANGED);this.extent=a};ol.inherits(ol.interaction.Extent.Event,ol.events.Event);bq.provide('ol.interaction.ModifyEventType');ol.interaction.ModifyEventType={MODIFYSTART:'modifystart',MODIFYEND:'modifyend'};bq.provide('ol.interaction.Modify');bq.require('ol');bq.require('ol.Collection');bq.require('ol.CollectionEventType');bq.require('ol.Feature');bq.require('ol.MapBrowserEventType');bq.require('ol.MapBrowserPointerEvent');bq.require('ol.array');bq.require('ol.coordinate');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.events.condition');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.geom.Point');bq.require('ol.interaction.ModifyEventType');bq.require('ol.interaction.Pointer');bq.require('ol.layer.Vector');bq.require('ol.source.Vector');bq.require('ol.source.VectorEventType');bq.require('ol.structs.RBush');bq.require('ol.style.Style');ol.interaction.Modify=function(b){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Modify.handleDownEvent_,handleDragEvent:ol.interaction.Modify.handleDragEvent_,handleEvent:ol.interaction.Modify.handleEvent,handleUpEvent:ol.interaction.Modify.handleUpEvent_});this.condition_=b.condition?b.condition:ol.events.condition.primaryAction;this.defaultDeleteCondition_=function(a){return ol.events.condition.altKeyOnly(a)&&ol.events.condition.singleClick(a)};this.deleteCondition_=b.deleteCondition?b.deleteCondition:this.defaultDeleteCondition_;this.insertVertexCondition_=b.insertVertexCondition?b.insertVertexCondition:ol.events.condition.always;this.vertexFeature_=null;this.vertexSegments_=null;this.lastPixel_=[0,0];this.ignoreNextSingleClick_=false;this.modified_=false;this.rBush_=new ol.structs.RBush();this.pixelTolerance_=b.pixelTolerance!==undefined?b.pixelTolerance:10;this.snappedToVertex_=false;this.changingFeature_=false;this.dragSegments_=[];this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,wrapX:!!b.wrapX}),style:b.style?b.style:ol.interaction.Modify.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.SEGMENT_WRITERS_={'Point':this.writePointGeometry_,'LineString':this.writeLineStringGeometry_,'LinearRing':this.writeLineStringGeometry_,'Polygon':this.writePolygonGeometry_,'MultiPoint':this.writeMultiPointGeometry_,'MultiLineString':this.writeMultiLineStringGeometry_,'MultiPolygon':this.writeMultiPolygonGeometry_,'Circle':this.writeCircleGeometry_,'GeometryCollection':this.writeGeometryCollectionGeometry_};this.source_=null;var c;if(b.source){this.source_=b.source;c=new ol.Collection(this.source_.getFeatures());ol.events.listen(this.source_,ol.source.VectorEventType.ADDFEATURE,this.handleSourceAdd_,this);ol.events.listen(this.source_,ol.source.VectorEventType.REMOVEFEATURE,this.handleSourceRemove_,this)}else{c=b.features}if(!c){throw new Error('The modify interaction requires features or a source');}this.features_=c;this.features_.forEach(this.addFeature_,this);ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this);ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this);this.lastPointerEvent_=null};ol.inherits(ol.interaction.Modify,ol.interaction.Pointer);ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0;ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1;ol.interaction.Modify.prototype.addFeature_=function(a){var b=a.getGeometry();if(b&&b.getType()in this.SEGMENT_WRITERS_){this.SEGMENT_WRITERS_[b.getType()].call(this,a,b)}var c=this.getMap();if(c&&c.isRendered()&&this.getActive()){this.handlePointerAtPixel_(this.lastPixel_,c)}ol.events.listen(a,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)};ol.interaction.Modify.prototype.willModifyFeatures_=function(a){if(!this.modified_){this.modified_=true;this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYSTART,this.features_,a))}};ol.interaction.Modify.prototype.removeFeature_=function(a){this.removeFeatureSegmentData_(a);if(this.vertexFeature_&&this.features_.getLength()===0){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}ol.events.unlisten(a,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)};ol.interaction.Modify.prototype.removeFeatureSegmentData_=function(b){var c=this.rBush_;var d=[];c.forEach(function(a){if(b===a.feature){d.push(a)}});for(var i=d.length-1;i>=0;--i){c.remove(d[i])}};ol.interaction.Modify.prototype.setActive=function(a){if(this.vertexFeature_&&!a){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}ol.interaction.Pointer.prototype.setActive.call(this,a)};ol.interaction.Modify.prototype.setMap=function(a){this.overlay_.setMap(a);ol.interaction.Pointer.prototype.setMap.call(this,a)};ol.interaction.Modify.prototype.handleSourceAdd_=function(a){if(a.feature){this.features_.push(a.feature)}};ol.interaction.Modify.prototype.handleSourceRemove_=function(a){if(a.feature){this.features_.remove(a.feature)}};ol.interaction.Modify.prototype.handleFeatureAdd_=function(a){this.addFeature_((a.element))};ol.interaction.Modify.prototype.handleFeatureChange_=function(a){if(!this.changingFeature_){var b=(a.target);this.removeFeature_(b);this.addFeature_(b)}};ol.interaction.Modify.prototype.handleFeatureRemove_=function(a){var b=(a.element);this.removeFeature_(b)};ol.interaction.Modify.prototype.writePointGeometry_=function(a,b){var c=b.getCoordinates();var d=({feature:a,geometry:b,segment:[c,c]});this.rBush_.insert(b.getExtent(),d)};ol.interaction.Modify.prototype.writeMultiPointGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,segmentData;for(i=0,ii=c.length;i<ii;++i){d=c[i];segmentData=({feature:a,geometry:b,depth:[i],index:i,segment:[d,d]});this.rBush_.insert(b.getExtent(),segmentData)}};ol.interaction.Modify.prototype.writeLineStringGeometry_=function(a,b){var c=b.getCoordinates();var i,ii,segment,segmentData;for(i=0,ii=c.length-1;i<ii;++i){segment=c.slice(i,i+2);segmentData=({feature:a,geometry:b,index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}};ol.interaction.Modify.prototype.writeMultiLineStringGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,segment,segmentData;for(j=0,jj=c.length;j<jj;++j){d=c[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,geometry:b,depth:[j],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Modify.prototype.writePolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,segment,segmentData;for(j=0,jj=c.length;j<jj;++j){d=c[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,geometry:b,depth:[j],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Modify.prototype.writeMultiPolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,k,kk,rings,segment,segmentData;for(k=0,kk=c.length;k<kk;++k){rings=c[k];for(j=0,jj=rings.length;j<jj;++j){d=rings[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,geometry:b,depth:[j,k],index:i,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}}};ol.interaction.Modify.prototype.writeCircleGeometry_=function(a,b){var c=b.getCenter();var d=({feature:a,geometry:b,index:ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[c,c]});var e=({feature:a,geometry:b,index:ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[c,c]});var f=[d,e];d.featureSegments=e.featureSegments=f;this.rBush_.insert(ol.extent.createOrUpdateFromCoordinate(c),d);this.rBush_.insert(b.getExtent(),e)};ol.interaction.Modify.prototype.writeGeometryCollectionGeometry_=function(a,b){var i,geometries=b.getGeometriesArray();for(i=0;i<geometries.length;++i){this.SEGMENT_WRITERS_[geometries[i].getType()].call(this,a,geometries[i])}};ol.interaction.Modify.prototype.createOrUpdateVertexFeature_=function(a){var b=this.vertexFeature_;if(!b){b=new ol.Feature(new ol.geom.Point(a));this.vertexFeature_=b;this.overlay_.getSource().addFeature(b)}else{var c=(b.getGeometry());c.setCoordinates(a)}return b};ol.interaction.Modify.compareIndexes_=function(a,b){return a.index-b.index};ol.interaction.Modify.handleDownEvent_=function(a){if(!this.condition_(a)){return false}this.handlePointerAtPixel_(a.pixel,a.map);var b=a.map.getCoordinateFromPixel(a.pixel);this.dragSegments_.length=0;this.modified_=false;var c=this.vertexFeature_;if(c){var d=[];var e=(c.getGeometry());var f=e.getCoordinates();var g=ol.extent.boundingExtent([f]);var h=this.rBush_.getInExtent(g);var k={};h.sort(ol.interaction.Modify.compareIndexes_);for(var i=0,ii=h.length;i<ii;++i){var l=h[i];var m=l.segment;var n=ol.getUid(l.feature);var o=l.depth;if(o){n+='-'+o.join('-')}if(!k[n]){k[n]=new Array(2)}if(l.geometry.getType()===ol.geom.GeometryType.CIRCLE&&l.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var p=ol.interaction.Modify.closestOnSegmentData_(b,l);if(ol.coordinate.equals(p,f)&&!k[n][0]){this.dragSegments_.push([l,0]);k[n][0]=l}}else if(ol.coordinate.equals(m[0],f)&&!k[n][0]){this.dragSegments_.push([l,0]);k[n][0]=l}else if(ol.coordinate.equals(m[1],f)&&!k[n][1]){if((l.geometry.getType()===ol.geom.GeometryType.LINE_STRING||l.geometry.getType()===ol.geom.GeometryType.MULTI_LINE_STRING)&&k[n][0]&&k[n][0].index===0){continue}this.dragSegments_.push([l,1]);k[n][1]=l}else if(this.insertVertexCondition_(a)&&ol.getUid(m)in this.vertexSegments_&&(!k[n][0]&&!k[n][1])){d.push([l,f])}}if(d.length){this.willModifyFeatures_(a)}for(var j=d.length-1;j>=0;--j){this.insertVertex_.apply(this,d[j])}}return!!this.vertexFeature_};ol.interaction.Modify.handleDragEvent_=function(a){this.ignoreNextSingleClick_=false;this.willModifyFeatures_(a);var b=a.coordinate;for(var i=0,ii=this.dragSegments_.length;i<ii;++i){var c=this.dragSegments_[i];var d=c[0];var e=d.depth;var f=d.geometry;var g;var h=d.segment;var j=c[1];while(b.length<f.getStride()){b.push(h[j][b.length])}switch(f.getType()){case ol.geom.GeometryType.POINT:g=b;h[0]=h[1]=b;break;case ol.geom.GeometryType.MULTI_POINT:g=f.getCoordinates();g[d.index]=b;h[0]=h[1]=b;break;case ol.geom.GeometryType.LINE_STRING:g=f.getCoordinates();g[d.index+j]=b;h[j]=b;break;case ol.geom.GeometryType.MULTI_LINE_STRING:g=f.getCoordinates();g[e[0]][d.index+j]=b;h[j]=b;break;case ol.geom.GeometryType.POLYGON:g=f.getCoordinates();g[e[0]][d.index+j]=b;h[j]=b;break;case ol.geom.GeometryType.MULTI_POLYGON:g=f.getCoordinates();g[e[1]][e[0]][d.index+j]=b;h[j]=b;break;case ol.geom.GeometryType.CIRCLE:h[0]=h[1]=b;if(d.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX){this.changingFeature_=true;f.setCenter(b);this.changingFeature_=false}else{this.changingFeature_=true;f.setRadius(ol.coordinate.distance(f.getCenter(),b));this.changingFeature_=false}break;default:}if(g){this.setGeometryCoordinates_(f,g)}}this.createOrUpdateVertexFeature_(b)};ol.interaction.Modify.handleUpEvent_=function(a){var b;var c;for(var i=this.dragSegments_.length-1;i>=0;--i){b=this.dragSegments_[i][0];c=b.geometry;if(c.getType()===ol.geom.GeometryType.CIRCLE){var d=c.getCenter();var e=b.featureSegments[0];var f=b.featureSegments[1];e.segment[0]=e.segment[1]=d;f.segment[0]=f.segment[1]=d;this.rBush_.update(ol.extent.createOrUpdateFromCoordinate(d),e);this.rBush_.update(c.getExtent(),f)}else{this.rBush_.update(ol.extent.boundingExtent(b.segment),b)}}if(this.modified_){this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYEND,this.features_,a));this.modified_=false}return false};ol.interaction.Modify.handleEvent=function(a){if(!(a instanceof ol.MapBrowserPointerEvent)){return true}this.lastPointerEvent_=a;var b;if(!a.map.getView().getInteracting()&&a.type==ol.MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence){this.handlePointerMove_(a)}if(this.vertexFeature_&&this.deleteCondition_(a)){if(a.type!=ol.MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_){b=this.removePoint()}else{b=true}}if(a.type==ol.MapBrowserEventType.SINGLECLICK){this.ignoreNextSingleClick_=false}return ol.interaction.Pointer.handleEvent.call(this,a)&&!b};ol.interaction.Modify.prototype.handlePointerMove_=function(a){this.lastPixel_=a.pixel;this.handlePointerAtPixel_(a.pixel,a.map)};ol.interaction.Modify.prototype.handlePointerAtPixel_=function(c,d){var e=d.getCoordinateFromPixel(c);var f=function(a,b){return ol.interaction.Modify.pointDistanceToSegmentDataSquared_(e,a)-ol.interaction.Modify.pointDistanceToSegmentDataSquared_(e,b)};var g=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(e),d.getView().getResolution()*this.pixelTolerance_);var h=this.rBush_;var j=h.getInExtent(g);if(j.length>0){j.sort(f);var k=j[0];var l=k.segment;var m=ol.interaction.Modify.closestOnSegmentData_(e,k);var n=d.getPixelFromCoordinate(m);var o=ol.coordinate.distance(c,n);if(o<=this.pixelTolerance_){var p={};if(k.geometry.getType()===ol.geom.GeometryType.CIRCLE&&k.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){this.snappedToVertex_=true;this.createOrUpdateVertexFeature_(m)}else{var q=d.getPixelFromCoordinate(l[0]);var r=d.getPixelFromCoordinate(l[1]);var s=ol.coordinate.squaredDistance(n,q);var t=ol.coordinate.squaredDistance(n,r);o=Math.sqrt(Math.min(s,t));this.snappedToVertex_=o<=this.pixelTolerance_;if(this.snappedToVertex_){m=s>t?l[1]:l[0]}this.createOrUpdateVertexFeature_(m);var u;for(var i=1,ii=j.length;i<ii;++i){u=j[i].segment;if((ol.coordinate.equals(l[0],u[0])&&ol.coordinate.equals(l[1],u[1])||(ol.coordinate.equals(l[0],u[1])&&ol.coordinate.equals(l[1],u[0])))){p[ol.getUid(u)]=true}else{break}}}p[ol.getUid(l)]=true;this.vertexSegments_=p;return}}if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}};ol.interaction.Modify.pointDistanceToSegmentDataSquared_=function(a,b){var c=b.geometry;if(c.getType()===ol.geom.GeometryType.CIRCLE){var d=(c);if(b.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var e=ol.coordinate.squaredDistance(d.getCenter(),a);var f=Math.sqrt(e)-d.getRadius();return f*f}}return ol.coordinate.squaredDistanceToSegment(a,b.segment)};ol.interaction.Modify.closestOnSegmentData_=function(a,b){var c=b.geometry;if(c.getType()===ol.geom.GeometryType.CIRCLE&&b.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){return c.getClosestPoint(a)}return ol.coordinate.closestOnSegment(a,b.segment)};ol.interaction.Modify.prototype.insertVertex_=function(a,b){var c=a.segment;var d=a.feature;var e=a.geometry;var f=a.depth;var g=(a.index);var h;while(b.length<e.getStride()){b.push(0)}switch(e.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:h=e.getCoordinates();h[f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.POLYGON:h=e.getCoordinates();h[f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.MULTI_POLYGON:h=e.getCoordinates();h[f[1]][f[0]].splice(g+1,0,b);break;case ol.geom.GeometryType.LINE_STRING:h=e.getCoordinates();h.splice(g+1,0,b);break;default:return}this.setGeometryCoordinates_(e,h);var i=this.rBush_;i.remove(a);this.updateSegmentIndices_(e,g,f,1);var j=({segment:[c[0],b],feature:d,geometry:e,depth:f,index:g});i.insert(ol.extent.boundingExtent(j.segment),j);this.dragSegments_.push([j,1]);var k=({segment:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1});i.insert(ol.extent.boundingExtent(k.segment),k);this.dragSegments_.push([k,0]);this.ignoreNextSingleClick_=true};ol.interaction.Modify.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=ol.MapBrowserEventType.POINTERDRAG){var a=this.lastPointerEvent_;this.willModifyFeatures_(a);this.removeVertex_();this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYEND,this.features_,a));this.modified_=false;return true}return false};ol.interaction.Modify.prototype.removeVertex_=function(){var a=this.dragSegments_;var b={};var c=false;var d,coordinates,dragSegment,geometry,i,index,left;var e,right,segmentData,uid;for(i=a.length-1;i>=0;--i){dragSegment=a[i];segmentData=dragSegment[0];uid=ol.getUid(segmentData.feature);if(segmentData.depth){uid+='-'+segmentData.depth.join('-')}if(!(uid in b)){b[uid]={}}if(dragSegment[1]===0){b[uid].right=segmentData;b[uid].index=segmentData.index}else if(dragSegment[1]==1){b[uid].left=segmentData;b[uid].index=segmentData.index+1}}for(uid in b){right=b[uid].right;left=b[uid].left;index=b[uid].index;e=index-1;if(left!==undefined){segmentData=left}else{segmentData=right}if(e<0){e=0}geometry=segmentData.geometry;coordinates=geometry.getCoordinates();d=coordinates;c=false;switch(geometry.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:if(coordinates[segmentData.depth[0]].length>2){coordinates[segmentData.depth[0]].splice(index,1);c=true}break;case ol.geom.GeometryType.LINE_STRING:if(coordinates.length>2){coordinates.splice(index,1);c=true}break;case ol.geom.GeometryType.MULTI_POLYGON:d=d[segmentData.depth[1]];case ol.geom.GeometryType.POLYGON:d=d[segmentData.depth[0]];if(d.length>4){if(index==d.length-1){index=0}d.splice(index,1);c=true;if(index===0){d.pop();d.push(d[0]);e=d.length-1}}break;default:}if(c){this.setGeometryCoordinates_(geometry,coordinates);var f=[];if(left!==undefined){this.rBush_.remove(left);f.push(left.segment[0])}if(right!==undefined){this.rBush_.remove(right);f.push(right.segment[1])}if(left!==undefined&&right!==undefined){var g=({depth:segmentData.depth,feature:segmentData.feature,geometry:segmentData.geometry,index:e,segment:f});this.rBush_.insert(ol.extent.boundingExtent(g.segment),g)}this.updateSegmentIndices_(geometry,index,segmentData.depth,-1);if(this.vertexFeature_){this.overlay_.getSource().removeFeature(this.vertexFeature_);this.vertexFeature_=null}a.length=0}}return c};ol.interaction.Modify.prototype.setGeometryCoordinates_=function(a,b){this.changingFeature_=true;a.setCoordinates(b);this.changingFeature_=false};ol.interaction.Modify.prototype.updateSegmentIndices_=function(b,c,d,e){this.rBush_.forEachInExtent(b.getExtent(),function(a){if(a.geometry===b&&(d===undefined||a.depth===undefined||ol.array.equals(a.depth,d))&&a.index>c){a.index+=e}})};ol.interaction.Modify.getDefaultStyleFunction=function(){var c=ol.style.Style.createDefaultEditing();return function(a,b){return c[ol.geom.GeometryType.POINT]}};ol.interaction.Modify.Event=function(a,b,c){ol.events.Event.call(this,a);this.features=b;this.mapBrowserEvent=c};ol.inherits(ol.interaction.Modify.Event,ol.events.Event);bq.provide('ol.interaction.Select');bq.require('ol');bq.require('ol.CollectionEventType');bq.require('ol.array');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.condition');bq.require('ol.functions');bq.require('ol.geom.GeometryType');bq.require('ol.interaction.Interaction');bq.require('ol.layer.Vector');bq.require('ol.obj');bq.require('ol.source.Vector');bq.require('ol.style.Style');ol.interaction.Select=function(b){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.Select.handleEvent});var c=b?b:{};this.condition_=c.condition?c.condition:ol.events.condition.singleClick;this.addCondition_=c.addCondition?c.addCondition:ol.events.condition.never;this.removeCondition_=c.removeCondition?c.removeCondition:ol.events.condition.never;this.toggleCondition_=c.toggleCondition?c.toggleCondition:ol.events.condition.shiftKeyOnly;this.multi_=c.multi?c.multi:false;this.filter_=c.filter?c.filter:ol.functions.TRUE;this.hitTolerance_=c.hitTolerance?c.hitTolerance:0;var d=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:false,features:c.features,wrapX:c.wrapX}),style:c.style?c.style:ol.interaction.Select.getDefaultStyleFunction(),updateWhileAnimating:true,updateWhileInteracting:true});this.featureOverlay_=d;var e;if(c.layers){if(typeof c.layers==='function'){e=c.layers}else{var f=c.layers;e=function(a){return ol.array.includes(f,a)}}}else{e=ol.functions.TRUE}this.layerFilter_=e;this.featureLayerAssociation_={};var g=this.featureOverlay_.getSource().getFeaturesCollection();ol.events.listen(g,ol.CollectionEventType.ADD,this.addFeature_,this);ol.events.listen(g,ol.CollectionEventType.REMOVE,this.removeFeature_,this)};ol.inherits(ol.interaction.Select,ol.interaction.Interaction);ol.interaction.Select.prototype.addFeatureLayerAssociation_=function(a,b){var c=ol.getUid(a);this.featureLayerAssociation_[c]=b};ol.interaction.Select.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()};ol.interaction.Select.prototype.getHitTolerance=function(){return this.hitTolerance_};ol.interaction.Select.prototype.getLayer=function(a){var b=ol.getUid(a);return(this.featureLayerAssociation_[b])};ol.interaction.Select.handleEvent=function(c){if(!this.condition_(c)){return true}var d=this.addCondition_(c);var e=this.removeCondition_(c);var f=this.toggleCondition_(c);var g=!d&&!e&&!f;var h=c.map;var k=this.featureOverlay_.getSource().getFeaturesCollection();var l=[];var m=[];if(g){ol.obj.clear(this.featureLayerAssociation_);h.forEachFeatureAtPixel(c.pixel,(function(a,b){if(this.filter_(a,b)){m.push(a);this.addFeatureLayerAssociation_(a,b);return!this.multi_}}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});var i;for(i=k.getLength()-1;i>=0;--i){var n=k.item(i);var o=m.indexOf(n);if(o>-1){m.splice(o,1)}else{k.remove(n);l.push(n)}}if(m.length!==0){k.extend(m)}}else{h.forEachFeatureAtPixel(c.pixel,(function(a,b){if(this.filter_(a,b)){if((d||f)&&!ol.array.includes(k.getArray(),a)){m.push(a);this.addFeatureLayerAssociation_(a,b)}else if((e||f)&&ol.array.includes(k.getArray(),a)){l.push(a);this.removeFeatureLayerAssociation_(a)}return!this.multi_}}).bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});var j;for(j=l.length-1;j>=0;--j){k.remove(l[j])}k.extend(m)}if(m.length>0||l.length>0){this.dispatchEvent(new ol.interaction.Select.Event(ol.interaction.Select.EventType_.SELECT,m,l,c))}return ol.events.condition.pointerMove(c)};ol.interaction.Select.prototype.setHitTolerance=function(a){this.hitTolerance_=a};ol.interaction.Select.prototype.setMap=function(a){var b=this.getMap();var c=this.featureOverlay_.getSource().getFeaturesCollection();if(b){c.forEach(b.unskipFeature,b)}ol.interaction.Interaction.prototype.setMap.call(this,a);this.featureOverlay_.setMap(a);if(a){c.forEach(a.skipFeature,a)}};ol.interaction.Select.getDefaultStyleFunction=function(){var c=ol.style.Style.createDefaultEditing();ol.array.extend(c[ol.geom.GeometryType.POLYGON],c[ol.geom.GeometryType.LINE_STRING]);ol.array.extend(c[ol.geom.GeometryType.GEOMETRY_COLLECTION],c[ol.geom.GeometryType.LINE_STRING]);return function(a,b){if(!a.getGeometry()){return null}return c[a.getGeometry().getType()]}};ol.interaction.Select.prototype.addFeature_=function(a){var b=this.getMap();if(b){b.skipFeature((a.element))}};ol.interaction.Select.prototype.removeFeature_=function(a){var b=this.getMap();if(b){b.unskipFeature((a.element))}};ol.interaction.Select.prototype.removeFeatureLayerAssociation_=function(a){var b=ol.getUid(a);delete this.featureLayerAssociation_[b]};ol.interaction.Select.Event=function(a,b,c,d){ol.events.Event.call(this,a);this.selected=b;this.deselected=c;this.mapBrowserEvent=d};ol.inherits(ol.interaction.Select.Event,ol.events.Event);ol.interaction.Select.EventType_={SELECT:'select'};bq.provide('ol.interaction.Snap');bq.require('ol');bq.require('ol.Collection');bq.require('ol.CollectionEventType');bq.require('ol.coordinate');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.geom.GeometryType');bq.require('ol.geom.Polygon');bq.require('ol.interaction.Pointer');bq.require('ol.obj');bq.require('ol.source.Vector');bq.require('ol.source.VectorEventType');bq.require('ol.structs.RBush');ol.interaction.Snap=function(a){ol.interaction.Pointer.call(this,{handleEvent:ol.interaction.Snap.handleEvent_,handleDownEvent:ol.functions.TRUE,handleUpEvent:ol.interaction.Snap.handleUpEvent_});var b=a?a:{};this.source_=b.source?b.source:null;this.vertex_=b.vertex!==undefined?b.vertex:true;this.edge_=b.edge!==undefined?b.edge:true;this.features_=b.features?b.features:null;this.featuresListenerKeys_=[];this.featureChangeListenerKeys_={};this.indexedFeaturesExtents_={};this.pendingFeatures_={};this.pixelCoordinate_=null;this.pixelTolerance_=b.pixelTolerance!==undefined?b.pixelTolerance:10;this.sortByDistance_=ol.interaction.Snap.sortByDistance.bind(this);this.rBush_=new ol.structs.RBush();this.SEGMENT_WRITERS_={'Point':this.writePointGeometry_,'LineString':this.writeLineStringGeometry_,'LinearRing':this.writeLineStringGeometry_,'Polygon':this.writePolygonGeometry_,'MultiPoint':this.writeMultiPointGeometry_,'MultiLineString':this.writeMultiLineStringGeometry_,'MultiPolygon':this.writeMultiPolygonGeometry_,'GeometryCollection':this.writeGeometryCollectionGeometry_,'Circle':this.writeCircleGeometry_}};ol.inherits(ol.interaction.Snap,ol.interaction.Pointer);ol.interaction.Snap.prototype.addFeature=function(a,b){var c=b!==undefined?b:true;var d=ol.getUid(a);var e=a.getGeometry();if(e){var f=this.SEGMENT_WRITERS_[e.getType()];if(f){this.indexedFeaturesExtents_[d]=e.getExtent(ol.extent.createEmpty());f.call(this,a,e)}}if(c){this.featureChangeListenerKeys_[d]=ol.events.listen(a,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)}};ol.interaction.Snap.prototype.forEachFeatureAdd_=function(a){this.addFeature(a)};ol.interaction.Snap.prototype.forEachFeatureRemove_=function(a){this.removeFeature(a)};ol.interaction.Snap.prototype.getFeatures_=function(){var a;if(this.features_){a=this.features_}else if(this.source_){a=this.source_.getFeatures()}return(a)};ol.interaction.Snap.prototype.handleFeatureAdd_=function(a){var b;if(a instanceof ol.source.Vector.Event){b=a.feature}else if(a instanceof ol.Collection.Event){b=a.element}this.addFeature((b))};ol.interaction.Snap.prototype.handleFeatureRemove_=function(a){var b;if(a instanceof ol.source.Vector.Event){b=a.feature}else if(a instanceof ol.Collection.Event){b=a.element}this.removeFeature((b))};ol.interaction.Snap.prototype.handleFeatureChange_=function(a){var b=(a.target);if(this.handlingDownUpSequence){var c=ol.getUid(b);if(!(c in this.pendingFeatures_)){this.pendingFeatures_[c]=b}}else{this.updateFeature_(b)}};ol.interaction.Snap.prototype.removeFeature=function(b,c){var d=c!==undefined?c:true;var e=ol.getUid(b);var f=this.indexedFeaturesExtents_[e];if(f){var g=this.rBush_;var i,nodesToRemove=[];g.forEachInExtent(f,function(a){if(b===a.feature){nodesToRemove.push(a)}});for(i=nodesToRemove.length-1;i>=0;--i){g.remove(nodesToRemove[i])}}if(d){ol.events.unlistenByKey(this.featureChangeListenerKeys_[e]);delete this.featureChangeListenerKeys_[e]}};ol.interaction.Snap.prototype.setMap=function(a){var b=this.getMap();var c=this.featuresListenerKeys_;var d=this.getFeatures_();if(b){c.forEach(ol.events.unlistenByKey);c.length=0;d.forEach(this.forEachFeatureRemove_,this)}ol.interaction.Pointer.prototype.setMap.call(this,a);if(a){if(this.features_){c.push(ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this),ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this))}else if(this.source_){c.push(ol.events.listen(this.source_,ol.source.VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this),ol.events.listen(this.source_,ol.source.VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this))}d.forEach(this.forEachFeatureAdd_,this)}};ol.interaction.Snap.prototype.shouldStopEvent=ol.functions.FALSE;ol.interaction.Snap.prototype.snapTo=function(b,c,d){var e=d.getCoordinateFromPixel([b[0]-this.pixelTolerance_,b[1]+this.pixelTolerance_]);var f=d.getCoordinateFromPixel([b[0]+this.pixelTolerance_,b[1]-this.pixelTolerance_]);var g=ol.extent.boundingExtent([e,f]);var h=this.rBush_.getInExtent(g);if(this.vertex_&&!this.edge_){h=h.filter(function(a){return a.feature.getGeometry().getType()!==ol.geom.GeometryType.CIRCLE})}var i=false;var j=false;var k=null;var l=null;var m,pixel1,pixel2,squaredDist1,squaredDist2;if(h.length>0){this.pixelCoordinate_=c;h.sort(this.sortByDistance_);var n=h[0].segment;var o=h[0].feature.getGeometry().getType()===ol.geom.GeometryType.CIRCLE;if(this.vertex_&&!this.edge_){pixel1=d.getPixelFromCoordinate(n[0]);pixel2=d.getPixelFromCoordinate(n[1]);squaredDist1=ol.coordinate.squaredDistance(b,pixel1);squaredDist2=ol.coordinate.squaredDistance(b,pixel2);m=Math.sqrt(Math.min(squaredDist1,squaredDist2));i=m<=this.pixelTolerance_;if(i){j=true;k=squaredDist1>squaredDist2?n[1]:n[0];l=d.getPixelFromCoordinate(k)}}else if(this.edge_){if(o){k=ol.coordinate.closestOnCircle(c,(h[0].feature.getGeometry()))}else{k=(ol.coordinate.closestOnSegment(c,n))}l=d.getPixelFromCoordinate(k);if(ol.coordinate.distance(b,l)<=this.pixelTolerance_){j=true;if(this.vertex_&&!o){pixel1=d.getPixelFromCoordinate(n[0]);pixel2=d.getPixelFromCoordinate(n[1]);squaredDist1=ol.coordinate.squaredDistance(l,pixel1);squaredDist2=ol.coordinate.squaredDistance(l,pixel2);m=Math.sqrt(Math.min(squaredDist1,squaredDist2));i=m<=this.pixelTolerance_;if(i){k=squaredDist1>squaredDist2?n[1]:n[0];l=d.getPixelFromCoordinate(k)}}}}if(j){l=[Math.round(l[0]),Math.round(l[1])]}}return({snapped:j,vertex:k,vertexPixel:l})};ol.interaction.Snap.prototype.updateFeature_=function(a){this.removeFeature(a,false);this.addFeature(a,false)};ol.interaction.Snap.prototype.writeCircleGeometry_=function(a,b){var c=ol.geom.Polygon.fromCircle(b);var d=c.getCoordinates()[0];var i,ii,segment,segmentData;for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}};ol.interaction.Snap.prototype.writeGeometryCollectionGeometry_=function(a,b){var i,geometries=b.getGeometriesArray();for(i=0;i<geometries.length;++i){var c=this.SEGMENT_WRITERS_[geometries[i].getType()];if(c){c.call(this,a,geometries[i])}}};ol.interaction.Snap.prototype.writeLineStringGeometry_=function(a,b){var c=b.getCoordinates();var i,ii,segment,segmentData;for(i=0,ii=c.length-1;i<ii;++i){segment=c.slice(i,i+2);segmentData=({feature:a,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}};ol.interaction.Snap.prototype.writeMultiLineStringGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,segment,segmentData;for(j=0,jj=c.length;j<jj;++j){d=c[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Snap.prototype.writeMultiPointGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,segmentData;for(i=0,ii=c.length;i<ii;++i){d=c[i];segmentData=({feature:a,segment:[d,d]});this.rBush_.insert(b.getExtent(),segmentData)}};ol.interaction.Snap.prototype.writeMultiPolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,k,kk,rings,segment,segmentData;for(k=0,kk=c.length;k<kk;++k){rings=c[k];for(j=0,jj=rings.length;j<jj;++j){d=rings[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}}};ol.interaction.Snap.prototype.writePointGeometry_=function(a,b){var c=b.getCoordinates();var d=({feature:a,segment:[c,c]});this.rBush_.insert(b.getExtent(),d)};ol.interaction.Snap.prototype.writePolygonGeometry_=function(a,b){var c=b.getCoordinates();var d,i,ii,j,jj,segment,segmentData;for(j=0,jj=c.length;j<jj;++j){d=c[j];for(i=0,ii=d.length-1;i<ii;++i){segment=d.slice(i,i+2);segmentData=({feature:a,segment:segment});this.rBush_.insert(ol.extent.boundingExtent(segment),segmentData)}}};ol.interaction.Snap.handleEvent_=function(a){var b=this.snapTo(a.pixel,a.coordinate,a.map);if(b.snapped){a.coordinate=b.vertex.slice(0,2);a.pixel=b.vertexPixel}return ol.interaction.Pointer.handleEvent.call(this,a)};ol.interaction.Snap.handleUpEvent_=function(a){var b=ol.obj.getValues(this.pendingFeatures_);if(b.length){b.forEach(this.updateFeature_,this);this.pendingFeatures_={}}return false};ol.interaction.Snap.sortByDistance=function(a,b){return ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,a.segment)-ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,b.segment)};bq.provide('ol.interaction.TranslateEventType');ol.interaction.TranslateEventType={TRANSLATESTART:'translatestart',TRANSLATING:'translating',TRANSLATEEND:'translateend'};bq.provide('ol.interaction.Translate');bq.require('ol');bq.require('ol.Collection');bq.require('ol.Object');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.functions');bq.require('ol.array');bq.require('ol.interaction.Pointer');bq.require('ol.interaction.Property');bq.require('ol.interaction.TranslateEventType');ol.interaction.Translate=function(b){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Translate.handleDownEvent_,handleDragEvent:ol.interaction.Translate.handleDragEvent_,handleMoveEvent:ol.interaction.Translate.handleMoveEvent_,handleUpEvent:ol.interaction.Translate.handleUpEvent_});var c=b?b:{};this.lastCoordinate_=null;this.features_=c.features!==undefined?c.features:null;var d;if(c.layers){if(typeof c.layers==='function'){d=c.layers}else{var e=c.layers;d=function(a){return ol.array.includes(e,a)}}}else{d=ol.functions.TRUE}this.layerFilter_=d;this.hitTolerance_=c.hitTolerance?c.hitTolerance:0;this.lastFeature_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.Property.ACTIVE),this.handleActiveChanged_,this)};ol.inherits(ol.interaction.Translate,ol.interaction.Pointer);ol.interaction.Translate.handleDownEvent_=function(a){this.lastFeature_=this.featuresAtPixel_(a.pixel,a.map);if(!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=a.coordinate;ol.interaction.Translate.handleMoveEvent_.call(this,a);var b=this.features_||new ol.Collection([this.lastFeature_]);this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATESTART,b,a.coordinate));return true}return false};ol.interaction.Translate.handleUpEvent_=function(a){if(this.lastCoordinate_){this.lastCoordinate_=null;ol.interaction.Translate.handleMoveEvent_.call(this,a);var b=this.features_||new ol.Collection([this.lastFeature_]);this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATEEND,b,a.coordinate));return true}return false};ol.interaction.Translate.handleDragEvent_=function(c){if(this.lastCoordinate_){var d=c.coordinate;var e=d[0]-this.lastCoordinate_[0];var f=d[1]-this.lastCoordinate_[1];var g=this.features_||new ol.Collection([this.lastFeature_]);g.forEach(function(a){var b=a.getGeometry();b.translate(e,f);a.setGeometry(b)});this.lastCoordinate_=d;this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATING,g,d))}};ol.interaction.Translate.handleMoveEvent_=function(a){var b=a.map.getViewport();if(this.featuresAtPixel_(a.pixel,a.map)){b.classList.remove(this.lastCoordinate_?'ol-grab':'ol-grabbing');b.classList.add(this.lastCoordinate_?'ol-grabbing':'ol-grab')}else{b.classList.remove('ol-grab','ol-grabbing')}};ol.interaction.Translate.prototype.featuresAtPixel_=function(b,c){return c.forEachFeatureAtPixel(b,function(a){if(!this.features_||ol.array.includes(this.features_.getArray(),a)){return a}}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})};ol.interaction.Translate.prototype.getHitTolerance=function(){return this.hitTolerance_};ol.interaction.Translate.prototype.setHitTolerance=function(a){this.hitTolerance_=a};ol.interaction.Translate.prototype.setMap=function(a){var b=this.getMap();ol.interaction.Pointer.prototype.setMap.call(this,a);this.updateState_(b)};ol.interaction.Translate.prototype.handleActiveChanged_=function(){this.updateState_(null)};ol.interaction.Translate.prototype.updateState_=function(a){var b=this.getMap();var c=this.getActive();if(!b||!c){b=b||a;if(b){var d=b.getViewport();d.classList.remove('ol-grab','ol-grabbing')}}};ol.interaction.Translate.Event=function(a,b,c){ol.events.Event.call(this,a);this.features=b;this.coordinate=c};ol.inherits(ol.interaction.Translate.Event,ol.events.Event);bq.provide('ol.layer.Heatmap');bq.require('ol.events');bq.require('ol');bq.require('ol.Object');bq.require('ol.dom');bq.require('ol.layer.Vector');bq.require('ol.math');bq.require('ol.obj');bq.require('ol.render.EventType');bq.require('ol.style.Icon');bq.require('ol.style.Style');ol.layer.Heatmap=function(g){var h=g?g:{};var i=ol.obj.assign({},h);delete i.gradient;delete i.radius;delete i.blur;delete i.shadow;delete i.weight;ol.layer.Vector.call(this,(i));this.gradient_=null;this.shadow_=h.shadow!==undefined?h.shadow:250;this.circleImage_=undefined;this.styleCache_=null;ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.GRADIENT),this.handleGradientChanged_,this);this.setGradient(h.gradient?h.gradient:ol.layer.Heatmap.DEFAULT_GRADIENT);this.setBlur(h.blur!==undefined?h.blur:15);this.setRadius(h.radius!==undefined?h.radius:8);ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.BLUR),this.handleStyleChanged_,this);ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.RADIUS),this.handleStyleChanged_,this);this.handleStyleChanged_();var j=h.weight?h.weight:'weight';var k;if(typeof j==='string'){k=function(a){return a.get(j)}}else{k=j}this.setStyle(function(a,b){var c=k(a);var d=c!==undefined?ol.math.clamp(c,0,1):1;var e=(255*d)|0;var f=this.styleCache_[e];if(!f){f=[new ol.style.Style({image:new ol.style.Icon({opacity:d,src:this.circleImage_})})];this.styleCache_[e]=f}return f}.bind(this));this.setRenderOrder(null);ol.events.listen(this,ol.render.EventType.RENDER,this.handleRender_,this)};ol.inherits(ol.layer.Heatmap,ol.layer.Vector);ol.layer.Heatmap.DEFAULT_GRADIENT=['#00f','#0ff','#0f0','#ff0','#f00'];ol.layer.Heatmap.createGradient_=function(a){var b=1;var c=256;var d=ol.dom.createCanvasContext2D(b,c);var e=d.createLinearGradient(0,0,b,c);var f=1/(a.length-1);for(var i=0,ii=a.length;i<ii;++i){e.addColorStop(i*f,a[i])}d.fillStyle=e;d.fillRect(0,0,b,c);return d.getImageData(0,0,b,c).data};ol.layer.Heatmap.prototype.createCircle_=function(){var a=this.getRadius();var b=this.getBlur();var c=a+b+1;var d=2*c;var e=ol.dom.createCanvasContext2D(d,d);e.shadowOffsetX=e.shadowOffsetY=this.shadow_;e.shadowBlur=b;e.shadowColor='#000';e.beginPath();var f=c-this.shadow_;e.arc(f,f,a,0,Math.PI*2,true);e.fill();return e.canvas.toDataURL()};ol.layer.Heatmap.prototype.getBlur=function(){return(this.get(ol.layer.Heatmap.Property_.BLUR))};ol.layer.Heatmap.prototype.getGradient=function(){return(this.get(ol.layer.Heatmap.Property_.GRADIENT))};ol.layer.Heatmap.prototype.getRadius=function(){return(this.get(ol.layer.Heatmap.Property_.RADIUS))};ol.layer.Heatmap.prototype.handleGradientChanged_=function(){this.gradient_=ol.layer.Heatmap.createGradient_(this.getGradient())};ol.layer.Heatmap.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_();this.styleCache_=new Array(256);this.changed()};ol.layer.Heatmap.prototype.handleRender_=function(a){var b=a.context;var c=b.canvas;var d=b.getImageData(0,0,c.width,c.height);var e=d.data;var i,ii,alpha;for(i=0,ii=e.length;i<ii;i+=4){alpha=e[i+3]*4;if(alpha){e[i]=this.gradient_[alpha];e[i+1]=this.gradient_[alpha+1];e[i+2]=this.gradient_[alpha+2]}}b.putImageData(d,0,0)};ol.layer.Heatmap.prototype.setBlur=function(a){this.set(ol.layer.Heatmap.Property_.BLUR,a)};ol.layer.Heatmap.prototype.setGradient=function(a){this.set(ol.layer.Heatmap.Property_.GRADIENT,a)};ol.layer.Heatmap.prototype.setRadius=function(a){this.set(ol.layer.Heatmap.Property_.RADIUS,a)};ol.layer.Heatmap.Property_={BLUR:'blur',GRADIENT:'gradient',RADIUS:'radius'};bq.provide('ol.layer.Image');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.layer.Layer');ol.layer.Image=function(a){var b=a?a:{};ol.layer.Layer.call(this,(b));this.type=ol.LayerType.IMAGE};ol.inherits(ol.layer.Image,ol.layer.Layer);ol.layer.Image.prototype.getSource;bq.provide('ol.layer.TileProperty');ol.layer.TileProperty={PRELOAD:'preload',USE_INTERIM_TILES_ON_ERROR:'useInterimTilesOnError'};bq.provide('ol.layer.Tile');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.layer.Layer');bq.require('ol.layer.TileProperty');bq.require('ol.obj');ol.layer.Tile=function(a){var b=a?a:{};var c=ol.obj.assign({},b);delete c.preload;delete c.useInterimTilesOnError;ol.layer.Layer.call(this,(c));this.setPreload(b.preload!==undefined?b.preload:0);this.setUseInterimTilesOnError(b.useInterimTilesOnError!==undefined?b.useInterimTilesOnError:true);this.type=ol.LayerType.TILE};ol.inherits(ol.layer.Tile,ol.layer.Layer);ol.layer.Tile.prototype.getPreload=function(){return(this.get(ol.layer.TileProperty.PRELOAD))};ol.layer.Tile.prototype.getSource;ol.layer.Tile.prototype.setPreload=function(a){this.set(ol.layer.TileProperty.PRELOAD,a)};ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return(this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR))};ol.layer.Tile.prototype.setUseInterimTilesOnError=function(a){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,a)};bq.provide('ol.layer.VectorTile');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.asserts');bq.require('ol.layer.TileProperty');bq.require('ol.layer.Vector');bq.require('ol.layer.VectorTileRenderType');bq.require('ol.obj');ol.layer.VectorTile=function(a){var b=a?a:{};var c=b.renderMode||ol.layer.VectorTileRenderType.HYBRID;ol.asserts.assert(c==undefined||c==ol.layer.VectorTileRenderType.IMAGE||c==ol.layer.VectorTileRenderType.HYBRID||c==ol.layer.VectorTileRenderType.VECTOR,28);if(b.declutter&&c==ol.layer.VectorTileRenderType.IMAGE){c=ol.layer.VectorTileRenderType.HYBRID}b.renderMode=c;var d=ol.obj.assign({},b);delete d.preload;delete d.useInterimTilesOnError;ol.layer.Vector.call(this,(d));this.setPreload(b.preload?b.preload:0);this.setUseInterimTilesOnError(b.useInterimTilesOnError?b.useInterimTilesOnError:true);this.type=ol.LayerType.VECTOR_TILE};ol.inherits(ol.layer.VectorTile,ol.layer.Vector);ol.layer.VectorTile.prototype.getPreload=function(){return(this.get(ol.layer.TileProperty.PRELOAD))};ol.layer.VectorTile.prototype.getUseInterimTilesOnError=function(){return(this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR))};ol.layer.VectorTile.prototype.setPreload=function(a){this.set(ol.layer.TileProperty.PRELOAD,a)};ol.layer.VectorTile.prototype.setUseInterimTilesOnError=function(a){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,a)};ol.layer.VectorTile.prototype.getSource;bq.provide('ol.webgl.Shader');bq.require('ol.functions');ol.webgl.Shader=function(a){this.source_=a};ol.webgl.Shader.prototype.getType=function(){};ol.webgl.Shader.prototype.getSource=function(){return this.source_};ol.webgl.Shader.prototype.isAnimated=ol.functions.FALSE;bq.provide('ol.webgl.Fragment');bq.require('ol');bq.require('ol.webgl');bq.require('ol.webgl.Shader');ol.webgl.Fragment=function(a){ol.webgl.Shader.call(this,a)};ol.inherits(ol.webgl.Fragment,ol.webgl.Shader);ol.webgl.Fragment.prototype.getType=function(){return ol.webgl.FRAGMENT_SHADER};bq.provide('ol.webgl.Vertex');bq.require('ol');bq.require('ol.webgl');bq.require('ol.webgl.Shader');ol.webgl.Vertex=function(a){ol.webgl.Shader.call(this,a)};ol.inherits(ol.webgl.Vertex,ol.webgl.Shader);ol.webgl.Vertex.prototype.getType=function(){return ol.webgl.VERTEX_SHADER};bq.provide('ol.render.webgl.circlereplay.defaultshader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.render.webgl.circlereplay.defaultshader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n':'precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}');ol.render.webgl.circlereplay.defaultshader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n':'varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}');bq.provide('ol.render.webgl.circlereplay.defaultshader.Locations');bq.require('ol');ol.render.webgl.circlereplay.defaultshader.Locations=function(a,b){this.u_projectionMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_projectionMatrix':'h');this.u_offsetScaleMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetScaleMatrix':'i');this.u_offsetRotateMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetRotateMatrix':'j');this.u_lineWidth=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_lineWidth':'k');this.u_pixelRatio=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_pixelRatio':'l');this.u_opacity=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_opacity':'m');this.u_fillColor=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_fillColor':'n');this.u_strokeColor=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_strokeColor':'o');this.u_size=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_size':'p');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'e');this.a_instruction=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_instruction':'f');this.a_radius=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_radius':'g')};bq.provide('ol.vec.Mat4');ol.vec.Mat4.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};ol.vec.Mat4.fromTransform=function(a,b){a[0]=b[0];a[1]=b[1];a[4]=b[2];a[5]=b[3];a[12]=b[4];a[13]=b[5];return a};bq.provide('ol.render.webgl.Replay');bq.require('ol');bq.require('ol.extent');bq.require('ol.render.VectorContext');bq.require('ol.transform');bq.require('ol.vec.Mat4');bq.require('ol.webgl');ol.render.webgl.Replay=function(a,b){ol.render.VectorContext.call(this);this.tolerance=a;this.maxExtent=b;this.origin=ol.extent.getCenter(b);this.projectionMatrix_=ol.transform.create();this.offsetRotateMatrix_=ol.transform.create();this.offsetScaleMatrix_=ol.transform.create();this.tmpMat4_=ol.vec.Mat4.create();this.indices=[];this.indicesBuffer=null;this.startIndices=[];this.startIndicesFeature=[];this.vertices=[];this.verticesBuffer=null;this.lineStringReplay=undefined};ol.inherits(ol.render.webgl.Replay,ol.render.VectorContext);ol.render.webgl.Replay.prototype.getDeleteResourcesFunction=function(a){};ol.render.webgl.Replay.prototype.finish=function(a){};ol.render.webgl.Replay.prototype.setUpProgram=function(a,b,c,d){};ol.render.webgl.Replay.prototype.shutDownProgram=function(a,b){};ol.render.webgl.Replay.prototype.drawReplay=function(a,b,c,d){};ol.render.webgl.Replay.prototype.drawHitDetectionReplayOneByOne=function(a,b,c,d,e){};ol.render.webgl.Replay.prototype.drawHitDetectionReplay=function(a,b,c,d,e,f){if(!e){return this.drawHitDetectionReplayAll(a,b,c,d)}else{return this.drawHitDetectionReplayOneByOne(a,b,c,d,f)}};ol.render.webgl.Replay.prototype.drawHitDetectionReplayAll=function(a,b,c,d){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawReplay(a,b,c,true);var e=d(null);if(e){return e}else{return undefined}};ol.render.webgl.Replay.prototype.replay=function(a,b,c,d,e,f,g,h,i,j,k){var l=a.getGL();var m,tmpStencilFunc,tmpStencilMaskVal,tmpStencilRef,tmpStencilMask,tmpStencilOpFail,tmpStencilOpPass,tmpStencilOpZFail;if(this.lineStringReplay){m=l.isEnabled(l.STENCIL_TEST);tmpStencilFunc=l.getParameter(l.STENCIL_FUNC);tmpStencilMaskVal=l.getParameter(l.STENCIL_VALUE_MASK);tmpStencilRef=l.getParameter(l.STENCIL_REF);tmpStencilMask=l.getParameter(l.STENCIL_WRITEMASK);tmpStencilOpFail=l.getParameter(l.STENCIL_FAIL);tmpStencilOpPass=l.getParameter(l.STENCIL_PASS_DEPTH_PASS);tmpStencilOpZFail=l.getParameter(l.STENCIL_PASS_DEPTH_FAIL);l.enable(l.STENCIL_TEST);l.clear(l.STENCIL_BUFFER_BIT);l.stencilMask(255);l.stencilFunc(l.ALWAYS,1,255);l.stencilOp(l.KEEP,l.KEEP,l.REPLACE);this.lineStringReplay.replay(a,b,c,d,e,f,g,h,i,j,k);l.stencilMask(0);l.stencilFunc(l.NOTEQUAL,1,255)}a.bindBuffer(ol.webgl.ARRAY_BUFFER,this.verticesBuffer);a.bindBuffer(ol.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var n=this.setUpProgram(l,a,e,f);var o=ol.transform.reset(this.projectionMatrix_);ol.transform.scale(o,2/(c*e[0]),2/(c*e[1]));ol.transform.rotate(o,-d);ol.transform.translate(o,-(b[0]-this.origin[0]),-(b[1]-this.origin[1]));var p=ol.transform.reset(this.offsetScaleMatrix_);ol.transform.scale(p,2/e[0],2/e[1]);var q=ol.transform.reset(this.offsetRotateMatrix_);if(d!==0){ol.transform.rotate(q,-d)}l.uniformMatrix4fv(n.u_projectionMatrix,false,ol.vec.Mat4.fromTransform(this.tmpMat4_,o));l.uniformMatrix4fv(n.u_offsetScaleMatrix,false,ol.vec.Mat4.fromTransform(this.tmpMat4_,p));l.uniformMatrix4fv(n.u_offsetRotateMatrix,false,ol.vec.Mat4.fromTransform(this.tmpMat4_,q));l.uniform1f(n.u_opacity,g);var r;if(i===undefined){this.drawReplay(l,a,h,false)}else{r=this.drawHitDetectionReplay(l,a,h,i,j,k)}this.shutDownProgram(l,n);if(this.lineStringReplay){if(!m){l.disable(l.STENCIL_TEST)}l.clear(l.STENCIL_BUFFER_BIT);l.stencilFunc((tmpStencilFunc),(tmpStencilRef),(tmpStencilMaskVal));l.stencilMask((tmpStencilMask));l.stencilOp((tmpStencilOpFail),(tmpStencilOpZFail),(tmpStencilOpPass))}return r};ol.render.webgl.Replay.prototype.drawElements=function(a,b,c,d){var e=b.hasOESElementIndexUint?ol.webgl.UNSIGNED_INT:ol.webgl.UNSIGNED_SHORT;var f=b.hasOESElementIndexUint?4:2;var g=d-c;var h=c*f;a.drawElements(ol.webgl.TRIANGLES,g,e,h)};bq.provide('ol.render.webgl');ol.render.webgl.defaultFont='10px sans-serif';ol.render.webgl.defaultFillStyle=[0.0,0.0,0.0,1.0];ol.render.webgl.defaultLineCap='round';ol.render.webgl.defaultLineDash=[];ol.render.webgl.defaultLineDashOffset=0;ol.render.webgl.defaultLineJoin='round';ol.render.webgl.defaultMiterLimit=10;ol.render.webgl.defaultStrokeStyle=[0.0,0.0,0.0,1.0];ol.render.webgl.defaultTextAlign=0.5;ol.render.webgl.defaultTextBaseline=0.5;ol.render.webgl.defaultLineWidth=1;ol.render.webgl.triangleIsCounterClockwise=function(a,b,c,d,e,f){var g=(c-a)*(f-b)-(e-a)*(d-b);return(g<=ol.render.webgl.EPSILON&&g>=-ol.render.webgl.EPSILON)?undefined:g>0};ol.render.webgl.EPSILON=Number.EPSILON||2.220446049250313e-16;bq.provide('ol.webgl.Buffer');bq.require('ol.webgl');ol.webgl.Buffer=function(a,b){this.arr_=a!==undefined?a:[];this.usage_=b!==undefined?b:ol.webgl.Buffer.Usage_.STATIC_DRAW};ol.webgl.Buffer.prototype.getArray=function(){return this.arr_};ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_};ol.webgl.Buffer.Usage_={STATIC_DRAW:ol.webgl.STATIC_DRAW,STREAM_DRAW:ol.webgl.STREAM_DRAW,DYNAMIC_DRAW:ol.webgl.DYNAMIC_DRAW};bq.provide('ol.render.webgl.CircleReplay');bq.require('ol');bq.require('ol.array');bq.require('ol.color');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.geom.flat.transform');bq.require('ol.render.webgl.circlereplay.defaultshader');bq.require('ol.render.webgl.circlereplay.defaultshader.Locations');bq.require('ol.render.webgl.Replay');bq.require('ol.render.webgl');bq.require('ol.webgl');bq.require('ol.webgl.Buffer');ol.render.webgl.CircleReplay=function(a,b){ol.render.webgl.Replay.call(this,a,b);this.defaultLocations_=null;this.styles_=[];this.styleIndices_=[];this.radius_=0;this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:undefined,lineWidth:undefined,changed:false}};ol.inherits(ol.render.webgl.CircleReplay,ol.render.webgl.Replay);ol.render.webgl.CircleReplay.prototype.drawCoordinates_=function(a,b,c,d){var e=this.vertices.length;var f=this.indices.length;var n=e/4;var i,ii;for(i=b,ii=c;i<ii;i+=d){this.vertices[e++]=a[i];this.vertices[e++]=a[i+1];this.vertices[e++]=0;this.vertices[e++]=this.radius_;this.vertices[e++]=a[i];this.vertices[e++]=a[i+1];this.vertices[e++]=1;this.vertices[e++]=this.radius_;this.vertices[e++]=a[i];this.vertices[e++]=a[i+1];this.vertices[e++]=2;this.vertices[e++]=this.radius_;this.vertices[e++]=a[i];this.vertices[e++]=a[i+1];this.vertices[e++]=3;this.vertices[e++]=this.radius_;this.indices[f++]=n;this.indices[f++]=n+1;this.indices[f++]=n+2;this.indices[f++]=n+2;this.indices[f++]=n+3;this.indices[f++]=n;n+=4}};ol.render.webgl.CircleReplay.prototype.drawCircle=function(a,b){var c=a.getRadius();var d=a.getStride();if(c){this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);if(this.state_.changed){this.styleIndices_.push(this.indices.length);this.state_.changed=false}this.radius_=c;var e=a.getFlatCoordinates();e=ol.geom.flat.transform.translate(e,0,2,d,-this.origin[0],-this.origin[1]);this.drawCoordinates_(e,0,2,d)}else{if(this.state_.changed){this.styles_.pop();if(this.styles_.length){var f=this.styles_[this.styles_.length-1];this.state_.fillColor=(f[0]);this.state_.strokeColor=(f[1]);this.state_.lineWidth=(f[2]);this.state_.changed=false}}}};ol.render.webgl.CircleReplay.prototype.finish=function(a){this.verticesBuffer=new ol.webgl.Buffer(this.vertices);this.indicesBuffer=new ol.webgl.Buffer(this.indices);this.startIndices.push(this.indices.length);if(this.styleIndices_.length===0&&this.styles_.length>0){this.styles_=[]}this.vertices=null;this.indices=null};ol.render.webgl.CircleReplay.prototype.getDeleteResourcesFunction=function(a){var b=this.verticesBuffer;var c=this.indicesBuffer;return function(){a.deleteBuffer(b);a.deleteBuffer(c)}};ol.render.webgl.CircleReplay.prototype.setUpProgram=function(a,b,c,d){var e,vertexShader;e=ol.render.webgl.circlereplay.defaultshader.fragment;vertexShader=ol.render.webgl.circlereplay.defaultshader.vertex;var f=b.getProgram(e,vertexShader);var g;if(!this.defaultLocations_){g=new ol.render.webgl.circlereplay.defaultshader.Locations(a,f);this.defaultLocations_=g}else{g=this.defaultLocations_}b.useProgram(f);a.enableVertexAttribArray(g.a_position);a.vertexAttribPointer(g.a_position,2,ol.webgl.FLOAT,false,16,0);a.enableVertexAttribArray(g.a_instruction);a.vertexAttribPointer(g.a_instruction,1,ol.webgl.FLOAT,false,16,8);a.enableVertexAttribArray(g.a_radius);a.vertexAttribPointer(g.a_radius,1,ol.webgl.FLOAT,false,16,12);a.uniform2fv(g.u_size,c);a.uniform1f(g.u_pixelRatio,d);return g};ol.render.webgl.CircleReplay.prototype.shutDownProgram=function(a,b){a.disableVertexAttribArray(b.a_position);a.disableVertexAttribArray(b.a_instruction);a.disableVertexAttribArray(b.a_radius)};ol.render.webgl.CircleReplay.prototype.drawReplay=function(a,b,c,d){if(!ol.obj.isEmpty(c)){this.drawReplaySkipping_(a,b,c)}else{var i,start,end,nextStyle;end=this.startIndices[this.startIndices.length-1];for(i=this.styleIndices_.length-1;i>=0;--i){start=this.styleIndices_[i];nextStyle=this.styles_[i];this.setFillStyle_(a,(nextStyle[0]));this.setStrokeStyle_(a,(nextStyle[1]),(nextStyle[2]));this.drawElements(a,b,start,end);end=start}}};ol.render.webgl.CircleReplay.prototype.drawHitDetectionReplayOneByOne=function(a,b,c,d,e){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex;featureIndex=this.startIndices.length-2;end=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setFillStyle_(a,(nextStyle[0]));this.setStrokeStyle_(a,(nextStyle[1]),(nextStyle[2]));groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){start=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]===undefined&&feature.getGeometry()&&(e===undefined||ol.extent.intersects((e),feature.getGeometry().getExtent()))){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawElements(a,b,start,end);var f=d(feature);if(f){return f}}featureIndex--;end=start}}return undefined};ol.render.webgl.CircleReplay.prototype.drawReplaySkipping_=function(a,b,c){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex,featureStart;featureIndex=this.startIndices.length-2;end=start=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setFillStyle_(a,(nextStyle[0]));this.setStrokeStyle_(a,(nextStyle[1]),(nextStyle[2]));groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){featureStart=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]){if(start!==end){this.drawElements(a,b,start,end)}end=featureStart}featureIndex--;start=featureStart}if(start!==end){this.drawElements(a,b,start,end)}start=end=groupStart}};ol.render.webgl.CircleReplay.prototype.setFillStyle_=function(a,b){a.uniform4fv(this.defaultLocations_.u_fillColor,b)};ol.render.webgl.CircleReplay.prototype.setStrokeStyle_=function(a,b,c){a.uniform4fv(this.defaultLocations_.u_strokeColor,b);a.uniform1f(this.defaultLocations_.u_lineWidth,c)};ol.render.webgl.CircleReplay.prototype.setFillStrokeStyle=function(a,b){var d,strokeStyleWidth;if(b){var e=b.getLineDash();this.state_.lineDash=e?e:ol.render.webgl.defaultLineDash;var f=b.getLineDashOffset();this.state_.lineDashOffset=f?f:ol.render.webgl.defaultLineDashOffset;d=b.getColor();if(!(d instanceof CanvasGradient)&&!(d instanceof CanvasPattern)){d=ol.color.asArray(d).map(function(c,i){return i!=3?c/255:c})||ol.render.webgl.defaultStrokeStyle}else{d=ol.render.webgl.defaultStrokeStyle}strokeStyleWidth=b.getWidth();strokeStyleWidth=strokeStyleWidth!==undefined?strokeStyleWidth:ol.render.webgl.defaultLineWidth}else{d=[0,0,0,0];strokeStyleWidth=0}var g=a?a.getColor():[0,0,0,0];if(!(g instanceof CanvasGradient)&&!(g instanceof CanvasPattern)){g=ol.color.asArray(g).map(function(c,i){return i!=3?c/255:c})||ol.render.webgl.defaultFillStyle}else{g=ol.render.webgl.defaultFillStyle}if(!this.state_.strokeColor||!ol.array.equals(this.state_.strokeColor,d)||!this.state_.fillColor||!ol.array.equals(this.state_.fillColor,g)||this.state_.lineWidth!==strokeStyleWidth){this.state_.changed=true;this.state_.fillColor=g;this.state_.strokeColor=d;this.state_.lineWidth=strokeStyleWidth;this.styles_.push([g,d,strokeStyleWidth])}};bq.provide('ol.render.webgl.texturereplay.defaultshader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.render.webgl.texturereplay.defaultshader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n':'precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');ol.render.webgl.texturereplay.defaultshader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n':'varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}');bq.provide('ol.render.webgl.texturereplay.defaultshader.Locations');bq.require('ol');ol.render.webgl.texturereplay.defaultshader.Locations=function(a,b){this.u_projectionMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_projectionMatrix':'h');this.u_offsetScaleMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetScaleMatrix':'i');this.u_offsetRotateMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetRotateMatrix':'j');this.u_opacity=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_opacity':'k');this.u_image=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_image':'l');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'c');this.a_texCoord=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_texCoord':'d');this.a_offsets=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_offsets':'e');this.a_opacity=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_opacity':'f');this.a_rotateWithView=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_rotateWithView':'g')};bq.provide('ol.webgl.ContextEventType');ol.webgl.ContextEventType={LOST:'webglcontextlost',RESTORED:'webglcontextrestored'};bq.provide('ol.webgl.Context');bq.require('ol');bq.require('ol.Disposable');bq.require('ol.array');bq.require('ol.events');bq.require('ol.obj');bq.require('ol.webgl');bq.require('ol.webgl.ContextEventType');ol.webgl.Context=function(a,b){this.canvas_=a;this.gl_=b;this.bufferCache_={};this.shaderCache_={};this.programCache_={};this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null;this.hasOESElementIndexUint=ol.array.includes(ol.WEBGL_EXTENSIONS,'OES_element_index_uint');if(this.hasOESElementIndexUint){b.getExtension('OES_element_index_uint')}ol.events.listen(this.canvas_,ol.webgl.ContextEventType.LOST,this.handleWebGLContextLost,this);ol.events.listen(this.canvas_,ol.webgl.ContextEventType.RESTORED,this.handleWebGLContextRestored,this)};ol.inherits(ol.webgl.Context,ol.Disposable);ol.webgl.Context.prototype.bindBuffer=function(a,b){var c=this.getGL();var d=b.getArray();var e=String(ol.getUid(b));if(e in this.bufferCache_){var f=this.bufferCache_[e];c.bindBuffer(a,f.buffer)}else{var g=c.createBuffer();c.bindBuffer(a,g);var h;if(a==ol.webgl.ARRAY_BUFFER){h=new Float32Array(d)}else if(a==ol.webgl.ELEMENT_ARRAY_BUFFER){h=this.hasOESElementIndexUint?new Uint32Array(d):new Uint16Array(d)}c.bufferData(a,h,b.getUsage());this.bufferCache_[e]={buf:b,buffer:g}}};ol.webgl.Context.prototype.deleteBuffer=function(a){var b=this.getGL();var c=String(ol.getUid(a));var d=this.bufferCache_[c];if(!b.isContextLost()){b.deleteBuffer(d.buffer)}delete this.bufferCache_[c]};ol.webgl.Context.prototype.disposeInternal=function(){ol.events.unlistenAll(this.canvas_);var a=this.getGL();if(!a.isContextLost()){var b;for(b in this.bufferCache_){a.deleteBuffer(this.bufferCache_[b].buffer)}for(b in this.programCache_){a.deleteProgram(this.programCache_[b])}for(b in this.shaderCache_){a.deleteShader(this.shaderCache_[b])}a.deleteFramebuffer(this.hitDetectionFramebuffer_);a.deleteRenderbuffer(this.hitDetectionRenderbuffer_);a.deleteTexture(this.hitDetectionTexture_)}};ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_};ol.webgl.Context.prototype.getGL=function(){return this.gl_};ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){if(!this.hitDetectionFramebuffer_){this.initHitDetectionFramebuffer_()}return this.hitDetectionFramebuffer_};ol.webgl.Context.prototype.getShader=function(a){var b=String(ol.getUid(a));if(b in this.shaderCache_){return this.shaderCache_[b]}else{var c=this.getGL();var d=c.createShader(a.getType());c.shaderSource(d,a.getSource());c.compileShader(d);this.shaderCache_[b]=d;return d}};ol.webgl.Context.prototype.getProgram=function(a,b){var c=ol.getUid(a)+'/'+ol.getUid(b);if(c in this.programCache_){return this.programCache_[c]}else{var d=this.getGL();var e=d.createProgram();d.attachShader(e,this.getShader(a));d.attachShader(e,this.getShader(b));d.linkProgram(e);this.programCache_[c]=e;return e}};ol.webgl.Context.prototype.handleWebGLContextLost=function(){ol.obj.clear(this.bufferCache_);ol.obj.clear(this.shaderCache_);ol.obj.clear(this.programCache_);this.currentProgram_=null;this.hitDetectionFramebuffer_=null;this.hitDetectionTexture_=null;this.hitDetectionRenderbuffer_=null};ol.webgl.Context.prototype.handleWebGLContextRestored=function(){};ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var a=this.gl_;var b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,b);var c=ol.webgl.Context.createEmptyTexture(a,1,1);var d=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,d);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,1,1);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,d);a.bindTexture(a.TEXTURE_2D,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);this.hitDetectionFramebuffer_=b;this.hitDetectionTexture_=c;this.hitDetectionRenderbuffer_=d};ol.webgl.Context.prototype.useProgram=function(a){if(a==this.currentProgram_){return false}else{var b=this.getGL();b.useProgram(a);this.currentProgram_=a;return true}};ol.webgl.Context.createTexture_=function(a,b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);if(b!==undefined){a.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_S,b)}if(c!==undefined){a.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_T,c)}return d};ol.webgl.Context.createEmptyTexture=function(a,b,c,d,e){var f=ol.webgl.Context.createTexture_(a,d,e);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);return f};ol.webgl.Context.createTexture=function(a,b,c,d){var e=ol.webgl.Context.createTexture_(a,c,d);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return e};bq.provide('ol.render.webgl.TextureReplay');bq.require('ol');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.render.webgl.texturereplay.defaultshader');bq.require('ol.render.webgl.texturereplay.defaultshader.Locations');bq.require('ol.render.webgl.Replay');bq.require('ol.webgl');bq.require('ol.webgl.Context');ol.render.webgl.TextureReplay=function(a,b){ol.render.webgl.Replay.call(this,a,b);this.anchorX=undefined;this.anchorY=undefined;this.groupIndices=[];this.hitDetectionGroupIndices=[];this.height=undefined;this.imageHeight=undefined;this.imageWidth=undefined;this.defaultLocations=null;this.opacity=undefined;this.originX=undefined;this.originY=undefined;this.rotateWithView=undefined;this.rotation=undefined;this.scale=undefined;this.width=undefined};ol.inherits(ol.render.webgl.TextureReplay,ol.render.webgl.Replay);ol.render.webgl.TextureReplay.prototype.getDeleteResourcesFunction=function(a){var b=this.verticesBuffer;var c=this.indicesBuffer;var d=this.getTextures(true);var e=a.getGL();return function(){if(!e.isContextLost()){var i,ii;for(i=0,ii=d.length;i<ii;++i){e.deleteTexture(d[i])}}a.deleteBuffer(b);a.deleteBuffer(c)}};ol.render.webgl.TextureReplay.prototype.drawCoordinates=function(a,b,c,d){var e=(this.anchorX);var f=(this.anchorY);var g=(this.height);var h=(this.imageHeight);var j=(this.imageWidth);var k=(this.opacity);var l=(this.originX);var m=(this.originY);var o=this.rotateWithView?1.0:0.0;var p=(-this.rotation);var q=(this.scale);var r=(this.width);var s=Math.cos(p);var t=Math.sin(p);var u=this.indices.length;var v=this.vertices.length;var i,n,offsetX,offsetY,x,y;for(i=b;i<c;i+=d){x=a[i]-this.origin[0];y=a[i+1]-this.origin[1];n=v/8;offsetX=-q*e;offsetY=-q*(g-f);this.vertices[v++]=x;this.vertices[v++]=y;this.vertices[v++]=offsetX*s-offsetY*t;this.vertices[v++]=offsetX*t+offsetY*s;this.vertices[v++]=l/j;this.vertices[v++]=(m+g)/h;this.vertices[v++]=k;this.vertices[v++]=o;offsetX=q*(r-e);offsetY=-q*(g-f);this.vertices[v++]=x;this.vertices[v++]=y;this.vertices[v++]=offsetX*s-offsetY*t;this.vertices[v++]=offsetX*t+offsetY*s;this.vertices[v++]=(l+r)/j;this.vertices[v++]=(m+g)/h;this.vertices[v++]=k;this.vertices[v++]=o;offsetX=q*(r-e);offsetY=q*f;this.vertices[v++]=x;this.vertices[v++]=y;this.vertices[v++]=offsetX*s-offsetY*t;this.vertices[v++]=offsetX*t+offsetY*s;this.vertices[v++]=(l+r)/j;this.vertices[v++]=m/h;this.vertices[v++]=k;this.vertices[v++]=o;offsetX=-q*e;offsetY=q*f;this.vertices[v++]=x;this.vertices[v++]=y;this.vertices[v++]=offsetX*s-offsetY*t;this.vertices[v++]=offsetX*t+offsetY*s;this.vertices[v++]=l/j;this.vertices[v++]=m/h;this.vertices[v++]=k;this.vertices[v++]=o;this.indices[u++]=n;this.indices[u++]=n+1;this.indices[u++]=n+2;this.indices[u++]=n;this.indices[u++]=n+2;this.indices[u++]=n+3}return v};ol.render.webgl.TextureReplay.prototype.createTextures=function(a,b,c,d){var e,image,uid,i;var f=b.length;for(i=0;i<f;++i){image=b[i];uid=ol.getUid(image).toString();if(uid in c){e=c[uid]}else{e=ol.webgl.Context.createTexture(d,image,ol.webgl.CLAMP_TO_EDGE,ol.webgl.CLAMP_TO_EDGE);c[uid]=e}a[i]=e}};ol.render.webgl.TextureReplay.prototype.setUpProgram=function(a,b,c,d){var e=ol.render.webgl.texturereplay.defaultshader.fragment;var f=ol.render.webgl.texturereplay.defaultshader.vertex;var g=b.getProgram(e,f);var h;if(!this.defaultLocations){h=new ol.render.webgl.texturereplay.defaultshader.Locations(a,g);this.defaultLocations=h}else{h=this.defaultLocations}b.useProgram(g);a.enableVertexAttribArray(h.a_position);a.vertexAttribPointer(h.a_position,2,ol.webgl.FLOAT,false,32,0);a.enableVertexAttribArray(h.a_offsets);a.vertexAttribPointer(h.a_offsets,2,ol.webgl.FLOAT,false,32,8);a.enableVertexAttribArray(h.a_texCoord);a.vertexAttribPointer(h.a_texCoord,2,ol.webgl.FLOAT,false,32,16);a.enableVertexAttribArray(h.a_opacity);a.vertexAttribPointer(h.a_opacity,1,ol.webgl.FLOAT,false,32,24);a.enableVertexAttribArray(h.a_rotateWithView);a.vertexAttribPointer(h.a_rotateWithView,1,ol.webgl.FLOAT,false,32,28);return h};ol.render.webgl.TextureReplay.prototype.shutDownProgram=function(a,b){a.disableVertexAttribArray(b.a_position);a.disableVertexAttribArray(b.a_offsets);a.disableVertexAttribArray(b.a_texCoord);a.disableVertexAttribArray(b.a_opacity);a.disableVertexAttribArray(b.a_rotateWithView)};ol.render.webgl.TextureReplay.prototype.drawReplay=function(a,b,c,d){var e=d?this.getHitDetectionTextures():this.getTextures();var f=d?this.hitDetectionGroupIndices:this.groupIndices;if(!ol.obj.isEmpty(c)){this.drawReplaySkipping(a,b,c,e,f)}else{var i,ii,start;for(i=0,ii=e.length,start=0;i<ii;++i){a.bindTexture(ol.webgl.TEXTURE_2D,e[i]);var g=f[i];this.drawElements(a,b,start,g);start=g}}};ol.render.webgl.TextureReplay.prototype.drawReplaySkipping=function(a,b,c,d,e){var f=0;var i,ii;for(i=0,ii=d.length;i<ii;++i){a.bindTexture(ol.webgl.TEXTURE_2D,d[i]);var g=(i>0)?e[i-1]:0;var h=e[i];var j=g;var k=g;while(f<this.startIndices.length&&this.startIndices[f]<=h){var l=this.startIndicesFeature[f];var m=ol.getUid(l).toString();if(c[m]!==undefined){if(j!==k){this.drawElements(a,b,j,k)}j=(f===this.startIndices.length-1)?h:this.startIndices[f+1];k=j}else{k=(f===this.startIndices.length-1)?h:this.startIndices[f+1]}f++}if(j!==k){this.drawElements(a,b,j,k)}}};ol.render.webgl.TextureReplay.prototype.drawHitDetectionReplayOneByOne=function(a,b,c,d,e){var i,groupStart,start,end,feature,featureUid;var f=this.startIndices.length-1;var g=this.getHitDetectionTextures();for(i=g.length-1;i>=0;--i){a.bindTexture(ol.webgl.TEXTURE_2D,g[i]);groupStart=(i>0)?this.hitDetectionGroupIndices[i-1]:0;end=this.hitDetectionGroupIndices[i];while(f>=0&&this.startIndices[f]>=groupStart){start=this.startIndices[f];feature=this.startIndicesFeature[f];featureUid=ol.getUid(feature).toString();if(c[featureUid]===undefined&&feature.getGeometry()&&(e===undefined||ol.extent.intersects((e),feature.getGeometry().getExtent()))){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawElements(a,b,start,end);var h=d(feature);if(h){return h}}end=start;f--}}return undefined};ol.render.webgl.TextureReplay.prototype.finish=function(a){this.anchorX=undefined;this.anchorY=undefined;this.height=undefined;this.imageHeight=undefined;this.imageWidth=undefined;this.indices=null;this.opacity=undefined;this.originX=undefined;this.originY=undefined;this.rotateWithView=undefined;this.rotation=undefined;this.scale=undefined;this.vertices=null;this.width=undefined};ol.render.webgl.TextureReplay.prototype.getTextures=function(a){};ol.render.webgl.TextureReplay.prototype.getHitDetectionTextures=function(){};bq.provide('ol.render.webgl.ImageReplay');bq.require('ol');bq.require('ol.render.webgl.TextureReplay');bq.require('ol.webgl.Buffer');ol.render.webgl.ImageReplay=function(a,b){ol.render.webgl.TextureReplay.call(this,a,b);this.images_=[];this.hitDetectionImages_=[];this.textures_=[];this.hitDetectionTextures_=[]};ol.inherits(ol.render.webgl.ImageReplay,ol.render.webgl.TextureReplay);ol.render.webgl.ImageReplay.prototype.drawMultiPoint=function(a,b){this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);var c=a.getFlatCoordinates();var d=a.getStride();this.drawCoordinates(c,0,c.length,d)};ol.render.webgl.ImageReplay.prototype.drawPoint=function(a,b){this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);var c=a.getFlatCoordinates();var d=a.getStride();this.drawCoordinates(c,0,c.length,d)};ol.render.webgl.ImageReplay.prototype.finish=function(a){var b=a.getGL();this.groupIndices.push(this.indices.length);this.hitDetectionGroupIndices.push(this.indices.length);this.verticesBuffer=new ol.webgl.Buffer(this.vertices);var c=this.indices;this.indicesBuffer=new ol.webgl.Buffer(c);var d={};this.createTextures(this.textures_,this.images_,d,b);this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,d,b);this.images_=null;this.hitDetectionImages_=null;ol.render.webgl.TextureReplay.prototype.finish.call(this,a)};ol.render.webgl.ImageReplay.prototype.setImageStyle=function(a){var b=a.getAnchor();var c=a.getImage(1);var d=a.getImageSize();var e=a.getHitDetectionImage(1);var f=a.getOpacity();var g=a.getOrigin();var h=a.getRotateWithView();var i=a.getRotation();var j=a.getSize();var k=a.getScale();var l;if(this.images_.length===0){this.images_.push(c)}else{l=this.images_[this.images_.length-1];if(ol.getUid(l)!=ol.getUid(c)){this.groupIndices.push(this.indices.length);this.images_.push(c)}}if(this.hitDetectionImages_.length===0){this.hitDetectionImages_.push(e)}else{l=this.hitDetectionImages_[this.hitDetectionImages_.length-1];if(ol.getUid(l)!=ol.getUid(e)){this.hitDetectionGroupIndices.push(this.indices.length);this.hitDetectionImages_.push(e)}}this.anchorX=b[0];this.anchorY=b[1];this.height=j[1];this.imageHeight=d[1];this.imageWidth=d[0];this.opacity=f;this.originX=g[0];this.originY=g[1];this.rotation=i;this.rotateWithView=h;this.scale=k;this.width=j[0]};ol.render.webgl.ImageReplay.prototype.getTextures=function(a){return a?this.textures_.concat(this.hitDetectionTextures_):this.textures_};ol.render.webgl.ImageReplay.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};bq.provide('ol.render.webgl.linestringreplay.defaultshader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.render.webgl.linestringreplay.defaultshader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n':'precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');ol.render.webgl.linestringreplay.defaultshader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n':'varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}');bq.provide('ol.render.webgl.linestringreplay.defaultshader.Locations');bq.require('ol');ol.render.webgl.linestringreplay.defaultshader.Locations=function(a,b){this.u_projectionMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_projectionMatrix':'h');this.u_offsetScaleMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetScaleMatrix':'i');this.u_offsetRotateMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetRotateMatrix':'j');this.u_lineWidth=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_lineWidth':'k');this.u_miterLimit=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_miterLimit':'l');this.u_opacity=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_opacity':'m');this.u_color=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_color':'n');this.u_size=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_size':'o');this.u_pixelRatio=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_pixelRatio':'p');this.a_lastPos=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_lastPos':'d');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'e');this.a_nextPos=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_nextPos':'f');this.a_direction=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_direction':'g')};bq.provide('ol.render.webgl.LineStringReplay');bq.require('ol');bq.require('ol.array');bq.require('ol.color');bq.require('ol.extent');bq.require('ol.geom.flat.orient');bq.require('ol.geom.flat.transform');bq.require('ol.geom.flat.topology');bq.require('ol.obj');bq.require('ol.render.webgl');bq.require('ol.render.webgl.Replay');bq.require('ol.render.webgl.linestringreplay.defaultshader');bq.require('ol.render.webgl.linestringreplay.defaultshader.Locations');bq.require('ol.webgl');bq.require('ol.webgl.Buffer');ol.render.webgl.LineStringReplay=function(a,b){ol.render.webgl.Replay.call(this,a,b);this.defaultLocations_=null;this.styles_=[];this.styleIndices_=[];this.state_={strokeColor:null,lineCap:undefined,lineDash:null,lineDashOffset:undefined,lineJoin:undefined,lineWidth:undefined,miterLimit:undefined,changed:false}};ol.inherits(ol.render.webgl.LineStringReplay,ol.render.webgl.Replay);ol.render.webgl.LineStringReplay.prototype.drawCoordinates_=function(a,b,c,d){var i,ii;var e=this.vertices.length;var f=this.indices.length;var g=this.state_.lineJoin==='bevel'?0:this.state_.lineJoin==='miter'?1:2;var h=this.state_.lineCap==='butt'?0:this.state_.lineCap==='square'?1:2;var j=ol.geom.flat.topology.lineStringIsClosed(a,b,c,d);var k,sign,n;var l=f;var m=1;var o,p1,p2;for(i=b,ii=c;i<ii;i+=d){n=e/7;o=p1;p1=p2||[a[i],a[i+1]];if(i===b){p2=[a[i+d],a[i+d+1]];if(c-b===d*2&&ol.array.equals(p1,p2)){break}if(j){o=[a[c-d*2],a[c-d*2+1]];k=p2}else{if(h){e=this.addVertices_([0,0],p1,p2,m*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE_CAP*h,e);e=this.addVertices_([0,0],p1,p2,-m*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE_CAP*h,e);this.indices[f++]=n+2;this.indices[f++]=n;this.indices[f++]=n+1;this.indices[f++]=n+1;this.indices[f++]=n+3;this.indices[f++]=n+2}e=this.addVertices_([0,0],p1,p2,m*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE*(h||1),e);e=this.addVertices_([0,0],p1,p2,-m*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE*(h||1),e);l=e/7-1;continue}}else if(i===c-d){if(j){p2=k;break}else{o=o||[0,0];e=this.addVertices_(o,p1,[0,0],m*ol.render.webgl.LineStringReplay.Instruction_.END_LINE*(h||1),e);e=this.addVertices_(o,p1,[0,0],-m*ol.render.webgl.LineStringReplay.Instruction_.END_LINE*(h||1),e);this.indices[f++]=n;this.indices[f++]=l-1;this.indices[f++]=l;this.indices[f++]=l;this.indices[f++]=n+1;this.indices[f++]=n;if(h){e=this.addVertices_(o,p1,[0,0],m*ol.render.webgl.LineStringReplay.Instruction_.END_LINE_CAP*h,e);e=this.addVertices_(o,p1,[0,0],-m*ol.render.webgl.LineStringReplay.Instruction_.END_LINE_CAP*h,e);this.indices[f++]=n+2;this.indices[f++]=n;this.indices[f++]=n+1;this.indices[f++]=n+1;this.indices[f++]=n+3;this.indices[f++]=n+2}break}}else{p2=[a[i+d],a[i+d+1]]}sign=ol.render.webgl.triangleIsCounterClockwise(o[0],o[1],p1[0],p1[1],p2[0],p2[1])?-1:1;e=this.addVertices_(o,p1,p2,sign*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_FIRST*(g||1),e);e=this.addVertices_(o,p1,p2,sign*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_SECOND*(g||1),e);e=this.addVertices_(o,p1,p2,-sign*ol.render.webgl.LineStringReplay.Instruction_.MITER_BOTTOM*(g||1),e);if(i>b){this.indices[f++]=n;this.indices[f++]=l-1;this.indices[f++]=l;this.indices[f++]=n+2;this.indices[f++]=n;this.indices[f++]=m*sign>0?l:l-1}this.indices[f++]=n;this.indices[f++]=n+2;this.indices[f++]=n+1;l=n+2;m=sign;if(g){e=this.addVertices_(o,p1,p2,sign*ol.render.webgl.LineStringReplay.Instruction_.MITER_TOP*g,e);this.indices[f++]=n+1;this.indices[f++]=n+3;this.indices[f++]=n}}if(j){n=n||e/7;sign=ol.geom.flat.orient.linearRingIsClockwise([o[0],o[1],p1[0],p1[1],p2[0],p2[1]],0,6,2)?1:-1;e=this.addVertices_(o,p1,p2,sign*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_FIRST*(g||1),e);e=this.addVertices_(o,p1,p2,-sign*ol.render.webgl.LineStringReplay.Instruction_.MITER_BOTTOM*(g||1),e);this.indices[f++]=n;this.indices[f++]=l-1;this.indices[f++]=l;this.indices[f++]=n+1;this.indices[f++]=n;this.indices[f++]=m*sign>0?l:l-1}};ol.render.webgl.LineStringReplay.prototype.addVertices_=function(a,b,c,d,e){this.vertices[e++]=a[0];this.vertices[e++]=a[1];this.vertices[e++]=b[0];this.vertices[e++]=b[1];this.vertices[e++]=c[0];this.vertices[e++]=c[1];this.vertices[e++]=d;return e};ol.render.webgl.LineStringReplay.prototype.isValid_=function(a,b,c,d){var e=c-b;if(e<d*2){return false}else if(e===d*2){var f=[a[b],a[b+1]];var g=[a[b+d],a[b+d+1]];return!ol.array.equals(f,g)}return true};ol.render.webgl.LineStringReplay.prototype.drawLineString=function(a,b){var c=a.getFlatCoordinates();var d=a.getStride();if(this.isValid_(c,0,c.length,d)){c=ol.geom.flat.transform.translate(c,0,c.length,d,-this.origin[0],-this.origin[1]);if(this.state_.changed){this.styleIndices_.push(this.indices.length);this.state_.changed=false}this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);this.drawCoordinates_(c,0,c.length,d)}};ol.render.webgl.LineStringReplay.prototype.drawMultiLineString=function(a,b){var c=this.indices.length;var d=a.getEnds();d.unshift(0);var e=a.getFlatCoordinates();var f=a.getStride();var i,ii;if(d.length>1){for(i=1,ii=d.length;i<ii;++i){if(this.isValid_(e,d[i-1],d[i],f)){var g=ol.geom.flat.transform.translate(e,d[i-1],d[i],f,-this.origin[0],-this.origin[1]);this.drawCoordinates_(g,0,g.length,f)}}}if(this.indices.length>c){this.startIndices.push(c);this.startIndicesFeature.push(b);if(this.state_.changed){this.styleIndices_.push(c);this.state_.changed=false}}};ol.render.webgl.LineStringReplay.prototype.drawPolygonCoordinates=function(a,b,c){if(!ol.geom.flat.topology.lineStringIsClosed(a,0,a.length,c)){a.push(a[0]);a.push(a[1])}this.drawCoordinates_(a,0,a.length,c);if(b.length){var i,ii;for(i=0,ii=b.length;i<ii;++i){if(!ol.geom.flat.topology.lineStringIsClosed(b[i],0,b[i].length,c)){b[i].push(b[i][0]);b[i].push(b[i][1])}this.drawCoordinates_(b[i],0,b[i].length,c)}}};ol.render.webgl.LineStringReplay.prototype.setPolygonStyle=function(a,b){var c=b===undefined?this.indices.length:b;this.startIndices.push(c);this.startIndicesFeature.push(a);if(this.state_.changed){this.styleIndices_.push(c);this.state_.changed=false}};ol.render.webgl.LineStringReplay.prototype.getCurrentIndex=function(){return this.indices.length};ol.render.webgl.LineStringReplay.prototype.finish=function(a){this.verticesBuffer=new ol.webgl.Buffer(this.vertices);this.indicesBuffer=new ol.webgl.Buffer(this.indices);this.startIndices.push(this.indices.length);if(this.styleIndices_.length===0&&this.styles_.length>0){this.styles_=[]}this.vertices=null;this.indices=null};ol.render.webgl.LineStringReplay.prototype.getDeleteResourcesFunction=function(a){var b=this.verticesBuffer;var c=this.indicesBuffer;return function(){a.deleteBuffer(b);a.deleteBuffer(c)}};ol.render.webgl.LineStringReplay.prototype.setUpProgram=function(a,b,c,d){var e,vertexShader;e=ol.render.webgl.linestringreplay.defaultshader.fragment;vertexShader=ol.render.webgl.linestringreplay.defaultshader.vertex;var f=b.getProgram(e,vertexShader);var g;if(!this.defaultLocations_){g=new ol.render.webgl.linestringreplay.defaultshader.Locations(a,f);this.defaultLocations_=g}else{g=this.defaultLocations_}b.useProgram(f);a.enableVertexAttribArray(g.a_lastPos);a.vertexAttribPointer(g.a_lastPos,2,ol.webgl.FLOAT,false,28,0);a.enableVertexAttribArray(g.a_position);a.vertexAttribPointer(g.a_position,2,ol.webgl.FLOAT,false,28,8);a.enableVertexAttribArray(g.a_nextPos);a.vertexAttribPointer(g.a_nextPos,2,ol.webgl.FLOAT,false,28,16);a.enableVertexAttribArray(g.a_direction);a.vertexAttribPointer(g.a_direction,1,ol.webgl.FLOAT,false,28,24);a.uniform2fv(g.u_size,c);a.uniform1f(g.u_pixelRatio,d);return g};ol.render.webgl.LineStringReplay.prototype.shutDownProgram=function(a,b){a.disableVertexAttribArray(b.a_lastPos);a.disableVertexAttribArray(b.a_position);a.disableVertexAttribArray(b.a_nextPos);a.disableVertexAttribArray(b.a_direction)};ol.render.webgl.LineStringReplay.prototype.drawReplay=function(a,b,c,d){var e=(a.getParameter(a.DEPTH_FUNC));var f=(a.getParameter(a.DEPTH_WRITEMASK));if(!d){a.enable(a.DEPTH_TEST);a.depthMask(true);a.depthFunc(a.NOTEQUAL)}if(!ol.obj.isEmpty(c)){this.drawReplaySkipping_(a,b,c)}else{var i,start,end,nextStyle;end=this.startIndices[this.startIndices.length-1];for(i=this.styleIndices_.length-1;i>=0;--i){start=this.styleIndices_[i];nextStyle=this.styles_[i];this.setStrokeStyle_(a,nextStyle[0],nextStyle[1],nextStyle[2]);this.drawElements(a,b,start,end);a.clear(a.DEPTH_BUFFER_BIT);end=start}}if(!d){a.disable(a.DEPTH_TEST);a.clear(a.DEPTH_BUFFER_BIT);a.depthMask(f);a.depthFunc(e)}};ol.render.webgl.LineStringReplay.prototype.drawReplaySkipping_=function(a,b,c){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex,featureStart;featureIndex=this.startIndices.length-2;end=start=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setStrokeStyle_(a,nextStyle[0],nextStyle[1],nextStyle[2]);groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){featureStart=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]){if(start!==end){this.drawElements(a,b,start,end);a.clear(a.DEPTH_BUFFER_BIT)}end=featureStart}featureIndex--;start=featureStart}if(start!==end){this.drawElements(a,b,start,end);a.clear(a.DEPTH_BUFFER_BIT)}start=end=groupStart}};ol.render.webgl.LineStringReplay.prototype.drawHitDetectionReplayOneByOne=function(a,b,c,d,e){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex;featureIndex=this.startIndices.length-2;end=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setStrokeStyle_(a,nextStyle[0],nextStyle[1],nextStyle[2]);groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){start=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]===undefined&&feature.getGeometry()&&(e===undefined||ol.extent.intersects((e),feature.getGeometry().getExtent()))){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawElements(a,b,start,end);var f=d(feature);if(f){return f}}featureIndex--;end=start}}return undefined};ol.render.webgl.LineStringReplay.prototype.setStrokeStyle_=function(a,b,c,d){a.uniform4fv(this.defaultLocations_.u_color,b);a.uniform1f(this.defaultLocations_.u_lineWidth,c);a.uniform1f(this.defaultLocations_.u_miterLimit,d)};ol.render.webgl.LineStringReplay.prototype.setFillStrokeStyle=function(a,b){var d=b.getLineCap();this.state_.lineCap=d!==undefined?d:ol.render.webgl.defaultLineCap;var e=b.getLineDash();this.state_.lineDash=e?e:ol.render.webgl.defaultLineDash;var f=b.getLineDashOffset();this.state_.lineDashOffset=f?f:ol.render.webgl.defaultLineDashOffset;var g=b.getLineJoin();this.state_.lineJoin=g!==undefined?g:ol.render.webgl.defaultLineJoin;var h=b.getColor();if(!(h instanceof CanvasGradient)&&!(h instanceof CanvasPattern)){h=ol.color.asArray(h).map(function(c,i){return i!=3?c/255:c})||ol.render.webgl.defaultStrokeStyle}else{h=ol.render.webgl.defaultStrokeStyle}var j=b.getWidth();j=j!==undefined?j:ol.render.webgl.defaultLineWidth;var k=b.getMiterLimit();k=k!==undefined?k:ol.render.webgl.defaultMiterLimit;if(!this.state_.strokeColor||!ol.array.equals(this.state_.strokeColor,h)||this.state_.lineWidth!==j||this.state_.miterLimit!==k){this.state_.changed=true;this.state_.strokeColor=h;this.state_.lineWidth=j;this.state_.miterLimit=k;this.styles_.push([h,j,k])}};ol.render.webgl.LineStringReplay.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23};bq.provide('ol.render.webgl.polygonreplay.defaultshader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.render.webgl.polygonreplay.defaultshader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n':'precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');ol.render.webgl.polygonreplay.defaultshader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n':'attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}');bq.provide('ol.render.webgl.polygonreplay.defaultshader.Locations');bq.require('ol');ol.render.webgl.polygonreplay.defaultshader.Locations=function(a,b){this.u_projectionMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_projectionMatrix':'b');this.u_offsetScaleMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetScaleMatrix':'c');this.u_offsetRotateMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_offsetRotateMatrix':'d');this.u_color=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_color':'e');this.u_opacity=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_opacity':'f');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'a')};bq.provide('ol.structs.LinkedList');ol.structs.LinkedList=function(a){this.first_=undefined;this.last_=undefined;this.head_=undefined;this.circular_=a===undefined?true:a;this.length_=0};ol.structs.LinkedList.prototype.insertItem=function(a){var b={prev:undefined,next:undefined,data:a};var c=this.head_;if(!c){this.first_=b;this.last_=b;if(this.circular_){b.next=b;b.prev=b}}else{var d=c.next;b.prev=c;b.next=d;c.next=b;if(d){d.prev=b}if(c===this.last_){this.last_=b}}this.head_=b;this.length_++};ol.structs.LinkedList.prototype.removeItem=function(){var a=this.head_;if(a){var b=a.next;var c=a.prev;if(b){b.prev=c}if(c){c.next=b}this.head_=b||c;if(this.first_===this.last_){this.head_=undefined;this.first_=undefined;this.last_=undefined}else if(this.first_===a){this.first_=this.head_}else if(this.last_===a){this.last_=c?this.head_.prev:this.head_}this.length_--}};ol.structs.LinkedList.prototype.firstItem=function(){this.head_=this.first_;if(this.head_){return this.head_.data}return undefined};ol.structs.LinkedList.prototype.lastItem=function(){this.head_=this.last_;if(this.head_){return this.head_.data}return undefined};ol.structs.LinkedList.prototype.nextItem=function(){if(this.head_&&this.head_.next){this.head_=this.head_.next;return this.head_.data}return undefined};ol.structs.LinkedList.prototype.getNextItem=function(){if(this.head_&&this.head_.next){return this.head_.next.data}return undefined};ol.structs.LinkedList.prototype.prevItem=function(){if(this.head_&&this.head_.prev){this.head_=this.head_.prev;return this.head_.data}return undefined};ol.structs.LinkedList.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev){return this.head_.prev.data}return undefined};ol.structs.LinkedList.prototype.getCurrItem=function(){if(this.head_){return this.head_.data}return undefined};ol.structs.LinkedList.prototype.setFirstItem=function(){if(this.circular_&&this.head_){this.first_=this.head_;this.last_=this.head_.prev}};ol.structs.LinkedList.prototype.concat=function(a){if(a.head_){if(this.head_){var b=this.head_.next;this.head_.next=a.first_;a.first_.prev=this.head_;b.prev=a.last_;a.last_.next=b;this.length_+=a.length_}else{this.head_=a.head_;this.first_=a.first_;this.last_=a.last_;this.length_=a.length_}a.head_=undefined;a.first_=undefined;a.last_=undefined;a.length_=0}};ol.structs.LinkedList.prototype.getLength=function(){return this.length_};bq.provide('ol.render.webgl.PolygonReplay');bq.require('ol');bq.require('ol.array');bq.require('ol.color');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.geom.flat.contains');bq.require('ol.geom.flat.orient');bq.require('ol.geom.flat.transform');bq.require('ol.render.webgl.polygonreplay.defaultshader');bq.require('ol.render.webgl.polygonreplay.defaultshader.Locations');bq.require('ol.render.webgl.LineStringReplay');bq.require('ol.render.webgl.Replay');bq.require('ol.render.webgl');bq.require('ol.style.Stroke');bq.require('ol.structs.LinkedList');bq.require('ol.structs.RBush');bq.require('ol.webgl');bq.require('ol.webgl.Buffer');ol.render.webgl.PolygonReplay=function(a,b){ol.render.webgl.Replay.call(this,a,b);this.lineStringReplay=new ol.render.webgl.LineStringReplay(a,b);this.defaultLocations_=null;this.styles_=[];this.styleIndices_=[];this.state_={fillColor:null,changed:false}};ol.inherits(ol.render.webgl.PolygonReplay,ol.render.webgl.Replay);ol.render.webgl.PolygonReplay.prototype.drawCoordinates_=function(c,d,e){var f=new ol.structs.LinkedList();var g=new ol.structs.RBush();this.processFlatCoordinates_(c,e,f,g,true);var h=this.getMaxCoords_(f);if(d.length){var i,ii;var j=[];for(i=0,ii=d.length;i<ii;++i){var k={list:new ol.structs.LinkedList(),maxCoords:undefined,rtree:new ol.structs.RBush()};j.push(k);this.processFlatCoordinates_(d[i],e,k.list,k.rtree,false);this.classifyPoints_(k.list,k.rtree,true);k.maxCoords=this.getMaxCoords_(k.list)}j.sort(function(a,b){return b.maxCoords[0]===a.maxCoords[0]?a.maxCoords[1]-b.maxCoords[1]:b.maxCoords[0]-a.maxCoords[0]});for(i=0;i<j.length;++i){var l=j[i].list;var m=l.firstItem();var n=m;var o;do{if(this.getIntersections_(n,g).length){o=true;break}n=l.nextItem()}while(m!==n);if(!o){if(this.bridgeHole_(l,j[i].maxCoords[0],f,h[0],g)){g.concat(j[i].rtree);this.classifyPoints_(f,g,false)}}}}else{this.classifyPoints_(f,g,false)}this.triangulate_(f,g)};ol.render.webgl.PolygonReplay.prototype.processFlatCoordinates_=function(a,b,c,d,e){var f=ol.geom.flat.orient.linearRingIsClockwise(a,0,a.length,b);var i,ii;var n=this.vertices.length/2;var g;var h;var j;var k=[];var l=[];if(e===f){g=this.createPoint_(a[0],a[1],n++);h=g;for(i=b,ii=a.length;i<ii;i+=b){j=this.createPoint_(a[i],a[i+1],n++);l.push(this.insertItem_(h,j,c));k.push([Math.min(h.x,j.x),Math.min(h.y,j.y),Math.max(h.x,j.x),Math.max(h.y,j.y)]);h=j}l.push(this.insertItem_(j,g,c));k.push([Math.min(h.x,j.x),Math.min(h.y,j.y),Math.max(h.x,j.x),Math.max(h.y,j.y)])}else{var m=a.length-b;g=this.createPoint_(a[m],a[m+1],n++);h=g;for(i=m-b,ii=0;i>=ii;i-=b){j=this.createPoint_(a[i],a[i+1],n++);l.push(this.insertItem_(h,j,c));k.push([Math.min(h.x,j.x),Math.min(h.y,j.y),Math.max(h.x,j.x),Math.max(h.y,j.y)]);h=j}l.push(this.insertItem_(j,g,c));k.push([Math.min(h.x,j.x),Math.min(h.y,j.y),Math.max(h.x,j.x),Math.max(h.y,j.y)])}d.load(k,l)};ol.render.webgl.PolygonReplay.prototype.getMaxCoords_=function(a){var b=a.firstItem();var c=b;var d=[c.p0.x,c.p0.y];do{c=a.nextItem();if(c.p0.x>d[0]){d=[c.p0.x,c.p0.y]}}while(c!==b);return d};ol.render.webgl.PolygonReplay.prototype.classifyPoints_=function(a,b,c){var d=a.firstItem();var e=d;var f=a.nextItem();var g=false;do{var h=c?ol.render.webgl.triangleIsCounterClockwise(f.p1.x,f.p1.y,e.p1.x,e.p1.y,e.p0.x,e.p0.y):ol.render.webgl.triangleIsCounterClockwise(e.p0.x,e.p0.y,e.p1.x,e.p1.y,f.p1.x,f.p1.y);if(h===undefined){this.removeItem_(e,f,a,b);g=true;if(f===d){d=a.getNextItem()}f=e;a.prevItem()}else if(e.p1.reflex!==h){e.p1.reflex=h;g=true}e=f;f=a.nextItem()}while(e!==d);return g};ol.render.webgl.PolygonReplay.prototype.bridgeHole_=function(a,b,c,d,e){var f=a.firstItem();while(f.p1.x!==b){f=a.nextItem()}var g=f.p1;var h={x:d,y:g.y,i:-1};var j=Infinity;var i,ii,bestPoint;var k;var l=this.getIntersections_({p0:g,p1:h},e,true);for(i=0,ii=l.length;i<ii;++i){var m=l[i];var n=this.calculateIntersection_(g,h,m.p0,m.p1,true);var o=Math.abs(g.x-n[0]);if(o<j&&ol.render.webgl.triangleIsCounterClockwise(g.x,g.y,m.p0.x,m.p0.y,m.p1.x,m.p1.y)!==undefined){j=o;k={x:n[0],y:n[1],i:-1};f=m}}if(j===Infinity){return false}bestPoint=f.p1;if(j>0){var p=this.getPointsInTriangle_(g,k,f.p1,e);if(p.length){var q=Infinity;for(i=0,ii=p.length;i<ii;++i){var r=p[i];var s=Math.atan2(g.y-r.y,h.x-r.x);if(s<q||(s===q&&r.x<bestPoint.x)){q=s;bestPoint=r}}}}f=c.firstItem();while(f.p1.x!==bestPoint.x||f.p1.y!==bestPoint.y){f=c.nextItem()}var t={x:g.x,y:g.y,i:g.i,reflex:undefined};var u={x:f.p1.x,y:f.p1.y,i:f.p1.i,reflex:undefined};a.getNextItem().p0=t;this.insertItem_(g,f.p1,a,e);this.insertItem_(u,t,a,e);f.p1=u;a.setFirstItem();c.concat(a);return true};ol.render.webgl.PolygonReplay.prototype.triangulate_=function(a,b){var c=false;var d=this.isSimple_(a,b);while(a.getLength()>3){if(d){if(!this.clipEars_(a,b,d,c)){if(!this.classifyPoints_(a,b,c)){if(!this.resolveSelfIntersections_(a,b,true)){break}}}}else{if(!this.clipEars_(a,b,d,c)){if(!this.classifyPoints_(a,b,c)){if(!this.resolveSelfIntersections_(a,b)){d=this.isSimple_(a,b);if(!d){this.splitPolygon_(a,b);break}else{c=!this.isClockwise_(a);this.classifyPoints_(a,b,c)}}}}}}if(a.getLength()===3){var e=this.indices.length;this.indices[e++]=a.getPrevItem().p0.i;this.indices[e++]=a.getCurrItem().p0.i;this.indices[e++]=a.getNextItem().p0.i}};ol.render.webgl.PolygonReplay.prototype.clipEars_=function(a,b,c,d){var e=this.indices.length;var f=a.firstItem();var g=a.getPrevItem();var h=f;var i=a.nextItem();var j=a.getNextItem();var k,p1,p2;var l=false;do{k=h.p0;p1=h.p1;p2=i.p1;if(p1.reflex===false){var m;if(c){m=this.getPointsInTriangle_(k,p1,p2,b,true).length===0}else{m=d?this.diagonalIsInside_(j.p1,p2,p1,k,g.p0):this.diagonalIsInside_(g.p0,k,p1,p2,j.p1)}if((c||this.getIntersections_({p0:k,p1:p2},b).length===0)&&m){if(c||k.reflex===false||p2.reflex===false||ol.geom.flat.orient.linearRingIsClockwise([g.p0.x,g.p0.y,k.x,k.y,p1.x,p1.y,p2.x,p2.y,j.p1.x,j.p1.y],0,10,2)===!d){this.indices[e++]=k.i;this.indices[e++]=p1.i;this.indices[e++]=p2.i;this.removeItem_(h,i,a,b);if(i===f){f=j}l=true}}}g=a.getPrevItem();h=a.getCurrItem();i=a.nextItem();j=a.getNextItem()}while(h!==f&&a.getLength()>3);return l};ol.render.webgl.PolygonReplay.prototype.resolveSelfIntersections_=function(a,b,c){var d=a.firstItem();a.nextItem();var e=d;var f=a.nextItem();var g=false;do{var h=this.calculateIntersection_(e.p0,e.p1,f.p0,f.p1,c);if(h){var i=false;var j=this.vertices.length;var k=this.indices.length;var n=j/2;var l=a.prevItem();a.removeItem();b.remove(l);i=(l===d);var p;if(c){if(h[0]===e.p0.x&&h[1]===e.p0.y){a.prevItem();p=e.p0;f.p0=p;b.remove(e);i=i||(e===d)}else{p=f.p1;e.p1=p;b.remove(f);i=i||(f===d)}a.removeItem()}else{p=this.createPoint_(h[0],h[1],n);e.p1=p;f.p0=p;b.update([Math.min(e.p0.x,e.p1.x),Math.min(e.p0.y,e.p1.y),Math.max(e.p0.x,e.p1.x),Math.max(e.p0.y,e.p1.y)],e);b.update([Math.min(f.p0.x,f.p1.x),Math.min(f.p0.y,f.p1.y),Math.max(f.p0.x,f.p1.x),Math.max(f.p0.y,f.p1.y)],f)}this.indices[k++]=l.p0.i;this.indices[k++]=l.p1.i;this.indices[k++]=p.i;g=true;if(i){break}}e=a.getPrevItem();f=a.nextItem()}while(e!==d);return g};ol.render.webgl.PolygonReplay.prototype.isSimple_=function(a,b){var c=a.firstItem();var d=c;do{if(this.getIntersections_(d,b).length){return false}d=a.nextItem()}while(d!==c);return true};ol.render.webgl.PolygonReplay.prototype.isClockwise_=function(a){var b=a.getLength()*2;var c=new Array(b);var d=a.firstItem();var e=d;var i=0;do{c[i++]=e.p0.x;c[i++]=e.p0.y;e=a.nextItem()}while(e!==d);return ol.geom.flat.orient.linearRingIsClockwise(c,0,b,2)};ol.render.webgl.PolygonReplay.prototype.splitPolygon_=function(a,b){var c=a.firstItem();var d=c;do{var e=this.getIntersections_(d,b);if(e.length){var f=e[0];var n=this.vertices.length/2;var g=this.calculateIntersection_(d.p0,d.p1,f.p0,f.p1);var p=this.createPoint_(g[0],g[1],n);var h=new ol.structs.LinkedList();var i=new ol.structs.RBush();this.insertItem_(p,d.p1,h,i);d.p1=p;b.update([Math.min(d.p0.x,p.x),Math.min(d.p0.y,p.y),Math.max(d.p0.x,p.x),Math.max(d.p0.y,p.y)],d);var j=a.nextItem();while(j!==f){this.insertItem_(j.p0,j.p1,h,i);b.remove(j);a.removeItem();j=a.getCurrItem()}this.insertItem_(f.p0,p,h,i);f.p0=p;b.update([Math.min(f.p1.x,p.x),Math.min(f.p1.y,p.y),Math.max(f.p1.x,p.x),Math.max(f.p1.y,p.y)],f);this.classifyPoints_(a,b,false);this.triangulate_(a,b);this.classifyPoints_(h,i,false);this.triangulate_(h,i);break}d=a.nextItem()}while(d!==c)};ol.render.webgl.PolygonReplay.prototype.createPoint_=function(x,y,i){var a=this.vertices.length;this.vertices[a++]=x;this.vertices[a++]=y;var p={x:x,y:y,i:i,reflex:undefined};return p};ol.render.webgl.PolygonReplay.prototype.insertItem_=function(a,b,c,d){var e={p0:a,p1:b};c.insertItem(e);if(d){d.insert([Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.x,b.x),Math.max(a.y,b.y)],e)}return e};ol.render.webgl.PolygonReplay.prototype.removeItem_=function(a,b,c,d){if(c.getCurrItem()===b){c.removeItem();a.p1=b.p1;d.remove(b);d.update([Math.min(a.p0.x,a.p1.x),Math.min(a.p0.y,a.p1.y),Math.max(a.p0.x,a.p1.x),Math.max(a.p0.y,a.p1.y)],a)}};ol.render.webgl.PolygonReplay.prototype.getPointsInTriangle_=function(a,b,c,d,e){var i,ii,j,p;var f=[];var g=d.getInExtent([Math.min(a.x,b.x,c.x),Math.min(a.y,b.y,c.y),Math.max(a.x,b.x,c.x),Math.max(a.y,b.y,c.y)]);for(i=0,ii=g.length;i<ii;++i){for(j in g[i]){p=g[i][j];if(typeof p==='object'&&(!e||p.reflex)){if((p.x!==a.x||p.y!==a.y)&&(p.x!==b.x||p.y!==b.y)&&(p.x!==c.x||p.y!==c.y)&&f.indexOf(p)===-1&&ol.geom.flat.contains.linearRingContainsXY([a.x,a.y,b.x,b.y,c.x,c.y],0,6,2,p.x,p.y)){f.push(p)}}}}return f};ol.render.webgl.PolygonReplay.prototype.getIntersections_=function(a,b,c){var d=a.p0;var e=a.p1;var f=b.getInExtent([Math.min(d.x,e.x),Math.min(d.y,e.y),Math.max(d.x,e.x),Math.max(d.y,e.y)]);var g=[];var i,ii;for(i=0,ii=f.length;i<ii;++i){var h=f[i];if(a!==h&&(c||h.p0!==e||h.p1!==d)&&this.calculateIntersection_(d,e,h.p0,h.p1,c)){g.push(h)}}return g};ol.render.webgl.PolygonReplay.prototype.calculateIntersection_=function(a,b,c,d,e){var f=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);if(f!==0){var g=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/f;var h=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/f;if((!e&&g>ol.render.webgl.EPSILON&&g<1-ol.render.webgl.EPSILON&&h>ol.render.webgl.EPSILON&&h<1-ol.render.webgl.EPSILON)||(e&&g>=0&&g<=1&&h>=0&&h<=1)){return[a.x+g*(b.x-a.x),a.y+g*(b.y-a.y)]}}return undefined};ol.render.webgl.PolygonReplay.prototype.diagonalIsInside_=function(a,b,c,d,e){if(b.reflex===undefined||d.reflex===undefined){return false}var f=(c.x-d.x)*(b.y-d.y)>(c.y-d.y)*(b.x-d.x);var g=(e.x-d.x)*(b.y-d.y)<(e.y-d.y)*(b.x-d.x);var h=(a.x-b.x)*(d.y-b.y)>(a.y-b.y)*(d.x-b.x);var i=(c.x-b.x)*(d.y-b.y)<(c.y-b.y)*(d.x-b.x);var j=d.reflex?g||f:g&&f;var k=b.reflex?i||h:i&&h;return j&&k};ol.render.webgl.PolygonReplay.prototype.drawMultiPolygon=function(a,b){var c=a.getEndss();var d=a.getStride();var e=this.indices.length;var f=this.lineStringReplay.getCurrentIndex();var g=a.getFlatCoordinates();var i,ii,j,jj;var h=0;for(i=0,ii=c.length;i<ii;++i){var k=c[i];if(k.length>0){var l=ol.geom.flat.transform.translate(g,h,k[0],d,-this.origin[0],-this.origin[1]);if(l.length){var m=[];var n;for(j=1,jj=k.length;j<jj;++j){if(k[j]!==k[j-1]){n=ol.geom.flat.transform.translate(g,k[j-1],k[j],d,-this.origin[0],-this.origin[1]);m.push(n)}}this.lineStringReplay.drawPolygonCoordinates(l,m,d);this.drawCoordinates_(l,m,d)}}h=k[k.length-1]}if(this.indices.length>e){this.startIndices.push(e);this.startIndicesFeature.push(b);if(this.state_.changed){this.styleIndices_.push(e);this.state_.changed=false}}if(this.lineStringReplay.getCurrentIndex()>f){this.lineStringReplay.setPolygonStyle(b,f)}};ol.render.webgl.PolygonReplay.prototype.drawPolygon=function(a,b){var c=a.getEnds();var d=a.getStride();if(c.length>0){var e=a.getFlatCoordinates().map(Number);var f=ol.geom.flat.transform.translate(e,0,c[0],d,-this.origin[0],-this.origin[1]);if(f.length){var g=[];var i,ii,holeFlatCoords;for(i=1,ii=c.length;i<ii;++i){if(c[i]!==c[i-1]){holeFlatCoords=ol.geom.flat.transform.translate(e,c[i-1],c[i],d,-this.origin[0],-this.origin[1]);g.push(holeFlatCoords)}}this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);if(this.state_.changed){this.styleIndices_.push(this.indices.length);this.state_.changed=false}this.lineStringReplay.setPolygonStyle(b);this.lineStringReplay.drawPolygonCoordinates(f,g,d);this.drawCoordinates_(f,g,d)}}};ol.render.webgl.PolygonReplay.prototype.finish=function(a){this.verticesBuffer=new ol.webgl.Buffer(this.vertices);this.indicesBuffer=new ol.webgl.Buffer(this.indices);this.startIndices.push(this.indices.length);this.lineStringReplay.finish(a);if(this.styleIndices_.length===0&&this.styles_.length>0){this.styles_=[]}this.vertices=null;this.indices=null};ol.render.webgl.PolygonReplay.prototype.getDeleteResourcesFunction=function(a){var b=this.verticesBuffer;var c=this.indicesBuffer;var d=this.lineStringReplay.getDeleteResourcesFunction(a);return function(){a.deleteBuffer(b);a.deleteBuffer(c);d()}};ol.render.webgl.PolygonReplay.prototype.setUpProgram=function(a,b,c,d){var e,vertexShader;e=ol.render.webgl.polygonreplay.defaultshader.fragment;vertexShader=ol.render.webgl.polygonreplay.defaultshader.vertex;var f=b.getProgram(e,vertexShader);var g;if(!this.defaultLocations_){g=new ol.render.webgl.polygonreplay.defaultshader.Locations(a,f);this.defaultLocations_=g}else{g=this.defaultLocations_}b.useProgram(f);a.enableVertexAttribArray(g.a_position);a.vertexAttribPointer(g.a_position,2,ol.webgl.FLOAT,false,8,0);return g};ol.render.webgl.PolygonReplay.prototype.shutDownProgram=function(a,b){a.disableVertexAttribArray(b.a_position)};ol.render.webgl.PolygonReplay.prototype.drawReplay=function(a,b,c,d){var e=(a.getParameter(a.DEPTH_FUNC));var f=(a.getParameter(a.DEPTH_WRITEMASK));if(!d){a.enable(a.DEPTH_TEST);a.depthMask(true);a.depthFunc(a.NOTEQUAL)}if(!ol.obj.isEmpty(c)){this.drawReplaySkipping_(a,b,c)}else{var i,start,end,nextStyle;end=this.startIndices[this.startIndices.length-1];for(i=this.styleIndices_.length-1;i>=0;--i){start=this.styleIndices_[i];nextStyle=this.styles_[i];this.setFillStyle_(a,nextStyle);this.drawElements(a,b,start,end);end=start}}if(!d){a.disable(a.DEPTH_TEST);a.clear(a.DEPTH_BUFFER_BIT);a.depthMask(f);a.depthFunc(e)}};ol.render.webgl.PolygonReplay.prototype.drawHitDetectionReplayOneByOne=function(a,b,c,d,e){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex;featureIndex=this.startIndices.length-2;end=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setFillStyle_(a,nextStyle);groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){start=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]===undefined&&feature.getGeometry()&&(e===undefined||ol.extent.intersects((e),feature.getGeometry().getExtent()))){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.drawElements(a,b,start,end);var f=d(feature);if(f){return f}}featureIndex--;end=start}}return undefined};ol.render.webgl.PolygonReplay.prototype.drawReplaySkipping_=function(a,b,c){var i,start,end,nextStyle,groupStart,feature,featureUid,featureIndex,featureStart;featureIndex=this.startIndices.length-2;end=start=this.startIndices[featureIndex+1];for(i=this.styleIndices_.length-1;i>=0;--i){nextStyle=this.styles_[i];this.setFillStyle_(a,nextStyle);groupStart=this.styleIndices_[i];while(featureIndex>=0&&this.startIndices[featureIndex]>=groupStart){featureStart=this.startIndices[featureIndex];feature=this.startIndicesFeature[featureIndex];featureUid=ol.getUid(feature).toString();if(c[featureUid]){if(start!==end){this.drawElements(a,b,start,end);a.clear(a.DEPTH_BUFFER_BIT)}end=featureStart}featureIndex--;start=featureStart}if(start!==end){this.drawElements(a,b,start,end);a.clear(a.DEPTH_BUFFER_BIT)}start=end=groupStart}};ol.render.webgl.PolygonReplay.prototype.setFillStyle_=function(a,b){a.uniform4fv(this.defaultLocations_.u_color,b)};ol.render.webgl.PolygonReplay.prototype.setFillStrokeStyle=function(a,b){var d=a?a.getColor():[0,0,0,0];if(!(d instanceof CanvasGradient)&&!(d instanceof CanvasPattern)){d=ol.color.asArray(d).map(function(c,i){return i!=3?c/255:c})||ol.render.webgl.defaultFillStyle}else{d=ol.render.webgl.defaultFillStyle}if(!this.state_.fillColor||!ol.array.equals(d,this.state_.fillColor)){this.state_.fillColor=d;this.state_.changed=true;this.styles_.push(d)}if(b){this.lineStringReplay.setFillStrokeStyle(null,b)}else{var e=new ol.style.Stroke({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,e)}};bq.provide('ol.style.Atlas');bq.require('ol.dom');ol.style.Atlas=function(a,b){this.space_=b;this.emptyBlocks_=[{x:0,y:0,width:a,height:a}];this.entries_={};this.context_=ol.dom.createCanvasContext2D(a,a);this.canvas_=this.context_.canvas};ol.style.Atlas.prototype.get=function(a){return this.entries_[a]||null};ol.style.Atlas.prototype.add=function(a,b,c,d,e){var f,i,ii;for(i=0,ii=this.emptyBlocks_.length;i<ii;++i){f=this.emptyBlocks_[i];if(f.width>=b+this.space_&&f.height>=c+this.space_){var g={offsetX:f.x+this.space_,offsetY:f.y+this.space_,image:this.canvas_};this.entries_[a]=g;d.call(e,this.context_,f.x+this.space_,f.y+this.space_);this.split_(i,f,b+this.space_,c+this.space_);return g}}return null};ol.style.Atlas.prototype.split_=function(a,b,c,d){var e=b.width-c;var f=b.height-d;var g;var h;if(e>f){g={x:b.x+c,y:b.y,width:b.width-c,height:b.height};h={x:b.x,y:b.y+d,width:c,height:b.height-d};this.updateBlocks_(a,g,h)}else{g={x:b.x+c,y:b.y,width:b.width-c,height:d};h={x:b.x,y:b.y+d,width:b.width,height:b.height-d};this.updateBlocks_(a,g,h)}};ol.style.Atlas.prototype.updateBlocks_=function(a,b,c){var d=[a,1];if(b.width>0&&b.height>0){d.push(b)}if(c.width>0&&c.height>0){d.push(c)}this.emptyBlocks_.splice.apply(this.emptyBlocks_,d)};bq.provide('ol.style.AtlasManager');bq.require('ol');bq.require('ol.style.Atlas');ol.style.AtlasManager=function(a){var b=a||{};this.currentSize_=b.initialSize!==undefined?b.initialSize:ol.INITIAL_ATLAS_SIZE;this.maxSize_=b.maxSize!==undefined?b.maxSize:ol.MAX_ATLAS_SIZE!=-1?ol.MAX_ATLAS_SIZE:ol.WEBGL_MAX_TEXTURE_SIZE!==undefined?ol.WEBGL_MAX_TEXTURE_SIZE:2048;this.space_=b.space!==undefined?b.space:1;this.atlases_=[new ol.style.Atlas(this.currentSize_,this.space_)];this.currentHitSize_=this.currentSize_;this.hitAtlases_=[new ol.style.Atlas(this.currentHitSize_,this.space_)]};ol.style.AtlasManager.prototype.getInfo=function(a){var b=this.getInfo_(this.atlases_,a);if(!b){return null}var c=(this.getInfo_(this.hitAtlases_,a));return this.mergeInfos_(b,c)};ol.style.AtlasManager.prototype.getInfo_=function(a,b){var c,info,i,ii;for(i=0,ii=a.length;i<ii;++i){c=a[i];info=c.get(b);if(info){return info}}return null};ol.style.AtlasManager.prototype.mergeInfos_=function(a,b){return({offsetX:a.offsetX,offsetY:a.offsetY,image:a.image,hitImage:b.image})};ol.style.AtlasManager.prototype.add=function(a,b,c,d,e,f){if(b+this.space_>this.maxSize_||c+this.space_>this.maxSize_){return null}var g=this.add_(false,a,b,c,d,f);if(!g){return null}var h=e!==undefined?e:ol.nullFunction;var i=(this.add_(true,a,b,c,h,f));return this.mergeInfos_(g,i)};ol.style.AtlasManager.prototype.add_=function(a,b,c,d,e,f){var g=(a)?this.hitAtlases_:this.atlases_;var h,info,i,ii;for(i=0,ii=g.length;i<ii;++i){h=g[i];info=h.add(b,c,d,e,f);if(info){return info}else if(!info&&i===ii-1){var j;if(a){j=Math.min(this.currentHitSize_*2,this.maxSize_);this.currentHitSize_=j}else{j=Math.min(this.currentSize_*2,this.maxSize_);this.currentSize_=j}h=new ol.style.Atlas(j,this.space_);g.push(h);++ii}}return null};bq.provide('ol.render.webgl.TextReplay');bq.require('ol');bq.require('ol.colorlike');bq.require('ol.dom');bq.require('ol.geom.GeometryType');bq.require('ol.has');bq.require('ol.render.replay');bq.require('ol.render.webgl');bq.require('ol.render.webgl.TextureReplay');bq.require('ol.style.AtlasManager');bq.require('ol.webgl.Buffer');ol.render.webgl.TextReplay=function(a,b){ol.render.webgl.TextureReplay.call(this,a,b);this.images_=[];this.textures_=[];this.measureCanvas_=ol.dom.createCanvasContext2D(0,0).canvas;this.state_={strokeColor:null,lineCap:undefined,lineDash:null,lineDashOffset:undefined,lineJoin:undefined,lineWidth:0,miterLimit:undefined,fillColor:null,font:undefined,scale:undefined};this.text_='';this.textAlign_=undefined;this.textBaseline_=undefined;this.offsetX_=undefined;this.offsetY_=undefined;this.atlases_={};this.currAtlas_=undefined;this.scale=1;this.opacity=1};ol.inherits(ol.render.webgl.TextReplay,ol.render.webgl.TextureReplay);ol.render.webgl.TextReplay.prototype.drawText=function(a,b){if(this.text_){var c=null;var d=0;var e=2;var f=2;switch(a.getType()){case ol.geom.GeometryType.POINT:case ol.geom.GeometryType.MULTI_POINT:c=a.getFlatCoordinates();e=c.length;f=a.getStride();break;case ol.geom.GeometryType.CIRCLE:c=(a).getCenter();break;case ol.geom.GeometryType.LINE_STRING:c=(a).getFlatMidpoint();break;case ol.geom.GeometryType.MULTI_LINE_STRING:c=(a).getFlatMidpoints();e=c.length;break;case ol.geom.GeometryType.POLYGON:c=(a).getFlatInteriorPoint();break;case ol.geom.GeometryType.MULTI_POLYGON:c=(a).getFlatInteriorPoints();e=c.length;break;default:}this.startIndices.push(this.indices.length);this.startIndicesFeature.push(b);var g=this.currAtlas_;var h=this.text_.split('\n');var k=this.getTextSize_(h);var i,ii,j,jj,currX,currY,charArr,charInfo;var l=Math.round(k[0]*this.textAlign_-this.offsetX_);var m=Math.round(k[1]*this.textBaseline_-this.offsetY_);var n=(this.state_.lineWidth/2)*this.state_.scale;for(i=0,ii=h.length;i<ii;++i){currX=0;currY=g.height*i;charArr=h[i].split('');for(j=0,jj=charArr.length;j<jj;++j){charInfo=g.atlas.getInfo(charArr[j]);if(charInfo){var o=charInfo.image;this.anchorX=l-currX;this.anchorY=m-currY;this.originX=j===0?charInfo.offsetX-n:charInfo.offsetX;this.originY=charInfo.offsetY;this.height=g.height;this.width=j===0||j===charArr.length-1?g.width[charArr[j]]+n:g.width[charArr[j]];this.imageHeight=o.height;this.imageWidth=o.width;var p;if(this.images_.length===0){this.images_.push(o)}else{p=this.images_[this.images_.length-1];if(ol.getUid(p)!=ol.getUid(o)){this.groupIndices.push(this.indices.length);this.images_.push(o)}}this.drawText_(c,d,e,f)}currX+=this.width}}}};ol.render.webgl.TextReplay.prototype.getTextSize_=function(d){var e=this;var f=this.currAtlas_;var g=d.length*f.height;var h=d.map(function(a){var b=0;var i,ii;for(i=0,ii=a.length;i<ii;++i){var c=a[i];if(!f.width[c]){e.addCharToAtlas_(c)}b+=f.width[c]?f.width[c]:0}return b}).reduce(function(a,b){return Math.max(a,b)});return[h,g]};ol.render.webgl.TextReplay.prototype.drawText_=function(a,b,c,d){var i,ii;for(i=b,ii=c;i<ii;i+=d){this.drawCoordinates(a,b,c,d)}};ol.render.webgl.TextReplay.prototype.addCharToAtlas_=function(b){if(b.length===1){var c=this.currAtlas_;var d=this.state_;var e=this.measureCanvas_.getContext('2d');e.font=d.font;var f=Math.ceil(e.measureText(b).width*d.scale);var g=c.atlas.add(b,f,c.height,function(a,x,y){a.font=(d.font);a.fillStyle=d.fillColor;a.strokeStyle=d.strokeColor;a.lineWidth=d.lineWidth;a.lineCap=(d.lineCap);a.lineJoin=(d.lineJoin);a.miterLimit=(d.miterLimit);a.textAlign='left';a.textBaseline='top';if(ol.has.CANVAS_LINE_DASH&&d.lineDash){a.setLineDash(d.lineDash);a.lineDashOffset=(d.lineDashOffset)}if(d.scale!==1){a.setTransform((d.scale),0,0,(d.scale),0,0)}if(d.strokeColor){a.strokeText(b,x,y)}if(d.fillColor){a.fillText(b,x,y)}});if(g){c.width[b]=f}}};ol.render.webgl.TextReplay.prototype.finish=function(a){var b=a.getGL();this.groupIndices.push(this.indices.length);this.hitDetectionGroupIndices=this.groupIndices;this.verticesBuffer=new ol.webgl.Buffer(this.vertices);this.indicesBuffer=new ol.webgl.Buffer(this.indices);var c={};this.createTextures(this.textures_,this.images_,c,b);this.state_={strokeColor:null,lineCap:undefined,lineDash:null,lineDashOffset:undefined,lineJoin:undefined,lineWidth:0,miterLimit:undefined,fillColor:null,font:undefined,scale:undefined};this.text_='';this.textAlign_=undefined;this.textBaseline_=undefined;this.offsetX_=undefined;this.offsetY_=undefined;this.images_=null;this.atlases_={};this.currAtlas_=undefined;ol.render.webgl.TextureReplay.prototype.finish.call(this,a)};ol.render.webgl.TextReplay.prototype.setTextStyle=function(a){var b=this.state_;var c=a.getFill();var d=a.getStroke();if(!a||!a.getText()||(!c&&!d)){this.text_=''}else{if(!c){b.fillColor=null}else{var e=c.getColor();b.fillColor=ol.colorlike.asColorLike(e?e:ol.render.webgl.defaultFillStyle)}if(!d){b.strokeColor=null;b.lineWidth=0}else{var f=d.getColor();b.strokeColor=ol.colorlike.asColorLike(f?f:ol.render.webgl.defaultStrokeStyle);b.lineWidth=d.getWidth()||ol.render.webgl.defaultLineWidth;b.lineCap=d.getLineCap()||ol.render.webgl.defaultLineCap;b.lineDashOffset=d.getLineDashOffset()||ol.render.webgl.defaultLineDashOffset;b.lineJoin=d.getLineJoin()||ol.render.webgl.defaultLineJoin;b.miterLimit=d.getMiterLimit()||ol.render.webgl.defaultMiterLimit;var g=d.getLineDash();b.lineDash=g?g.slice():ol.render.webgl.defaultLineDash}b.font=a.getFont()||ol.render.webgl.defaultFont;b.scale=a.getScale()||1;this.text_=(a.getText());var h=ol.render.replay.TEXT_ALIGN[a.getTextAlign()];var i=ol.render.replay.TEXT_ALIGN[a.getTextBaseline()];this.textAlign_=h===undefined?ol.render.webgl.defaultTextAlign:h;this.textBaseline_=i===undefined?ol.render.webgl.defaultTextBaseline:i;this.offsetX_=a.getOffsetX()||0;this.offsetY_=a.getOffsetY()||0;this.rotateWithView=!!a.getRotateWithView();this.rotation=a.getRotation()||0;this.currAtlas_=this.getAtlas_(b)}};ol.render.webgl.TextReplay.prototype.getAtlas_=function(a){var b=[];var i;for(i in a){if(a[i]||a[i]===0){if(Array.isArray(a[i])){b=b.concat(a[i])}else{b.push(a[i])}}}var c=this.calculateHash_(b);if(!this.atlases_[c]){var d=this.measureCanvas_.getContext('2d');d.font=a.font;var e=Math.ceil((d.measureText('M').width*1.5+a.lineWidth/2)*a.scale);this.atlases_[c]={atlas:new ol.style.AtlasManager({space:a.lineWidth+1}),width:{},height:e}}return this.atlases_[c]};ol.render.webgl.TextReplay.prototype.calculateHash_=function(a){var i,ii;var b='';for(i=0,ii=a.length;i<ii;++i){b+=a[i]}return b};ol.render.webgl.TextReplay.prototype.getTextures=function(a){return this.textures_};ol.render.webgl.TextReplay.prototype.getHitDetectionTextures=function(){return this.textures_};bq.provide('ol.render.webgl.ReplayGroup');bq.require('ol');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.render.replay');bq.require('ol.render.ReplayGroup');bq.require('ol.render.webgl.CircleReplay');bq.require('ol.render.webgl.ImageReplay');bq.require('ol.render.webgl.LineStringReplay');bq.require('ol.render.webgl.PolygonReplay');bq.require('ol.render.webgl.TextReplay');ol.render.webgl.ReplayGroup=function(a,b,c){ol.render.ReplayGroup.call(this);this.maxExtent_=b;this.tolerance_=a;this.renderBuffer_=c;this.replaysByZIndex_={}};ol.inherits(ol.render.webgl.ReplayGroup,ol.render.ReplayGroup);ol.render.webgl.ReplayGroup.prototype.addDeclutter=function(a,b){};ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(c){var d=[];var e;for(e in this.replaysByZIndex_){var f=this.replaysByZIndex_[e];var g;for(g in f){d.push(f[g].getDeleteResourcesFunction(c))}}return function(){var a=d.length;var b;for(var i=0;i<a;i++){b=d[i].apply(this,arguments)}return b}};ol.render.webgl.ReplayGroup.prototype.finish=function(a){var b;for(b in this.replaysByZIndex_){var c=this.replaysByZIndex_[b];var d;for(d in c){c[d].finish(a)}}};ol.render.webgl.ReplayGroup.prototype.getReplay=function(a,b){var c=a!==undefined?a.toString():'0';var d=this.replaysByZIndex_[c];if(d===undefined){d={};this.replaysByZIndex_[c]=d}var e=d[b];if(e===undefined){var f=ol.render.webgl.ReplayGroup.BATCH_CONSTRUCTORS_[b];e=new f(this.tolerance_,this.maxExtent_);d[b]=e}return e};ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return ol.obj.isEmpty(this.replaysByZIndex_)};ol.render.webgl.ReplayGroup.prototype.replay=function(a,b,c,d,e,f,g,h){var k=Object.keys(this.replaysByZIndex_).map(Number);k.sort(ol.array.numberSafeCompareFunction);var i,ii,j,jj,replays,replay;for(i=0,ii=k.length;i<ii;++i){replays=this.replaysByZIndex_[k[i].toString()];for(j=0,jj=ol.render.replay.ORDER.length;j<jj;++j){replay=replays[ol.render.replay.ORDER[j]];if(replay!==undefined){replay.replay(a,b,c,d,e,f,g,h,undefined,false)}}}};ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(c,d,e,f,g,h,k,l,m,n,o){var p=Object.keys(this.replaysByZIndex_).map(Number);p.sort(function(a,b){return b-a});var i,ii,j,replays,replay,result;for(i=0,ii=p.length;i<ii;++i){replays=this.replaysByZIndex_[p[i].toString()];for(j=ol.render.replay.ORDER.length-1;j>=0;--j){replay=replays[ol.render.replay.ORDER[j]];if(replay!==undefined){result=replay.replay(c,d,e,f,g,h,k,l,m,n,o);if(result){return result}}}}return undefined};ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(d,e,f,g,h,i,j,k,l,m){var n=e.getGL();n.bindFramebuffer(n.FRAMEBUFFER,e.getHitDetectionFramebuffer());var o;if(this.renderBuffer_!==undefined){o=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(d),g*this.renderBuffer_)}return this.replayHitDetection_(e,d,g,h,ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_,j,k,l,function(a){var b=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,b);if(b[3]>0){var c=m(a);if(c){return c}}},true,o)};ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(c,d,e,f,g,h,i,j,k){var l=d.getGL();l.bindFramebuffer(l.FRAMEBUFFER,d.getHitDetectionFramebuffer());var m=this.replayHitDetection_(d,c,f,g,ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_,i,j,k,function(a){var b=new Uint8Array(4);l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,b);return b[3]>0},false);return m!==undefined};ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_=[1,1];ol.render.webgl.ReplayGroup.BATCH_CONSTRUCTORS_={'Circle':ol.render.webgl.CircleReplay,'Image':ol.render.webgl.ImageReplay,'LineString':ol.render.webgl.LineStringReplay,'Polygon':ol.render.webgl.PolygonReplay,'Text':ol.render.webgl.TextReplay};bq.provide('ol.render.webgl.Immediate');bq.require('ol');bq.require('ol.extent');bq.require('ol.geom.GeometryType');bq.require('ol.render.ReplayType');bq.require('ol.render.VectorContext');bq.require('ol.render.webgl.ReplayGroup');ol.render.webgl.Immediate=function(a,b,c,d,e,f,g){ol.render.VectorContext.call(this);this.context_=a;this.center_=b;this.extent_=f;this.pixelRatio_=g;this.size_=e;this.rotation_=d;this.resolution_=c;this.imageStyle_=null;this.fillStyle_=null;this.strokeStyle_=null;this.textStyle_=null};ol.inherits(ol.render.webgl.Immediate,ol.render.VectorContext);ol.render.webgl.Immediate.prototype.drawText_=function(a,b){var c=this.context_;var d=(a.getReplay(0,ol.render.ReplayType.TEXT));d.setTextStyle(this.textStyle_);d.drawText(b,null);d.finish(c);var e=1;var f={};var g;var h=false;d.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,e,f,g,h);d.getDeleteResourcesFunction(c)()};ol.render.webgl.Immediate.prototype.setStyle=function(a){this.setFillStrokeStyle(a.getFill(),a.getStroke());this.setImageStyle(a.getImage());this.setTextStyle(a.getText())};ol.render.webgl.Immediate.prototype.drawGeometry=function(a){var b=a.getType();switch(b){case ol.geom.GeometryType.POINT:this.drawPoint((a),null);break;case ol.geom.GeometryType.LINE_STRING:this.drawLineString((a),null);break;case ol.geom.GeometryType.POLYGON:this.drawPolygon((a),null);break;case ol.geom.GeometryType.MULTI_POINT:this.drawMultiPoint((a),null);break;case ol.geom.GeometryType.MULTI_LINE_STRING:this.drawMultiLineString((a),null);break;case ol.geom.GeometryType.MULTI_POLYGON:this.drawMultiPolygon((a),null);break;case ol.geom.GeometryType.GEOMETRY_COLLECTION:this.drawGeometryCollection((a),null);break;case ol.geom.GeometryType.CIRCLE:this.drawCircle((a),null);break;default:}};ol.render.webgl.Immediate.prototype.drawFeature=function(a,b){var c=b.getGeometryFunction()(a);if(!c||!ol.extent.intersects(this.extent_,c.getExtent())){return}this.setStyle(b);this.drawGeometry(c)};ol.render.webgl.Immediate.prototype.drawGeometryCollection=function(a,b){var c=a.getGeometriesArray();var i,ii;for(i=0,ii=c.length;i<ii;++i){this.drawGeometry(c[i])}};ol.render.webgl.Immediate.prototype.drawPoint=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.IMAGE));e.setImageStyle(this.imageStyle_);e.drawPoint(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawMultiPoint=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.IMAGE));e.setImageStyle(this.imageStyle_);e.drawMultiPoint(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawLineString=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.LINE_STRING));e.setFillStrokeStyle(null,this.strokeStyle_);e.drawLineString(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawMultiLineString=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.LINE_STRING));e.setFillStrokeStyle(null,this.strokeStyle_);e.drawMultiLineString(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawPolygon=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.POLYGON));e.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_);e.drawPolygon(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawMultiPolygon=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.POLYGON));e.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_);e.drawMultiPolygon(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.drawCircle=function(a,b){var c=this.context_;var d=new ol.render.webgl.ReplayGroup(1,this.extent_);var e=(d.getReplay(0,ol.render.ReplayType.CIRCLE));e.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_);e.drawCircle(a,b);e.finish(c);var f=1;var g={};var h;var i=false;e.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,f,g,h,i);e.getDeleteResourcesFunction(c)();if(this.textStyle_){this.drawText_(d,a)}};ol.render.webgl.Immediate.prototype.setImageStyle=function(a){this.imageStyle_=a};ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(a,b){this.fillStyle_=a;this.strokeStyle_=b};ol.render.webgl.Immediate.prototype.setTextStyle=function(a){this.textStyle_=a};bq.provide('ol.renderer.webgl.defaultmapshader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.renderer.webgl.defaultmapshader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n':'precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}');ol.renderer.webgl.defaultmapshader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n':'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}');bq.provide('ol.renderer.webgl.defaultmapshader.Locations');bq.require('ol');ol.renderer.webgl.defaultmapshader.Locations=function(a,b){this.u_texCoordMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_texCoordMatrix':'d');this.u_projectionMatrix=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_projectionMatrix':'e');this.u_opacity=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_opacity':'f');this.u_texture=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_texture':'g');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'b');this.a_texCoord=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_texCoord':'c')};bq.provide('ol.renderer.webgl.Layer');bq.require('ol');bq.require('ol.render.Event');bq.require('ol.render.EventType');bq.require('ol.render.webgl.Immediate');bq.require('ol.renderer.Layer');bq.require('ol.renderer.webgl.defaultmapshader');bq.require('ol.renderer.webgl.defaultmapshader.Locations');bq.require('ol.transform');bq.require('ol.vec.Mat4');bq.require('ol.webgl');bq.require('ol.webgl.Buffer');bq.require('ol.webgl.Context');ol.renderer.webgl.Layer=function(a,b){ol.renderer.Layer.call(this,b);this.mapRenderer=a;this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined;this.texCoordMatrix=ol.transform.create();this.projectionMatrix=ol.transform.create();this.tmpMat4_=ol.vec.Mat4.create();this.defaultLocations_=null};ol.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer);ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(d,e){var f=this.mapRenderer.getGL();if(this.framebufferDimension===undefined||this.framebufferDimension!=e){var g=function(a,b,c){if(!a.isContextLost()){a.deleteFramebuffer(b);a.deleteTexture(c)}}.bind(null,f,this.framebuffer,this.texture);d.postRenderFunctions.push((g));var h=ol.webgl.Context.createEmptyTexture(f,e,e);var i=f.createFramebuffer();f.bindFramebuffer(ol.webgl.FRAMEBUFFER,i);f.framebufferTexture2D(ol.webgl.FRAMEBUFFER,ol.webgl.COLOR_ATTACHMENT0,ol.webgl.TEXTURE_2D,h,0);this.texture=h;this.framebuffer=i;this.framebufferDimension=e}else{f.bindFramebuffer(ol.webgl.FRAMEBUFFER,this.framebuffer)}};ol.renderer.webgl.Layer.prototype.composeFrame=function(a,b,c){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,c,a);c.bindBuffer(ol.webgl.ARRAY_BUFFER,this.arrayBuffer_);var d=c.getGL();var e=ol.renderer.webgl.defaultmapshader.fragment;var f=ol.renderer.webgl.defaultmapshader.vertex;var g=c.getProgram(e,f);var h;if(!this.defaultLocations_){h=new ol.renderer.webgl.defaultmapshader.Locations(d,g);this.defaultLocations_=h}else{h=this.defaultLocations_}if(c.useProgram(g)){d.enableVertexAttribArray(h.a_position);d.vertexAttribPointer(h.a_position,2,ol.webgl.FLOAT,false,16,0);d.enableVertexAttribArray(h.a_texCoord);d.vertexAttribPointer(h.a_texCoord,2,ol.webgl.FLOAT,false,16,8);d.uniform1i(h.u_texture,0)}d.uniformMatrix4fv(h.u_texCoordMatrix,false,ol.vec.Mat4.fromTransform(this.tmpMat4_,this.getTexCoordMatrix()));d.uniformMatrix4fv(h.u_projectionMatrix,false,ol.vec.Mat4.fromTransform(this.tmpMat4_,this.getProjectionMatrix()));d.uniform1f(h.u_opacity,b.opacity);d.bindTexture(ol.webgl.TEXTURE_2D,this.getTexture());d.drawArrays(ol.webgl.TRIANGLE_STRIP,0,4);this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,c,a)};ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(a,b,c){var d=this.getLayer();if(d.hasListener(a)){var e=c.viewState;var f=e.resolution;var g=c.pixelRatio;var h=c.extent;var i=e.center;var j=e.rotation;var k=c.size;var l=new ol.render.webgl.Immediate(b,i,f,j,k,h,g);var m=new ol.render.Event(a,l,c,null,b);d.dispatchEvent(m)}};ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix};ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture};ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix};ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.texture=null;this.framebuffer=null;this.framebufferDimension=undefined};ol.renderer.webgl.Layer.prototype.prepareFrame=function(a,b,c){};ol.renderer.webgl.Layer.prototype.forEachLayerAtPixel=function(a,b,c,d){};bq.provide('ol.renderer.webgl.ImageLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.ViewHint');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.functions');bq.require('ol.renderer.Type');bq.require('ol.renderer.webgl.Layer');bq.require('ol.transform');bq.require('ol.webgl');bq.require('ol.webgl.Context');ol.renderer.webgl.ImageLayer=function(a,b){ol.renderer.webgl.Layer.call(this,a,b);this.image_=null;this.hitCanvasContext_=null;this.hitTransformationMatrix_=null};ol.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.ImageLayer['handles']=function(a,b){return a===ol.renderer.Type.WEBGL&&b.getType()===ol.LayerType.IMAGE};ol.renderer.webgl.ImageLayer['create']=function(a,b){return new ol.renderer.webgl.ImageLayer((a),(b))};ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(a){var b=a.getImage();var c=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(c,b,ol.webgl.CLAMP_TO_EDGE,ol.webgl.CLAMP_TO_EDGE)};ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(b,c,d,e,f){var g=this.getLayer();var h=g.getSource();var i=c.viewState.resolution;var j=c.viewState.rotation;var k=c.skippedFeatureUids;return h.forEachFeatureAtCoordinate(b,i,j,d,k,function(a){return e.call(f,a,g)})};ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(c,d,e){var f=this.mapRenderer.getGL();var g=c.pixelRatio;var h=c.viewState;var i=h.center;var j=h.resolution;var k=h.rotation;var l=this.image_;var m=this.texture;var n=(this.getLayer());var o=n.getSource();var p=c.viewHints;var q=c.extent;if(d.extent!==undefined){q=ol.extent.getIntersection(q,d.extent)}if(!p[ol.ViewHint.ANIMATING]&&!p[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(q)){var r=h.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var s=o.getProjection();if(s){r=s}}var t=o.getImage(q,j,g,r);if(t){var u=this.loadImage(t);if(u){l=t;m=this.createTexture_(t);if(this.texture){var v=function(a,b){if(!a.isContextLost()){a.deleteTexture(b)}}.bind(null,f,this.texture);c.postRenderFunctions.push((v))}}}}if(l){var w=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(w.width,w.height,g,i,j,k,l.getExtent());this.hitTransformationMatrix_=null;var x=this.texCoordMatrix;ol.transform.reset(x);ol.transform.scale(x,1,-1);ol.transform.translate(x,0,-1);this.image_=l;this.texture=m;this.updateLogos(c,o)}return!!l};ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(a,b,c,d,e,f,g){var h=a*e;var i=b*e;var j=this.projectionMatrix;ol.transform.reset(j);ol.transform.scale(j,c*2/h,c*2/i);ol.transform.rotate(j,-f);ol.transform.translate(j,g[0]-d[0],g[1]-d[1]);ol.transform.scale(j,(g[2]-g[0])/2,(g[3]-g[1])/2);ol.transform.translate(j,1,1)};ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(a,b){var c=this.forEachFeatureAtCoordinate(a,b,0,ol.functions.TRUE,this);return c!==undefined};ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(!this.image_||!this.image_.getImage()){return undefined}if(this.getLayer().getSource().forEachFeatureAtCoordinate!==ol.nullFunction){var e=ol.transform.apply(b.pixelToCoordinateTransform,a.slice());var f=this.forEachFeatureAtCoordinate(e,b,0,ol.functions.TRUE,this);if(f){return c.call(d,this.getLayer(),null)}else{return undefined}}else{var g=[this.image_.getImage().width,this.image_.getImage().height];if(!this.hitTransformationMatrix_){this.hitTransformationMatrix_=this.getHitTransformationMatrix_(b.size,g)}var h=ol.transform.apply(this.hitTransformationMatrix_,a.slice());if(h[0]<0||h[0]>g[0]||h[1]<0||h[1]>g[1]){return undefined}if(!this.hitCanvasContext_){this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)}this.hitCanvasContext_.clearRect(0,0,1,1);this.hitCanvasContext_.drawImage(this.image_.getImage(),h[0],h[1],1,1,0,0,1,1);var i=this.hitCanvasContext_.getImageData(0,0,1,1).data;if(i[3]>0){return c.call(d,this.getLayer(),i)}else{return undefined}}};ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(a,b){var c=ol.transform.create();ol.transform.translate(c,-1,-1);ol.transform.scale(c,2/a[0],2/a[1]);ol.transform.translate(c,0,a[1]);ol.transform.scale(c,1,-1);var d=ol.transform.invert(this.projectionMatrix.slice());var e=ol.transform.create();ol.transform.translate(e,0,b[1]);ol.transform.scale(e,1,-1);ol.transform.scale(e,b[0]/2,b[1]/2);ol.transform.translate(e,1,1);ol.transform.multiply(e,d);ol.transform.multiply(e,c);return e};bq.provide('ol.renderer.webgl.Map');bq.require('ol');bq.require('ol.array');bq.require('ol.css');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.has');bq.require('ol.layer.Layer');bq.require('ol.render.Event');bq.require('ol.render.EventType');bq.require('ol.render.webgl.Immediate');bq.require('ol.renderer.Map');bq.require('ol.renderer.Type');bq.require('ol.source.State');bq.require('ol.structs.LRUCache');bq.require('ol.structs.PriorityQueue');bq.require('ol.webgl');bq.require('ol.webgl.Context');bq.require('ol.webgl.ContextEventType');ol.renderer.webgl.Map=function(g,h){ol.renderer.Map.call(this,g,h);this.canvas_=(document.createElement('CANVAS'));this.canvas_.style.width='100%';this.canvas_.style.height='100%';this.canvas_.style.display='block';this.canvas_.className=ol.css.CLASS_UNSELECTABLE;g.insertBefore(this.canvas_,g.childNodes[0]||null);this.clipTileCanvasWidth_=0;this.clipTileCanvasHeight_=0;this.clipTileContext_=ol.dom.createCanvasContext2D();this.renderedVisible_=true;this.gl_=ol.webgl.getContext(this.canvas_,{antialias:true,depth:true,failIfMajorPerformanceCaveat:true,preserveDrawingBuffer:false,stencil:true});this.context_=new ol.webgl.Context(this.canvas_,this.gl_);ol.events.listen(this.canvas_,ol.webgl.ContextEventType.LOST,this.handleWebGLContextLost,this);ol.events.listen(this.canvas_,ol.webgl.ContextEventType.RESTORED,this.handleWebGLContextRestored,this);this.textureCache_=new ol.structs.LRUCache();this.focus_=null;this.tileTextureQueue_=new ol.structs.PriorityQueue((function(a){var b=(a[1]);var c=(a[2]);var d=b[0]-this.focus_[0];var e=b[1]-this.focus_[1];return 65536*Math.log(c)+Math.sqrt(d*d+e*e)/c}).bind(this),function(a){return(a[0]).getKey()});this.loadNextTileTexture_=function(a,b){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var c=this.tileTextureQueue_.dequeue();var d=(c[0]);var e=(c[3]);var f=(c[4]);this.bindTileTexture(d,e,f,ol.webgl.LINEAR,ol.webgl.LINEAR)}return false}.bind(this);this.textureCacheFrameMarkerCount_=0;this.initializeGL_()};ol.inherits(ol.renderer.webgl.Map,ol.renderer.Map);ol.renderer.webgl.Map['handles']=function(a){return ol.has.WEBGL&&a===ol.renderer.Type.WEBGL};ol.renderer.webgl.Map['create']=function(a,b){return new ol.renderer.webgl.Map(a,b)};ol.renderer.webgl.Map.prototype.bindTileTexture=function(a,b,c,d,e){var f=this.getGL();var g=a.getKey();if(this.textureCache_.containsKey(g)){var h=this.textureCache_.get(g);f.bindTexture(ol.webgl.TEXTURE_2D,h.texture);if(h.magFilter!=d){f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MAG_FILTER,d);h.magFilter=d}if(h.minFilter!=e){f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MIN_FILTER,e);h.minFilter=e}}else{var i=f.createTexture();f.bindTexture(ol.webgl.TEXTURE_2D,i);if(c>0){var j=this.clipTileContext_.canvas;var k=this.clipTileContext_;if(this.clipTileCanvasWidth_!==b[0]||this.clipTileCanvasHeight_!==b[1]){j.width=b[0];j.height=b[1];this.clipTileCanvasWidth_=b[0];this.clipTileCanvasHeight_=b[1]}else{k.clearRect(0,0,b[0],b[1])}k.drawImage(a.getImage(),c,c,b[0],b[1],0,0,b[0],b[1]);f.texImage2D(ol.webgl.TEXTURE_2D,0,ol.webgl.RGBA,ol.webgl.RGBA,ol.webgl.UNSIGNED_BYTE,j)}else{f.texImage2D(ol.webgl.TEXTURE_2D,0,ol.webgl.RGBA,ol.webgl.RGBA,ol.webgl.UNSIGNED_BYTE,a.getImage())}f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MAG_FILTER,d);f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MIN_FILTER,e);f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_S,ol.webgl.CLAMP_TO_EDGE);f.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_T,ol.webgl.CLAMP_TO_EDGE);this.textureCache_.set(g,{texture:i,magFilter:d,minFilter:e})}};ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(a,b){var c=this.getMap();if(c.hasListener(a)){var d=this.context_;var e=b.extent;var f=b.size;var g=b.viewState;var h=b.pixelRatio;var i=g.resolution;var j=g.center;var k=g.rotation;var l=new ol.render.webgl.Immediate(d,j,i,k,f,e,h);var m=new ol.render.Event(a,l,b,null,d);c.dispatchEvent(m)}};ol.renderer.webgl.Map.prototype.disposeInternal=function(){var b=this.getGL();if(!b.isContextLost()){this.textureCache_.forEach(function(a){if(a){b.deleteTexture(a.texture)}})}this.context_.dispose();ol.renderer.Map.prototype.disposeInternal.call(this)};ol.renderer.webgl.Map.prototype.expireCache_=function(a,b){var c=this.getGL();var d;while(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){d=this.textureCache_.peekLast();if(!d){if(+this.textureCache_.peekLastKey()==b.index){break}else{--this.textureCacheFrameMarkerCount_}}else{c.deleteTexture(d.texture)}this.textureCache_.pop()}};ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_};ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_};ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_};ol.renderer.webgl.Map.prototype.getType=function(){return ol.renderer.Type.WEBGL};ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(a){a.preventDefault();this.textureCache_.clear();this.textureCacheFrameMarkerCount_=0;var b=this.getLayerRenderers();for(var c in b){var d=(b[c]);d.handleWebGLContextLost()}};ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_();this.getMap().render()};ol.renderer.webgl.Map.prototype.initializeGL_=function(){var a=this.gl_;a.activeTexture(ol.webgl.TEXTURE0);a.blendFuncSeparate(ol.webgl.SRC_ALPHA,ol.webgl.ONE_MINUS_SRC_ALPHA,ol.webgl.ONE,ol.webgl.ONE_MINUS_SRC_ALPHA);a.disable(ol.webgl.CULL_FACE);a.disable(ol.webgl.DEPTH_TEST);a.disable(ol.webgl.SCISSOR_TEST);a.disable(ol.webgl.STENCIL_TEST)};ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(a){return this.textureCache_.containsKey(a.getKey())};ol.renderer.webgl.Map.prototype.renderFrame=function(a){var b=this.getContext();var c=this.getGL();if(c.isContextLost()){return false}if(!a){if(this.renderedVisible_){this.canvas_.style.display='none';this.renderedVisible_=false}return false}this.focus_=a.focus;this.textureCache_.set((-a.index).toString(),null);++this.textureCacheFrameMarkerCount_;this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,a);var d=[];var e=a.layerStatesArray;ol.array.stableSort(e,ol.renderer.Map.sortByZIndex);var f=a.viewState.resolution;var i,ii,layerRenderer,layerState;for(i=0,ii=e.length;i<ii;++i){layerState=e[i];if(ol.layer.Layer.visibleAtResolution(layerState,f)&&layerState.sourceState==ol.source.State.READY){layerRenderer=(this.getLayerRenderer(layerState.layer));if(layerRenderer.prepareFrame(a,layerState,b)){d.push(layerState)}}}var g=a.size[0]*a.pixelRatio;var h=a.size[1]*a.pixelRatio;if(this.canvas_.width!=g||this.canvas_.height!=h){this.canvas_.width=g;this.canvas_.height=h}c.bindFramebuffer(ol.webgl.FRAMEBUFFER,null);c.clearColor(0,0,0,0);c.clear(ol.webgl.COLOR_BUFFER_BIT);c.enable(ol.webgl.BLEND);c.viewport(0,0,this.canvas_.width,this.canvas_.height);for(i=0,ii=d.length;i<ii;++i){layerState=d[i];layerRenderer=(this.getLayerRenderer(layerState.layer));layerRenderer.composeFrame(a,layerState,b)}if(!this.renderedVisible_){this.canvas_.style.display='';this.renderedVisible_=true}this.calculateMatrices2D(a);if(this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK){a.postRenderFunctions.push((this.expireCache_.bind(this)))}if(!this.tileTextureQueue_.isEmpty()){a.postRenderFunctions.push(this.loadNextTileTexture_);a.animate=true}this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,a);this.scheduleRemoveUnusedLayerRenderers(a);this.scheduleExpireIconCache(a)};ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(a,b,c,d,e,f,g){var h;if(this.getGL().isContextLost()){return false}var j=b.viewState;var k=b.layerStatesArray;var l=k.length;var i;for(i=l-1;i>=0;--i){var m=k[i];var n=m.layer;if(ol.layer.Layer.visibleAtResolution(m,j.resolution)&&f.call(g,n)){var o=this.getLayerRenderer(n);h=o.forEachFeatureAtCoordinate(a,b,c,d,e);if(h){return h}}}return undefined};ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(a,b,c,d,e){var f=false;if(this.getGL().isContextLost()){return false}var g=b.viewState;var h=b.layerStatesArray;var j=h.length;var i;for(i=j-1;i>=0;--i){var k=h[i];var l=k.layer;if(ol.layer.Layer.visibleAtResolution(k,g.resolution)&&d.call(e,l)){var m=this.getLayerRenderer(l);f=m.hasFeatureAtCoordinate(a,b);if(f){return true}}}return f};ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(a,b,c,d,e,f){if(this.getGL().isContextLost()){return false}var g=b.viewState;var h;var j=b.layerStatesArray;var k=j.length;var i;for(i=k-1;i>=0;--i){var l=j[i];var m=l.layer;if(ol.layer.Layer.visibleAtResolution(l,g.resolution)&&e.call(d,m)){var n=(this.getLayerRenderer(m));h=n.forEachLayerAtPixel(a,b,c,d);if(h){return h}}}return undefined};bq.provide('ol.renderer.webgl.tilelayershader');bq.require('ol');bq.require('ol.webgl.Fragment');bq.require('ol.webgl.Vertex');ol.renderer.webgl.tilelayershader.fragment=new ol.webgl.Fragment(ol.DEBUG_WEBGL?'precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n':'precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}');ol.renderer.webgl.tilelayershader.vertex=new ol.webgl.Vertex(ol.DEBUG_WEBGL?'varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n':'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}');bq.provide('ol.renderer.webgl.tilelayershader.Locations');bq.require('ol');ol.renderer.webgl.tilelayershader.Locations=function(a,b){this.u_tileOffset=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_tileOffset':'d');this.u_texture=a.getUniformLocation(b,ol.DEBUG_WEBGL?'u_texture':'e');this.a_position=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_position':'b');this.a_texCoord=a.getAttribLocation(b,ol.DEBUG_WEBGL?'a_texCoord':'c')};bq.provide('ol.renderer.webgl.TileLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.TileRange');bq.require('ol.TileState');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.renderer.Type');bq.require('ol.renderer.webgl.Layer');bq.require('ol.renderer.webgl.tilelayershader');bq.require('ol.renderer.webgl.tilelayershader.Locations');bq.require('ol.size');bq.require('ol.transform');bq.require('ol.webgl');bq.require('ol.webgl.Buffer');ol.renderer.webgl.TileLayer=function(a,b){ol.renderer.webgl.Layer.call(this,a,b);this.fragmentShader_=ol.renderer.webgl.tilelayershader.fragment;this.vertexShader_=ol.renderer.webgl.tilelayershader.vertex;this.locations_=null;this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;this.tmpSize_=[0,0]};ol.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.TileLayer['handles']=function(a,b){return a===ol.renderer.Type.WEBGL&&b.getType()===ol.LayerType.TILE};ol.renderer.webgl.TileLayer['create']=function(a,b){return new ol.renderer.webgl.TileLayer((a),(b))};ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){var a=this.mapRenderer.getContext();a.deleteBuffer(this.renderArrayBuffer_);ol.renderer.webgl.Layer.prototype.disposeInternal.call(this)};ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(e,f,g){var h=this.mapRenderer;return(function(c,d){function callback(a){var b=h.isTileTextureLoaded(a);if(b){if(!g[c]){g[c]={}}g[c][a.tileCoord.toString()]=a}return b}return e.forEachLoadedTile(f,c,d,callback)})};ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){ol.renderer.webgl.Layer.prototype.handleWebGLContextLost.call(this);this.locations_=null};ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(b,c,d){var e=this.mapRenderer;var f=d.getGL();var g=b.viewState;var h=g.projection;var j=(this.getLayer());var k=j.getSource();var l=k.getTileGridForProjection(h);var z=l.getZForResolution(g.resolution);var m=l.getResolution(z);var n=k.getTilePixelSize(z,b.pixelRatio,h);var o=n[0]/ol.size.toSize(l.getTileSize(z),this.tmpSize_)[0];var p=m/o;var q=k.getTilePixelRatio(o)*k.getGutter(h);var r=g.center;var s=b.extent;var t=l.getTileRangeForExtentAndZ(s,z);var u;if(this.renderedTileRange_&&this.renderedTileRange_.equals(t)&&this.renderedRevision_==k.getRevision()){u=this.renderedFramebufferExtent_}else{var v=t.getSize();var w=Math.max(v[0]*n[0],v[1]*n[1]);var A=ol.math.roundUpToPowerOfTwo(w);var B=p*A;var C=l.getOrigin(z);var D=C[0]+t.minX*n[0]*p;var E=C[1]+t.minY*n[1]*p;u=[D,E,D+B,E+B];this.bindFramebuffer(b,A);f.viewport(0,0,A,A);f.clearColor(0,0,0,0);f.clear(ol.webgl.COLOR_BUFFER_BIT);f.disable(ol.webgl.BLEND);var F=d.getProgram(this.fragmentShader_,this.vertexShader_);d.useProgram(F);if(!this.locations_){this.locations_=new ol.renderer.webgl.tilelayershader.Locations(f,F)}d.bindBuffer(ol.webgl.ARRAY_BUFFER,this.renderArrayBuffer_);f.enableVertexAttribArray(this.locations_.a_position);f.vertexAttribPointer(this.locations_.a_position,2,ol.webgl.FLOAT,false,16,0);f.enableVertexAttribArray(this.locations_.a_texCoord);f.vertexAttribPointer(this.locations_.a_texCoord,2,ol.webgl.FLOAT,false,16,8);f.uniform1i(this.locations_.u_texture,0);var G={};G[z]={};var H=this.createLoadedTileFinder(k,h,G);var I=j.getUseInterimTilesOnError();var J=true;var K=ol.extent.createEmpty();var L=new ol.TileRange(0,0,0,0);var M,drawable,fullyLoaded,tile,tileState;var x,y,tileExtent;for(x=t.minX;x<=t.maxX;++x){for(y=t.minY;y<=t.maxY;++y){tile=k.getTile(z,x,y,o,h);if(c.extent!==undefined){tileExtent=l.getTileCoordExtent(tile.tileCoord,K);if(!ol.extent.intersects(tileExtent,c.extent)){continue}}tileState=tile.getState();drawable=tileState==ol.TileState.LOADED||tileState==ol.TileState.EMPTY||tileState==ol.TileState.ERROR&&!I;if(!drawable){tile=tile.getInterimTile()}tileState=tile.getState();if(tileState==ol.TileState.LOADED){if(e.isTileTextureLoaded(tile)){G[z][tile.tileCoord.toString()]=tile;continue}}else if(tileState==ol.TileState.EMPTY||(tileState==ol.TileState.ERROR&&!I)){continue}J=false;fullyLoaded=l.forEachTileCoordParentTileRange(tile.tileCoord,H,null,L,K);if(!fullyLoaded){M=l.getTileCoordChildTileRange(tile.tileCoord,L,K);if(M){H(z+1,M)}}}}var N=Object.keys(G).map(Number);N.sort(ol.array.numberSafeCompareFunction);var O=new Float32Array(4);var i,ii,tileKey,tilesToDraw;for(i=0,ii=N.length;i<ii;++i){tilesToDraw=G[N[i]];for(tileKey in tilesToDraw){tile=tilesToDraw[tileKey];tileExtent=l.getTileCoordExtent(tile.tileCoord,K);O[0]=2*(tileExtent[2]-tileExtent[0])/B;O[1]=2*(tileExtent[3]-tileExtent[1])/B;O[2]=2*(tileExtent[0]-u[0])/B-1;O[3]=2*(tileExtent[1]-u[1])/B-1;f.uniform4fv(this.locations_.u_tileOffset,O);e.bindTileTexture(tile,n,q*o,ol.webgl.LINEAR,ol.webgl.LINEAR);f.drawArrays(ol.webgl.TRIANGLE_STRIP,0,4)}}if(J){this.renderedTileRange_=t;this.renderedFramebufferExtent_=u;this.renderedRevision_=k.getRevision()}else{this.renderedTileRange_=null;this.renderedFramebufferExtent_=null;this.renderedRevision_=-1;b.animate=true}}this.updateUsedTiles(b.usedTiles,k,z,t);var P=e.getTileTextureQueue();this.manageTilePyramid(b,k,l,o,h,s,z,j.getPreload(),function(a){if(a.getState()==ol.TileState.LOADED&&!e.isTileTextureLoaded(a)&&!P.isKeyQueued(a.getKey())){P.enqueue([a,l.getTileCoordCenter(a.tileCoord),l.getResolution(a.tileCoord[0]),n,q*o])}},this);this.scheduleExpireCache(b,k);this.updateLogos(b,k);var Q=this.texCoordMatrix;ol.transform.reset(Q);ol.transform.translate(Q,(Math.round(r[0]/m)*m-u[0])/(u[2]-u[0]),(Math.round(r[1]/m)*m-u[1])/(u[3]-u[1]));if(g.rotation!==0){ol.transform.rotate(Q,g.rotation)}ol.transform.scale(Q,b.size[0]*g.resolution/(u[2]-u[0]),b.size[1]*g.resolution/(u[3]-u[1]));ol.transform.translate(Q,-0.5,-0.5);return true};ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){if(!this.framebuffer){return undefined}var e=[a[0]/b.size[0],(b.size[1]-a[1])/b.size[1]];var f=ol.transform.apply(this.texCoordMatrix,e.slice());var g=[f[0]*this.framebufferDimension,f[1]*this.framebufferDimension];var h=this.mapRenderer.getContext().getGL();h.bindFramebuffer(h.FRAMEBUFFER,this.framebuffer);var i=new Uint8Array(4);h.readPixels(g[0],g[1],1,1,h.RGBA,h.UNSIGNED_BYTE,i);if(i[3]>0){return c.call(d,this.getLayer(),i)}else{return undefined}};bq.provide('ol.renderer.webgl.VectorLayer');bq.require('ol');bq.require('ol.LayerType');bq.require('ol.ViewHint');bq.require('ol.extent');bq.require('ol.render.webgl.ReplayGroup');bq.require('ol.renderer.Type');bq.require('ol.renderer.vector');bq.require('ol.renderer.webgl.Layer');bq.require('ol.transform');ol.renderer.webgl.VectorLayer=function(a,b){ol.renderer.webgl.Layer.call(this,a,b);this.dirty_=false;this.renderedRevision_=-1;this.renderedResolution_=NaN;this.renderedExtent_=ol.extent.createEmpty();this.renderedRenderOrder_=null;this.replayGroup_=null;this.layerState_=null};ol.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer);ol.renderer.webgl.VectorLayer['handles']=function(a,b){return a===ol.renderer.Type.WEBGL&&b.getType()===ol.LayerType.VECTOR};ol.renderer.webgl.VectorLayer['create']=function(a,b){return new ol.renderer.webgl.VectorLayer((a),(b))};ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(a,b,c){this.layerState_=b;var d=a.viewState;var e=this.replayGroup_;var f=a.size;var g=a.pixelRatio;var h=this.mapRenderer.getGL();if(e&&!e.isEmpty()){h.enable(h.SCISSOR_TEST);h.scissor(0,0,f[0]*g,f[1]*g);e.replay(c,d.center,d.resolution,d.rotation,f,g,b.opacity,b.managed?a.skippedFeatureUids:{});h.disable(h.SCISSOR_TEST)}};ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var a=this.replayGroup_;if(a){var b=this.mapRenderer.getContext();a.getDeleteResourcesFunction(b)();this.replayGroup_=null}ol.renderer.webgl.Layer.prototype.disposeInternal.call(this)};ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(c,d,e,f,g){if(!this.replayGroup_||!this.layerState_){return undefined}else{var h=this.mapRenderer.getContext();var i=d.viewState;var j=this.getLayer();var k=this.layerState_;var l={};return this.replayGroup_.forEachFeatureAtCoordinate(c,h,i.center,i.resolution,i.rotation,d.size,d.pixelRatio,k.opacity,{},function(a){var b=ol.getUid(a).toString();if(!(b in l)){l[b]=true;return f.call(g,a,j)}})}};ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(a,b){if(!this.replayGroup_||!this.layerState_){return false}else{var c=this.mapRenderer.getContext();var d=b.viewState;var e=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(a,c,d.center,d.resolution,d.rotation,b.size,b.pixelRatio,e.opacity,b.skippedFeatureUids)}};ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(a,b,c,d){var e=ol.transform.apply(b.pixelToCoordinateTransform,a.slice());var f=this.hasFeatureAtCoordinate(e,b);if(f){return c.call(d,this.getLayer(),null)}else{return undefined}};ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()};ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(e,f,g){var h=(this.getLayer());var i=h.getSource();this.updateLogos(e,i);var j=e.viewHints[ol.ViewHint.ANIMATING];var k=e.viewHints[ol.ViewHint.INTERACTING];var l=h.getUpdateWhileAnimating();var m=h.getUpdateWhileInteracting();if(!this.dirty_&&(!l&&j)||(!m&&k)){return true}var n=e.extent;var o=e.viewState;var p=o.projection;var q=o.resolution;var r=e.pixelRatio;var s=h.getRevision();var t=h.getRenderBuffer();var u=h.getRenderOrder();if(u===undefined){u=ol.renderer.vector.defaultOrder}var v=ol.extent.buffer(n,t*q);if(!this.dirty_&&this.renderedResolution_==q&&this.renderedRevision_==s&&this.renderedRenderOrder_==u&&ol.extent.containsExtent(this.renderedExtent_,v)){return true}if(this.replayGroup_){e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(g))}this.dirty_=false;var w=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(q,r),v,h.getRenderBuffer());i.loadFeatures(v,q,p);var x=function(a){var b;var c=a.getStyleFunction();if(c){b=c.call(a,q)}else{c=h.getStyleFunction();if(c){b=c(a,q)}}if(b){var d=this.renderFeature(a,q,r,b,w);this.dirty_=this.dirty_||d}};if(u){var y=[];i.forEachFeatureInExtent(v,function(a){y.push(a)},this);y.sort(u);y.forEach(x,this)}else{i.forEachFeatureInExtent(v,x,this)}w.finish(g);this.renderedResolution_=q;this.renderedRevision_=s;this.renderedRenderOrder_=u;this.renderedExtent_=v;this.replayGroup_=w;return true};ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(a,b,c,d,e){if(!d){return false}var f=false;if(Array.isArray(d)){for(var i=d.length-1,ii=0;i>=ii;--i){f=ol.renderer.vector.renderFeature(e,a,d[i],ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||f}}else{f=ol.renderer.vector.renderFeature(e,a,d,ol.renderer.vector.getSquaredTolerance(b,c),this.handleStyleImageChange_,this)||f}return f};bq.provide('ol.Map');bq.require('ol');bq.require('ol.PluggableMap');bq.require('ol.PluginType');bq.require('ol.control');bq.require('ol.interaction');bq.require('ol.obj');bq.require('ol.plugins');bq.require('ol.renderer.canvas.ImageLayer');bq.require('ol.renderer.canvas.Map');bq.require('ol.renderer.canvas.TileLayer');bq.require('ol.renderer.canvas.VectorLayer');bq.require('ol.renderer.canvas.VectorTileLayer');bq.require('ol.renderer.webgl.ImageLayer');bq.require('ol.renderer.webgl.Map');bq.require('ol.renderer.webgl.TileLayer');bq.require('ol.renderer.webgl.VectorLayer');if(ol.ENABLE_CANVAS){ol.plugins.register(ol.PluginType.MAP_RENDERER,ol.renderer.canvas.Map);ol.plugins.registerMultiple(ol.PluginType.LAYER_RENDERER,[ol.renderer.canvas.ImageLayer,ol.renderer.canvas.TileLayer,ol.renderer.canvas.VectorLayer,ol.renderer.canvas.VectorTileLayer])}if(ol.ENABLE_WEBGL){ol.plugins.register(ol.PluginType.MAP_RENDERER,ol.renderer.webgl.Map);ol.plugins.registerMultiple(ol.PluginType.LAYER_RENDERER,[ol.renderer.webgl.ImageLayer,ol.renderer.webgl.TileLayer,ol.renderer.webgl.VectorLayer])}ol.Map=function(a){a=ol.obj.assign({},a);if(!a.controls){a.controls=ol.control.defaults()}if(!a.interactions){a.interactions=ol.interaction.defaults()}ol.PluggableMap.call(this,a)};ol.inherits(ol.Map,ol.PluggableMap);bq.provide('ol.net');bq.require('ol');ol.net.jsonp=function(b,c,d,e){var f=document.createElement('script');var g='olc_'+ol.getUid(c);function cleanup(){delete window[g];f.parentNode.removeChild(f)}f.async=true;f.src=b+(b.indexOf('?')==-1?'?':'&')+(e||'callback')+'='+g;var h=setTimeout(function(){cleanup();if(d){d()}},10000);window[g]=function(a){clearTimeout(h);cleanup();c(a)};document.getElementsByTagName('head')[0].appendChild(f)};bq.provide('ol.proj.common');bq.require('ol.proj');ol.proj.common.add=ol.proj.addCommon;bq.provide('ol.render');bq.require('ol.has');bq.require('ol.transform');bq.require('ol.render.canvas.Immediate');ol.render.toContext=function(a,b){var c=a.canvas;var d=b?b:{};var e=d.pixelRatio||ol.has.DEVICE_PIXEL_RATIO;var f=d.size;if(f){c.width=f[0]*e;c.height=f[1]*e;c.style.width=f[0]+'px';c.style.height=f[1]+'px'}var g=[0,0,c.width,c.height];var h=ol.transform.scale(ol.transform.create(),e,e);return new ol.render.canvas.Immediate(a,e,g,h,0)};bq.provide('ol.reproj');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.proj');ol.reproj.calculateSourceResolution=function(a,b,c,d){var e=ol.proj.transform(c,b,a);var f=ol.proj.getPointResolution(b,d,c);var g=b.getMetersPerUnit();if(g!==undefined){f*=g}var h=a.getMetersPerUnit();if(h!==undefined){f/=h}var i=a.getExtent();if(!i||ol.extent.containsCoordinate(i,e)){var j=ol.proj.getPointResolution(a,f,e)/f;if(isFinite(j)&&j>0){f/=j}}return f};ol.reproj.enlargeClipPoint_=function(a,b,x,y){var c=x-a,dY=y-b;var d=Math.sqrt(c*c+dY*dY);return[Math.round(x+c/d),Math.round(y+dY/d)]};ol.reproj.render=function(p,q,r,s,t,u,v,w,x,y,z){var A=ol.dom.createCanvasContext2D(Math.round(r*p),Math.round(r*q));if(x.length===0){return A.canvas}A.scale(r,r);var B=ol.extent.createEmpty();x.forEach(function(a,i,b){ol.extent.extend(B,a.extent)});var C=ol.extent.getWidth(B);var D=ol.extent.getHeight(B);var E=ol.dom.createCanvasContext2D(Math.round(r*C/s),Math.round(r*D/s));var F=r/s;x.forEach(function(a,i,b){var c=a.extent[0]-B[0];var d=-(a.extent[3]-B[3]);var e=ol.extent.getWidth(a.extent);var f=ol.extent.getHeight(a.extent);E.drawImage(a.image,y,y,a.image.width-2*y,a.image.height-2*y,c*F,d*F,e*F,f*F)});var G=ol.extent.getTopLeft(v);w.getTriangles().forEach(function(a,i,b){var c=a.source,target=a.target;var d=c[0][0],y0=c[0][1],x1=c[1][0],y1=c[1][1],x2=c[2][0],y2=c[2][1];var e=(target[0][0]-G[0])/u,v0=-(target[0][1]-G[1])/u;var f=(target[1][0]-G[0])/u,v1=-(target[1][1]-G[1])/u;var g=(target[2][0]-G[0])/u,v2=-(target[2][1]-G[1])/u;var h=d,sourceNumericalShiftY=y0;d=0;y0=0;x1-=h;y1-=sourceNumericalShiftY;x2-=h;y2-=sourceNumericalShiftY;var j=[[x1,y1,0,0,f-e],[x2,y2,0,0,g-e],[0,0,x1,y1,v1-v0],[0,0,x2,y2,v2-v0]];var k=ol.math.solveLinearSystem(j);if(!k){return}A.save();A.beginPath();var l=(e+f+g)/3,centroidY=(v0+v1+v2)/3;var m=ol.reproj.enlargeClipPoint_(l,centroidY,e,v0);var n=ol.reproj.enlargeClipPoint_(l,centroidY,f,v1);var o=ol.reproj.enlargeClipPoint_(l,centroidY,g,v2);A.moveTo(n[0],n[1]);A.lineTo(m[0],m[1]);A.lineTo(o[0],o[1]);A.clip();A.transform(k[0],k[2],k[1],k[3],e,v0);A.translate(B[0]-h,B[3]-sourceNumericalShiftY);A.scale(s/r,-s/r);A.drawImage(E.canvas,0,0);A.restore()});if(z){A.save();A.strokeStyle='black';A.lineWidth=1;w.getTriangles().forEach(function(a,i,b){var c=a.target;var d=(c[0][0]-G[0])/u,v0=-(c[0][1]-G[1])/u;var e=(c[1][0]-G[0])/u,v1=-(c[1][1]-G[1])/u;var f=(c[2][0]-G[0])/u,v2=-(c[2][1]-G[1])/u;A.beginPath();A.moveTo(e,v1);A.lineTo(d,v0);A.lineTo(f,v2);A.closePath();A.stroke()});A.restore()}return A.canvas};bq.provide('ol.reproj.Triangulation');bq.require('ol');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.proj');ol.reproj.Triangulation=function(e,f,g,h,j){this.sourceProj_=e;this.targetProj_=f;var k={};var l=ol.proj.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(c){var a=c[0]+'/'+c[1];if(!k[a]){k[a]=l(c)}return k[a]};this.maxSourceExtent_=h;this.errorThresholdSquared_=j*j;this.triangles_=[];this.wrapsXInSource_=false;this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!h&&!!this.sourceProj_.getExtent()&&(ol.extent.getWidth(h)==ol.extent.getWidth(this.sourceProj_.getExtent()));this.sourceWorldWidth_=this.sourceProj_.getExtent()?ol.extent.getWidth(this.sourceProj_.getExtent()):null;this.targetWorldWidth_=this.targetProj_.getExtent()?ol.extent.getWidth(this.targetProj_.getExtent()):null;var m=ol.extent.getTopLeft(g);var n=ol.extent.getTopRight(g);var o=ol.extent.getBottomRight(g);var p=ol.extent.getBottomLeft(g);var q=this.transformInv_(m);var r=this.transformInv_(n);var s=this.transformInv_(o);var t=this.transformInv_(p);this.addQuad_(m,n,o,p,q,r,s,t,ol.RASTER_REPROJECTION_MAX_SUBDIVISION);if(this.wrapsXInSource_){var u=Infinity;this.triangles_.forEach(function(a,i,b){u=Math.min(u,a.source[0][0],a.source[1][0],a.source[2][0])});this.triangles_.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-u>this.sourceWorldWidth_/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];if((b[0][0]-u)>this.sourceWorldWidth_/2){b[0][0]-=this.sourceWorldWidth_}if((b[1][0]-u)>this.sourceWorldWidth_/2){b[1][0]-=this.sourceWorldWidth_}if((b[2][0]-u)>this.sourceWorldWidth_/2){b[2][0]-=this.sourceWorldWidth_}var c=Math.min(b[0][0],b[1][0],b[2][0]);var d=Math.max(b[0][0],b[1][0],b[2][0]);if((d-c)<this.sourceWorldWidth_/2){a.source=b}}},this)}k={}};ol.reproj.Triangulation.prototype.addTriangle_=function(a,b,c,d,e,f){this.triangles_.push({source:[d,e,f],target:[a,b,c]})};ol.reproj.Triangulation.prototype.addQuad_=function(a,b,c,d,e,f,g,h,i){var j=ol.extent.boundingExtent([e,f,g,h]);var k=this.sourceWorldWidth_?ol.extent.getWidth(j)/this.sourceWorldWidth_:null;var l=(this.sourceWorldWidth_);var m=this.sourceProj_.canWrapX()&&k>0.5&&k<1;var n=false;if(i>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var o=ol.extent.boundingExtent([a,b,c,d]);var p=ol.extent.getWidth(o)/this.targetWorldWidth_;n|=p>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}if(!m&&this.sourceProj_.isGlobal()&&k){n|=k>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}}if(!n&&this.maxSourceExtent_){if(!ol.extent.intersects(j,this.maxSourceExtent_)){return}}if(!n){if(!isFinite(e[0])||!isFinite(e[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(g[0])||!isFinite(g[1])||!isFinite(h[0])||!isFinite(h[1])){if(i>0){n=true}else{return}}}if(i>0){if(!n){var q=[(a[0]+c[0])/2,(a[1]+c[1])/2];var r=this.transformInv_(q);var s;if(m){var t=(ol.math.modulo(e[0],l)+ol.math.modulo(g[0],l))/2;s=t-ol.math.modulo(r[0],l)}else{s=(e[0]+g[0])/2-r[0]}var u=(e[1]+g[1])/2-r[1];var v=s*s+u*u;n=v>this.errorThresholdSquared_}if(n){if(Math.abs(a[0]-c[0])<=Math.abs(a[1]-c[1])){var w=[(b[0]+c[0])/2,(b[1]+c[1])/2];var x=this.transformInv_(w);var y=[(d[0]+a[0])/2,(d[1]+a[1])/2];var z=this.transformInv_(y);this.addQuad_(a,b,w,y,e,f,x,z,i-1);this.addQuad_(y,w,c,d,z,x,g,h,i-1)}else{var A=[(a[0]+b[0])/2,(a[1]+b[1])/2];var B=this.transformInv_(A);var C=[(c[0]+d[0])/2,(c[1]+d[1])/2];var D=this.transformInv_(C);this.addQuad_(a,A,C,d,e,B,D,h,i-1);this.addQuad_(A,b,c,C,B,f,g,D,i-1)}return}}if(m){if(!this.canWrapXInSource_){return}this.wrapsXInSource_=true}this.addTriangle_(a,c,d,e,g,h);this.addTriangle_(a,b,c,e,f,g)};ol.reproj.Triangulation.prototype.calculateSourceExtent=function(){var d=ol.extent.createEmpty();this.triangles_.forEach(function(a,i,b){var c=a.source;ol.extent.extendCoordinate(d,c[0]);ol.extent.extendCoordinate(d,c[1]);ol.extent.extendCoordinate(d,c[2])});return d};ol.reproj.Triangulation.prototype.getTriangles=function(){return this.triangles_};bq.provide('ol.reproj.Image');bq.require('ol');bq.require('ol.ImageBase');bq.require('ol.ImageState');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.reproj');bq.require('ol.reproj.Triangulation');ol.reproj.Image=function(a,b,c,d,e,f){this.targetProj_=b;this.maxSourceExtent_=a.getExtent();var g=b.getExtent();var h=g?ol.extent.getIntersection(c,g):c;var i=ol.extent.getCenter(h);var j=ol.reproj.calculateSourceResolution(a,b,i,d);var k=ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new ol.reproj.Triangulation(a,b,h,this.maxSourceExtent_,j*k);this.targetResolution_=d;this.targetExtent_=c;var l=this.triangulation_.calculateSourceExtent();this.sourceImage_=f(l,j,e);this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1;this.canvas_=null;this.sourceListenerKey_=null;var m=ol.ImageState.LOADED;if(this.sourceImage_){m=ol.ImageState.IDLE}ol.ImageBase.call(this,c,d,this.sourcePixelRatio_,m)};ol.inherits(ol.reproj.Image,ol.ImageBase);ol.reproj.Image.prototype.disposeInternal=function(){if(this.state==ol.ImageState.LOADING){this.unlistenSource_()}ol.ImageBase.prototype.disposeInternal.call(this)};ol.reproj.Image.prototype.getImage=function(){return this.canvas_};ol.reproj.Image.prototype.getProjection=function(){return this.targetProj_};ol.reproj.Image.prototype.reproject_=function(){var a=this.sourceImage_.getState();if(a==ol.ImageState.LOADED){var b=ol.extent.getWidth(this.targetExtent_)/this.targetResolution_;var c=ol.extent.getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=ol.reproj.render(b,c,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=a;this.changed()};ol.reproj.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING;this.changed();var b=this.sourceImage_.getState();if(b==ol.ImageState.LOADED||b==ol.ImageState.ERROR){this.reproject_()}else{this.sourceListenerKey_=ol.events.listen(this.sourceImage_,ol.events.EventType.CHANGE,function(e){var a=this.sourceImage_.getState();if(a==ol.ImageState.LOADED||a==ol.ImageState.ERROR){this.unlistenSource_();this.reproject_()}},this);this.sourceImage_.load()}}};ol.reproj.Image.prototype.unlistenSource_=function(){ol.events.unlistenByKey((this.sourceListenerKey_));this.sourceListenerKey_=null};bq.provide('ol.reproj.Tile');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.reproj');bq.require('ol.reproj.Triangulation');ol.reproj.Tile=function(a,b,c,d,e,f,g,h,i,j,k){ol.Tile.call(this,e,ol.TileState.IDLE);this.renderEdges_=k!==undefined?k:false;this.pixelRatio_=g;this.gutter_=h;this.canvas_=null;this.sourceTileGrid_=b;this.targetTileGrid_=d;this.wrappedTileCoord_=f?f:e;this.sourceTiles_=[];this.sourcesListenerKeys_=null;this.sourceZ_=0;var l=d.getTileCoordExtent(this.wrappedTileCoord_);var m=this.targetTileGrid_.getExtent();var n=this.sourceTileGrid_.getExtent();var o=m?ol.extent.getIntersection(l,m):l;if(ol.extent.getArea(o)===0){this.state=ol.TileState.EMPTY;return}var p=a.getExtent();if(p){if(!n){n=p}else{n=ol.extent.getIntersection(n,p)}}var q=d.getResolution(this.wrappedTileCoord_[0]);var r=ol.extent.getCenter(o);var s=ol.reproj.calculateSourceResolution(a,c,r,q);if(!isFinite(s)||s<=0){this.state=ol.TileState.EMPTY;return}var t=j!==undefined?j:ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new ol.reproj.Triangulation(a,c,o,n,s*t);if(this.triangulation_.getTriangles().length===0){this.state=ol.TileState.EMPTY;return}this.sourceZ_=b.getZForResolution(s);var u=this.triangulation_.calculateSourceExtent();if(n){if(a.canWrapX()){u[1]=ol.math.clamp(u[1],n[1],n[3]);u[3]=ol.math.clamp(u[3],n[1],n[3])}else{u=ol.extent.getIntersection(u,n)}}if(!ol.extent.getArea(u)){this.state=ol.TileState.EMPTY}else{var v=b.getTileRangeForExtentAndZ(u,this.sourceZ_);for(var w=v.minX;w<=v.maxX;w++){for(var x=v.minY;x<=v.maxY;x++){var y=i(this.sourceZ_,w,x,g);if(y){this.sourceTiles_.push(y)}}}if(this.sourceTiles_.length===0){this.state=ol.TileState.EMPTY}}};ol.inherits(ol.reproj.Tile,ol.Tile);ol.reproj.Tile.prototype.disposeInternal=function(){if(this.state==ol.TileState.LOADING){this.unlistenSources_()}ol.Tile.prototype.disposeInternal.call(this)};ol.reproj.Tile.prototype.getImage=function(){return this.canvas_};ol.reproj.Tile.prototype.reproject_=function(){var c=[];this.sourceTiles_.forEach(function(a,i,b){if(a&&a.getState()==ol.TileState.LOADED){c.push({extent:this.sourceTileGrid_.getTileCoordExtent(a.tileCoord),image:a.getImage()})}},this);this.sourceTiles_.length=0;if(c.length===0){this.state=ol.TileState.ERROR}else{var z=this.wrappedTileCoord_[0];var d=this.targetTileGrid_.getTileSize(z);var e=typeof d==='number'?d:d[0];var f=typeof d==='number'?d:d[1];var g=this.targetTileGrid_.getResolution(z);var h=this.sourceTileGrid_.getResolution(this.sourceZ_);var j=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ol.reproj.render(e,f,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),g,j,this.triangulation_,c,this.gutter_,this.renderEdges_);this.state=ol.TileState.LOADED}this.changed()};ol.reproj.Tile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;this.changed();var g=0;this.sourcesListenerKeys_=[];this.sourceTiles_.forEach(function(b,i,c){var d=b.getState();if(d==ol.TileState.IDLE||d==ol.TileState.LOADING){g++;var f;f=ol.events.listen(b,ol.events.EventType.CHANGE,function(e){var a=b.getState();if(a==ol.TileState.LOADED||a==ol.TileState.ERROR||a==ol.TileState.EMPTY){ol.events.unlistenByKey(f);g--;if(g===0){this.unlistenSources_();this.reproject_()}}},this);this.sourcesListenerKeys_.push(f)}},this);this.sourceTiles_.forEach(function(a,i,b){var c=a.getState();if(c==ol.TileState.IDLE){a.load()}});if(g===0){setTimeout(this.reproject_.bind(this),0)}}};ol.reproj.Tile.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ol.events.unlistenByKey);this.sourcesListenerKeys_=null};bq.provide('ol.TileUrlFunction');bq.require('ol.asserts');bq.require('ol.math');bq.require('ol.tilecoord');ol.TileUrlFunction.createFromTemplate=function(e,f){var g=/\{z\}/g;var h=/\{x\}/g;var i=/\{y\}/g;var j=/\{-y\}/g;return(function(b,c,d){if(!b){return undefined}else{return e.replace(g,b[0].toString()).replace(h,b[1].toString()).replace(i,function(){var y=-b[2]-1;return y.toString()}).replace(j,function(){var z=b[0];var a=f.getFullTileRange(z);ol.asserts.assert(a,55);var y=a.getHeight()+b[2];return y.toString()})}})};ol.TileUrlFunction.createFromTemplates=function(a,b){var c=a.length;var d=new Array(c);for(var i=0;i<c;++i){d[i]=ol.TileUrlFunction.createFromTemplate(a[i],b)}return ol.TileUrlFunction.createFromTileUrlFunctions(d)};ol.TileUrlFunction.createFromTileUrlFunctions=function(e){if(e.length===1){return e[0]}return(function(a,b,c){if(!a){return undefined}else{var h=ol.tilecoord.hash(a);var d=ol.math.modulo(h,e.length);return e[d](a,b,c)}})};ol.TileUrlFunction.nullTileUrlFunction=function(a,b,c){return undefined};ol.TileUrlFunction.expandUrl=function(a){var b=[];var c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[1].charCodeAt(0);var e=c[2].charCodeAt(0);var f;for(f=d;f<=e;++f){b.push(a.replace(c[0],String.fromCharCode(f)))}return b}c=c=/\{(\d+)-(\d+)\}/.exec(a);if(c){var g=parseInt(c[2],10);for(var i=parseInt(c[1],10);i<=g;i++){b.push(a.replace(c[0],i.toString()))}return b}b.push(a);return b};bq.provide('ol.TileCache');bq.require('ol');bq.require('ol.structs.LRUCache');bq.require('ol.tilecoord');ol.TileCache=function(a){ol.structs.LRUCache.call(this,a)};ol.inherits(ol.TileCache,ol.structs.LRUCache);ol.TileCache.prototype.expireCache=function(a){var b,zKey;while(this.canExpireCache()){b=this.peekLast();zKey=b.tileCoord[0].toString();if(zKey in a&&a[zKey].contains(b.tileCoord)){break}else{this.pop().dispose()}}};ol.TileCache.prototype.pruneExceptNewestZ=function(){if(this.getCount()===0){return}var b=this.peekFirstKey();var c=ol.tilecoord.fromKey(b);var z=c[0];this.forEach(function(a){if(a.tileCoord[0]!==z){this.remove(ol.tilecoord.getKey(a.tileCoord));a.dispose()}},this)};bq.provide('ol.source.Tile');bq.require('ol');bq.require('ol.TileCache');bq.require('ol.TileState');bq.require('ol.events.Event');bq.require('ol.proj');bq.require('ol.size');bq.require('ol.source.Source');bq.require('ol.tilecoord');bq.require('ol.tilegrid');ol.source.Tile=function(a){ol.source.Source.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.opaque_=a.opaque!==undefined?a.opaque:false;this.tilePixelRatio_=a.tilePixelRatio!==undefined?a.tilePixelRatio:1;this.tileGrid=a.tileGrid!==undefined?a.tileGrid:null;this.tileCache=new ol.TileCache(a.cacheSize);this.tmpSize=[0,0];this.key_='';this.tileOptions={transition:a.transition}};ol.inherits(ol.source.Tile,ol.source.Source);ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()};ol.source.Tile.prototype.expireCache=function(a,b){var c=this.getTileCacheForProjection(a);if(c){c.expireCache(b)}};ol.source.Tile.prototype.forEachLoadedTile=function(a,z,b,c){var d=this.getTileCacheForProjection(a);if(!d){return false}var e=true;var f,tileCoordKey,loaded;for(var x=b.minX;x<=b.maxX;++x){for(var y=b.minY;y<=b.maxY;++y){tileCoordKey=ol.tilecoord.getKeyZXY(z,x,y);loaded=false;if(d.containsKey(tileCoordKey)){f=(d.get(tileCoordKey));loaded=f.getState()===ol.TileState.LOADED;if(loaded){loaded=(c(f)!==false)}}if(!loaded){e=false}}}return e};ol.source.Tile.prototype.getGutter=function(a){return 0};ol.source.Tile.prototype.getKey=function(){return this.key_};ol.source.Tile.prototype.setKey=function(a){if(this.key_!==a){this.key_=a;this.changed()}};ol.source.Tile.prototype.getOpaque=function(a){return this.opaque_};ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()};ol.source.Tile.prototype.getTile=function(z,x,y,a,b){};ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid};ol.source.Tile.prototype.getTileGridForProjection=function(a){if(!this.tileGrid){return ol.tilegrid.getForProjection(a)}else{return this.tileGrid}};ol.source.Tile.prototype.getTileCacheForProjection=function(a){var b=this.getProjection();if(b&&!ol.proj.equivalent(b,a)){return null}else{return this.tileCache}};ol.source.Tile.prototype.getTilePixelRatio=function(a){return this.tilePixelRatio_};ol.source.Tile.prototype.getTilePixelSize=function(z,a,b){var c=this.getTileGridForProjection(b);var d=this.getTilePixelRatio(a);var e=ol.size.toSize(c.getTileSize(z),this.tmpSize);if(d==1){return e}else{return ol.size.scale(e,d,this.tmpSize)}};ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(a,b){var c=b!==undefined?b:this.getProjection();var d=this.getTileGridForProjection(c);if(this.getWrapX()&&c.isGlobal()){a=ol.tilegrid.wrapX(d,a,c)}return ol.tilecoord.withinExtentAndZ(a,d)?a:null};ol.source.Tile.prototype.refresh=function(){this.tileCache.clear();this.changed()};ol.source.Tile.prototype.useTile=ol.nullFunction;ol.source.Tile.Event=function(a,b){ol.events.Event.call(this,a);this.tile=b};ol.inherits(ol.source.Tile.Event,ol.events.Event);bq.provide('ol.source.TileEventType');ol.source.TileEventType={TILELOADSTART:'tileloadstart',TILELOADEND:'tileloadend',TILELOADERROR:'tileloaderror'};bq.provide('ol.source.UrlTile');bq.require('ol');bq.require('ol.TileState');bq.require('ol.TileUrlFunction');bq.require('ol.source.Tile');bq.require('ol.source.TileEventType');bq.require('ol.tilecoord');ol.source.UrlTile=function(a){ol.source.Tile.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.nullTileUrlFunction;this.urls=null;if(a.urls){this.setUrls(a.urls)}else if(a.url){this.setUrl(a.url)}if(a.tileUrlFunction){this.setTileUrlFunction(a.tileUrlFunction)}this.tileLoadingKeys_={}};ol.inherits(ol.source.UrlTile,ol.source.Tile);ol.source.UrlTile.prototype.fixedTileUrlFunction;ol.source.UrlTile.prototype.getTileLoadFunction=function(){return this.tileLoadFunction};ol.source.UrlTile.prototype.getTileUrlFunction=function(){return this.tileUrlFunction};ol.source.UrlTile.prototype.getUrls=function(){return this.urls};ol.source.UrlTile.prototype.handleTileChange=function(a){var b=(a.target);var c=ol.getUid(b);var d=b.getState();var e;if(d==ol.TileState.LOADING){this.tileLoadingKeys_[c]=true;e=ol.source.TileEventType.TILELOADSTART}else if(c in this.tileLoadingKeys_){delete this.tileLoadingKeys_[c];e=d==ol.TileState.ERROR?ol.source.TileEventType.TILELOADERROR:(d==ol.TileState.LOADED||d==ol.TileState.ABORT)?ol.source.TileEventType.TILELOADEND:undefined}if(e!=undefined){this.dispatchEvent(new ol.source.Tile.Event(e,b))}};ol.source.UrlTile.prototype.setTileLoadFunction=function(a){this.tileCache.clear();this.tileLoadFunction=a;this.changed()};ol.source.UrlTile.prototype.setTileUrlFunction=function(a,b){this.tileUrlFunction=a;this.tileCache.pruneExceptNewestZ();if(typeof b!=='undefined'){this.setKey(b)}else{this.changed()}};ol.source.UrlTile.prototype.setUrl=function(a){var b=this.urls=ol.TileUrlFunction.expandUrl(a);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(b,this.tileGrid),a)};ol.source.UrlTile.prototype.setUrls=function(a){this.urls=a;var b=a.join('\n');this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(a,this.tileGrid),b)};ol.source.UrlTile.prototype.useTile=function(z,x,y){var a=ol.tilecoord.getKeyZXY(z,x,y);if(this.tileCache.containsKey(a)){this.tileCache.get(a)}};bq.provide('ol.source.TileImage');bq.require('ol');bq.require('ol.ImageTile');bq.require('ol.TileCache');bq.require('ol.TileState');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.proj');bq.require('ol.reproj.Tile');bq.require('ol.source.UrlTile');bq.require('ol.tilecoord');bq.require('ol.tilegrid');ol.source.TileImage=function(a){ol.source.UrlTile.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition});this.crossOrigin=a.crossOrigin!==undefined?a.crossOrigin:null;this.tileClass=a.tileClass!==undefined?a.tileClass:ol.ImageTile;this.tileCacheForProjection={};this.tileGridForProjection={};this.reprojectionErrorThreshold_=a.reprojectionErrorThreshold;this.renderReprojectionEdges_=false};ol.inherits(ol.source.TileImage,ol.source.UrlTile);ol.source.TileImage.prototype.canExpireCache=function(){if(!ol.ENABLE_RASTER_REPROJECTION){return ol.source.UrlTile.prototype.canExpireCache.call(this)}if(this.tileCache.canExpireCache()){return true}else{for(var a in this.tileCacheForProjection){if(this.tileCacheForProjection[a].canExpireCache()){return true}}}return false};ol.source.TileImage.prototype.expireCache=function(a,b){if(!ol.ENABLE_RASTER_REPROJECTION){ol.source.UrlTile.prototype.expireCache.call(this,a,b);return}var c=this.getTileCacheForProjection(a);this.tileCache.expireCache(this.tileCache==c?b:{});for(var d in this.tileCacheForProjection){var e=this.tileCacheForProjection[d];e.expireCache(e==c?b:{})}};ol.source.TileImage.prototype.getGutter=function(a){if(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&a&&!ol.proj.equivalent(this.getProjection(),a)){return 0}else{return this.getGutterInternal()}};ol.source.TileImage.prototype.getGutterInternal=function(){return 0};ol.source.TileImage.prototype.getOpaque=function(a){if(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&a&&!ol.proj.equivalent(this.getProjection(),a)){return false}else{return ol.source.UrlTile.prototype.getOpaque.call(this,a)}};ol.source.TileImage.prototype.getTileGridForProjection=function(a){if(!ol.ENABLE_RASTER_REPROJECTION){return ol.source.UrlTile.prototype.getTileGridForProjection.call(this,a)}var b=this.getProjection();if(this.tileGrid&&(!b||ol.proj.equivalent(b,a))){return this.tileGrid}else{var c=ol.getUid(a).toString();if(!(c in this.tileGridForProjection)){this.tileGridForProjection[c]=ol.tilegrid.getForProjection(a)}return(this.tileGridForProjection[c])}};ol.source.TileImage.prototype.getTileCacheForProjection=function(a){if(!ol.ENABLE_RASTER_REPROJECTION){return ol.source.UrlTile.prototype.getTileCacheForProjection.call(this,a)}var b=this.getProjection();if(!b||ol.proj.equivalent(b,a)){return this.tileCache}else{var c=ol.getUid(a).toString();if(!(c in this.tileCacheForProjection)){this.tileCacheForProjection[c]=new ol.TileCache(this.tileCache.highWaterMark)}return this.tileCacheForProjection[c]}};ol.source.TileImage.prototype.createTile_=function(z,x,y,a,b,c){var d=[z,x,y];var e=this.getTileCoordForTileUrlFunction(d,b);var f=e?this.tileUrlFunction(e,a,b):undefined;var g=new this.tileClass(d,f!==undefined?ol.TileState.IDLE:ol.TileState.EMPTY,f!==undefined?f:'',this.crossOrigin,this.tileLoadFunction,this.tileOptions);g.key=c;ol.events.listen(g,ol.events.EventType.CHANGE,this.handleTileChange,this);return g};ol.source.TileImage.prototype.getTile=function(z,x,y,b,c){var d=(this.getProjection());if(!ol.ENABLE_RASTER_REPROJECTION||!d||!c||ol.proj.equivalent(d,c)){return this.getTileInternal(z,x,y,b,d||c)}else{var e=this.getTileCacheForProjection(c);var f=[z,x,y];var g;var h=ol.tilecoord.getKey(f);if(e.containsKey(h)){g=(e.get(h))}var i=this.getKey();if(g&&g.key==i){return g}else{var j=this.getTileGridForProjection(d);var k=this.getTileGridForProjection(c);var l=this.getTileCoordForTileUrlFunction(f,c);var m=new ol.reproj.Tile(d,j,c,k,f,l,this.getTilePixelRatio(b),this.getGutterInternal(),function(z,x,y,a){return this.getTileInternal(z,x,y,a,d)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);m.key=i;if(g){m.interimTile=g;m.refreshInterimChain();e.replace(h,m)}else{e.set(h,m)}return m}}};ol.source.TileImage.prototype.getTileInternal=function(z,x,y,a,b){var c=null;var d=ol.tilecoord.getKeyZXY(z,x,y);var e=this.getKey();if(!this.tileCache.containsKey(d)){c=this.createTile_(z,x,y,a,b,e);this.tileCache.set(d,c)}else{c=this.tileCache.get(d);if(c.key!=e){var f=c;c=this.createTile_(z,x,y,a,b,e);if(f.getState()==ol.TileState.IDLE){c.interimTile=f.interimTile}else{c.interimTile=f}c.refreshInterimChain();this.tileCache.replace(d,c)}}return c};ol.source.TileImage.prototype.setRenderReprojectionEdges=function(a){if(!ol.ENABLE_RASTER_REPROJECTION||this.renderReprojectionEdges_==a){return}this.renderReprojectionEdges_=a;for(var b in this.tileCacheForProjection){this.tileCacheForProjection[b].clear()}this.changed()};ol.source.TileImage.prototype.setTileGridForProjection=function(a,b){if(ol.ENABLE_RASTER_REPROJECTION){var c=ol.proj.get(a);if(c){var d=ol.getUid(c).toString();if(!(d in this.tileGridForProjection)){this.tileGridForProjection[d]=b}}}};ol.source.TileImage.defaultTileLoadFunction=function(a,b){a.getImage().src=b};bq.provide('ol.source.BingMaps');bq.require('ol');bq.require('ol.TileUrlFunction');bq.require('ol.extent');bq.require('ol.net');bq.require('ol.proj');bq.require('ol.source.State');bq.require('ol.source.TileImage');bq.require('ol.tilecoord');bq.require('ol.tilegrid');ol.source.BingMaps=function(a){this.hidpi_=a.hidpi!==undefined?a.hidpi:false;ol.source.TileImage.call(this,{cacheSize:a.cacheSize,crossOrigin:'anonymous',opaque:true,projection:ol.proj.get('EPSG:3857'),reprojectionErrorThreshold:a.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:this.hidpi_?2:1,wrapX:a.wrapX!==undefined?a.wrapX:true,transition:a.transition});this.culture_=a.culture!==undefined?a.culture:'en-us';this.maxZoom_=a.maxZoom!==undefined?a.maxZoom:-1;this.apiKey_=a.key;this.imagerySet_=a.imagerySet;var b='https://dev.virtualearth.net/REST/v1/Imagery/Metadata/'+this.imagerySet_+'?uriScheme=https&include=ImageryProviders&key='+this.apiKey_+'&c='+this.culture_;ol.net.jsonp(b,this.handleImageryMetadataResponse.bind(this),undefined,'jsonp')};ol.inherits(ol.source.BingMaps,ol.source.TileImage);ol.source.BingMaps.TOS_ATTRIBUTION='<a class="ol-attribution-bing-tos" '+'href="https://www.microsoft.com/maps/product/terms.html">'+'Terms of Use</a>';ol.source.BingMaps.prototype.getApiKey=function(){return this.apiKey_};ol.source.BingMaps.prototype.getImagerySet=function(){return this.imagerySet_};ol.source.BingMaps.prototype.handleImageryMetadataResponse=function(l){if(l.statusCode!=200||l.statusDescription!='OK'||l.authenticationResultCode!='ValidCredentials'||l.resourceSets.length!=1||l.resourceSets[0].resources.length!=1){this.setState(ol.source.State.ERROR);return}var m=l.brandLogoUri;if(m.indexOf('https')==-1){m=m.replace('http','https')}var n=l.resourceSets[0].resources[0];var o=this.maxZoom_==-1?n.zoomMax:this.maxZoom_;var p=this.getProjection();var q=ol.tilegrid.extentFromProjection(p);var r=n.imageWidth==n.imageHeight?n.imageWidth:[n.imageWidth,n.imageHeight];var s=ol.tilegrid.createXYZ({extent:q,minZoom:n.zoomMin,maxZoom:o,tileSize:r/(this.hidpi_?2:1)});this.tileGrid=s;var t=this.culture_;var u=this.hidpi_;this.tileUrlFunction=ol.TileUrlFunction.createFromTileUrlFunctions(n.imageUrlSubdomains.map(function(e){var f=[0,0,0];var g=n.imageUrl.replace('{subdomain}',e).replace('{culture}',t);return(function(a,b,c){if(!a){return undefined}else{ol.tilecoord.createOrUpdate(a[0],a[1],-a[2]-1,f);var d=g;if(u){d+='&dpi=d1&device=mobile'}return d.replace('{quadkey}',ol.tilecoord.quadKey(f))}})}));if(n.imageryProviders){var v=ol.proj.getTransformFromProjections(ol.proj.get('EPSG:4326'),this.getProjection());this.setAttributions(function(h){var j=[];var k=h.viewState.zoom;n.imageryProviders.map(function(a){var b=false;var c=a.coverageAreas;for(var i=0,ii=c.length;i<ii;++i){var d=c[i];if(k>=d.zoomMin&&k<=d.zoomMax){var e=d.bbox;var f=[e[1],e[0],e[3],e[2]];var g=ol.extent.applyTransform(f,v);if(ol.extent.intersects(g,h.extent)){b=true;break}}}if(b){j.push(a.attribution)}});j.push(ol.source.BingMaps.TOS_ATTRIBUTION);return j})}this.setLogo(m);this.setState(ol.source.State.READY)};bq.provide('ol.source.XYZ');bq.require('ol');bq.require('ol.source.TileImage');bq.require('ol.tilegrid');ol.source.XYZ=function(a){var b=a||{};var c=b.projection!==undefined?b.projection:'EPSG:3857';var d=b.tileGrid!==undefined?b.tileGrid:ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(c),maxZoom:b.maxZoom,minZoom:b.minZoom,tileSize:b.tileSize});ol.source.TileImage.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,logo:b.logo,opaque:b.opaque,projection:c,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileGrid:d,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:b.tileUrlFunction,url:b.url,urls:b.urls,wrapX:b.wrapX!==undefined?b.wrapX:true,transition:b.transition})};ol.inherits(ol.source.XYZ,ol.source.TileImage);bq.provide('ol.source.CartoDB');bq.require('ol');bq.require('ol.obj');bq.require('ol.source.State');bq.require('ol.source.XYZ');ol.source.CartoDB=function(a){this.account_=a.account;this.mapId_=a.map||'';this.config_=a.config||{};this.templateCache_={};ol.source.XYZ.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,maxZoom:a.maxZoom!==undefined?a.maxZoom:18,minZoom:a.minZoom,projection:a.projection,state:ol.source.State.LOADING,wrapX:a.wrapX});this.initializeMap_()};ol.inherits(ol.source.CartoDB,ol.source.XYZ);ol.source.CartoDB.prototype.getConfig=function(){return this.config_};ol.source.CartoDB.prototype.updateConfig=function(a){ol.obj.assign(this.config_,a);this.initializeMap_()};ol.source.CartoDB.prototype.setConfig=function(a){this.config_=a||{};this.initializeMap_()};ol.source.CartoDB.prototype.initializeMap_=function(){var a=JSON.stringify(this.config_);if(this.templateCache_[a]){this.applyTemplate_(this.templateCache_[a]);return}var b='https://'+this.account_+'.carto.com/api/v1/map';if(this.mapId_){b+='/named/'+this.mapId_}var c=new XMLHttpRequest();c.addEventListener('load',this.handleInitResponse_.bind(this,a));c.addEventListener('error',this.handleInitError_.bind(this));c.open('POST',b);c.setRequestHeader('Content-type','application/json');c.send(JSON.stringify(this.config_))};ol.source.CartoDB.prototype.handleInitResponse_=function(a,b){var c=(b.target);if(!c.status||c.status>=200&&c.status<300){var d;try{d=(JSON.parse(c.responseText))}catch(err){this.setState(ol.source.State.ERROR);return}this.applyTemplate_(d);this.templateCache_[a]=d;this.setState(ol.source.State.READY)}else{this.setState(ol.source.State.ERROR)}};ol.source.CartoDB.prototype.handleInitError_=function(a){this.setState(ol.source.State.ERROR)};ol.source.CartoDB.prototype.applyTemplate_=function(a){var b='https://'+a.cdn_url.https+'/'+this.account_+'/api/v1/map/'+a.layergroupid+'/{z}/{x}/{y}.png';this.setUrl(b)};bq.provide('ol.source.Cluster');bq.require('ol');bq.require('ol.asserts');bq.require('ol.Feature');bq.require('ol.coordinate');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.geom.Point');bq.require('ol.source.Vector');ol.source.Cluster=function(c){ol.source.Vector.call(this,{attributions:c.attributions,extent:c.extent,logo:c.logo,projection:c.projection,wrapX:c.wrapX});this.resolution=undefined;this.distance=c.distance!==undefined?c.distance:20;this.features=[];this.geometryFunction=c.geometryFunction||function(a){var b=(a.getGeometry());ol.asserts.assert(b instanceof ol.geom.Point,10);return b};this.source=c.source;this.source.on(ol.events.EventType.CHANGE,ol.source.Cluster.prototype.refresh,this)};ol.inherits(ol.source.Cluster,ol.source.Vector);ol.source.Cluster.prototype.getDistance=function(){return this.distance};ol.source.Cluster.prototype.getSource=function(){return this.source};ol.source.Cluster.prototype.loadFeatures=function(a,b,c){this.source.loadFeatures(a,b,c);if(b!==this.resolution){this.clear();this.resolution=b;this.cluster();this.addFeatures(this.features)}};ol.source.Cluster.prototype.setDistance=function(a){this.distance=a;this.refresh()};ol.source.Cluster.prototype.refresh=function(){this.clear();this.cluster();this.addFeatures(this.features);ol.source.Vector.prototype.refresh.call(this)};ol.source.Cluster.prototype.cluster=function(){if(this.resolution===undefined){return}this.features.length=0;var c=ol.extent.createEmpty();var d=this.distance*this.resolution;var e=this.source.getFeatures();var f={};for(var i=0,ii=e.length;i<ii;i++){var g=e[i];if(!(ol.getUid(g).toString()in f)){var h=this.geometryFunction(g);if(h){var j=h.getCoordinates();ol.extent.createOrUpdateFromCoordinate(j,c);ol.extent.buffer(c,d,c);var k=this.source.getFeaturesInExtent(c);k=k.filter(function(a){var b=ol.getUid(a).toString();if(!(b in f)){f[b]=true;return true}else{return false}});this.features.push(this.createCluster(k))}}}};ol.source.Cluster.prototype.createCluster=function(a){var b=[0,0];for(var i=a.length-1;i>=0;--i){var c=this.geometryFunction(a[i]);if(c){ol.coordinate.add(b,c.getCoordinates())}else{a.splice(i,1)}}ol.coordinate.scale(b,1/a.length);var d=new ol.Feature(new ol.geom.Point(b));d.set('features',a);return d};bq.provide('ol.source.Image');bq.require('ol');bq.require('ol.ImageState');bq.require('ol.array');bq.require('ol.events.Event');bq.require('ol.extent');bq.require('ol.proj');bq.require('ol.reproj.Image');bq.require('ol.source.Source');ol.source.Image=function(a){ol.source.Source.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state});this.resolutions_=a.resolutions!==undefined?a.resolutions:null;this.reprojectedImage_=null;this.reprojectedRevision_=0};ol.inherits(ol.source.Image,ol.source.Source);ol.source.Image.prototype.getResolutions=function(){return this.resolutions_};ol.source.Image.prototype.findNearestResolution=function(a){if(this.resolutions_){var b=ol.array.linearFindNearest(this.resolutions_,a,0);a=this.resolutions_[b]}return a};ol.source.Image.prototype.getImage=function(d,e,f,g){var h=this.getProjection();if(!ol.ENABLE_RASTER_REPROJECTION||!h||!g||ol.proj.equivalent(h,g)){if(h){g=h}return this.getImageInternal(d,e,f,g)}else{if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ol.proj.equivalent(this.reprojectedImage_.getProjection(),g)&&this.reprojectedImage_.getResolution()==e&&ol.extent.equals(this.reprojectedImage_.getExtent(),d)){return this.reprojectedImage_}this.reprojectedImage_.dispose();this.reprojectedImage_=null}this.reprojectedImage_=new ol.reproj.Image(h,g,d,e,f,function(a,b,c){return this.getImageInternal(a,b,c,h)}.bind(this));this.reprojectedRevision_=this.getRevision();return this.reprojectedImage_}};ol.source.Image.prototype.getImageInternal=function(a,b,c,d){};ol.source.Image.prototype.handleImageChange=function(a){var b=(a.target);switch(b.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADSTART,b));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADEND,b));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADERROR,b));break;default:}};ol.source.Image.defaultImageLoadFunction=function(a,b){a.getImage().src=b};ol.source.Image.Event=function(a,b){ol.events.Event.call(this,a);this.image=b};ol.inherits(ol.source.Image.Event,ol.events.Event);ol.source.Image.EventType_={IMAGELOADSTART:'imageloadstart',IMAGELOADEND:'imageloadend',IMAGELOADERROR:'imageloaderror'};bq.provide('ol.uri');ol.uri.appendParams=function(a,b){var c=[];Object.keys(b).forEach(function(k){if(b[k]!==null&&b[k]!==undefined){c.push(k+'='+encodeURIComponent(b[k]))}});var d=c.join('&');a=a.replace(/[?&]$/,'');a=a.indexOf('?')===-1?a+'?':a+'&';return a+d};bq.provide('ol.source.ImageArcGISRest');bq.require('ol');bq.require('ol.Image');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.source.Image');bq.require('ol.uri');ol.source.ImageArcGISRest=function(a){var b=a||{};ol.source.Image.call(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,resolutions:b.resolutions});this.crossOrigin_=b.crossOrigin!==undefined?b.crossOrigin:null;this.hidpi_=b.hidpi!==undefined?b.hidpi:true;this.url_=b.url;this.imageLoadFunction_=b.imageLoadFunction!==undefined?b.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=b.params||{};this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=b.ratio!==undefined?b.ratio:1.5};ol.inherits(ol.source.ImageArcGISRest,ol.source.Image);ol.source.ImageArcGISRest.prototype.getParams=function(){return this.params_};ol.source.ImageArcGISRest.prototype.getImageInternal=function(a,b,c,d){if(this.url_===undefined){return null}b=this.findNearestResolution(b);c=this.hidpi_?c:1;var e=this.image_;if(e&&this.renderedRevision_==this.getRevision()&&e.getResolution()==b&&e.getPixelRatio()==c&&ol.extent.containsExtent(e.getExtent(),a)){return e}var f={'F':'image','FORMAT':'PNG32','TRANSPARENT':true};ol.obj.assign(f,this.params_);a=a.slice();var g=(a[0]+a[2])/2;var h=(a[1]+a[3])/2;if(this.ratio_!=1){var i=this.ratio_*ol.extent.getWidth(a)/2;var j=this.ratio_*ol.extent.getHeight(a)/2;a[0]=g-i;a[1]=h-j;a[2]=g+i;a[3]=h+j}var k=b/c;var l=Math.ceil(ol.extent.getWidth(a)/k);var m=Math.ceil(ol.extent.getHeight(a)/k);a[0]=g-k*l/2;a[2]=g+k*l/2;a[1]=h-k*m/2;a[3]=h+k*m/2;this.imageSize_[0]=l;this.imageSize_[1]=m;var n=this.getRequestUrl_(a,this.imageSize_,c,d,f);this.image_=new ol.Image(a,b,c,n,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this);return this.image_};ol.source.ImageArcGISRest.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageArcGISRest.prototype.getRequestUrl_=function(a,b,c,d,e){var f=d.getCode().split(':').pop();e['SIZE']=b[0]+','+b[1];e['BBOX']=a.join(',');e['BBOXSR']=f;e['IMAGESR']=f;e['DPI']=Math.round(90*c);var g=this.url_;var h=g.replace(/MapServer\/?$/,'MapServer/export').replace(/ImageServer\/?$/,'ImageServer/exportImage');if(h==g){ol.asserts.assert(false,50)}return ol.uri.appendParams(h,e)};ol.source.ImageArcGISRest.prototype.getUrl=function(){return this.url_};ol.source.ImageArcGISRest.prototype.setImageLoadFunction=function(a){this.image_=null;this.imageLoadFunction_=a;this.changed()};ol.source.ImageArcGISRest.prototype.setUrl=function(a){if(a!=this.url_){this.url_=a;this.image_=null;this.changed()}};ol.source.ImageArcGISRest.prototype.updateParams=function(a){ol.obj.assign(this.params_,a);this.image_=null;this.changed()};bq.provide('ol.source.ImageCanvas');bq.require('ol');bq.require('ol.ImageCanvas');bq.require('ol.extent');bq.require('ol.source.Image');ol.source.ImageCanvas=function(a){ol.source.Image.call(this,{attributions:a.attributions,logo:a.logo,projection:a.projection,resolutions:a.resolutions,state:a.state});this.canvasFunction_=a.canvasFunction;this.canvas_=null;this.renderedRevision_=0;this.ratio_=a.ratio!==undefined?a.ratio:1.5};ol.inherits(ol.source.ImageCanvas,ol.source.Image);ol.source.ImageCanvas.prototype.getImageInternal=function(a,b,c,d){b=this.findNearestResolution(b);var e=this.canvas_;if(e&&this.renderedRevision_==this.getRevision()&&e.getResolution()==b&&e.getPixelRatio()==c&&ol.extent.containsExtent(e.getExtent(),a)){return e}a=a.slice();ol.extent.scaleFromCenter(a,this.ratio_);var f=ol.extent.getWidth(a)/b;var g=ol.extent.getHeight(a)/b;var h=[f*c,g*c];var i=this.canvasFunction_(a,b,c,h,d);if(i){e=new ol.ImageCanvas(a,b,c,i)}this.canvas_=e;this.renderedRevision_=this.getRevision();return e};bq.provide('ol.source.ImageMapGuide');bq.require('ol');bq.require('ol.Image');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.source.Image');bq.require('ol.uri');ol.source.ImageMapGuide=function(a){ol.source.Image.call(this,{projection:a.projection,resolutions:a.resolutions});this.crossOrigin_=a.crossOrigin!==undefined?a.crossOrigin:null;this.displayDpi_=a.displayDpi!==undefined?a.displayDpi:96;this.params_=a.params||{};this.url_=a.url;this.imageLoadFunction_=a.imageLoadFunction!==undefined?a.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.hidpi_=a.hidpi!==undefined?a.hidpi:true;this.metersPerUnit_=a.metersPerUnit!==undefined?a.metersPerUnit:1;this.ratio_=a.ratio!==undefined?a.ratio:1;this.useOverlay_=a.useOverlay!==undefined?a.useOverlay:false;this.image_=null;this.renderedRevision_=0};ol.inherits(ol.source.ImageMapGuide,ol.source.Image);ol.source.ImageMapGuide.prototype.getParams=function(){return this.params_};ol.source.ImageMapGuide.prototype.getImageInternal=function(a,b,c,d){b=this.findNearestResolution(b);c=this.hidpi_?c:1;var e=this.image_;if(e&&this.renderedRevision_==this.getRevision()&&e.getResolution()==b&&e.getPixelRatio()==c&&ol.extent.containsExtent(e.getExtent(),a)){return e}if(this.ratio_!=1){a=a.slice();ol.extent.scaleFromCenter(a,this.ratio_)}var f=ol.extent.getWidth(a)/b;var g=ol.extent.getHeight(a)/b;var h=[f*c,g*c];if(this.url_!==undefined){var i=this.getUrl(this.url_,this.params_,a,h,d);e=new ol.Image(a,b,c,i,this.crossOrigin_,this.imageLoadFunction_);ol.events.listen(e,ol.events.EventType.CHANGE,this.handleImageChange,this)}else{e=null}this.image_=e;this.renderedRevision_=this.getRevision();return e};ol.source.ImageMapGuide.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageMapGuide.getScale=function(a,b,c,d){var e=ol.extent.getWidth(a);var f=ol.extent.getHeight(a);var g=b[0];var h=b[1];var i=0.0254/d;if(h*e>g*f){return e*c/(g*i)}else{return f*c/(h*i)}};ol.source.ImageMapGuide.prototype.updateParams=function(a){ol.obj.assign(this.params_,a);this.changed()};ol.source.ImageMapGuide.prototype.getUrl=function(a,b,c,d,e){var f=ol.source.ImageMapGuide.getScale(c,d,this.metersPerUnit_,this.displayDpi_);var g=ol.extent.getCenter(c);var h={'OPERATION':this.useOverlay_?'GETDYNAMICMAPOVERLAYIMAGE':'GETMAPIMAGE','VERSION':'2.0.0','LOCALE':'en','CLIENTAGENT':'ol.source.ImageMapGuide source','CLIP':'1','SETDISPLAYDPI':this.displayDpi_,'SETDISPLAYWIDTH':Math.round(d[0]),'SETDISPLAYHEIGHT':Math.round(d[1]),'SETVIEWSCALE':f,'SETVIEWCENTERX':g[0],'SETVIEWCENTERY':g[1]};ol.obj.assign(h,b);return ol.uri.appendParams(a,h)};ol.source.ImageMapGuide.prototype.setImageLoadFunction=function(a){this.image_=null;this.imageLoadFunction_=a;this.changed()};bq.provide('ol.source.ImageStatic');bq.require('ol');bq.require('ol.Image');bq.require('ol.ImageState');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.proj');bq.require('ol.source.Image');ol.source.ImageStatic=function(a){var b=a.imageExtent;var c=a.crossOrigin!==undefined?a.crossOrigin:null;var d=a.imageLoadFunction!==undefined?a.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;ol.source.Image.call(this,{attributions:a.attributions,logo:a.logo,projection:ol.proj.get(a.projection)});this.image_=new ol.Image(b,undefined,1,a.url,c,d);this.imageSize_=a.imageSize?a.imageSize:null;ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this)};ol.inherits(ol.source.ImageStatic,ol.source.Image);ol.source.ImageStatic.prototype.getImageInternal=function(a,b,c,d){if(ol.extent.intersects(a,this.image_.getExtent())){return this.image_}return null};ol.source.ImageStatic.prototype.handleImageChange=function(a){if(this.image_.getState()==ol.ImageState.LOADED){var b=this.image_.getExtent();var c=this.image_.getImage();var d,imageHeight;if(this.imageSize_){d=this.imageSize_[0];imageHeight=this.imageSize_[1]}else{d=c.width;imageHeight=c.height}var e=ol.extent.getHeight(b)/imageHeight;var f=Math.ceil(ol.extent.getWidth(b)/e);if(f!=d){var g=ol.dom.createCanvasContext2D(f,imageHeight);var h=g.canvas;g.drawImage(c,0,0,d,imageHeight,0,0,h.width,h.height);this.image_.setImage(h)}}ol.source.Image.prototype.handleImageChange.call(this,a)};bq.provide('ol.source.ImageVector');bq.require('ol');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.ext.rbush');bq.require('ol.extent');bq.require('ol.render.canvas.ReplayGroup');bq.require('ol.renderer.vector');bq.require('ol.source.ImageCanvas');bq.require('ol.style.Style');bq.require('ol.transform');ol.source.ImageVector=function(a){this.source_=a.source;this.transform_=ol.transform.create();this.canvasContext_=ol.dom.createCanvasContext2D();this.canvasSize_=[0,0];this.declutterTree_=ol.ext.rbush(9);this.renderBuffer_=a.renderBuffer==undefined?100:a.renderBuffer;this.replayGroup_=null;ol.source.ImageCanvas.call(this,{attributions:a.attributions,canvasFunction:this.canvasFunctionInternal_.bind(this),logo:a.logo,projection:a.projection,ratio:a.ratio,resolutions:a.resolutions,state:this.source_.getState()});this.style_=null;this.styleFunction_=undefined;this.setStyle(a.style);ol.events.listen(this.source_,ol.events.EventType.CHANGE,this.handleSourceChange_,this)};ol.inherits(ol.source.ImageVector,ol.source.ImageCanvas);ol.source.ImageVector.prototype.canvasFunctionInternal_=function(b,c,d,e,f){var g=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(c,d),b,c,d,this.source_.getOverlaps(),this.declutterTree_,this.renderBuffer_);this.source_.loadFeatures(b,c,f);var h=false;this.source_.forEachFeatureInExtent(b,function(a){h=h||this.renderFeature_(a,c,d,g)},this);g.finish();if(h){return null}if(this.canvasSize_[0]!=e[0]||this.canvasSize_[1]!=e[1]){this.canvasContext_.canvas.width=e[0];this.canvasContext_.canvas.height=e[1];this.canvasSize_[0]=e[0];this.canvasSize_[1]=e[1]}else{this.canvasContext_.clearRect(0,0,e[0],e[1])}this.declutterTree_.clear();var i=this.getTransform_(ol.extent.getCenter(b),c,d,e);g.replay(this.canvasContext_,i,0,{});this.replayGroup_=g;return this.canvasContext_.canvas};ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(c,d,e,f,g,h){if(!this.replayGroup_){return undefined}else{var i={};var j=this.replayGroup_.forEachFeatureAtCoordinate(c,d,0,f,g,function(a){var b=ol.getUid(a).toString();if(!(b in i)){i[b]=true;return h(a)}},null);return j}};ol.source.ImageVector.prototype.getSource=function(){return this.source_};ol.source.ImageVector.prototype.getStyle=function(){return this.style_};ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_};ol.source.ImageVector.prototype.getTransform_=function(a,b,c,d){var e=d[0]/2;var f=d[1]/2;var g=c/b;var h=-g;var i=-a[0];var j=-a[1];return ol.transform.compose(this.transform_,e,f,g,h,0,i,j)};ol.source.ImageVector.prototype.handleImageChange_=function(a){this.changed()};ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())};ol.source.ImageVector.prototype.renderFeature_=function(a,b,c,d){var e;var f=a.getStyleFunction();if(f){e=f.call(a,b)}else if(this.styleFunction_){e=this.styleFunction_(a,b)}if(!e){return false}var i,ii,loading=false;if(!Array.isArray(e)){e=[e]}for(i=0,ii=e.length;i<ii;++i){loading=ol.renderer.vector.renderFeature(d,a,e[i],ol.renderer.vector.getSquaredTolerance(b,c),this.handleImageChange_,this)||loading}return loading};ol.source.ImageVector.prototype.setStyle=function(a){this.style_=a!==undefined?a:ol.style.Style.defaultFunction;this.styleFunction_=!a?undefined:ol.style.Style.createFunction(this.style_);this.changed()};bq.provide('ol.source.WMSServerType');ol.source.WMSServerType={CARMENTA_SERVER:'carmentaserver',GEOSERVER:'geoserver',MAPSERVER:'mapserver',QGIS:'qgis'};bq.provide('ol.source.ImageWMS');bq.require('ol');bq.require('ol.Image');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.reproj');bq.require('ol.source.Image');bq.require('ol.source.WMSServerType');bq.require('ol.string');bq.require('ol.uri');ol.source.ImageWMS=function(a){var b=a||{};ol.source.Image.call(this,{attributions:b.attributions,logo:b.logo,projection:b.projection,resolutions:b.resolutions});this.crossOrigin_=b.crossOrigin!==undefined?b.crossOrigin:null;this.url_=b.url;this.imageLoadFunction_=b.imageLoadFunction!==undefined?b.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;this.params_=b.params||{};this.v13_=true;this.updateV13_();this.serverType_=(b.serverType);this.hidpi_=b.hidpi!==undefined?b.hidpi:true;this.image_=null;this.imageSize_=[0,0];this.renderedRevision_=0;this.ratio_=b.ratio!==undefined?b.ratio:1.5};ol.inherits(ol.source.ImageWMS,ol.source.Image);ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101];ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(a,b,c,d){if(this.url_===undefined){return undefined}var e=ol.proj.get(c);var f=this.getProjection();if(f&&f!==e){b=ol.reproj.calculateSourceResolution(f,e,a,b);a=ol.proj.transform(a,e,f)}var g=ol.extent.getForViewAndSize(a,b,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);var h={'SERVICE':'WMS','VERSION':ol.DEFAULT_WMS_VERSION,'REQUEST':'GetFeatureInfo','FORMAT':'image/png','TRANSPARENT':true,'QUERY_LAYERS':this.params_['LAYERS']};ol.obj.assign(h,this.params_,d);var x=Math.floor((a[0]-g[0])/b);var y=Math.floor((g[3]-a[1])/b);h[this.v13_?'I':'X']=x;h[this.v13_?'J':'Y']=y;return this.getRequestUrl_(g,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,f||e,h)};ol.source.ImageWMS.prototype.getParams=function(){return this.params_};ol.source.ImageWMS.prototype.getImageInternal=function(a,b,c,d){if(this.url_===undefined){return null}b=this.findNearestResolution(b);if(c!=1&&(!this.hidpi_||this.serverType_===undefined)){c=1}var e=b/c;var f=ol.extent.getCenter(a);var g=Math.ceil(ol.extent.getWidth(a)/e);var h=Math.ceil(ol.extent.getHeight(a)/e);var i=ol.extent.getForViewAndSize(f,e,0,[g,h]);var j=Math.ceil(this.ratio_*ol.extent.getWidth(a)/e);var k=Math.ceil(this.ratio_*ol.extent.getHeight(a)/e);var l=ol.extent.getForViewAndSize(f,e,0,[j,k]);var m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==b&&m.getPixelRatio()==c&&ol.extent.containsExtent(m.getExtent(),i)){return m}var n={'SERVICE':'WMS','VERSION':ol.DEFAULT_WMS_VERSION,'REQUEST':'GetMap','FORMAT':'image/png','TRANSPARENT':true};ol.obj.assign(n,this.params_);this.imageSize_[0]=Math.round(ol.extent.getWidth(l)/e);this.imageSize_[1]=Math.round(ol.extent.getHeight(l)/e);var o=this.getRequestUrl_(l,this.imageSize_,c,d,n);this.image_=new ol.Image(l,b,c,o,this.crossOrigin_,this.imageLoadFunction_);this.renderedRevision_=this.getRevision();ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this);return this.image_};ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_};ol.source.ImageWMS.prototype.getRequestUrl_=function(a,b,c,d,e){ol.asserts.assert(this.url_!==undefined,9);e[this.v13_?'CRS':'SRS']=d.getCode();if(!('STYLES'in this.params_)){e['STYLES']=''}if(c!=1){switch(this.serverType_){case ol.source.WMSServerType.GEOSERVER:var f=(90*c+0.5)|0;if('FORMAT_OPTIONS'in e){e['FORMAT_OPTIONS']+=';dpi:'+f}else{e['FORMAT_OPTIONS']='dpi:'+f}break;case ol.source.WMSServerType.MAPSERVER:e['MAP_RESOLUTION']=90*c;break;case ol.source.WMSServerType.CARMENTA_SERVER:case ol.source.WMSServerType.QGIS:e['DPI']=90*c;break;default:ol.asserts.assert(false,8);break}}e['WIDTH']=b[0];e['HEIGHT']=b[1];var g=d.getAxisOrientation();var h;if(this.v13_&&g.substr(0,2)=='ne'){h=[a[1],a[0],a[3],a[2]]}else{h=a}e['BBOX']=h.join(',');return ol.uri.appendParams((this.url_),e)};ol.source.ImageWMS.prototype.getUrl=function(){return this.url_};ol.source.ImageWMS.prototype.setImageLoadFunction=function(a){this.image_=null;this.imageLoadFunction_=a;this.changed()};ol.source.ImageWMS.prototype.setUrl=function(a){if(a!=this.url_){this.url_=a;this.image_=null;this.changed()}};ol.source.ImageWMS.prototype.updateParams=function(a){ol.obj.assign(this.params_,a);this.updateV13_();this.image_=null;this.changed()};ol.source.ImageWMS.prototype.updateV13_=function(){var a=this.params_['VERSION']||ol.DEFAULT_WMS_VERSION;this.v13_=ol.string.compareVersions(a,'1.3')>=0};bq.provide('ol.source.OSM');bq.require('ol');bq.require('ol.source.XYZ');ol.source.OSM=function(a){var b=a||{};var c;if(b.attributions!==undefined){c=b.attributions}else{c=[ol.source.OSM.ATTRIBUTION]}var d=b.crossOrigin!==undefined?b.crossOrigin:'anonymous';var e=b.url!==undefined?b.url:'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';ol.source.XYZ.call(this,{attributions:c,cacheSize:b.cacheSize,crossOrigin:d,opaque:b.opaque!==undefined?b.opaque:true,maxZoom:b.maxZoom!==undefined?b.maxZoom:19,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileLoadFunction:b.tileLoadFunction,url:e,wrapX:b.wrapX})};ol.inherits(ol.source.OSM,ol.source.XYZ);ol.source.OSM.ATTRIBUTION='&copy; '+'<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> '+'contributors.';bq.provide('ol.ext.pixelworks.Processor');ol.ext.pixelworks.Processor=function(){};(function(){(function(t){'use strict';var u=true;try{new ImageData(10,10)}catch(_){u=false}var v=document.createElement('canvas').getContext('2d');function newImageData$1(a,b,c){if(u){return new ImageData(a,b,c)}else{var d=v.createImageData(b,c);d.data.set(a);return d}}var w=newImageData$1;var x={newImageData:w};var y=x.newImageData;function createMinion(r){var s=true;try{new ImageData(10,10)}catch(_){s=false}function newWorkerImageData(a,b,c){if(s){return new ImageData(a,b,c)}else{return{data:a,width:b,height:c}}}return function(a){var c=a['buffers'];var d=a['meta'];var e=a['imageOps'];var f=a['width'];var g=a['height'];var h=c.length;var k=c[0].byteLength;var l,b;if(e){var m=new Array(h);for(b=0;b<h;++b){m[b]=newWorkerImageData(new Uint8ClampedArray(c[b]),f,g)}l=r(m,d).data}else{l=new Uint8ClampedArray(k);var n=new Array(h);var o=new Array(h);for(b=0;b<h;++b){n[b]=new Uint8ClampedArray(c[b]);o[b]=[0,0,0,0]}for(var i=0;i<k;i+=4){for(var j=0;j<h;++j){var p=n[j];o[j][0]=p[i];o[j][1]=p[i+1];o[j][2]=p[i+2];o[j][3]=p[i+3]}var q=r(o,d);l[i]=q[0];l[i+1]=q[1];l[i+2]=q[2];l[i+3]=q[3]}}return l.buffer}}function createWorker(b,c){var d=Object.keys(b.lib||{}).map(function(a){return'var '+a+' = '+b.lib[a].toString()+';'});var e=d.concat(['var __minion__ = ('+createMinion.toString()+')(',b.operation.toString(),');','self.addEventListener("message", function(event) {','  var buffer = __minion__(event.data);','  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);','});']);var f=new Blob(e,{type:'text/javascript'});var g=URL.createObjectURL(f);var h=new Worker(g);h.addEventListener('message',c);return h}function createFauxWorker(b,c){var d=createMinion(b.operation);return{postMessage:function(a){setTimeout(function(){c({'data':{'buffer':d(a),'meta':a['meta']}})},0)}}}function Processor(a){this._imageOps=!!a.imageOps;var b;if(a.threads===0){b=0}else if(this._imageOps){b=1}else{b=a.threads||1}var c=[];if(b){for(var i=0;i<b;++i){c[i]=createWorker(a,this._onWorkerMessage.bind(this,i))}}else{c[0]=createFauxWorker(a,this._onWorkerMessage.bind(this,0))}this._workers=c;this._queue=[];this._maxQueueLength=a.queue||Infinity;this._running=0;this._dataLookup={};this._job=null}Processor.prototype.process=function(a,b,c){this._enqueue({inputs:a,meta:b,callback:c});this._dispatch()};Processor.prototype.destroy=function(){for(var a in this){this[a]=null}this._destroyed=true};Processor.prototype._enqueue=function(a){this._queue.push(a);while(this._queue.length>this._maxQueueLength){this._queue.shift().callback(null,null)}};Processor.prototype._dispatch=function(){if(this._running===0&&this._queue.length>0){var b=this._job=this._queue.shift();var c=b.inputs[0].width;var d=b.inputs[0].height;var e=b.inputs.map(function(a){return a.data.buffer});var f=this._workers.length;this._running=f;if(f===1){this._workers[0].postMessage({'buffers':e,'meta':b.meta,'imageOps':this._imageOps,'width':c,'height':d},e)}else{var g=b.inputs[0].data.length;var h=4*Math.ceil(g/4/f);for(var i=0;i<f;++i){var k=i*h;var l=[];for(var j=0,jj=e.length;j<jj;++j){l.push(e[i].slice(k,k+h))}this._workers[i].postMessage({'buffers':l,'meta':b.meta,'imageOps':this._imageOps,'width':c,'height':d},l)}}}};Processor.prototype._onWorkerMessage=function(a,b){if(this._destroyed){return}this._dataLookup[a]=b.data;--this._running;if(this._running===0){this._resolveJob()}};Processor.prototype._resolveJob=function(){var a=this._job;var b=this._workers.length;var c,meta;if(b===1){c=new Uint8ClampedArray(this._dataLookup[0]['buffer']);meta=this._dataLookup[0]['meta']}else{var d=a.inputs[0].data.length;c=new Uint8ClampedArray(d);meta=new Array(d);var e=4*Math.ceil(d/4/b);for(var i=0;i<b;++i){var f=this._dataLookup[i]['buffer'];var g=i*e;c.set(new Uint8ClampedArray(f),g);meta[i]=this._dataLookup[i]['meta']}}this._job=null;this._dataLookup={};a.callback(null,y(c,a.inputs[0].width,a.inputs[0].height),meta);this._dispatch()};var z=Processor;var A=z;var B={Processor:A};t['default']=B;t.Processor=A}((this.pixelworks=this.pixelworks||{})))}).call(ol.ext);bq.provide('ol.source.RasterOperationType');ol.source.RasterOperationType={PIXEL:'pixel',IMAGE:'image'};bq.provide('ol.source.Raster');bq.require('ol');bq.require('ol.ImageCanvas');bq.require('ol.TileQueue');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.events.Event');bq.require('ol.events.EventType');bq.require('ol.ext.pixelworks.Processor');bq.require('ol.extent');bq.require('ol.layer.Image');bq.require('ol.layer.Tile');bq.require('ol.obj');bq.require('ol.renderer.canvas.ImageLayer');bq.require('ol.renderer.canvas.TileLayer');bq.require('ol.source.Image');bq.require('ol.source.RasterOperationType');bq.require('ol.source.State');bq.require('ol.source.Tile');bq.require('ol.transform');ol.source.Raster=function(a){this.worker_=null;this.operationType_=a.operationType!==undefined?a.operationType:ol.source.RasterOperationType.PIXEL;this.threads_=a.threads!==undefined?a.threads:1;this.renderers_=ol.source.Raster.createRenderers_(a.sources);for(var r=0,rr=this.renderers_.length;r<rr;++r){ol.events.listen(this.renderers_[r],ol.events.EventType.CHANGE,this.changed,this)}this.tileQueue_=new ol.TileQueue(function(){return 1},this.changed.bind(this));var b=ol.source.Raster.getLayerStatesArray_(this.renderers_);var c={};for(var i=0,ii=b.length;i<ii;++i){c[ol.getUid(b[i].layer)]=b[i]}this.requestedFrameState_;this.renderedImageCanvas_=null;this.renderedRevision_;this.frameState_={animate:false,coordinateToPixelTransform:ol.transform.create(),extent:null,focus:null,index:0,layerStates:c,layerStatesArray:b,logos:{},pixelRatio:1,pixelToCoordinateTransform:ol.transform.create(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:({rotation:0}),viewHints:[],wantedTiles:{}};ol.source.Image.call(this,{});if(a.operation!==undefined){this.setOperation(a.operation,a.lib)}};ol.inherits(ol.source.Raster,ol.source.Image);ol.source.Raster.prototype.setOperation=function(a,b){this.worker_=new ol.ext.pixelworks.Processor({operation:a,imageOps:this.operationType_===ol.source.RasterOperationType.IMAGE,queue:1,lib:b,threads:this.threads_});this.changed()};ol.source.Raster.prototype.updateFrameState_=function(a,b,c){var d=(ol.obj.assign({},this.frameState_));d.viewState=(ol.obj.assign({},d.viewState));var e=ol.extent.getCenter(a);d.extent=a.slice();d.focus=e;d.size[0]=Math.round(ol.extent.getWidth(a)/b);d.size[1]=Math.round(ol.extent.getHeight(a)/b);d.time=Date.now();d.animate=false;var f=d.viewState;f.center=e;f.projection=c;f.resolution=b;return d};ol.source.Raster.prototype.allSourcesReady_=function(){var a=true;var b;for(var i=0,ii=this.renderers_.length;i<ii;++i){b=this.renderers_[i].getLayer().getSource();if(b.getState()!==ol.source.State.READY){a=false;break}}return a};ol.source.Raster.prototype.getImage=function(a,b,c,d){if(!this.allSourcesReady_()){return null}var e=this.updateFrameState_(a,b,d);this.requestedFrameState_=e;if(this.renderedImageCanvas_){var f=this.renderedImageCanvas_.getResolution();var g=this.renderedImageCanvas_.getExtent();if(b!==f||!ol.extent.equals(a,g)){this.renderedImageCanvas_=null}}if(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_){this.processSources_()}e.tileQueue.loadMoreTiles(16,16);if(e.animate){requestAnimationFrame(this.changed.bind(this))}return this.renderedImageCanvas_};ol.source.Raster.prototype.processSources_=function(){var a=this.requestedFrameState_;var b=this.renderers_.length;var c=new Array(b);for(var i=0;i<b;++i){var d=ol.source.Raster.getImageData_(this.renderers_[i],a,a.layerStatesArray[i]);if(d){c[i]=d}else{return}}var e={};this.dispatchEvent(new ol.source.Raster.Event(ol.source.Raster.EventType_.BEFOREOPERATIONS,a,e));this.worker_.process(c,e,this.onWorkerComplete_.bind(this,a))};ol.source.Raster.prototype.onWorkerComplete_=function(a,b,c,d){if(b||!c){return}var e=a.extent;var f=a.viewState.resolution;if(f!==this.requestedFrameState_.viewState.resolution||!ol.extent.equals(e,this.requestedFrameState_.extent)){return}var g;if(this.renderedImageCanvas_){g=this.renderedImageCanvas_.getImage().getContext('2d')}else{var h=Math.round(ol.extent.getWidth(e)/f);var i=Math.round(ol.extent.getHeight(e)/f);g=ol.dom.createCanvasContext2D(h,i);this.renderedImageCanvas_=new ol.ImageCanvas(e,f,1,g.canvas)}g.putImageData(c,0,0);this.changed();this.renderedRevision_=this.getRevision();this.dispatchEvent(new ol.source.Raster.Event(ol.source.Raster.EventType_.AFTEROPERATIONS,a,d))};ol.source.Raster.getImageData_=function(a,b,c){if(!a.prepareFrame(b,c)){return null}var d=b.size[0];var e=b.size[1];if(!ol.source.Raster.context_){ol.source.Raster.context_=ol.dom.createCanvasContext2D(d,e)}else{var f=ol.source.Raster.context_.canvas;if(f.width!==d||f.height!==e){ol.source.Raster.context_=ol.dom.createCanvasContext2D(d,e)}else{ol.source.Raster.context_.clearRect(0,0,d,e)}}a.composeFrame(b,c,ol.source.Raster.context_);return ol.source.Raster.context_.getImageData(0,0,d,e)};ol.source.Raster.context_=null;ol.source.Raster.getLayerStatesArray_=function(b){return b.map(function(a){return a.getLayer().getLayerState()})};ol.source.Raster.createRenderers_=function(a){var b=a.length;var c=new Array(b);for(var i=0;i<b;++i){c[i]=ol.source.Raster.createRenderer_(a[i])}return c};ol.source.Raster.createRenderer_=function(a){var b=null;if(a instanceof ol.source.Tile){b=ol.source.Raster.createTileRenderer_(a)}else if(a instanceof ol.source.Image){b=ol.source.Raster.createImageRenderer_(a)}return b};ol.source.Raster.createImageRenderer_=function(a){var b=new ol.layer.Image({source:a});return new ol.renderer.canvas.ImageLayer(b)};ol.source.Raster.createTileRenderer_=function(a){var b=new ol.layer.Tile({source:a});return new ol.renderer.canvas.TileLayer(b)};ol.source.Raster.Event=function(a,b,c){ol.events.Event.call(this,a);this.extent=b.extent;this.resolution=b.viewState.resolution/b.pixelRatio;this.data=c};ol.inherits(ol.source.Raster.Event,ol.events.Event);ol.source.Raster.prototype.getImageInternal=function(){return null};ol.source.Raster.EventType_={BEFOREOPERATIONS:'beforeoperations',AFTEROPERATIONS:'afteroperations'};bq.provide('ol.source.Stamen');bq.require('ol');bq.require('ol.source.OSM');bq.require('ol.source.XYZ');ol.source.Stamen=function(a){var i=a.layer.indexOf('-');var b=i==-1?a.layer:a.layer.slice(0,i);var c=ol.source.Stamen.ProviderConfig[b];var d=ol.source.Stamen.LayerConfig[a.layer];var e=a.url!==undefined?a.url:'https://stamen-tiles-{a-d}.a.ssl.fastly.net/'+a.layer+'/{z}/{x}/{y}.'+d.extension;ol.source.XYZ.call(this,{attributions:ol.source.Stamen.ATTRIBUTIONS,cacheSize:a.cacheSize,crossOrigin:'anonymous',maxZoom:a.maxZoom!=undefined?a.maxZoom:c.maxZoom,minZoom:a.minZoom!=undefined?a.minZoom:c.minZoom,opaque:d.opaque,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:e,wrapX:a.wrapX})};ol.inherits(ol.source.Stamen,ol.source.XYZ);ol.source.Stamen.ATTRIBUTIONS=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, '+'under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY'+' 3.0</a>.',ol.source.OSM.ATTRIBUTION];ol.source.Stamen.LayerConfig={'terrain':{extension:'jpg',opaque:true},'terrain-background':{extension:'jpg',opaque:true},'terrain-labels':{extension:'png',opaque:false},'terrain-lines':{extension:'png',opaque:false},'toner-background':{extension:'png',opaque:true},'toner':{extension:'png',opaque:true},'toner-hybrid':{extension:'png',opaque:false},'toner-labels':{extension:'png',opaque:false},'toner-lines':{extension:'png',opaque:false},'toner-lite':{extension:'png',opaque:true},'watercolor':{extension:'jpg',opaque:true}};ol.source.Stamen.ProviderConfig={'terrain':{minZoom:4,maxZoom:18},'toner':{minZoom:0,maxZoom:20},'watercolor':{minZoom:1,maxZoom:16}};bq.provide('ol.source.TileArcGISRest');bq.require('ol');bq.require('ol.extent');bq.require('ol.math');bq.require('ol.obj');bq.require('ol.size');bq.require('ol.source.TileImage');bq.require('ol.tilecoord');bq.require('ol.uri');ol.source.TileArcGISRest=function(a){var b=a||{};ol.source.TileImage.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,logo:b.logo,projection:b.projection,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction,url:b.url,urls:b.urls,wrapX:b.wrapX!==undefined?b.wrapX:true,transition:b.transition});this.params_=b.params||{};this.tmpExtent_=ol.extent.createEmpty();this.setKey(this.getKeyForParams_())};ol.inherits(ol.source.TileArcGISRest,ol.source.TileImage);ol.source.TileArcGISRest.prototype.getKeyForParams_=function(){var i=0;var a=[];for(var b in this.params_){a[i++]=b+'-'+this.params_[b]}return a.join('/')};ol.source.TileArcGISRest.prototype.getParams=function(){return this.params_};ol.source.TileArcGISRest.prototype.getRequestUrl_=function(a,b,c,d,e,f){var g=this.urls;if(!g){return undefined}var h=e.getCode().split(':').pop();f['SIZE']=b[0]+','+b[1];f['BBOX']=c.join(',');f['BBOXSR']=h;f['IMAGESR']=h;f['DPI']=Math.round(f['DPI']?f['DPI']*d:90*d);var i;if(g.length==1){i=g[0]}else{var j=ol.math.modulo(ol.tilecoord.hash(a),g.length);i=g[j]}var k=i.replace(/MapServer\/?$/,'MapServer/export').replace(/ImageServer\/?$/,'ImageServer/exportImage');return ol.uri.appendParams(k,f)};ol.source.TileArcGISRest.prototype.getTilePixelRatio=function(a){return(a)};ol.source.TileArcGISRest.prototype.fixedTileUrlFunction=function(a,b,c){var d=this.getTileGrid();if(!d){d=this.getTileGridForProjection(c)}if(d.getResolutions().length<=a[0]){return undefined}var e=d.getTileCoordExtent(a,this.tmpExtent_);var f=ol.size.toSize(d.getTileSize(a[0]),this.tmpSize);if(b!=1){f=ol.size.scale(f,b,this.tmpSize)}var g={'F':'image','FORMAT':'PNG32','TRANSPARENT':true};ol.obj.assign(g,this.params_);return this.getRequestUrl_(a,f,e,b,c,g)};ol.source.TileArcGISRest.prototype.updateParams=function(a){ol.obj.assign(this.params_,a);this.setKey(this.getKeyForParams_())};bq.provide('ol.source.TileDebug');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');bq.require('ol.dom');bq.require('ol.size');bq.require('ol.source.Tile');bq.require('ol.tilecoord');ol.source.TileDebug=function(a){ol.source.Tile.call(this,{opaque:false,projection:a.projection,tileGrid:a.tileGrid,wrapX:a.wrapX!==undefined?a.wrapX:true})};ol.inherits(ol.source.TileDebug,ol.source.Tile);ol.source.TileDebug.prototype.getTile=function(z,x,y){var a=ol.tilecoord.getKeyZXY(z,x,y);if(this.tileCache.containsKey(a)){return(this.tileCache.get(a))}else{var b=ol.size.toSize(this.tileGrid.getTileSize(z));var c=[z,x,y];var d=this.getTileCoordForTileUrlFunction(c);var e=!d?'':this.getTileCoordForTileUrlFunction(d).toString();var f=new ol.source.TileDebug.Tile_(c,b,e);this.tileCache.set(a,f);return f}};ol.source.TileDebug.Tile_=function(a,b,c){ol.Tile.call(this,a,ol.TileState.LOADED);this.tileSize_=b;this.text_=c;this.canvas_=null};ol.inherits(ol.source.TileDebug.Tile_,ol.Tile);ol.source.TileDebug.Tile_.prototype.getImage=function(){if(this.canvas_){return this.canvas_}else{var a=this.tileSize_;var b=ol.dom.createCanvasContext2D(a[0],a[1]);b.strokeStyle='black';b.strokeRect(0.5,0.5,a[0]+0.5,a[1]+0.5);b.fillStyle='black';b.textAlign='center';b.textBaseline='middle';b.font='24px sans-serif';b.fillText(this.text_,a[0]/2,a[1]/2);this.canvas_=b.canvas;return b.canvas}};ol.source.TileDebug.Tile_.prototype.load=function(){};bq.provide('ol.source.TileJSON');bq.require('ol');bq.require('ol.TileUrlFunction');bq.require('ol.asserts');bq.require('ol.extent');bq.require('ol.net');bq.require('ol.proj');bq.require('ol.source.State');bq.require('ol.source.TileImage');bq.require('ol.tilegrid');ol.source.TileJSON=function(a){this.tileJSON_=null;ol.source.TileImage.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,projection:ol.proj.get('EPSG:3857'),reprojectionErrorThreshold:a.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:a.tileLoadFunction,wrapX:a.wrapX!==undefined?a.wrapX:true,transition:a.transition});if(a.url){if(a.jsonp){ol.net.jsonp(a.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))}else{var b=new XMLHttpRequest();b.addEventListener('load',this.onXHRLoad_.bind(this));b.addEventListener('error',this.onXHRError_.bind(this));b.open('GET',a.url);b.send()}}else if(a.tileJSON){this.handleTileJSONResponse(a.tileJSON)}else{ol.asserts.assert(false,51)}};ol.inherits(ol.source.TileJSON,ol.source.TileImage);ol.source.TileJSON.prototype.onXHRLoad_=function(a){var b=(a.target);if(!b.status||b.status>=200&&b.status<300){var c;try{c=(JSON.parse(b.responseText))}catch(err){this.handleTileJSONError();return}this.handleTileJSONResponse(c)}else{this.handleTileJSONError()}};ol.source.TileJSON.prototype.onXHRError_=function(a){this.handleTileJSONError()};ol.source.TileJSON.prototype.getTileJSON=function(){return this.tileJSON_};ol.source.TileJSON.prototype.handleTileJSONResponse=function(b){var c=ol.proj.get('EPSG:4326');var d=this.getProjection();var e;if(b.bounds!==undefined){var f=ol.proj.getTransformFromProjections(c,d);e=ol.extent.applyTransform(b.bounds,f)}var g=b.minzoom||0;var h=b.maxzoom||22;var i=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(d),maxZoom:h,minZoom:g});this.tileGrid=i;this.tileUrlFunction=ol.TileUrlFunction.createFromTemplates(b.tiles,i);if(b.attribution!==undefined&&!this.getAttributions2()){var j=e!==undefined?e:c.getExtent();this.setAttributions(function(a){if(ol.extent.intersects(j,a.extent)){return[b.attribution]}return null})}this.tileJSON_=b;this.setState(ol.source.State.READY)};ol.source.TileJSON.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)};bq.provide('ol.source.TileUTFGrid');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');bq.require('ol.TileUrlFunction');bq.require('ol.asserts');bq.require('ol.events');bq.require('ol.events.EventType');bq.require('ol.extent');bq.require('ol.net');bq.require('ol.proj');bq.require('ol.source.State');bq.require('ol.source.Tile');bq.require('ol.tilecoord');bq.require('ol.tilegrid');ol.source.TileUTFGrid=function(a){ol.source.Tile.call(this,{projection:ol.proj.get('EPSG:3857'),state:ol.source.State.LOADING});this.preemptive_=a.preemptive!==undefined?a.preemptive:true;this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction;this.template_=undefined;this.jsonp_=a.jsonp||false;if(a.url){if(this.jsonp_){ol.net.jsonp(a.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))}else{var b=new XMLHttpRequest();b.addEventListener('load',this.onXHRLoad_.bind(this));b.addEventListener('error',this.onXHRError_.bind(this));b.open('GET',a.url);b.send()}}else if(a.tileJSON){this.handleTileJSONResponse(a.tileJSON)}else{ol.asserts.assert(false,51)}};ol.inherits(ol.source.TileUTFGrid,ol.source.Tile);ol.source.TileUTFGrid.prototype.onXHRLoad_=function(a){var b=(a.target);if(!b.status||b.status>=200&&b.status<300){var c;try{c=(JSON.parse(b.responseText))}catch(err){this.handleTileJSONError();return}this.handleTileJSONResponse(c)}else{this.handleTileJSONError()}};ol.source.TileUTFGrid.prototype.onXHRError_=function(a){this.handleTileJSONError()};ol.source.TileUTFGrid.prototype.getTemplate=function(){return this.template_};ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution=function(a,b,c,d,e){if(this.tileGrid){var f=this.tileGrid.getTileCoordForCoordAndResolution(a,b);var g=(this.getTile(f[0],f[1],f[2],1,this.getProjection()));g.forDataAtCoordinate(a,c,d,e)}else{if(e===true){setTimeout(function(){c.call(d,null)},0)}else{c.call(d,null)}}};ol.source.TileUTFGrid.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)};ol.source.TileUTFGrid.prototype.handleTileJSONResponse=function(b){var c=ol.proj.get('EPSG:4326');var d=this.getProjection();var e;if(b.bounds!==undefined){var f=ol.proj.getTransformFromProjections(c,d);e=ol.extent.applyTransform(b.bounds,f)}var g=b.minzoom||0;var h=b.maxzoom||22;var i=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(d),maxZoom:h,minZoom:g});this.tileGrid=i;this.template_=b.template;var j=b.grids;if(!j){this.setState(ol.source.State.ERROR);return}this.tileUrlFunction_=ol.TileUrlFunction.createFromTemplates(j,i);if(b.attribution!==undefined){var k=e!==undefined?e:c.getExtent();this.setAttributions(function(a){if(ol.extent.intersects(k,a.extent)){return[b.attribution]}return null})}this.setState(ol.source.State.READY)};ol.source.TileUTFGrid.prototype.getTile=function(z,x,y,a,b){var c=ol.tilecoord.getKeyZXY(z,x,y);if(this.tileCache.containsKey(c)){return(this.tileCache.get(c))}else{var d=[z,x,y];var e=this.getTileCoordForTileUrlFunction(d,b);var f=this.tileUrlFunction_(e,a,b);var g=new ol.source.TileUTFGrid.Tile_(d,f!==undefined?ol.TileState.IDLE:ol.TileState.EMPTY,f!==undefined?f:'',this.tileGrid.getTileCoordExtent(d),this.preemptive_,this.jsonp_);this.tileCache.set(c,g);return g}};ol.source.TileUTFGrid.prototype.useTile=function(z,x,y){var a=ol.tilecoord.getKeyZXY(z,x,y);if(this.tileCache.containsKey(a)){this.tileCache.get(a)}};ol.source.TileUTFGrid.Tile_=function(a,b,c,d,e,f){ol.Tile.call(this,a,b);this.src_=c;this.extent_=d;this.preemptive_=e;this.grid_=null;this.keys_=null;this.data_=null;this.jsonp_=f};ol.inherits(ol.source.TileUTFGrid.Tile_,ol.Tile);ol.source.TileUTFGrid.Tile_.prototype.getImage=function(){return null};ol.source.TileUTFGrid.Tile_.prototype.getData=function(a){if(!this.grid_||!this.keys_){return null}var b=(a[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]);var c=(a[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]);var d=this.grid_[Math.floor((1-c)*this.grid_.length)];if(typeof d!=='string'){return null}var e=d.charCodeAt(Math.floor(b*d.length));if(e>=93){e--}if(e>=35){e--}e-=32;var f=null;if(e in this.keys_){var g=this.keys_[e];if(this.data_&&g in this.data_){f=this.data_[g]}else{f=g}}return f};ol.source.TileUTFGrid.Tile_.prototype.forDataAtCoordinate=function(a,b,c,d){if(this.state==ol.TileState.IDLE&&d===true){ol.events.listenOnce(this,ol.events.EventType.CHANGE,function(e){b.call(c,this.getData(a))},this);this.loadInternal_()}else{if(d===true){setTimeout(function(){b.call(c,this.getData(a))}.bind(this),0)}else{b.call(c,this.getData(a))}}};ol.source.TileUTFGrid.Tile_.prototype.getKey=function(){return this.src_};ol.source.TileUTFGrid.Tile_.prototype.handleError_=function(){this.state=ol.TileState.ERROR;this.changed()};ol.source.TileUTFGrid.Tile_.prototype.handleLoad_=function(a){this.grid_=a.grid;this.keys_=a.keys;this.data_=a.data;this.state=ol.TileState.EMPTY;this.changed()};ol.source.TileUTFGrid.Tile_.prototype.loadInternal_=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING;if(this.jsonp_){ol.net.jsonp(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this))}else{var a=new XMLHttpRequest();a.addEventListener('load',this.onXHRLoad_.bind(this));a.addEventListener('error',this.onXHRError_.bind(this));a.open('GET',this.src_);a.send()}}};ol.source.TileUTFGrid.Tile_.prototype.onXHRLoad_=function(a){var b=(a.target);if(!b.status||b.status>=200&&b.status<300){var c;try{c=(JSON.parse(b.responseText))}catch(err){this.handleError_();return}this.handleLoad_(c)}else{this.handleError_()}};ol.source.TileUTFGrid.Tile_.prototype.onXHRError_=function(a){this.handleError_()};ol.source.TileUTFGrid.Tile_.prototype.load=function(){if(this.preemptive_){this.loadInternal_()}};bq.provide('ol.source.TileWMS');bq.require('ol');bq.require('ol.asserts');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.math');bq.require('ol.proj');bq.require('ol.reproj');bq.require('ol.size');bq.require('ol.source.TileImage');bq.require('ol.source.WMSServerType');bq.require('ol.tilecoord');bq.require('ol.string');bq.require('ol.uri');ol.source.TileWMS=function(a){var b=a||{};var c=b.params||{};var d='TRANSPARENT'in c?c['TRANSPARENT']:true;ol.source.TileImage.call(this,{attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,logo:b.logo,opaque:!d,projection:b.projection,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileClass:b.tileClass,tileGrid:b.tileGrid,tileLoadFunction:b.tileLoadFunction,url:b.url,urls:b.urls,wrapX:b.wrapX!==undefined?b.wrapX:true,transition:b.transition});this.gutter_=b.gutter!==undefined?b.gutter:0;this.params_=c;this.v13_=true;this.serverType_=(b.serverType);this.hidpi_=b.hidpi!==undefined?b.hidpi:true;this.tmpExtent_=ol.extent.createEmpty();this.updateV13_();this.setKey(this.getKeyForParams_())};ol.inherits(ol.source.TileWMS,ol.source.TileImage);ol.source.TileWMS.prototype.getGetFeatureInfoUrl=function(a,b,c,d){var e=ol.proj.get(c);var f=this.getProjection();var g=this.getTileGrid();if(!g){g=this.getTileGridForProjection(e)}var h=g.getTileCoordForCoordAndResolution(a,b);if(g.getResolutions().length<=h[0]){return undefined}var i=g.getResolution(h[0]);var j=g.getTileCoordExtent(h,this.tmpExtent_);var k=ol.size.toSize(g.getTileSize(h[0]),this.tmpSize);var l=this.gutter_;if(l!==0){k=ol.size.buffer(k,l,this.tmpSize);j=ol.extent.buffer(j,i*l,j)}if(f&&f!==e){i=ol.reproj.calculateSourceResolution(f,e,a,i);j=ol.proj.transformExtent(j,e,f);a=ol.proj.transform(a,e,f)}var m={'SERVICE':'WMS','VERSION':ol.DEFAULT_WMS_VERSION,'REQUEST':'GetFeatureInfo','FORMAT':'image/png','TRANSPARENT':true,'QUERY_LAYERS':this.params_['LAYERS']};ol.obj.assign(m,this.params_,d);var x=Math.floor((a[0]-j[0])/i);var y=Math.floor((j[3]-a[1])/i);m[this.v13_?'I':'X']=x;m[this.v13_?'J':'Y']=y;return this.getRequestUrl_(h,k,j,1,f||e,m)};ol.source.TileWMS.prototype.getGutterInternal=function(){return this.gutter_};ol.source.TileWMS.prototype.getParams=function(){return this.params_};ol.source.TileWMS.prototype.getRequestUrl_=function(a,b,c,d,e,f){var g=this.urls;if(!g){return undefined}f['WIDTH']=b[0];f['HEIGHT']=b[1];f[this.v13_?'CRS':'SRS']=e.getCode();if(!('STYLES'in this.params_)){f['STYLES']=''}if(d!=1){switch(this.serverType_){case ol.source.WMSServerType.GEOSERVER:var h=(90*d+0.5)|0;if('FORMAT_OPTIONS'in f){f['FORMAT_OPTIONS']+=';dpi:'+h}else{f['FORMAT_OPTIONS']='dpi:'+h}break;case ol.source.WMSServerType.MAPSERVER:f['MAP_RESOLUTION']=90*d;break;case ol.source.WMSServerType.CARMENTA_SERVER:case ol.source.WMSServerType.QGIS:f['DPI']=90*d;break;default:ol.asserts.assert(false,52);break}}var i=e.getAxisOrientation();var j=c;if(this.v13_&&i.substr(0,2)=='ne'){var k;k=c[0];j[0]=c[1];j[1]=k;k=c[2];j[2]=c[3];j[3]=k}f['BBOX']=j.join(',');var l;if(g.length==1){l=g[0]}else{var m=ol.math.modulo(ol.tilecoord.hash(a),g.length);l=g[m]}return ol.uri.appendParams(l,f)};ol.source.TileWMS.prototype.getTilePixelRatio=function(a){return(!this.hidpi_||this.serverType_===undefined)?1:(a)};ol.source.TileWMS.prototype.getKeyForParams_=function(){var i=0;var a=[];for(var b in this.params_){a[i++]=b+'-'+this.params_[b]}return a.join('/')};ol.source.TileWMS.prototype.fixedTileUrlFunction=function(a,b,c){var d=this.getTileGrid();if(!d){d=this.getTileGridForProjection(c)}if(d.getResolutions().length<=a[0]){return undefined}if(b!=1&&(!this.hidpi_||this.serverType_===undefined)){b=1}var e=d.getResolution(a[0]);var f=d.getTileCoordExtent(a,this.tmpExtent_);var g=ol.size.toSize(d.getTileSize(a[0]),this.tmpSize);var h=this.gutter_;if(h!==0){g=ol.size.buffer(g,h,this.tmpSize);f=ol.extent.buffer(f,e*h,f)}if(b!=1){g=ol.size.scale(g,b,this.tmpSize)}var i={'SERVICE':'WMS','VERSION':ol.DEFAULT_WMS_VERSION,'REQUEST':'GetMap','FORMAT':'image/png','TRANSPARENT':true};ol.obj.assign(i,this.params_);return this.getRequestUrl_(a,g,f,b,c,i)};ol.source.TileWMS.prototype.updateParams=function(a){ol.obj.assign(this.params_,a);this.updateV13_();this.setKey(this.getKeyForParams_())};ol.source.TileWMS.prototype.updateV13_=function(){var a=this.params_['VERSION']||ol.DEFAULT_WMS_VERSION;this.v13_=ol.string.compareVersions(a,'1.3')>=0};bq.provide('ol.VectorImageTile');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');bq.require('ol.dom');bq.require('ol.events');bq.require('ol.extent');bq.require('ol.events.EventType');bq.require('ol.featureloader');ol.VectorImageTile=function(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){ol.Tile.call(this,g,h,u);this.context_={};this.loader_;this.replayState_={};this.sourceTiles_=p;this.tileKeys=[];this.sourceRevision_=i;this.wrappedTileCoord=l;this.loadListenerKeys_=[];this.sourceTileListenerKeys_=[];if(l){var v=o.getTileCoordExtent(l);var w=o.getResolution(g[0]);var x=n.getZForResolution(w);n.forEachTileCoord(v,x,function(a){var b=ol.extent.getIntersection(v,n.getTileCoordExtent(a));var c=n.getExtent();if(c){b=ol.extent.getIntersection(b,c)}if(ol.extent.getWidth(b)/w>=0.5&&ol.extent.getHeight(b)/w>=0.5){var d=a.toString();var e=p[d];if(!e){var f=m(a,q,r);e=p[d]=new s(a,f==undefined?ol.TileState.EMPTY:ol.TileState.IDLE,f==undefined?'':f,j,k);this.sourceTileListenerKeys_.push(ol.events.listen(e,ol.events.EventType.CHANGE,t))}e.consumers++;this.tileKeys.push(d)}}.bind(this))}};ol.inherits(ol.VectorImageTile,ol.Tile);ol.VectorImageTile.prototype.disposeInternal=function(){for(var i=0,ii=this.tileKeys.length;i<ii;++i){var a=this.tileKeys[i];var b=this.getTile(a);b.consumers--;if(b.consumers==0){delete this.sourceTiles_[a];b.dispose()}}this.tileKeys.length=0;this.sourceTiles_=null;this.loadListenerKeys_.forEach(ol.events.unlistenByKey);this.loadListenerKeys_.length=0;if(this.interimTile){this.interimTile.dispose()}this.state=ol.TileState.ABORT;this.changed();this.sourceTileListenerKeys_.forEach(ol.events.unlistenByKey);this.sourceTileListenerKeys_.length=0;ol.Tile.prototype.disposeInternal.call(this)};ol.VectorImageTile.prototype.getContext=function(a){var b=ol.getUid(a).toString();if(!(b in this.context_)){this.context_[b]=ol.dom.createCanvasContext2D()}return this.context_[b]};ol.VectorImageTile.prototype.getImage=function(a){return this.getReplayState(a).renderedTileRevision==-1?null:this.getContext(a).canvas};ol.VectorImageTile.prototype.getReplayState=function(a){var b=ol.getUid(a).toString();if(!(b in this.replayState_)){this.replayState_[b]={dirty:false,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}}return this.replayState_[b]};ol.VectorImageTile.prototype.getKey=function(){return this.tileKeys.join('/')+'-'+this.sourceRevision_};ol.VectorImageTile.prototype.getTile=function(a){return this.sourceTiles_[a]};ol.VectorImageTile.prototype.load=function(){var g=0;var h={};if(this.state==ol.TileState.IDLE){this.setState(ol.TileState.LOADING)}if(this.state==ol.TileState.LOADING){this.tileKeys.forEach(function(c){var d=this.getTile(c);if(d.state==ol.TileState.IDLE){d.setLoader(this.loader_);d.load()}if(d.state==ol.TileState.LOADING){var f=ol.events.listen(d,ol.events.EventType.CHANGE,function(e){var a=d.getState();if(a==ol.TileState.LOADED||a==ol.TileState.ERROR){var b=ol.getUid(d);if(a==ol.TileState.ERROR){h[b]=true}else{--g;delete h[b]}if(g-Object.keys(h).length==0){this.finishLoading_()}}}.bind(this));this.loadListenerKeys_.push(f);++g}}.bind(this))}if(g-Object.keys(h).length==0){setTimeout(this.finishLoading_.bind(this),0)}};ol.VectorImageTile.prototype.finishLoading_=function(){var a=this.tileKeys.length;var b=0;for(var i=a-1;i>=0;--i){var c=this.getTile(this.tileKeys[i]).getState();if(c!=ol.TileState.LOADED){--a}if(c==ol.TileState.EMPTY){++b}}if(a==this.tileKeys.length){this.loadListenerKeys_.forEach(ol.events.unlistenByKey);this.loadListenerKeys_.length=0;this.setState(ol.TileState.LOADED)}else{this.setState(b==this.tileKeys.length?ol.TileState.EMPTY:ol.TileState.ERROR)}};ol.VectorImageTile.defaultLoadFunction=function(a,b){var c=ol.featureloader.loadFeaturesXhr(b,a.getFormat(),a.onLoad.bind(a),a.onError.bind(a));a.setLoader(c)};bq.provide('ol.VectorTile');bq.require('ol');bq.require('ol.Tile');bq.require('ol.TileState');ol.VectorTile=function(a,b,c,d,e,f){ol.Tile.call(this,a,b,f);this.consumers=0;this.extent_=null;this.format_=d;this.features_=null;this.loader_;this.projection_;this.replayGroups_={};this.tileLoadFunction_=e;this.url_=c};ol.inherits(ol.VectorTile,ol.Tile);ol.VectorTile.prototype.disposeInternal=function(){this.features_=null;this.replayGroups_={};this.state=ol.TileState.ABORT;this.changed();ol.Tile.prototype.disposeInternal.call(this)};ol.VectorTile.prototype.getExtent=function(){return this.extent_||ol.VectorTile.DEFAULT_EXTENT};ol.VectorTile.prototype.getFormat=function(){return this.format_};ol.VectorTile.prototype.getFeatures=function(){return this.features_};ol.VectorTile.prototype.getKey=function(){return this.url_};ol.VectorTile.prototype.getProjection=function(){return this.projection_};ol.VectorTile.prototype.getReplayGroup=function(a,b){return this.replayGroups_[ol.getUid(a)+','+b]};ol.VectorTile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.setState(ol.TileState.LOADING);this.tileLoadFunction_(this,this.url_);this.loader_(null,NaN,null)}};ol.VectorTile.prototype.onLoad=function(a,b,c){this.setProjection(b);this.setFeatures(a);this.setExtent(c)};ol.VectorTile.prototype.onError=function(){this.setState(ol.TileState.ERROR)};ol.VectorTile.prototype.setExtent=function(a){this.extent_=a};ol.VectorTile.prototype.setFeatures=function(a){this.features_=a;this.setState(ol.TileState.LOADED)};ol.VectorTile.prototype.setProjection=function(a){this.projection_=a};ol.VectorTile.prototype.setReplayGroup=function(a,b,c){this.replayGroups_[ol.getUid(a)+','+b]=c};ol.VectorTile.prototype.setLoader=function(a){this.loader_=a};ol.VectorTile.DEFAULT_EXTENT=[0,0,4096,4096];bq.provide('ol.source.VectorTile');bq.require('ol');bq.require('ol.TileState');bq.require('ol.VectorImageTile');bq.require('ol.VectorTile');bq.require('ol.size');bq.require('ol.source.UrlTile');bq.require('ol.tilecoord');bq.require('ol.tilegrid');ol.source.VectorTile=function(a){var b=a.projection||'EPSG:3857';var c=a.extent||ol.tilegrid.extentFromProjection(b);var d=a.tileGrid||ol.tilegrid.createXYZ({extent:c,maxZoom:a.maxZoom||22,minZoom:a.minZoom,tileSize:a.tileSize||512});ol.source.UrlTile.call(this,{attributions:a.attributions,cacheSize:a.cacheSize!==undefined?a.cacheSize:128,extent:c,logo:a.logo,opaque:false,projection:b,state:a.state,tileGrid:d,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:ol.VectorImageTile.defaultLoadFunction,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX===undefined?true:a.wrapX,transition:a.transition});this.format_=a.format?a.format:null;this.sourceTiles_={};this.overlaps_=a.overlaps==undefined?true:a.overlaps;this.tileClass=a.tileClass?a.tileClass:ol.VectorTile;this.tileGrids_={}};ol.inherits(ol.source.VectorTile,ol.source.UrlTile);ol.source.VectorTile.prototype.getOverlaps=function(){return this.overlaps_};ol.source.VectorTile.prototype.clear=function(){this.tileCache.clear();this.sourceTiles_={}};ol.source.VectorTile.prototype.getTile=function(z,x,y,a,b){var c=ol.tilecoord.getKeyZXY(z,x,y);if(this.tileCache.containsKey(c)){return(this.tileCache.get(c))}else{var d=[z,x,y];var e=this.getTileCoordForTileUrlFunction(d,b);var f=new ol.VectorImageTile(d,e!==null?ol.TileState.IDLE:ol.TileState.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,e,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(b),this.sourceTiles_,a,b,this.tileClass,this.handleTileChange.bind(this),this.tileOptions);this.tileCache.set(c,f);return f}};ol.source.VectorTile.prototype.getTileGridForProjection=function(a){var b=a.getCode();var c=this.tileGrids_[b];if(!c){var d=this.tileGrid;c=this.tileGrids_[b]=ol.tilegrid.createForProjection(a,undefined,d?d.getTileSize(d.getMinZoom()):undefined)}return c};ol.source.VectorTile.prototype.getTilePixelRatio=function(a){return a};ol.source.VectorTile.prototype.getTilePixelSize=function(z,a,b){var c=ol.size.toSize(this.getTileGridForProjection(b).getTileSize(z));return[Math.round(c[0]*a),Math.round(c[1]*a)]};bq.provide('ol.source.WMTSRequestEncoding');ol.source.WMTSRequestEncoding={KVP:'KVP',REST:'REST'};bq.provide('ol.tilegrid.WMTS');bq.require('ol');bq.require('ol.array');bq.require('ol.proj');bq.require('ol.tilegrid.TileGrid');ol.tilegrid.WMTS=function(a){this.matrixIds_=a.matrixIds;ol.tilegrid.TileGrid.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})};ol.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid);ol.tilegrid.WMTS.prototype.getMatrixId=function(z){return this.matrixIds_[z]};ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_};ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(k,l,m){var n=[];var o=[];var p=[];var q=[];var r=[];var s=m!==undefined?m:[];var t='SupportedCRS';var u='TileMatrix';var v='Identifier';var w='ScaleDenominator';var x='TopLeftCorner';var y='TileWidth';var z='TileHeight';var A=k[t];var B=ol.proj.get(A.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,'$1:$3'))||ol.proj.get(A);var C=B.getMetersPerUnit();var D=B.getAxisOrientation().substr(0,2)=='ne';k[u].sort(function(a,b){return b[w]-a[w]});k[u].forEach(function(d,e,f){var g;if(s.length>0){g=ol.array.find(s,function(a,b,c){return d[v]==a[u]})}else{g=true}if(g){o.push(d[v]);var h=d[w]*0.28E-3/C;var i=d[y];var j=d[z];if(D){p.push([d[x][1],d[x][0]])}else{p.push(d[x])}n.push(h);q.push(i==j?i:[i,j]);r.push([d['MatrixWidth'],-d['MatrixHeight']])}});return new ol.tilegrid.WMTS({extent:l,origins:p,resolutions:n,matrixIds:o,tileSizes:q,sizes:r})};bq.provide('ol.source.WMTS');bq.require('ol');bq.require('ol.TileUrlFunction');bq.require('ol.array');bq.require('ol.extent');bq.require('ol.obj');bq.require('ol.proj');bq.require('ol.source.TileImage');bq.require('ol.source.WMTSRequestEncoding');bq.require('ol.tilegrid.WMTS');bq.require('ol.uri');ol.source.WMTS=function(g){this.version_=g.version!==undefined?g.version:'1.0.0';this.format_=g.format!==undefined?g.format:'image/jpeg';this.dimensions_=g.dimensions!==undefined?g.dimensions:{};this.layer_=g.layer;this.matrixSet_=g.matrixSet;this.style_=g.style;var h=g.urls;if(h===undefined&&g.url!==undefined){h=ol.TileUrlFunction.expandUrl(g.url)}this.requestEncoding_=g.requestEncoding!==undefined?(g.requestEncoding):ol.source.WMTSRequestEncoding.KVP;var i=this.requestEncoding_;var j=g.tileGrid;var k={'layer':this.layer_,'style':this.style_,'tilematrixset':this.matrixSet_};if(i==ol.source.WMTSRequestEncoding.KVP){ol.obj.assign(k,{'Service':'WMTS','Request':'GetTile','Version':this.version_,'Format':this.format_})}var l=this.dimensions_;this.createFromWMTSTemplate_=function(f){f=(i==ol.source.WMTSRequestEncoding.KVP)?ol.uri.appendParams(f,k):f.replace(/\{(\w+?)\}/g,function(m,p){return(p.toLowerCase()in k)?k[p.toLowerCase()]:m});return(function(a,b,c){if(!a){return undefined}else{var d={'TileMatrix':j.getMatrixId(a[0]),'TileCol':a[1],'TileRow':-a[2]-1};ol.obj.assign(d,l);var e=f;if(i==ol.source.WMTSRequestEncoding.KVP){e=ol.uri.appendParams(e,d)}else{e=e.replace(/\{(\w+?)\}/g,function(m,p){return d[p]})}return e}})};var n=(h&&h.length>0)?ol.TileUrlFunction.createFromTileUrlFunctions(h.map(this.createFromWMTSTemplate_)):ol.TileUrlFunction.nullTileUrlFunction;ol.source.TileImage.call(this,{attributions:g.attributions,cacheSize:g.cacheSize,crossOrigin:g.crossOrigin,logo:g.logo,projection:g.projection,reprojectionErrorThreshold:g.reprojectionErrorThreshold,tileClass:g.tileClass,tileGrid:j,tileLoadFunction:g.tileLoadFunction,tilePixelRatio:g.tilePixelRatio,tileUrlFunction:n,urls:h,wrapX:g.wrapX!==undefined?g.wrapX:false,transition:g.transition});this.setKey(this.getKeyForDimensions_())};ol.inherits(ol.source.WMTS,ol.source.TileImage);ol.source.WMTS.prototype.setUrls=function(a){this.urls=a;var b=a.join('\n');this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTileUrlFunctions(a.map(this.createFromWMTSTemplate_.bind(this))),b)};ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_};ol.source.WMTS.prototype.getFormat=function(){return this.format_};ol.source.WMTS.prototype.getLayer=function(){return this.layer_};ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_};ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_};ol.source.WMTS.prototype.getStyle=function(){return this.style_};ol.source.WMTS.prototype.getVersion=function(){return this.version_};ol.source.WMTS.prototype.getKeyForDimensions_=function(){var i=0;var a=[];for(var b in this.dimensions_){a[i++]=b+'-'+this.dimensions_[b]}return a.join('/')};ol.source.WMTS.prototype.updateDimensions=function(a){ol.obj.assign(this.dimensions_,a);this.setKey(this.getKeyForDimensions_())};ol.source.WMTS.optionsFromCapabilities=function(j,k){var m=j['Contents']['Layer'];var l=ol.array.find(m,function(a,b,c){return a['Identifier']==k['layer']});if(l===null){return null}var n=j['Contents']['TileMatrixSet'];var o,matrixSet,matrixLimits;if(l['TileMatrixSetLink'].length>1){if('projection'in k){o=ol.array.findIndex(l['TileMatrixSetLink'],function(b,c,d){var e=ol.array.find(n,function(a){return a['Identifier']==b['TileMatrixSet']});var f=e['SupportedCRS'];var g=ol.proj.get(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,'$1:$3'))||ol.proj.get(f);var h=ol.proj.get(k['projection']);if(g&&h){return ol.proj.equivalent(g,h)}else{return f==k['projection']}})}else{o=ol.array.findIndex(l['TileMatrixSetLink'],function(a,b,c){return a['TileMatrixSet']==k['matrixSet']})}}else{o=0}if(o<0){o=0}matrixSet=(l['TileMatrixSetLink'][o]['TileMatrixSet']);matrixLimits=(l['TileMatrixSetLink'][o]['TileMatrixSetLimits']);var p=(l['Format'][0]);if('format'in k){p=k['format']}o=ol.array.findIndex(l['Style'],function(a,b,c){if('style'in k){return a['Title']==k['style']}else{return a['isDefault']}});if(o<0){o=0}var q=(l['Style'][o]['Identifier']);var r={};if('Dimension'in l){l['Dimension'].forEach(function(a,b,c){var d=a['Identifier'];var e=a['Default'];if(e===undefined){e=a['Value'][0]}r[d]=e})}var s=j['Contents']['TileMatrixSet'];var t=ol.array.find(s,function(a,b,c){return a['Identifier']==matrixSet});var u;var v=t['SupportedCRS'];if(v){u=ol.proj.get(v.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,'$1:$3'))||ol.proj.get(v)}if('projection'in k){var w=ol.proj.get(k['projection']);if(w){if(!u||ol.proj.equivalent(w,u)){u=w}}}var x=l['WGS84BoundingBox'];var y,wrapX;if(x!==undefined){var z=ol.proj.get('EPSG:4326').getExtent();wrapX=(x[0]==z[0]&&x[2]==z[2]);y=ol.proj.transformExtent(x,'EPSG:4326',u);var A=u.getExtent();if(A){if(!ol.extent.containsExtent(A,y)){y=undefined}}}var B=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(t,y,matrixLimits);var C=[];var D=k['requestEncoding'];D=D!==undefined?D:'';if('OperationsMetadata'in j&&'GetTile'in j['OperationsMetadata']){var E=j['OperationsMetadata']['GetTile']['DCP']['HTTP']['Get'];for(var i=0,ii=E.length;i<ii;++i){if(E[i]['Constraint']){var F=ol.array.find(E[i]['Constraint'],function(a){return a['name']=='GetEncoding'});var G=F['AllowedValues']['Value'];if(D===''){D=G[0]}if(D===ol.source.WMTSRequestEncoding.KVP){if(ol.array.includes(G,ol.source.WMTSRequestEncoding.KVP)){C.push((E[i]['href']))}}else{break}}else if(E[i]['href']){D=ol.source.WMTSRequestEncoding.KVP;C.push((E[i]['href']))}}}if(C.length===0){D=ol.source.WMTSRequestEncoding.REST;l['ResourceURL'].forEach(function(a){if(a['resourceType']==='tile'){p=a['format'];C.push((a['template']))}})}return{urls:C,layer:k['layer'],matrixSet:matrixSet,format:p,projection:u,requestEncoding:D,tileGrid:B,style:q,dimensions:r,wrapX:wrapX,crossOrigin:k['crossOrigin']}};bq.provide('ol.source.Zoomify');bq.require('ol');bq.require('ol.ImageTile');bq.require('ol.TileState');bq.require('ol.TileUrlFunction');bq.require('ol.asserts');bq.require('ol.dom');bq.require('ol.extent');bq.require('ol.size');bq.require('ol.source.TileImage');bq.require('ol.tilegrid.TileGrid');ol.source.Zoomify=function(l){var n=l||{};var o=n.size;var q=n.tierSizeCalculation!==undefined?n.tierSizeCalculation:ol.source.Zoomify.TierSizeCalculation_.DEFAULT;var r=o[0];var s=o[1];var t=n.extent||[0,-o[1],o[0],0];var u=[];var v=n.tileSize||ol.DEFAULT_TILE_SIZE;var w=v;switch(q){case ol.source.Zoomify.TierSizeCalculation_.DEFAULT:while(r>w||s>w){u.push([Math.ceil(r/w),Math.ceil(s/w)]);w+=w}break;case ol.source.Zoomify.TierSizeCalculation_.TRUNCATED:var x=r;var y=s;while(x>w||y>w){u.push([Math.ceil(x/w),Math.ceil(y/w)]);x>>=1;y>>=1}break;default:ol.asserts.assert(false,53);break}u.push([1,1]);u.reverse();var z=[1];var A=[0];var i,ii;for(i=1,ii=u.length;i<ii;i++){z.push(1<<i);A.push(u[i-1][0]*u[i-1][1]+A[i-1])}z.reverse();var B=new ol.tilegrid.TileGrid({tileSize:v,extent:t,origin:ol.extent.getTopLeft(t),resolutions:z});var C=n.url;if(C&&C.indexOf('{TileGroup}')==-1&&C.indexOf('{tileIndex}')==-1){C+='{TileGroup}/{z}-{x}-{y}.jpg'}var D=ol.TileUrlFunction.expandUrl(C);function createFromTemplate(k){return(function(a,b,c){if(!a){return undefined}else{var d=a[0];var e=a[1];var f=-a[2]-1;var g=e+f*u[d][0];var h=B.getTileSize(d);var i=((g+A[d])/h)|0;var j={'z':d,'x':e,'y':f,'tileIndex':g,'TileGroup':'TileGroup'+i};return k.replace(/\{(\w+?)\}/g,function(m,p){return j[p]})}})}var E=ol.TileUrlFunction.createFromTileUrlFunctions(D.map(createFromTemplate));var F=ol.source.Zoomify.Tile_.bind(null,B);ol.source.TileImage.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,logo:n.logo,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:F,tileGrid:B,tileUrlFunction:E,transition:n.transition})};ol.inherits(ol.source.Zoomify,ol.source.TileImage);ol.source.Zoomify.Tile_=function(a,b,c,d,e,f,g){ol.ImageTile.call(this,b,c,d,e,f,g);this.zoomifyImage_=null;this.tileSize_=ol.size.toSize(a.getTileSize(b[0]))};ol.inherits(ol.source.Zoomify.Tile_,ol.ImageTile);ol.source.Zoomify.Tile_.prototype.getImage=function(){if(this.zoomifyImage_){return this.zoomifyImage_}var a=ol.ImageTile.prototype.getImage.call(this);if(this.state==ol.TileState.LOADED){var b=this.tileSize_;if(a.width==b[0]&&a.height==b[1]){this.zoomifyImage_=a;return a}else{var c=ol.dom.createCanvasContext2D(b[0],b[1]);c.drawImage(a,0,0);this.zoomifyImage_=c.canvas;return c.canvas}}else{return a}};ol.source.Zoomify.TierSizeCalculation_={DEFAULT:'default',TRUNCATED:'truncated'};bq.addDependency('demos/editor/equationeditor.js',['goog.demos.editor.EquationEditor'],['goog.ui.equation.EquationEditorDialog']);bq.addDependency('demos/editor/helloworld.js',['goog.demos.editor.HelloWorld'],['goog.dom','goog.dom.TagName','goog.editor.Plugin']);bq.addDependency('demos/editor/helloworlddialog.js',['goog.demos.editor.HelloWorldDialog','goog.demos.editor.HelloWorldDialog.OkEvent'],['goog.dom.TagName','goog.events.Event','goog.string','goog.ui.editor.AbstractDialog','goog.ui.editor.AbstractDialog.Builder','goog.ui.editor.AbstractDialog.EventType']);bq.addDependency('demos/editor/helloworlddialogplugin.js',['goog.demos.editor.HelloWorldDialogPlugin','goog.demos.editor.HelloWorldDialogPlugin.Command'],['goog.demos.editor.HelloWorldDialog','goog.dom.TagName','goog.editor.plugins.AbstractDialogPlugin','goog.editor.range','goog.functions','goog.ui.editor.AbstractDialog.EventType']);bq.require('ol');bq.require('ol.AssertionError');bq.require('ol.Attribution');bq.require('ol.CanvasMap');bq.require('ol.Collection');bq.require('ol.DeviceOrientation');bq.require('ol.Feature');bq.require('ol.Geolocation');bq.require('ol.Graticule');bq.require('ol.Image');bq.require('ol.ImageTile');bq.require('ol.Kinetic');bq.require('ol.Map');bq.require('ol.MapBrowserEvent');bq.require('ol.MapEvent');bq.require('ol.Object');bq.require('ol.Observable');bq.require('ol.Overlay');bq.require('ol.PluggableMap');bq.require('ol.Sphere');bq.require('ol.Tile');bq.require('ol.VectorTile');bq.require('ol.View');bq.require('ol.color');bq.require('ol.colorlike');bq.require('ol.control');bq.require('ol.control.Attribution');bq.require('ol.control.Control');bq.require('ol.control.FullScreen');bq.require('ol.control.MousePosition');bq.require('ol.control.OverviewMap');bq.require('ol.control.Rotate');bq.require('ol.control.ScaleLine');bq.require('ol.control.Zoom');bq.require('ol.control.ZoomSlider');bq.require('ol.control.ZoomToExtent');bq.require('ol.coordinate');bq.require('ol.easing');bq.require('ol.events.Event');bq.require('ol.events.condition');bq.require('ol.extent');bq.require('ol.featureloader');bq.require('ol.format.EsriJSON');bq.require('ol.format.Feature');bq.require('ol.format.GML');bq.require('ol.format.GML2');bq.require('ol.format.GML3');bq.require('ol.format.GMLBase');bq.require('ol.format.GPX');bq.require('ol.format.GeoJSON');bq.require('ol.format.IGC');bq.require('ol.format.KML');bq.require('ol.format.MVT');bq.require('ol.format.OSMXML');bq.require('ol.format.Polyline');bq.require('ol.format.TopoJSON');bq.require('ol.format.WFS');bq.require('ol.format.WKT');bq.require('ol.format.WMSCapabilities');bq.require('ol.format.WMSGetFeatureInfo');bq.require('ol.format.WMTSCapabilities');bq.require('ol.format.filter');bq.require('ol.format.filter.And');bq.require('ol.format.filter.Bbox');bq.require('ol.format.filter.Comparison');bq.require('ol.format.filter.ComparisonBinary');bq.require('ol.format.filter.Contains');bq.require('ol.format.filter.During');bq.require('ol.format.filter.EqualTo');bq.require('ol.format.filter.Filter');bq.require('ol.format.filter.GreaterThan');bq.require('ol.format.filter.GreaterThanOrEqualTo');bq.require('ol.format.filter.Intersects');bq.require('ol.format.filter.IsBetween');bq.require('ol.format.filter.IsLike');bq.require('ol.format.filter.IsNull');bq.require('ol.format.filter.LessThan');bq.require('ol.format.filter.LessThanOrEqualTo');bq.require('ol.format.filter.Not');bq.require('ol.format.filter.NotEqualTo');bq.require('ol.format.filter.Or');bq.require('ol.format.filter.Spatial');bq.require('ol.format.filter.Within');bq.require('ol.geom.Circle');bq.require('ol.geom.Geometry');bq.require('ol.geom.GeometryCollection');bq.require('ol.geom.LineString');bq.require('ol.geom.LinearRing');bq.require('ol.geom.MultiLineString');bq.require('ol.geom.MultiPoint');bq.require('ol.geom.MultiPolygon');bq.require('ol.geom.Point');bq.require('ol.geom.Polygon');bq.require('ol.geom.SimpleGeometry');bq.require('ol.has');bq.require('ol.interaction');bq.require('ol.interaction.DoubleClickZoom');bq.require('ol.interaction.DragAndDrop');bq.require('ol.interaction.DragBox');bq.require('ol.interaction.DragPan');bq.require('ol.interaction.DragRotate');bq.require('ol.interaction.DragRotateAndZoom');bq.require('ol.interaction.DragZoom');bq.require('ol.interaction.Draw');bq.require('ol.interaction.Extent');bq.require('ol.interaction.Interaction');bq.require('ol.interaction.KeyboardPan');bq.require('ol.interaction.KeyboardZoom');bq.require('ol.interaction.Modify');bq.require('ol.interaction.MouseWheelZoom');bq.require('ol.interaction.PinchRotate');bq.require('ol.interaction.PinchZoom');bq.require('ol.interaction.Pointer');bq.require('ol.interaction.Select');bq.require('ol.interaction.Snap');bq.require('ol.interaction.Translate');bq.require('ol.layer.Base');bq.require('ol.layer.Group');bq.require('ol.layer.Heatmap');bq.require('ol.layer.Image');bq.require('ol.layer.Layer');bq.require('ol.layer.Tile');bq.require('ol.layer.Vector');bq.require('ol.layer.VectorTile');bq.require('ol.loadingstrategy');bq.require('ol.proj');bq.require('ol.proj.Projection');bq.require('ol.proj.Units');bq.require('ol.proj.common');bq.require('ol.render');bq.require('ol.render.Event');bq.require('ol.render.Feature');bq.require('ol.render.VectorContext');bq.require('ol.render.canvas.Immediate');bq.require('ol.render.webgl.Immediate');bq.require('ol.renderer.canvas.ImageLayer');bq.require('ol.renderer.canvas.Map');bq.require('ol.renderer.canvas.TileLayer');bq.require('ol.renderer.canvas.VectorLayer');bq.require('ol.renderer.canvas.VectorTileLayer');bq.require('ol.renderer.webgl.ImageLayer');bq.require('ol.renderer.webgl.Map');bq.require('ol.renderer.webgl.TileLayer');bq.require('ol.renderer.webgl.VectorLayer');bq.require('ol.size');bq.require('ol.source.BingMaps');bq.require('ol.source.CartoDB');bq.require('ol.source.Cluster');bq.require('ol.source.Image');bq.require('ol.source.ImageArcGISRest');bq.require('ol.source.ImageCanvas');bq.require('ol.source.ImageMapGuide');bq.require('ol.source.ImageStatic');bq.require('ol.source.ImageVector');bq.require('ol.source.ImageWMS');bq.require('ol.source.OSM');bq.require('ol.source.Raster');bq.require('ol.source.Source');bq.require('ol.source.Stamen');bq.require('ol.source.Tile');bq.require('ol.source.TileArcGISRest');bq.require('ol.source.TileDebug');bq.require('ol.source.TileImage');bq.require('ol.source.TileJSON');bq.require('ol.source.TileUTFGrid');bq.require('ol.source.TileWMS');bq.require('ol.source.UrlTile');bq.require('ol.source.Vector');bq.require('ol.source.VectorTile');bq.require('ol.source.WMTS');bq.require('ol.source.XYZ');bq.require('ol.source.Zoomify');bq.require('ol.style');bq.require('ol.style.AtlasManager');bq.require('ol.style.Circle');bq.require('ol.style.Fill');bq.require('ol.style.Icon');bq.require('ol.style.IconImageCache');bq.require('ol.style.Image');bq.require('ol.style.RegularShape');bq.require('ol.style.Stroke');bq.require('ol.style.Style');bq.require('ol.style.Text');bq.require('ol.tilegrid');bq.require('ol.tilegrid.TileGrid');bq.require('ol.tilegrid.WMTS');bq.require('ol.webgl.Context');bq.require('ol.xml');bq.exportProperty(ol.AssertionError.prototype,'code',ol.AssertionError.prototype.code);bq.exportSymbol('ol.Attribution',ol.Attribution,bp);bq.exportProperty(ol.Attribution.prototype,'getHTML',ol.Attribution.prototype.getHTML);bq.exportSymbol('ol.CanvasMap',ol.CanvasMap,bp);bq.exportSymbol('ol.Collection',ol.Collection,bp);bq.exportProperty(ol.Collection.prototype,'clear',ol.Collection.prototype.clear);bq.exportProperty(ol.Collection.prototype,'extend',ol.Collection.prototype.extend);bq.exportProperty(ol.Collection.prototype,'forEach',ol.Collection.prototype.forEach);bq.exportProperty(ol.Collection.prototype,'getArray',ol.Collection.prototype.getArray);bq.exportProperty(ol.Collection.prototype,'item',ol.Collection.prototype.item);bq.exportProperty(ol.Collection.prototype,'getLength',ol.Collection.prototype.getLength);bq.exportProperty(ol.Collection.prototype,'insertAt',ol.Collection.prototype.insertAt);bq.exportProperty(ol.Collection.prototype,'pop',ol.Collection.prototype.pop);bq.exportProperty(ol.Collection.prototype,'push',ol.Collection.prototype.push);bq.exportProperty(ol.Collection.prototype,'remove',ol.Collection.prototype.remove);bq.exportProperty(ol.Collection.prototype,'removeAt',ol.Collection.prototype.removeAt);bq.exportProperty(ol.Collection.prototype,'setAt',ol.Collection.prototype.setAt);bq.exportProperty(ol.Collection.Event.prototype,'element',ol.Collection.Event.prototype.element);bq.exportSymbol('ol.color.asArray',ol.color.asArray,bp);bq.exportSymbol('ol.color.asString',ol.color.asString,bp);bq.exportSymbol('ol.colorlike.asColorLike',ol.colorlike.asColorLike,bp);bq.exportSymbol('ol.control.defaults',ol.control.defaults,bp);bq.exportSymbol('ol.coordinate.add',ol.coordinate.add,bp);bq.exportSymbol('ol.coordinate.createStringXY',ol.coordinate.createStringXY,bp);bq.exportSymbol('ol.coordinate.format',ol.coordinate.format,bp);bq.exportSymbol('ol.coordinate.rotate',ol.coordinate.rotate,bp);bq.exportSymbol('ol.coordinate.toStringHDMS',ol.coordinate.toStringHDMS,bp);bq.exportSymbol('ol.coordinate.toStringXY',ol.coordinate.toStringXY,bp);bq.exportSymbol('ol.DeviceOrientation',ol.DeviceOrientation,bp);bq.exportProperty(ol.DeviceOrientation.prototype,'getAlpha',ol.DeviceOrientation.prototype.getAlpha);bq.exportProperty(ol.DeviceOrientation.prototype,'getBeta',ol.DeviceOrientation.prototype.getBeta);bq.exportProperty(ol.DeviceOrientation.prototype,'getGamma',ol.DeviceOrientation.prototype.getGamma);bq.exportProperty(ol.DeviceOrientation.prototype,'getHeading',ol.DeviceOrientation.prototype.getHeading);bq.exportProperty(ol.DeviceOrientation.prototype,'getTracking',ol.DeviceOrientation.prototype.getTracking);bq.exportProperty(ol.DeviceOrientation.prototype,'setTracking',ol.DeviceOrientation.prototype.setTracking);bq.exportSymbol('ol.easing.easeIn',ol.easing.easeIn,bp);bq.exportSymbol('ol.easing.easeOut',ol.easing.easeOut,bp);bq.exportSymbol('ol.easing.inAndOut',ol.easing.inAndOut,bp);bq.exportSymbol('ol.easing.linear',ol.easing.linear,bp);bq.exportSymbol('ol.easing.upAndDown',ol.easing.upAndDown,bp);bq.exportSymbol('ol.extent.boundingExtent',ol.extent.boundingExtent,bp);bq.exportSymbol('ol.extent.buffer',ol.extent.buffer,bp);bq.exportSymbol('ol.extent.containsCoordinate',ol.extent.containsCoordinate,bp);bq.exportSymbol('ol.extent.containsExtent',ol.extent.containsExtent,bp);bq.exportSymbol('ol.extent.containsXY',ol.extent.containsXY,bp);bq.exportSymbol('ol.extent.createEmpty',ol.extent.createEmpty,bp);bq.exportSymbol('ol.extent.equals',ol.extent.equals,bp);bq.exportSymbol('ol.extent.extend',ol.extent.extend,bp);bq.exportSymbol('ol.extent.getArea',ol.extent.getArea,bp);bq.exportSymbol('ol.extent.getBottomLeft',ol.extent.getBottomLeft,bp);bq.exportSymbol('ol.extent.getBottomRight',ol.extent.getBottomRight,bp);bq.exportSymbol('ol.extent.getCenter',ol.extent.getCenter,bp);bq.exportSymbol('ol.extent.getHeight',ol.extent.getHeight,bp);bq.exportSymbol('ol.extent.getIntersection',ol.extent.getIntersection,bp);bq.exportSymbol('ol.extent.getSize',ol.extent.getSize,bp);bq.exportSymbol('ol.extent.getTopLeft',ol.extent.getTopLeft,bp);bq.exportSymbol('ol.extent.getTopRight',ol.extent.getTopRight,bp);bq.exportSymbol('ol.extent.getWidth',ol.extent.getWidth,bp);bq.exportSymbol('ol.extent.intersects',ol.extent.intersects,bp);bq.exportSymbol('ol.extent.isEmpty',ol.extent.isEmpty,bp);bq.exportSymbol('ol.extent.applyTransform',ol.extent.applyTransform,bp);bq.exportSymbol('ol.Feature',ol.Feature,bp);bq.exportProperty(ol.Feature.prototype,'clone',ol.Feature.prototype.clone);bq.exportProperty(ol.Feature.prototype,'getGeometry',ol.Feature.prototype.getGeometry);bq.exportProperty(ol.Feature.prototype,'getId',ol.Feature.prototype.getId);bq.exportProperty(ol.Feature.prototype,'getGeometryName',ol.Feature.prototype.getGeometryName);bq.exportProperty(ol.Feature.prototype,'getStyle',ol.Feature.prototype.getStyle);bq.exportProperty(ol.Feature.prototype,'getStyleFunction',ol.Feature.prototype.getStyleFunction);bq.exportProperty(ol.Feature.prototype,'setGeometry',ol.Feature.prototype.setGeometry);bq.exportProperty(ol.Feature.prototype,'setStyle',ol.Feature.prototype.setStyle);bq.exportProperty(ol.Feature.prototype,'setId',ol.Feature.prototype.setId);bq.exportProperty(ol.Feature.prototype,'setGeometryName',ol.Feature.prototype.setGeometryName);bq.exportSymbol('ol.featureloader.xhr',ol.featureloader.xhr,bp);bq.exportSymbol('ol.Geolocation',ol.Geolocation,bp);bq.exportProperty(ol.Geolocation.prototype,'getAccuracy',ol.Geolocation.prototype.getAccuracy);bq.exportProperty(ol.Geolocation.prototype,'getAccuracyGeometry',ol.Geolocation.prototype.getAccuracyGeometry);bq.exportProperty(ol.Geolocation.prototype,'getAltitude',ol.Geolocation.prototype.getAltitude);bq.exportProperty(ol.Geolocation.prototype,'getAltitudeAccuracy',ol.Geolocation.prototype.getAltitudeAccuracy);bq.exportProperty(ol.Geolocation.prototype,'getHeading',ol.Geolocation.prototype.getHeading);bq.exportProperty(ol.Geolocation.prototype,'getPosition',ol.Geolocation.prototype.getPosition);bq.exportProperty(ol.Geolocation.prototype,'getProjection',ol.Geolocation.prototype.getProjection);bq.exportProperty(ol.Geolocation.prototype,'getSpeed',ol.Geolocation.prototype.getSpeed);bq.exportProperty(ol.Geolocation.prototype,'getTracking',ol.Geolocation.prototype.getTracking);bq.exportProperty(ol.Geolocation.prototype,'getTrackingOptions',ol.Geolocation.prototype.getTrackingOptions);bq.exportProperty(ol.Geolocation.prototype,'setProjection',ol.Geolocation.prototype.setProjection);bq.exportProperty(ol.Geolocation.prototype,'setTracking',ol.Geolocation.prototype.setTracking);bq.exportProperty(ol.Geolocation.prototype,'setTrackingOptions',ol.Geolocation.prototype.setTrackingOptions);bq.exportSymbol('ol.Graticule',ol.Graticule,bp);bq.exportProperty(ol.Graticule.prototype,'getMap',ol.Graticule.prototype.getMap);bq.exportProperty(ol.Graticule.prototype,'getMeridians',ol.Graticule.prototype.getMeridians);bq.exportProperty(ol.Graticule.prototype,'getParallels',ol.Graticule.prototype.getParallels);bq.exportProperty(ol.Graticule.prototype,'setMap',ol.Graticule.prototype.setMap);bq.exportSymbol('ol.has.DEVICE_PIXEL_RATIO',ol.has.DEVICE_PIXEL_RATIO,bp);bq.exportSymbol('ol.has.CANVAS',ol.has.CANVAS,bp);bq.exportSymbol('ol.has.DEVICE_ORIENTATION',ol.has.DEVICE_ORIENTATION,bp);bq.exportSymbol('ol.has.GEOLOCATION',ol.has.GEOLOCATION,bp);bq.exportSymbol('ol.has.TOUCH',ol.has.TOUCH,bp);bq.exportSymbol('ol.has.WEBGL',ol.has.WEBGL,bp);bq.exportProperty(ol.Image.prototype,'getImage',ol.Image.prototype.getImage);bq.exportProperty(ol.Image.prototype,'load',ol.Image.prototype.load);bq.exportProperty(ol.ImageTile.prototype,'getImage',ol.ImageTile.prototype.getImage);bq.exportSymbol('ol.inherits',ol.inherits,bp);bq.exportSymbol('ol.interaction.defaults',ol.interaction.defaults,bp);bq.exportSymbol('ol.Kinetic',ol.Kinetic,bp);bq.exportSymbol('ol.loadingstrategy.all',ol.loadingstrategy.all,bp);bq.exportSymbol('ol.loadingstrategy.bbox',ol.loadingstrategy.bbox,bp);bq.exportSymbol('ol.loadingstrategy.tile',ol.loadingstrategy.tile,bp);bq.exportSymbol('ol.Map',ol.Map,bp);bq.exportProperty(ol.MapBrowserEvent.prototype,'originalEvent',ol.MapBrowserEvent.prototype.originalEvent);bq.exportProperty(ol.MapBrowserEvent.prototype,'pixel',ol.MapBrowserEvent.prototype.pixel);bq.exportProperty(ol.MapBrowserEvent.prototype,'coordinate',ol.MapBrowserEvent.prototype.coordinate);bq.exportProperty(ol.MapBrowserEvent.prototype,'dragging',ol.MapBrowserEvent.prototype.dragging);bq.exportProperty(ol.MapEvent.prototype,'map',ol.MapEvent.prototype.map);bq.exportProperty(ol.MapEvent.prototype,'frameState',ol.MapEvent.prototype.frameState);bq.exportSymbol('ol.Object',ol.Object,bp);bq.exportProperty(ol.Object.prototype,'get',ol.Object.prototype.get);bq.exportProperty(ol.Object.prototype,'getKeys',ol.Object.prototype.getKeys);bq.exportProperty(ol.Object.prototype,'getProperties',ol.Object.prototype.getProperties);bq.exportProperty(ol.Object.prototype,'set',ol.Object.prototype.set);bq.exportProperty(ol.Object.prototype,'setProperties',ol.Object.prototype.setProperties);bq.exportProperty(ol.Object.prototype,'unset',ol.Object.prototype.unset);bq.exportProperty(ol.Object.Event.prototype,'key',ol.Object.Event.prototype.key);bq.exportProperty(ol.Object.Event.prototype,'oldValue',ol.Object.Event.prototype.oldValue);bq.exportSymbol('ol.Observable',ol.Observable,bp);bq.exportSymbol('ol.Observable.unByKey',ol.Observable.unByKey,bp);bq.exportProperty(ol.Observable.prototype,'changed',ol.Observable.prototype.changed);bq.exportProperty(ol.Observable.prototype,'dispatchEvent',ol.Observable.prototype.dispatchEvent);bq.exportProperty(ol.Observable.prototype,'getRevision',ol.Observable.prototype.getRevision);bq.exportProperty(ol.Observable.prototype,'on',ol.Observable.prototype.on);bq.exportProperty(ol.Observable.prototype,'once',ol.Observable.prototype.once);bq.exportProperty(ol.Observable.prototype,'un',ol.Observable.prototype.un);bq.exportSymbol('ol.Overlay',ol.Overlay,bp);bq.exportProperty(ol.Overlay.prototype,'getElement',ol.Overlay.prototype.getElement);bq.exportProperty(ol.Overlay.prototype,'getId',ol.Overlay.prototype.getId);bq.exportProperty(ol.Overlay.prototype,'getMap',ol.Overlay.prototype.getMap);bq.exportProperty(ol.Overlay.prototype,'getOffset',ol.Overlay.prototype.getOffset);bq.exportProperty(ol.Overlay.prototype,'getPosition',ol.Overlay.prototype.getPosition);bq.exportProperty(ol.Overlay.prototype,'getPositioning',ol.Overlay.prototype.getPositioning);bq.exportProperty(ol.Overlay.prototype,'setElement',ol.Overlay.prototype.setElement);bq.exportProperty(ol.Overlay.prototype,'setMap',ol.Overlay.prototype.setMap);bq.exportProperty(ol.Overlay.prototype,'setOffset',ol.Overlay.prototype.setOffset);bq.exportProperty(ol.Overlay.prototype,'setPosition',ol.Overlay.prototype.setPosition);bq.exportProperty(ol.Overlay.prototype,'setPositioning',ol.Overlay.prototype.setPositioning);bq.exportSymbol('ol.PluggableMap',ol.PluggableMap,bp);bq.exportProperty(ol.PluggableMap.prototype,'addControl',ol.PluggableMap.prototype.addControl);bq.exportProperty(ol.PluggableMap.prototype,'addInteraction',ol.PluggableMap.prototype.addInteraction);bq.exportProperty(ol.PluggableMap.prototype,'addLayer',ol.PluggableMap.prototype.addLayer);bq.exportProperty(ol.PluggableMap.prototype,'addOverlay',ol.PluggableMap.prototype.addOverlay);bq.exportProperty(ol.PluggableMap.prototype,'forEachFeatureAtPixel',ol.PluggableMap.prototype.forEachFeatureAtPixel);bq.exportProperty(ol.PluggableMap.prototype,'getFeaturesAtPixel',ol.PluggableMap.prototype.getFeaturesAtPixel);bq.exportProperty(ol.PluggableMap.prototype,'forEachLayerAtPixel',ol.PluggableMap.prototype.forEachLayerAtPixel);bq.exportProperty(ol.PluggableMap.prototype,'hasFeatureAtPixel',ol.PluggableMap.prototype.hasFeatureAtPixel);bq.exportProperty(ol.PluggableMap.prototype,'getEventCoordinate',ol.PluggableMap.prototype.getEventCoordinate);bq.exportProperty(ol.PluggableMap.prototype,'getEventPixel',ol.PluggableMap.prototype.getEventPixel);bq.exportProperty(ol.PluggableMap.prototype,'getTarget',ol.PluggableMap.prototype.getTarget);bq.exportProperty(ol.PluggableMap.prototype,'getTargetElement',ol.PluggableMap.prototype.getTargetElement);bq.exportProperty(ol.PluggableMap.prototype,'getCoordinateFromPixel',ol.PluggableMap.prototype.getCoordinateFromPixel);bq.exportProperty(ol.PluggableMap.prototype,'getControls',ol.PluggableMap.prototype.getControls);bq.exportProperty(ol.PluggableMap.prototype,'getOverlays',ol.PluggableMap.prototype.getOverlays);bq.exportProperty(ol.PluggableMap.prototype,'getOverlayById',ol.PluggableMap.prototype.getOverlayById);bq.exportProperty(ol.PluggableMap.prototype,'getInteractions',ol.PluggableMap.prototype.getInteractions);bq.exportProperty(ol.PluggableMap.prototype,'getLayerGroup',ol.PluggableMap.prototype.getLayerGroup);bq.exportProperty(ol.PluggableMap.prototype,'getLayers',ol.PluggableMap.prototype.getLayers);bq.exportProperty(ol.PluggableMap.prototype,'getPixelFromCoordinate',ol.PluggableMap.prototype.getPixelFromCoordinate);bq.exportProperty(ol.PluggableMap.prototype,'getSize',ol.PluggableMap.prototype.getSize);bq.exportProperty(ol.PluggableMap.prototype,'getView',ol.PluggableMap.prototype.getView);bq.exportProperty(ol.PluggableMap.prototype,'getViewport',ol.PluggableMap.prototype.getViewport);bq.exportProperty(ol.PluggableMap.prototype,'renderSync',ol.PluggableMap.prototype.renderSync);bq.exportProperty(ol.PluggableMap.prototype,'render',ol.PluggableMap.prototype.render);bq.exportProperty(ol.PluggableMap.prototype,'removeControl',ol.PluggableMap.prototype.removeControl);bq.exportProperty(ol.PluggableMap.prototype,'removeInteraction',ol.PluggableMap.prototype.removeInteraction);bq.exportProperty(ol.PluggableMap.prototype,'removeLayer',ol.PluggableMap.prototype.removeLayer);bq.exportProperty(ol.PluggableMap.prototype,'removeOverlay',ol.PluggableMap.prototype.removeOverlay);bq.exportProperty(ol.PluggableMap.prototype,'setLayerGroup',ol.PluggableMap.prototype.setLayerGroup);bq.exportProperty(ol.PluggableMap.prototype,'setSize',ol.PluggableMap.prototype.setSize);bq.exportProperty(ol.PluggableMap.prototype,'setTarget',ol.PluggableMap.prototype.setTarget);bq.exportProperty(ol.PluggableMap.prototype,'setView',ol.PluggableMap.prototype.setView);bq.exportProperty(ol.PluggableMap.prototype,'updateSize',ol.PluggableMap.prototype.updateSize);bq.exportSymbol('ol.proj.METERS_PER_UNIT',ol.proj.METERS_PER_UNIT,bp);bq.exportSymbol('ol.proj.setProj4',ol.proj.setProj4,bp);bq.exportSymbol('ol.proj.getPointResolution',ol.proj.getPointResolution,bp);bq.exportSymbol('ol.proj.addEquivalentProjections',ol.proj.addEquivalentProjections,bp);bq.exportSymbol('ol.proj.addProjection',ol.proj.addProjection,bp);bq.exportSymbol('ol.proj.addCoordinateTransforms',ol.proj.addCoordinateTransforms,bp);bq.exportSymbol('ol.proj.fromLonLat',ol.proj.fromLonLat,bp);bq.exportSymbol('ol.proj.toLonLat',ol.proj.toLonLat,bp);bq.exportSymbol('ol.proj.get',ol.proj.get,bp);bq.exportSymbol('ol.proj.equivalent',ol.proj.equivalent,bp);bq.exportSymbol('ol.proj.getTransform',ol.proj.getTransform,bp);bq.exportSymbol('ol.proj.transform',ol.proj.transform,bp);bq.exportSymbol('ol.proj.transformExtent',ol.proj.transformExtent,bp);bq.exportSymbol('ol.render.toContext',ol.render.toContext,bp);bq.exportSymbol('ol.size.toSize',ol.size.toSize,bp);bq.exportSymbol('ol.Sphere',ol.Sphere,bp);bq.exportProperty(ol.Sphere.prototype,'geodesicArea',ol.Sphere.prototype.geodesicArea);bq.exportProperty(ol.Sphere.prototype,'haversineDistance',ol.Sphere.prototype.haversineDistance);bq.exportSymbol('ol.Sphere.getLength',ol.Sphere.getLength,bp);bq.exportSymbol('ol.Sphere.getArea',ol.Sphere.getArea,bp);bq.exportSymbol('ol.style.iconImageCache',ol.style.iconImageCache,bp);bq.exportProperty(ol.Tile.prototype,'getTileCoord',ol.Tile.prototype.getTileCoord);bq.exportProperty(ol.Tile.prototype,'load',ol.Tile.prototype.load);bq.exportSymbol('ol.tilegrid.createXYZ',ol.tilegrid.createXYZ,bp);bq.exportProperty(ol.VectorTile.prototype,'getExtent',ol.VectorTile.prototype.getExtent);bq.exportProperty(ol.VectorTile.prototype,'getFormat',ol.VectorTile.prototype.getFormat);bq.exportProperty(ol.VectorTile.prototype,'getFeatures',ol.VectorTile.prototype.getFeatures);bq.exportProperty(ol.VectorTile.prototype,'getProjection',ol.VectorTile.prototype.getProjection);bq.exportProperty(ol.VectorTile.prototype,'setExtent',ol.VectorTile.prototype.setExtent);bq.exportProperty(ol.VectorTile.prototype,'setFeatures',ol.VectorTile.prototype.setFeatures);bq.exportProperty(ol.VectorTile.prototype,'setProjection',ol.VectorTile.prototype.setProjection);bq.exportProperty(ol.VectorTile.prototype,'setLoader',ol.VectorTile.prototype.setLoader);bq.exportSymbol('ol.View',ol.View,bp);bq.exportProperty(ol.View.prototype,'animate',ol.View.prototype.animate);bq.exportProperty(ol.View.prototype,'getAnimating',ol.View.prototype.getAnimating);bq.exportProperty(ol.View.prototype,'getInteracting',ol.View.prototype.getInteracting);bq.exportProperty(ol.View.prototype,'cancelAnimations',ol.View.prototype.cancelAnimations);bq.exportProperty(ol.View.prototype,'constrainCenter',ol.View.prototype.constrainCenter);bq.exportProperty(ol.View.prototype,'constrainResolution',ol.View.prototype.constrainResolution);bq.exportProperty(ol.View.prototype,'constrainRotation',ol.View.prototype.constrainRotation);bq.exportProperty(ol.View.prototype,'getCenter',ol.View.prototype.getCenter);bq.exportProperty(ol.View.prototype,'calculateExtent',ol.View.prototype.calculateExtent);bq.exportProperty(ol.View.prototype,'getMaxResolution',ol.View.prototype.getMaxResolution);bq.exportProperty(ol.View.prototype,'getMinResolution',ol.View.prototype.getMinResolution);bq.exportProperty(ol.View.prototype,'getMaxZoom',ol.View.prototype.getMaxZoom);bq.exportProperty(ol.View.prototype,'setMaxZoom',ol.View.prototype.setMaxZoom);bq.exportProperty(ol.View.prototype,'getMinZoom',ol.View.prototype.getMinZoom);bq.exportProperty(ol.View.prototype,'setMinZoom',ol.View.prototype.setMinZoom);bq.exportProperty(ol.View.prototype,'getProjection',ol.View.prototype.getProjection);bq.exportProperty(ol.View.prototype,'getResolution',ol.View.prototype.getResolution);bq.exportProperty(ol.View.prototype,'getResolutions',ol.View.prototype.getResolutions);bq.exportProperty(ol.View.prototype,'getResolutionForExtent',ol.View.prototype.getResolutionForExtent);bq.exportProperty(ol.View.prototype,'getRotation',ol.View.prototype.getRotation);bq.exportProperty(ol.View.prototype,'getZoom',ol.View.prototype.getZoom);bq.exportProperty(ol.View.prototype,'getZoomForResolution',ol.View.prototype.getZoomForResolution);bq.exportProperty(ol.View.prototype,'getResolutionForZoom',ol.View.prototype.getResolutionForZoom);bq.exportProperty(ol.View.prototype,'fit',ol.View.prototype.fit);bq.exportProperty(ol.View.prototype,'centerOn',ol.View.prototype.centerOn);bq.exportProperty(ol.View.prototype,'rotate',ol.View.prototype.rotate);bq.exportProperty(ol.View.prototype,'setCenter',ol.View.prototype.setCenter);bq.exportProperty(ol.View.prototype,'setResolution',ol.View.prototype.setResolution);bq.exportProperty(ol.View.prototype,'setRotation',ol.View.prototype.setRotation);bq.exportProperty(ol.View.prototype,'setZoom',ol.View.prototype.setZoom);bq.exportSymbol('ol.xml.getAllTextContent',ol.xml.getAllTextContent,bp);bq.exportSymbol('ol.xml.parse',ol.xml.parse,bp);bq.exportProperty(ol.webgl.Context.prototype,'getGL',ol.webgl.Context.prototype.getGL);bq.exportProperty(ol.webgl.Context.prototype,'useProgram',ol.webgl.Context.prototype.useProgram);bq.exportSymbol('ol.tilegrid.TileGrid',ol.tilegrid.TileGrid,bp);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'forEachTileCoord',ol.tilegrid.TileGrid.prototype.forEachTileCoord);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getMaxZoom',ol.tilegrid.TileGrid.prototype.getMaxZoom);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getMinZoom',ol.tilegrid.TileGrid.prototype.getMinZoom);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getOrigin',ol.tilegrid.TileGrid.prototype.getOrigin);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getResolution',ol.tilegrid.TileGrid.prototype.getResolution);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getResolutions',ol.tilegrid.TileGrid.prototype.getResolutions);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getTileCoordExtent',ol.tilegrid.TileGrid.prototype.getTileCoordExtent);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getTileCoordForCoordAndResolution',ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getTileCoordForCoordAndZ',ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getTileSize',ol.tilegrid.TileGrid.prototype.getTileSize);bq.exportProperty(ol.tilegrid.TileGrid.prototype,'getZForResolution',ol.tilegrid.TileGrid.prototype.getZForResolution);bq.exportSymbol('ol.tilegrid.WMTS',ol.tilegrid.WMTS,bp);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getMatrixIds',ol.tilegrid.WMTS.prototype.getMatrixIds);bq.exportSymbol('ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet',ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet,bp);bq.exportSymbol('ol.style.AtlasManager',ol.style.AtlasManager,bp);bq.exportSymbol('ol.style.Circle',ol.style.Circle,bp);bq.exportProperty(ol.style.Circle.prototype,'setRadius',ol.style.Circle.prototype.setRadius);bq.exportSymbol('ol.style.Fill',ol.style.Fill,bp);bq.exportProperty(ol.style.Fill.prototype,'clone',ol.style.Fill.prototype.clone);bq.exportProperty(ol.style.Fill.prototype,'getColor',ol.style.Fill.prototype.getColor);bq.exportProperty(ol.style.Fill.prototype,'setColor',ol.style.Fill.prototype.setColor);bq.exportSymbol('ol.style.Icon',ol.style.Icon,bp);bq.exportProperty(ol.style.Icon.prototype,'clone',ol.style.Icon.prototype.clone);bq.exportProperty(ol.style.Icon.prototype,'getAnchor',ol.style.Icon.prototype.getAnchor);bq.exportProperty(ol.style.Icon.prototype,'getColor',ol.style.Icon.prototype.getColor);bq.exportProperty(ol.style.Icon.prototype,'getImage',ol.style.Icon.prototype.getImage);bq.exportProperty(ol.style.Icon.prototype,'getOrigin',ol.style.Icon.prototype.getOrigin);bq.exportProperty(ol.style.Icon.prototype,'getSrc',ol.style.Icon.prototype.getSrc);bq.exportProperty(ol.style.Icon.prototype,'getSize',ol.style.Icon.prototype.getSize);bq.exportProperty(ol.style.Icon.prototype,'load',ol.style.Icon.prototype.load);bq.exportProperty(ol.style.IconImageCache.prototype,'setSize',ol.style.IconImageCache.prototype.setSize);bq.exportSymbol('ol.style.Image',ol.style.Image,bp);bq.exportProperty(ol.style.Image.prototype,'getOpacity',ol.style.Image.prototype.getOpacity);bq.exportProperty(ol.style.Image.prototype,'getRotateWithView',ol.style.Image.prototype.getRotateWithView);bq.exportProperty(ol.style.Image.prototype,'getRotation',ol.style.Image.prototype.getRotation);bq.exportProperty(ol.style.Image.prototype,'getScale',ol.style.Image.prototype.getScale);bq.exportProperty(ol.style.Image.prototype,'getSnapToPixel',ol.style.Image.prototype.getSnapToPixel);bq.exportProperty(ol.style.Image.prototype,'setOpacity',ol.style.Image.prototype.setOpacity);bq.exportProperty(ol.style.Image.prototype,'setRotation',ol.style.Image.prototype.setRotation);bq.exportProperty(ol.style.Image.prototype,'setScale',ol.style.Image.prototype.setScale);bq.exportSymbol('ol.style.RegularShape',ol.style.RegularShape,bp);bq.exportProperty(ol.style.RegularShape.prototype,'clone',ol.style.RegularShape.prototype.clone);bq.exportProperty(ol.style.RegularShape.prototype,'getAnchor',ol.style.RegularShape.prototype.getAnchor);bq.exportProperty(ol.style.RegularShape.prototype,'getAngle',ol.style.RegularShape.prototype.getAngle);bq.exportProperty(ol.style.RegularShape.prototype,'getFill',ol.style.RegularShape.prototype.getFill);bq.exportProperty(ol.style.RegularShape.prototype,'getImage',ol.style.RegularShape.prototype.getImage);bq.exportProperty(ol.style.RegularShape.prototype,'getOrigin',ol.style.RegularShape.prototype.getOrigin);bq.exportProperty(ol.style.RegularShape.prototype,'getPoints',ol.style.RegularShape.prototype.getPoints);bq.exportProperty(ol.style.RegularShape.prototype,'getRadius',ol.style.RegularShape.prototype.getRadius);bq.exportProperty(ol.style.RegularShape.prototype,'getRadius2',ol.style.RegularShape.prototype.getRadius2);bq.exportProperty(ol.style.RegularShape.prototype,'getSize',ol.style.RegularShape.prototype.getSize);bq.exportProperty(ol.style.RegularShape.prototype,'getStroke',ol.style.RegularShape.prototype.getStroke);bq.exportSymbol('ol.style.Stroke',ol.style.Stroke,bp);bq.exportProperty(ol.style.Stroke.prototype,'clone',ol.style.Stroke.prototype.clone);bq.exportProperty(ol.style.Stroke.prototype,'getColor',ol.style.Stroke.prototype.getColor);bq.exportProperty(ol.style.Stroke.prototype,'getLineCap',ol.style.Stroke.prototype.getLineCap);bq.exportProperty(ol.style.Stroke.prototype,'getLineDash',ol.style.Stroke.prototype.getLineDash);bq.exportProperty(ol.style.Stroke.prototype,'getLineDashOffset',ol.style.Stroke.prototype.getLineDashOffset);bq.exportProperty(ol.style.Stroke.prototype,'getLineJoin',ol.style.Stroke.prototype.getLineJoin);bq.exportProperty(ol.style.Stroke.prototype,'getMiterLimit',ol.style.Stroke.prototype.getMiterLimit);bq.exportProperty(ol.style.Stroke.prototype,'getWidth',ol.style.Stroke.prototype.getWidth);bq.exportProperty(ol.style.Stroke.prototype,'setColor',ol.style.Stroke.prototype.setColor);bq.exportProperty(ol.style.Stroke.prototype,'setLineCap',ol.style.Stroke.prototype.setLineCap);bq.exportProperty(ol.style.Stroke.prototype,'setLineDash',ol.style.Stroke.prototype.setLineDash);bq.exportProperty(ol.style.Stroke.prototype,'setLineDashOffset',ol.style.Stroke.prototype.setLineDashOffset);bq.exportProperty(ol.style.Stroke.prototype,'setLineJoin',ol.style.Stroke.prototype.setLineJoin);bq.exportProperty(ol.style.Stroke.prototype,'setMiterLimit',ol.style.Stroke.prototype.setMiterLimit);bq.exportProperty(ol.style.Stroke.prototype,'setWidth',ol.style.Stroke.prototype.setWidth);bq.exportSymbol('ol.style.Style',ol.style.Style,bp);bq.exportProperty(ol.style.Style.prototype,'clone',ol.style.Style.prototype.clone);bq.exportProperty(ol.style.Style.prototype,'getRenderer',ol.style.Style.prototype.getRenderer);bq.exportProperty(ol.style.Style.prototype,'setRenderer',ol.style.Style.prototype.setRenderer);bq.exportProperty(ol.style.Style.prototype,'getGeometry',ol.style.Style.prototype.getGeometry);bq.exportProperty(ol.style.Style.prototype,'getGeometryFunction',ol.style.Style.prototype.getGeometryFunction);bq.exportProperty(ol.style.Style.prototype,'getFill',ol.style.Style.prototype.getFill);bq.exportProperty(ol.style.Style.prototype,'setFill',ol.style.Style.prototype.setFill);bq.exportProperty(ol.style.Style.prototype,'getImage',ol.style.Style.prototype.getImage);bq.exportProperty(ol.style.Style.prototype,'setImage',ol.style.Style.prototype.setImage);bq.exportProperty(ol.style.Style.prototype,'getStroke',ol.style.Style.prototype.getStroke);bq.exportProperty(ol.style.Style.prototype,'setStroke',ol.style.Style.prototype.setStroke);bq.exportProperty(ol.style.Style.prototype,'getText',ol.style.Style.prototype.getText);bq.exportProperty(ol.style.Style.prototype,'setText',ol.style.Style.prototype.setText);bq.exportProperty(ol.style.Style.prototype,'getZIndex',ol.style.Style.prototype.getZIndex);bq.exportProperty(ol.style.Style.prototype,'setGeometry',ol.style.Style.prototype.setGeometry);bq.exportProperty(ol.style.Style.prototype,'setZIndex',ol.style.Style.prototype.setZIndex);bq.exportSymbol('ol.style.Text',ol.style.Text,bp);bq.exportProperty(ol.style.Text.prototype,'clone',ol.style.Text.prototype.clone);bq.exportProperty(ol.style.Text.prototype,'getOverflow',ol.style.Text.prototype.getOverflow);bq.exportProperty(ol.style.Text.prototype,'getFont',ol.style.Text.prototype.getFont);bq.exportProperty(ol.style.Text.prototype,'getMaxAngle',ol.style.Text.prototype.getMaxAngle);bq.exportProperty(ol.style.Text.prototype,'getPlacement',ol.style.Text.prototype.getPlacement);bq.exportProperty(ol.style.Text.prototype,'getOffsetX',ol.style.Text.prototype.getOffsetX);bq.exportProperty(ol.style.Text.prototype,'getOffsetY',ol.style.Text.prototype.getOffsetY);bq.exportProperty(ol.style.Text.prototype,'getFill',ol.style.Text.prototype.getFill);bq.exportProperty(ol.style.Text.prototype,'getRotateWithView',ol.style.Text.prototype.getRotateWithView);bq.exportProperty(ol.style.Text.prototype,'getRotation',ol.style.Text.prototype.getRotation);bq.exportProperty(ol.style.Text.prototype,'getScale',ol.style.Text.prototype.getScale);bq.exportProperty(ol.style.Text.prototype,'getStroke',ol.style.Text.prototype.getStroke);bq.exportProperty(ol.style.Text.prototype,'getText',ol.style.Text.prototype.getText);bq.exportProperty(ol.style.Text.prototype,'getTextAlign',ol.style.Text.prototype.getTextAlign);bq.exportProperty(ol.style.Text.prototype,'getTextBaseline',ol.style.Text.prototype.getTextBaseline);bq.exportProperty(ol.style.Text.prototype,'getBackgroundFill',ol.style.Text.prototype.getBackgroundFill);bq.exportProperty(ol.style.Text.prototype,'getBackgroundStroke',ol.style.Text.prototype.getBackgroundStroke);bq.exportProperty(ol.style.Text.prototype,'getPadding',ol.style.Text.prototype.getPadding);bq.exportProperty(ol.style.Text.prototype,'setOverflow',ol.style.Text.prototype.setOverflow);bq.exportProperty(ol.style.Text.prototype,'setFont',ol.style.Text.prototype.setFont);bq.exportProperty(ol.style.Text.prototype,'setMaxAngle',ol.style.Text.prototype.setMaxAngle);bq.exportProperty(ol.style.Text.prototype,'setOffsetX',ol.style.Text.prototype.setOffsetX);bq.exportProperty(ol.style.Text.prototype,'setOffsetY',ol.style.Text.prototype.setOffsetY);bq.exportProperty(ol.style.Text.prototype,'setPlacement',ol.style.Text.prototype.setPlacement);bq.exportProperty(ol.style.Text.prototype,'setFill',ol.style.Text.prototype.setFill);bq.exportProperty(ol.style.Text.prototype,'setRotation',ol.style.Text.prototype.setRotation);bq.exportProperty(ol.style.Text.prototype,'setScale',ol.style.Text.prototype.setScale);bq.exportProperty(ol.style.Text.prototype,'setStroke',ol.style.Text.prototype.setStroke);bq.exportProperty(ol.style.Text.prototype,'setText',ol.style.Text.prototype.setText);bq.exportProperty(ol.style.Text.prototype,'setTextAlign',ol.style.Text.prototype.setTextAlign);bq.exportProperty(ol.style.Text.prototype,'setTextBaseline',ol.style.Text.prototype.setTextBaseline);bq.exportProperty(ol.style.Text.prototype,'setBackgroundFill',ol.style.Text.prototype.setBackgroundFill);bq.exportProperty(ol.style.Text.prototype,'setBackgroundStroke',ol.style.Text.prototype.setBackgroundStroke);bq.exportProperty(ol.style.Text.prototype,'setPadding',ol.style.Text.prototype.setPadding);bq.exportSymbol('ol.source.BingMaps',ol.source.BingMaps,bp);bq.exportSymbol('ol.source.BingMaps.TOS_ATTRIBUTION',ol.source.BingMaps.TOS_ATTRIBUTION,bp);bq.exportProperty(ol.source.BingMaps.prototype,'getApiKey',ol.source.BingMaps.prototype.getApiKey);bq.exportProperty(ol.source.BingMaps.prototype,'getImagerySet',ol.source.BingMaps.prototype.getImagerySet);bq.exportSymbol('ol.source.CartoDB',ol.source.CartoDB,bp);bq.exportProperty(ol.source.CartoDB.prototype,'getConfig',ol.source.CartoDB.prototype.getConfig);bq.exportProperty(ol.source.CartoDB.prototype,'updateConfig',ol.source.CartoDB.prototype.updateConfig);bq.exportProperty(ol.source.CartoDB.prototype,'setConfig',ol.source.CartoDB.prototype.setConfig);bq.exportSymbol('ol.source.Cluster',ol.source.Cluster,bp);bq.exportProperty(ol.source.Cluster.prototype,'getDistance',ol.source.Cluster.prototype.getDistance);bq.exportProperty(ol.source.Cluster.prototype,'getSource',ol.source.Cluster.prototype.getSource);bq.exportProperty(ol.source.Cluster.prototype,'setDistance',ol.source.Cluster.prototype.setDistance);bq.exportSymbol('ol.source.Image',ol.source.Image,bp);bq.exportProperty(ol.source.Image.Event.prototype,'image',ol.source.Image.Event.prototype.image);bq.exportSymbol('ol.source.ImageArcGISRest',ol.source.ImageArcGISRest,bp);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getParams',ol.source.ImageArcGISRest.prototype.getParams);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getImageLoadFunction',ol.source.ImageArcGISRest.prototype.getImageLoadFunction);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getUrl',ol.source.ImageArcGISRest.prototype.getUrl);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'setImageLoadFunction',ol.source.ImageArcGISRest.prototype.setImageLoadFunction);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'setUrl',ol.source.ImageArcGISRest.prototype.setUrl);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'updateParams',ol.source.ImageArcGISRest.prototype.updateParams);bq.exportSymbol('ol.source.ImageCanvas',ol.source.ImageCanvas,bp);bq.exportSymbol('ol.source.ImageMapGuide',ol.source.ImageMapGuide,bp);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getParams',ol.source.ImageMapGuide.prototype.getParams);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getImageLoadFunction',ol.source.ImageMapGuide.prototype.getImageLoadFunction);bq.exportProperty(ol.source.ImageMapGuide.prototype,'updateParams',ol.source.ImageMapGuide.prototype.updateParams);bq.exportProperty(ol.source.ImageMapGuide.prototype,'setImageLoadFunction',ol.source.ImageMapGuide.prototype.setImageLoadFunction);bq.exportSymbol('ol.source.ImageStatic',ol.source.ImageStatic,bp);bq.exportSymbol('ol.source.ImageVector',ol.source.ImageVector,bp);bq.exportProperty(ol.source.ImageVector.prototype,'getSource',ol.source.ImageVector.prototype.getSource);bq.exportProperty(ol.source.ImageVector.prototype,'getStyle',ol.source.ImageVector.prototype.getStyle);bq.exportProperty(ol.source.ImageVector.prototype,'getStyleFunction',ol.source.ImageVector.prototype.getStyleFunction);bq.exportProperty(ol.source.ImageVector.prototype,'setStyle',ol.source.ImageVector.prototype.setStyle);bq.exportSymbol('ol.source.ImageWMS',ol.source.ImageWMS,bp);bq.exportProperty(ol.source.ImageWMS.prototype,'getGetFeatureInfoUrl',ol.source.ImageWMS.prototype.getGetFeatureInfoUrl);bq.exportProperty(ol.source.ImageWMS.prototype,'getParams',ol.source.ImageWMS.prototype.getParams);bq.exportProperty(ol.source.ImageWMS.prototype,'getImageLoadFunction',ol.source.ImageWMS.prototype.getImageLoadFunction);bq.exportProperty(ol.source.ImageWMS.prototype,'getUrl',ol.source.ImageWMS.prototype.getUrl);bq.exportProperty(ol.source.ImageWMS.prototype,'setImageLoadFunction',ol.source.ImageWMS.prototype.setImageLoadFunction);bq.exportProperty(ol.source.ImageWMS.prototype,'setUrl',ol.source.ImageWMS.prototype.setUrl);bq.exportProperty(ol.source.ImageWMS.prototype,'updateParams',ol.source.ImageWMS.prototype.updateParams);bq.exportSymbol('ol.source.OSM',ol.source.OSM,bp);bq.exportSymbol('ol.source.OSM.ATTRIBUTION',ol.source.OSM.ATTRIBUTION,bp);bq.exportSymbol('ol.source.Raster',ol.source.Raster,bp);bq.exportProperty(ol.source.Raster.prototype,'setOperation',ol.source.Raster.prototype.setOperation);bq.exportProperty(ol.source.Raster.Event.prototype,'extent',ol.source.Raster.Event.prototype.extent);bq.exportProperty(ol.source.Raster.Event.prototype,'resolution',ol.source.Raster.Event.prototype.resolution);bq.exportProperty(ol.source.Raster.Event.prototype,'data',ol.source.Raster.Event.prototype.data);bq.exportSymbol('ol.source.Source',ol.source.Source,bp);bq.exportProperty(ol.source.Source.prototype,'getAttributions',ol.source.Source.prototype.getAttributions);bq.exportProperty(ol.source.Source.prototype,'getLogo',ol.source.Source.prototype.getLogo);bq.exportProperty(ol.source.Source.prototype,'getProjection',ol.source.Source.prototype.getProjection);bq.exportProperty(ol.source.Source.prototype,'getState',ol.source.Source.prototype.getState);bq.exportProperty(ol.source.Source.prototype,'refresh',ol.source.Source.prototype.refresh);bq.exportProperty(ol.source.Source.prototype,'setAttributions',ol.source.Source.prototype.setAttributions);bq.exportSymbol('ol.source.Stamen',ol.source.Stamen,bp);bq.exportSymbol('ol.source.Tile',ol.source.Tile,bp);bq.exportProperty(ol.source.Tile.prototype,'getTileGrid',ol.source.Tile.prototype.getTileGrid);bq.exportProperty(ol.source.Tile.Event.prototype,'tile',ol.source.Tile.Event.prototype.tile);bq.exportSymbol('ol.source.TileArcGISRest',ol.source.TileArcGISRest,bp);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getParams',ol.source.TileArcGISRest.prototype.getParams);bq.exportProperty(ol.source.TileArcGISRest.prototype,'updateParams',ol.source.TileArcGISRest.prototype.updateParams);bq.exportSymbol('ol.source.TileDebug',ol.source.TileDebug,bp);bq.exportSymbol('ol.source.TileImage',ol.source.TileImage,bp);bq.exportProperty(ol.source.TileImage.prototype,'setRenderReprojectionEdges',ol.source.TileImage.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.TileImage.prototype,'setTileGridForProjection',ol.source.TileImage.prototype.setTileGridForProjection);bq.exportSymbol('ol.source.TileJSON',ol.source.TileJSON,bp);bq.exportProperty(ol.source.TileJSON.prototype,'getTileJSON',ol.source.TileJSON.prototype.getTileJSON);bq.exportSymbol('ol.source.TileUTFGrid',ol.source.TileUTFGrid,bp);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getTemplate',ol.source.TileUTFGrid.prototype.getTemplate);bq.exportProperty(ol.source.TileUTFGrid.prototype,'forDataAtCoordinateAndResolution',ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution);bq.exportSymbol('ol.source.TileWMS',ol.source.TileWMS,bp);bq.exportProperty(ol.source.TileWMS.prototype,'getGetFeatureInfoUrl',ol.source.TileWMS.prototype.getGetFeatureInfoUrl);bq.exportProperty(ol.source.TileWMS.prototype,'getParams',ol.source.TileWMS.prototype.getParams);bq.exportProperty(ol.source.TileWMS.prototype,'updateParams',ol.source.TileWMS.prototype.updateParams);bq.exportProperty(ol.source.UrlTile.prototype,'getTileLoadFunction',ol.source.UrlTile.prototype.getTileLoadFunction);bq.exportProperty(ol.source.UrlTile.prototype,'getTileUrlFunction',ol.source.UrlTile.prototype.getTileUrlFunction);bq.exportProperty(ol.source.UrlTile.prototype,'getUrls',ol.source.UrlTile.prototype.getUrls);bq.exportProperty(ol.source.UrlTile.prototype,'setTileLoadFunction',ol.source.UrlTile.prototype.setTileLoadFunction);bq.exportProperty(ol.source.UrlTile.prototype,'setTileUrlFunction',ol.source.UrlTile.prototype.setTileUrlFunction);bq.exportProperty(ol.source.UrlTile.prototype,'setUrl',ol.source.UrlTile.prototype.setUrl);bq.exportProperty(ol.source.UrlTile.prototype,'setUrls',ol.source.UrlTile.prototype.setUrls);bq.exportSymbol('ol.source.Vector',ol.source.Vector,bp);bq.exportProperty(ol.source.Vector.prototype,'addFeature',ol.source.Vector.prototype.addFeature);bq.exportProperty(ol.source.Vector.prototype,'addFeatures',ol.source.Vector.prototype.addFeatures);bq.exportProperty(ol.source.Vector.prototype,'clear',ol.source.Vector.prototype.clear);bq.exportProperty(ol.source.Vector.prototype,'forEachFeature',ol.source.Vector.prototype.forEachFeature);bq.exportProperty(ol.source.Vector.prototype,'forEachFeatureInExtent',ol.source.Vector.prototype.forEachFeatureInExtent);bq.exportProperty(ol.source.Vector.prototype,'forEachFeatureIntersectingExtent',ol.source.Vector.prototype.forEachFeatureIntersectingExtent);bq.exportProperty(ol.source.Vector.prototype,'getFeaturesCollection',ol.source.Vector.prototype.getFeaturesCollection);bq.exportProperty(ol.source.Vector.prototype,'getFeatures',ol.source.Vector.prototype.getFeatures);bq.exportProperty(ol.source.Vector.prototype,'getFeaturesAtCoordinate',ol.source.Vector.prototype.getFeaturesAtCoordinate);bq.exportProperty(ol.source.Vector.prototype,'getFeaturesInExtent',ol.source.Vector.prototype.getFeaturesInExtent);bq.exportProperty(ol.source.Vector.prototype,'getClosestFeatureToCoordinate',ol.source.Vector.prototype.getClosestFeatureToCoordinate);bq.exportProperty(ol.source.Vector.prototype,'getExtent',ol.source.Vector.prototype.getExtent);bq.exportProperty(ol.source.Vector.prototype,'getFeatureById',ol.source.Vector.prototype.getFeatureById);bq.exportProperty(ol.source.Vector.prototype,'getFormat',ol.source.Vector.prototype.getFormat);bq.exportProperty(ol.source.Vector.prototype,'getUrl',ol.source.Vector.prototype.getUrl);bq.exportProperty(ol.source.Vector.prototype,'removeLoadedExtent',ol.source.Vector.prototype.removeLoadedExtent);bq.exportProperty(ol.source.Vector.prototype,'removeFeature',ol.source.Vector.prototype.removeFeature);bq.exportProperty(ol.source.Vector.prototype,'setLoader',ol.source.Vector.prototype.setLoader);bq.exportProperty(ol.source.Vector.Event.prototype,'feature',ol.source.Vector.Event.prototype.feature);bq.exportSymbol('ol.source.VectorTile',ol.source.VectorTile,bp);bq.exportProperty(ol.source.VectorTile.prototype,'clear',ol.source.VectorTile.prototype.clear);bq.exportSymbol('ol.source.WMTS',ol.source.WMTS,bp);bq.exportProperty(ol.source.WMTS.prototype,'getDimensions',ol.source.WMTS.prototype.getDimensions);bq.exportProperty(ol.source.WMTS.prototype,'getFormat',ol.source.WMTS.prototype.getFormat);bq.exportProperty(ol.source.WMTS.prototype,'getLayer',ol.source.WMTS.prototype.getLayer);bq.exportProperty(ol.source.WMTS.prototype,'getMatrixSet',ol.source.WMTS.prototype.getMatrixSet);bq.exportProperty(ol.source.WMTS.prototype,'getRequestEncoding',ol.source.WMTS.prototype.getRequestEncoding);bq.exportProperty(ol.source.WMTS.prototype,'getStyle',ol.source.WMTS.prototype.getStyle);bq.exportProperty(ol.source.WMTS.prototype,'getVersion',ol.source.WMTS.prototype.getVersion);bq.exportProperty(ol.source.WMTS.prototype,'updateDimensions',ol.source.WMTS.prototype.updateDimensions);bq.exportSymbol('ol.source.WMTS.optionsFromCapabilities',ol.source.WMTS.optionsFromCapabilities,bp);bq.exportSymbol('ol.source.XYZ',ol.source.XYZ,bp);bq.exportSymbol('ol.source.Zoomify',ol.source.Zoomify,bp);bq.exportSymbol('ol.renderer.webgl.ImageLayer',ol.renderer.webgl.ImageLayer,bp);bq.exportSymbol('ol.renderer.webgl.Map',ol.renderer.webgl.Map,bp);bq.exportSymbol('ol.renderer.webgl.TileLayer',ol.renderer.webgl.TileLayer,bp);bq.exportSymbol('ol.renderer.webgl.VectorLayer',ol.renderer.webgl.VectorLayer,bp);bq.exportSymbol('ol.renderer.canvas.ImageLayer',ol.renderer.canvas.ImageLayer,bp);bq.exportSymbol('ol.renderer.canvas.Map',ol.renderer.canvas.Map,bp);bq.exportSymbol('ol.renderer.canvas.TileLayer',ol.renderer.canvas.TileLayer,bp);bq.exportSymbol('ol.renderer.canvas.VectorLayer',ol.renderer.canvas.VectorLayer,bp);bq.exportSymbol('ol.renderer.canvas.VectorTileLayer',ol.renderer.canvas.VectorTileLayer,bp);bq.exportProperty(ol.render.Event.prototype,'vectorContext',ol.render.Event.prototype.vectorContext);bq.exportProperty(ol.render.Event.prototype,'frameState',ol.render.Event.prototype.frameState);bq.exportProperty(ol.render.Event.prototype,'context',ol.render.Event.prototype.context);bq.exportProperty(ol.render.Event.prototype,'glContext',ol.render.Event.prototype.glContext);bq.exportProperty(ol.render.Feature.prototype,'get',ol.render.Feature.prototype.get);bq.exportProperty(ol.render.Feature.prototype,'getExtent',ol.render.Feature.prototype.getExtent);bq.exportProperty(ol.render.Feature.prototype,'getId',ol.render.Feature.prototype.getId);bq.exportProperty(ol.render.Feature.prototype,'getGeometry',ol.render.Feature.prototype.getGeometry);bq.exportProperty(ol.render.Feature.prototype,'getProperties',ol.render.Feature.prototype.getProperties);bq.exportProperty(ol.render.Feature.prototype,'getType',ol.render.Feature.prototype.getType);bq.exportSymbol('ol.render.VectorContext',ol.render.VectorContext,bp);bq.exportProperty(ol.render.webgl.Immediate.prototype,'setStyle',ol.render.webgl.Immediate.prototype.setStyle);bq.exportProperty(ol.render.webgl.Immediate.prototype,'drawGeometry',ol.render.webgl.Immediate.prototype.drawGeometry);bq.exportProperty(ol.render.webgl.Immediate.prototype,'drawFeature',ol.render.webgl.Immediate.prototype.drawFeature);bq.exportProperty(ol.render.canvas.Immediate.prototype,'drawCircle',ol.render.canvas.Immediate.prototype.drawCircle);bq.exportProperty(ol.render.canvas.Immediate.prototype,'setStyle',ol.render.canvas.Immediate.prototype.setStyle);bq.exportProperty(ol.render.canvas.Immediate.prototype,'drawGeometry',ol.render.canvas.Immediate.prototype.drawGeometry);bq.exportProperty(ol.render.canvas.Immediate.prototype,'drawFeature',ol.render.canvas.Immediate.prototype.drawFeature);bq.exportSymbol('ol.proj.common.add',ol.proj.common.add,bp);bq.exportSymbol('ol.proj.Projection',ol.proj.Projection,bp);bq.exportProperty(ol.proj.Projection.prototype,'getCode',ol.proj.Projection.prototype.getCode);bq.exportProperty(ol.proj.Projection.prototype,'getExtent',ol.proj.Projection.prototype.getExtent);bq.exportProperty(ol.proj.Projection.prototype,'getUnits',ol.proj.Projection.prototype.getUnits);bq.exportProperty(ol.proj.Projection.prototype,'getMetersPerUnit',ol.proj.Projection.prototype.getMetersPerUnit);bq.exportProperty(ol.proj.Projection.prototype,'getWorldExtent',ol.proj.Projection.prototype.getWorldExtent);bq.exportProperty(ol.proj.Projection.prototype,'getAxisOrientation',ol.proj.Projection.prototype.getAxisOrientation);bq.exportProperty(ol.proj.Projection.prototype,'isGlobal',ol.proj.Projection.prototype.isGlobal);bq.exportProperty(ol.proj.Projection.prototype,'setGlobal',ol.proj.Projection.prototype.setGlobal);bq.exportProperty(ol.proj.Projection.prototype,'setExtent',ol.proj.Projection.prototype.setExtent);bq.exportProperty(ol.proj.Projection.prototype,'setWorldExtent',ol.proj.Projection.prototype.setWorldExtent);bq.exportProperty(ol.proj.Projection.prototype,'setGetPointResolution',ol.proj.Projection.prototype.setGetPointResolution);bq.exportSymbol('ol.proj.Units.METERS_PER_UNIT',ol.proj.Units.METERS_PER_UNIT,bp);bq.exportSymbol('ol.layer.Base',ol.layer.Base,bp);bq.exportProperty(ol.layer.Base.prototype,'getExtent',ol.layer.Base.prototype.getExtent);bq.exportProperty(ol.layer.Base.prototype,'getMaxResolution',ol.layer.Base.prototype.getMaxResolution);bq.exportProperty(ol.layer.Base.prototype,'getMinResolution',ol.layer.Base.prototype.getMinResolution);bq.exportProperty(ol.layer.Base.prototype,'getOpacity',ol.layer.Base.prototype.getOpacity);bq.exportProperty(ol.layer.Base.prototype,'getVisible',ol.layer.Base.prototype.getVisible);bq.exportProperty(ol.layer.Base.prototype,'getZIndex',ol.layer.Base.prototype.getZIndex);bq.exportProperty(ol.layer.Base.prototype,'setExtent',ol.layer.Base.prototype.setExtent);bq.exportProperty(ol.layer.Base.prototype,'setMaxResolution',ol.layer.Base.prototype.setMaxResolution);bq.exportProperty(ol.layer.Base.prototype,'setMinResolution',ol.layer.Base.prototype.setMinResolution);bq.exportProperty(ol.layer.Base.prototype,'setOpacity',ol.layer.Base.prototype.setOpacity);bq.exportProperty(ol.layer.Base.prototype,'setVisible',ol.layer.Base.prototype.setVisible);bq.exportProperty(ol.layer.Base.prototype,'setZIndex',ol.layer.Base.prototype.setZIndex);bq.exportSymbol('ol.layer.Group',ol.layer.Group,bp);bq.exportProperty(ol.layer.Group.prototype,'getLayers',ol.layer.Group.prototype.getLayers);bq.exportProperty(ol.layer.Group.prototype,'setLayers',ol.layer.Group.prototype.setLayers);bq.exportSymbol('ol.layer.Heatmap',ol.layer.Heatmap,bp);bq.exportProperty(ol.layer.Heatmap.prototype,'getBlur',ol.layer.Heatmap.prototype.getBlur);bq.exportProperty(ol.layer.Heatmap.prototype,'getGradient',ol.layer.Heatmap.prototype.getGradient);bq.exportProperty(ol.layer.Heatmap.prototype,'getRadius',ol.layer.Heatmap.prototype.getRadius);bq.exportProperty(ol.layer.Heatmap.prototype,'setBlur',ol.layer.Heatmap.prototype.setBlur);bq.exportProperty(ol.layer.Heatmap.prototype,'setGradient',ol.layer.Heatmap.prototype.setGradient);bq.exportProperty(ol.layer.Heatmap.prototype,'setRadius',ol.layer.Heatmap.prototype.setRadius);bq.exportSymbol('ol.layer.Image',ol.layer.Image,bp);bq.exportProperty(ol.layer.Image.prototype,'getSource',ol.layer.Image.prototype.getSource);bq.exportSymbol('ol.layer.Layer',ol.layer.Layer,bp);bq.exportProperty(ol.layer.Layer.prototype,'getSource',ol.layer.Layer.prototype.getSource);bq.exportProperty(ol.layer.Layer.prototype,'setMap',ol.layer.Layer.prototype.setMap);bq.exportProperty(ol.layer.Layer.prototype,'setSource',ol.layer.Layer.prototype.setSource);bq.exportSymbol('ol.layer.Tile',ol.layer.Tile,bp);bq.exportProperty(ol.layer.Tile.prototype,'getPreload',ol.layer.Tile.prototype.getPreload);bq.exportProperty(ol.layer.Tile.prototype,'getSource',ol.layer.Tile.prototype.getSource);bq.exportProperty(ol.layer.Tile.prototype,'setPreload',ol.layer.Tile.prototype.setPreload);bq.exportProperty(ol.layer.Tile.prototype,'getUseInterimTilesOnError',ol.layer.Tile.prototype.getUseInterimTilesOnError);bq.exportProperty(ol.layer.Tile.prototype,'setUseInterimTilesOnError',ol.layer.Tile.prototype.setUseInterimTilesOnError);bq.exportSymbol('ol.layer.Vector',ol.layer.Vector,bp);bq.exportProperty(ol.layer.Vector.prototype,'getSource',ol.layer.Vector.prototype.getSource);bq.exportProperty(ol.layer.Vector.prototype,'getStyle',ol.layer.Vector.prototype.getStyle);bq.exportProperty(ol.layer.Vector.prototype,'getStyleFunction',ol.layer.Vector.prototype.getStyleFunction);bq.exportProperty(ol.layer.Vector.prototype,'setStyle',ol.layer.Vector.prototype.setStyle);bq.exportSymbol('ol.layer.VectorTile',ol.layer.VectorTile,bp);bq.exportProperty(ol.layer.VectorTile.prototype,'getPreload',ol.layer.VectorTile.prototype.getPreload);bq.exportProperty(ol.layer.VectorTile.prototype,'getUseInterimTilesOnError',ol.layer.VectorTile.prototype.getUseInterimTilesOnError);bq.exportProperty(ol.layer.VectorTile.prototype,'setPreload',ol.layer.VectorTile.prototype.setPreload);bq.exportProperty(ol.layer.VectorTile.prototype,'setUseInterimTilesOnError',ol.layer.VectorTile.prototype.setUseInterimTilesOnError);bq.exportProperty(ol.layer.VectorTile.prototype,'getSource',ol.layer.VectorTile.prototype.getSource);bq.exportSymbol('ol.interaction.DoubleClickZoom',ol.interaction.DoubleClickZoom,bp);bq.exportSymbol('ol.interaction.DoubleClickZoom.handleEvent',ol.interaction.DoubleClickZoom.handleEvent,bp);bq.exportSymbol('ol.interaction.DragAndDrop',ol.interaction.DragAndDrop,bp);bq.exportSymbol('ol.interaction.DragAndDrop.handleEvent',ol.interaction.DragAndDrop.handleEvent,bp);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'features',ol.interaction.DragAndDrop.Event.prototype.features);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'file',ol.interaction.DragAndDrop.Event.prototype.file);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'projection',ol.interaction.DragAndDrop.Event.prototype.projection);bq.exportSymbol('ol.interaction.DragBox',ol.interaction.DragBox,bp);bq.exportProperty(ol.interaction.DragBox.prototype,'getGeometry',ol.interaction.DragBox.prototype.getGeometry);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'coordinate',ol.interaction.DragBox.Event.prototype.coordinate);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'mapBrowserEvent',ol.interaction.DragBox.Event.prototype.mapBrowserEvent);bq.exportSymbol('ol.interaction.DragPan',ol.interaction.DragPan,bp);bq.exportSymbol('ol.interaction.DragRotate',ol.interaction.DragRotate,bp);bq.exportSymbol('ol.interaction.DragRotateAndZoom',ol.interaction.DragRotateAndZoom,bp);bq.exportSymbol('ol.interaction.DragZoom',ol.interaction.DragZoom,bp);bq.exportSymbol('ol.interaction.Draw',ol.interaction.Draw,bp);bq.exportSymbol('ol.interaction.Draw.handleEvent',ol.interaction.Draw.handleEvent,bp);bq.exportProperty(ol.interaction.Draw.prototype,'removeLastPoint',ol.interaction.Draw.prototype.removeLastPoint);bq.exportProperty(ol.interaction.Draw.prototype,'finishDrawing',ol.interaction.Draw.prototype.finishDrawing);bq.exportProperty(ol.interaction.Draw.prototype,'extend',ol.interaction.Draw.prototype.extend);bq.exportSymbol('ol.interaction.Draw.createRegularPolygon',ol.interaction.Draw.createRegularPolygon,bp);bq.exportSymbol('ol.interaction.Draw.createBox',ol.interaction.Draw.createBox,bp);bq.exportProperty(ol.interaction.Draw.Event.prototype,'feature',ol.interaction.Draw.Event.prototype.feature);bq.exportSymbol('ol.interaction.Extent',ol.interaction.Extent,bp);bq.exportProperty(ol.interaction.Extent.prototype,'getExtent',ol.interaction.Extent.prototype.getExtent);bq.exportProperty(ol.interaction.Extent.prototype,'setExtent',ol.interaction.Extent.prototype.setExtent);bq.exportProperty(ol.interaction.Extent.Event.prototype,'extent',ol.interaction.Extent.Event.prototype.extent);bq.exportSymbol('ol.interaction.Interaction',ol.interaction.Interaction,bp);bq.exportProperty(ol.interaction.Interaction.prototype,'getActive',ol.interaction.Interaction.prototype.getActive);bq.exportProperty(ol.interaction.Interaction.prototype,'getMap',ol.interaction.Interaction.prototype.getMap);bq.exportProperty(ol.interaction.Interaction.prototype,'setActive',ol.interaction.Interaction.prototype.setActive);bq.exportSymbol('ol.interaction.KeyboardPan',ol.interaction.KeyboardPan,bp);bq.exportSymbol('ol.interaction.KeyboardPan.handleEvent',ol.interaction.KeyboardPan.handleEvent,bp);bq.exportSymbol('ol.interaction.KeyboardZoom',ol.interaction.KeyboardZoom,bp);bq.exportSymbol('ol.interaction.KeyboardZoom.handleEvent',ol.interaction.KeyboardZoom.handleEvent,bp);bq.exportSymbol('ol.interaction.Modify',ol.interaction.Modify,bp);bq.exportSymbol('ol.interaction.Modify.handleEvent',ol.interaction.Modify.handleEvent,bp);bq.exportProperty(ol.interaction.Modify.prototype,'removePoint',ol.interaction.Modify.prototype.removePoint);bq.exportProperty(ol.interaction.Modify.Event.prototype,'features',ol.interaction.Modify.Event.prototype.features);bq.exportProperty(ol.interaction.Modify.Event.prototype,'mapBrowserEvent',ol.interaction.Modify.Event.prototype.mapBrowserEvent);bq.exportSymbol('ol.interaction.MouseWheelZoom',ol.interaction.MouseWheelZoom,bp);bq.exportSymbol('ol.interaction.MouseWheelZoom.handleEvent',ol.interaction.MouseWheelZoom.handleEvent,bp);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'setMouseAnchor',ol.interaction.MouseWheelZoom.prototype.setMouseAnchor);bq.exportSymbol('ol.interaction.PinchRotate',ol.interaction.PinchRotate,bp);bq.exportSymbol('ol.interaction.PinchZoom',ol.interaction.PinchZoom,bp);bq.exportSymbol('ol.interaction.Pointer',ol.interaction.Pointer,bp);bq.exportSymbol('ol.interaction.Pointer.handleEvent',ol.interaction.Pointer.handleEvent,bp);bq.exportSymbol('ol.interaction.Select',ol.interaction.Select,bp);bq.exportProperty(ol.interaction.Select.prototype,'getFeatures',ol.interaction.Select.prototype.getFeatures);bq.exportProperty(ol.interaction.Select.prototype,'getHitTolerance',ol.interaction.Select.prototype.getHitTolerance);bq.exportProperty(ol.interaction.Select.prototype,'getLayer',ol.interaction.Select.prototype.getLayer);bq.exportSymbol('ol.interaction.Select.handleEvent',ol.interaction.Select.handleEvent,bp);bq.exportProperty(ol.interaction.Select.prototype,'setHitTolerance',ol.interaction.Select.prototype.setHitTolerance);bq.exportProperty(ol.interaction.Select.prototype,'setMap',ol.interaction.Select.prototype.setMap);bq.exportProperty(ol.interaction.Select.Event.prototype,'selected',ol.interaction.Select.Event.prototype.selected);bq.exportProperty(ol.interaction.Select.Event.prototype,'deselected',ol.interaction.Select.Event.prototype.deselected);bq.exportProperty(ol.interaction.Select.Event.prototype,'mapBrowserEvent',ol.interaction.Select.Event.prototype.mapBrowserEvent);bq.exportSymbol('ol.interaction.Snap',ol.interaction.Snap,bp);bq.exportProperty(ol.interaction.Snap.prototype,'addFeature',ol.interaction.Snap.prototype.addFeature);bq.exportProperty(ol.interaction.Snap.prototype,'removeFeature',ol.interaction.Snap.prototype.removeFeature);bq.exportSymbol('ol.interaction.Translate',ol.interaction.Translate,bp);bq.exportProperty(ol.interaction.Translate.prototype,'getHitTolerance',ol.interaction.Translate.prototype.getHitTolerance);bq.exportProperty(ol.interaction.Translate.prototype,'setHitTolerance',ol.interaction.Translate.prototype.setHitTolerance);bq.exportProperty(ol.interaction.Translate.Event.prototype,'features',ol.interaction.Translate.Event.prototype.features);bq.exportProperty(ol.interaction.Translate.Event.prototype,'coordinate',ol.interaction.Translate.Event.prototype.coordinate);bq.exportSymbol('ol.geom.Circle',ol.geom.Circle,bp);bq.exportProperty(ol.geom.Circle.prototype,'clone',ol.geom.Circle.prototype.clone);bq.exportProperty(ol.geom.Circle.prototype,'getCenter',ol.geom.Circle.prototype.getCenter);bq.exportProperty(ol.geom.Circle.prototype,'getRadius',ol.geom.Circle.prototype.getRadius);bq.exportProperty(ol.geom.Circle.prototype,'getType',ol.geom.Circle.prototype.getType);bq.exportProperty(ol.geom.Circle.prototype,'intersectsExtent',ol.geom.Circle.prototype.intersectsExtent);bq.exportProperty(ol.geom.Circle.prototype,'setCenter',ol.geom.Circle.prototype.setCenter);bq.exportProperty(ol.geom.Circle.prototype,'setCenterAndRadius',ol.geom.Circle.prototype.setCenterAndRadius);bq.exportProperty(ol.geom.Circle.prototype,'setRadius',ol.geom.Circle.prototype.setRadius);bq.exportProperty(ol.geom.Circle.prototype,'transform',ol.geom.Circle.prototype.transform);bq.exportSymbol('ol.geom.Geometry',ol.geom.Geometry,bp);bq.exportProperty(ol.geom.Geometry.prototype,'getClosestPoint',ol.geom.Geometry.prototype.getClosestPoint);bq.exportProperty(ol.geom.Geometry.prototype,'intersectsCoordinate',ol.geom.Geometry.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.Geometry.prototype,'getExtent',ol.geom.Geometry.prototype.getExtent);bq.exportProperty(ol.geom.Geometry.prototype,'rotate',ol.geom.Geometry.prototype.rotate);bq.exportProperty(ol.geom.Geometry.prototype,'scale',ol.geom.Geometry.prototype.scale);bq.exportProperty(ol.geom.Geometry.prototype,'simplify',ol.geom.Geometry.prototype.simplify);bq.exportProperty(ol.geom.Geometry.prototype,'transform',ol.geom.Geometry.prototype.transform);bq.exportSymbol('ol.geom.GeometryCollection',ol.geom.GeometryCollection,bp);bq.exportProperty(ol.geom.GeometryCollection.prototype,'clone',ol.geom.GeometryCollection.prototype.clone);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getGeometries',ol.geom.GeometryCollection.prototype.getGeometries);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getType',ol.geom.GeometryCollection.prototype.getType);bq.exportProperty(ol.geom.GeometryCollection.prototype,'intersectsExtent',ol.geom.GeometryCollection.prototype.intersectsExtent);bq.exportProperty(ol.geom.GeometryCollection.prototype,'setGeometries',ol.geom.GeometryCollection.prototype.setGeometries);bq.exportProperty(ol.geom.GeometryCollection.prototype,'applyTransform',ol.geom.GeometryCollection.prototype.applyTransform);bq.exportProperty(ol.geom.GeometryCollection.prototype,'translate',ol.geom.GeometryCollection.prototype.translate);bq.exportSymbol('ol.geom.LinearRing',ol.geom.LinearRing,bp);bq.exportProperty(ol.geom.LinearRing.prototype,'clone',ol.geom.LinearRing.prototype.clone);bq.exportProperty(ol.geom.LinearRing.prototype,'getArea',ol.geom.LinearRing.prototype.getArea);bq.exportProperty(ol.geom.LinearRing.prototype,'getCoordinates',ol.geom.LinearRing.prototype.getCoordinates);bq.exportProperty(ol.geom.LinearRing.prototype,'getType',ol.geom.LinearRing.prototype.getType);bq.exportProperty(ol.geom.LinearRing.prototype,'setCoordinates',ol.geom.LinearRing.prototype.setCoordinates);bq.exportSymbol('ol.geom.LineString',ol.geom.LineString,bp);bq.exportProperty(ol.geom.LineString.prototype,'appendCoordinate',ol.geom.LineString.prototype.appendCoordinate);bq.exportProperty(ol.geom.LineString.prototype,'clone',ol.geom.LineString.prototype.clone);bq.exportProperty(ol.geom.LineString.prototype,'forEachSegment',ol.geom.LineString.prototype.forEachSegment);bq.exportProperty(ol.geom.LineString.prototype,'getCoordinateAtM',ol.geom.LineString.prototype.getCoordinateAtM);bq.exportProperty(ol.geom.LineString.prototype,'getCoordinates',ol.geom.LineString.prototype.getCoordinates);bq.exportProperty(ol.geom.LineString.prototype,'getCoordinateAt',ol.geom.LineString.prototype.getCoordinateAt);bq.exportProperty(ol.geom.LineString.prototype,'getLength',ol.geom.LineString.prototype.getLength);bq.exportProperty(ol.geom.LineString.prototype,'getType',ol.geom.LineString.prototype.getType);bq.exportProperty(ol.geom.LineString.prototype,'intersectsExtent',ol.geom.LineString.prototype.intersectsExtent);bq.exportProperty(ol.geom.LineString.prototype,'setCoordinates',ol.geom.LineString.prototype.setCoordinates);bq.exportSymbol('ol.geom.MultiLineString',ol.geom.MultiLineString,bp);bq.exportProperty(ol.geom.MultiLineString.prototype,'appendLineString',ol.geom.MultiLineString.prototype.appendLineString);bq.exportProperty(ol.geom.MultiLineString.prototype,'clone',ol.geom.MultiLineString.prototype.clone);bq.exportProperty(ol.geom.MultiLineString.prototype,'getCoordinateAtM',ol.geom.MultiLineString.prototype.getCoordinateAtM);bq.exportProperty(ol.geom.MultiLineString.prototype,'getCoordinates',ol.geom.MultiLineString.prototype.getCoordinates);bq.exportProperty(ol.geom.MultiLineString.prototype,'getLineString',ol.geom.MultiLineString.prototype.getLineString);bq.exportProperty(ol.geom.MultiLineString.prototype,'getLineStrings',ol.geom.MultiLineString.prototype.getLineStrings);bq.exportProperty(ol.geom.MultiLineString.prototype,'getType',ol.geom.MultiLineString.prototype.getType);bq.exportProperty(ol.geom.MultiLineString.prototype,'intersectsExtent',ol.geom.MultiLineString.prototype.intersectsExtent);bq.exportProperty(ol.geom.MultiLineString.prototype,'setCoordinates',ol.geom.MultiLineString.prototype.setCoordinates);bq.exportSymbol('ol.geom.MultiPoint',ol.geom.MultiPoint,bp);bq.exportProperty(ol.geom.MultiPoint.prototype,'appendPoint',ol.geom.MultiPoint.prototype.appendPoint);bq.exportProperty(ol.geom.MultiPoint.prototype,'clone',ol.geom.MultiPoint.prototype.clone);bq.exportProperty(ol.geom.MultiPoint.prototype,'getCoordinates',ol.geom.MultiPoint.prototype.getCoordinates);bq.exportProperty(ol.geom.MultiPoint.prototype,'getPoint',ol.geom.MultiPoint.prototype.getPoint);bq.exportProperty(ol.geom.MultiPoint.prototype,'getPoints',ol.geom.MultiPoint.prototype.getPoints);bq.exportProperty(ol.geom.MultiPoint.prototype,'getType',ol.geom.MultiPoint.prototype.getType);bq.exportProperty(ol.geom.MultiPoint.prototype,'intersectsExtent',ol.geom.MultiPoint.prototype.intersectsExtent);bq.exportProperty(ol.geom.MultiPoint.prototype,'setCoordinates',ol.geom.MultiPoint.prototype.setCoordinates);bq.exportSymbol('ol.geom.MultiPolygon',ol.geom.MultiPolygon,bp);bq.exportProperty(ol.geom.MultiPolygon.prototype,'appendPolygon',ol.geom.MultiPolygon.prototype.appendPolygon);bq.exportProperty(ol.geom.MultiPolygon.prototype,'clone',ol.geom.MultiPolygon.prototype.clone);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getArea',ol.geom.MultiPolygon.prototype.getArea);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getCoordinates',ol.geom.MultiPolygon.prototype.getCoordinates);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getInteriorPoints',ol.geom.MultiPolygon.prototype.getInteriorPoints);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getPolygon',ol.geom.MultiPolygon.prototype.getPolygon);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getPolygons',ol.geom.MultiPolygon.prototype.getPolygons);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getType',ol.geom.MultiPolygon.prototype.getType);bq.exportProperty(ol.geom.MultiPolygon.prototype,'intersectsExtent',ol.geom.MultiPolygon.prototype.intersectsExtent);bq.exportProperty(ol.geom.MultiPolygon.prototype,'setCoordinates',ol.geom.MultiPolygon.prototype.setCoordinates);bq.exportSymbol('ol.geom.Point',ol.geom.Point,bp);bq.exportProperty(ol.geom.Point.prototype,'clone',ol.geom.Point.prototype.clone);bq.exportProperty(ol.geom.Point.prototype,'getCoordinates',ol.geom.Point.prototype.getCoordinates);bq.exportProperty(ol.geom.Point.prototype,'getType',ol.geom.Point.prototype.getType);bq.exportProperty(ol.geom.Point.prototype,'intersectsExtent',ol.geom.Point.prototype.intersectsExtent);bq.exportProperty(ol.geom.Point.prototype,'setCoordinates',ol.geom.Point.prototype.setCoordinates);bq.exportSymbol('ol.geom.Polygon',ol.geom.Polygon,bp);bq.exportProperty(ol.geom.Polygon.prototype,'appendLinearRing',ol.geom.Polygon.prototype.appendLinearRing);bq.exportProperty(ol.geom.Polygon.prototype,'clone',ol.geom.Polygon.prototype.clone);bq.exportProperty(ol.geom.Polygon.prototype,'getArea',ol.geom.Polygon.prototype.getArea);bq.exportProperty(ol.geom.Polygon.prototype,'getCoordinates',ol.geom.Polygon.prototype.getCoordinates);bq.exportProperty(ol.geom.Polygon.prototype,'getInteriorPoint',ol.geom.Polygon.prototype.getInteriorPoint);bq.exportProperty(ol.geom.Polygon.prototype,'getLinearRingCount',ol.geom.Polygon.prototype.getLinearRingCount);bq.exportProperty(ol.geom.Polygon.prototype,'getLinearRing',ol.geom.Polygon.prototype.getLinearRing);bq.exportProperty(ol.geom.Polygon.prototype,'getLinearRings',ol.geom.Polygon.prototype.getLinearRings);bq.exportProperty(ol.geom.Polygon.prototype,'getType',ol.geom.Polygon.prototype.getType);bq.exportProperty(ol.geom.Polygon.prototype,'intersectsExtent',ol.geom.Polygon.prototype.intersectsExtent);bq.exportProperty(ol.geom.Polygon.prototype,'setCoordinates',ol.geom.Polygon.prototype.setCoordinates);bq.exportSymbol('ol.geom.Polygon.circular',ol.geom.Polygon.circular,bp);bq.exportSymbol('ol.geom.Polygon.fromExtent',ol.geom.Polygon.fromExtent,bp);bq.exportSymbol('ol.geom.Polygon.fromCircle',ol.geom.Polygon.fromCircle,bp);bq.exportSymbol('ol.geom.SimpleGeometry',ol.geom.SimpleGeometry,bp);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getFirstCoordinate',ol.geom.SimpleGeometry.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getLastCoordinate',ol.geom.SimpleGeometry.prototype.getLastCoordinate);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getLayout',ol.geom.SimpleGeometry.prototype.getLayout);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'applyTransform',ol.geom.SimpleGeometry.prototype.applyTransform);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'translate',ol.geom.SimpleGeometry.prototype.translate);bq.exportSymbol('ol.format.EsriJSON',ol.format.EsriJSON,bp);bq.exportProperty(ol.format.EsriJSON.prototype,'readFeature',ol.format.EsriJSON.prototype.readFeature);bq.exportProperty(ol.format.EsriJSON.prototype,'readFeatures',ol.format.EsriJSON.prototype.readFeatures);bq.exportProperty(ol.format.EsriJSON.prototype,'readGeometry',ol.format.EsriJSON.prototype.readGeometry);bq.exportProperty(ol.format.EsriJSON.prototype,'readProjection',ol.format.EsriJSON.prototype.readProjection);bq.exportProperty(ol.format.EsriJSON.prototype,'writeGeometry',ol.format.EsriJSON.prototype.writeGeometry);bq.exportProperty(ol.format.EsriJSON.prototype,'writeGeometryObject',ol.format.EsriJSON.prototype.writeGeometryObject);bq.exportProperty(ol.format.EsriJSON.prototype,'writeFeature',ol.format.EsriJSON.prototype.writeFeature);bq.exportProperty(ol.format.EsriJSON.prototype,'writeFeatureObject',ol.format.EsriJSON.prototype.writeFeatureObject);bq.exportProperty(ol.format.EsriJSON.prototype,'writeFeatures',ol.format.EsriJSON.prototype.writeFeatures);bq.exportProperty(ol.format.EsriJSON.prototype,'writeFeaturesObject',ol.format.EsriJSON.prototype.writeFeaturesObject);bq.exportSymbol('ol.format.Feature',ol.format.Feature,bp);bq.exportSymbol('ol.format.filter.and',ol.format.filter.and,bp);bq.exportSymbol('ol.format.filter.or',ol.format.filter.or,bp);bq.exportSymbol('ol.format.filter.not',ol.format.filter.not,bp);bq.exportSymbol('ol.format.filter.bbox',ol.format.filter.bbox,bp);bq.exportSymbol('ol.format.filter.contains',ol.format.filter.contains,bp);bq.exportSymbol('ol.format.filter.intersects',ol.format.filter.intersects,bp);bq.exportSymbol('ol.format.filter.within',ol.format.filter.within,bp);bq.exportSymbol('ol.format.filter.equalTo',ol.format.filter.equalTo,bp);bq.exportSymbol('ol.format.filter.notEqualTo',ol.format.filter.notEqualTo,bp);bq.exportSymbol('ol.format.filter.lessThan',ol.format.filter.lessThan,bp);bq.exportSymbol('ol.format.filter.lessThanOrEqualTo',ol.format.filter.lessThanOrEqualTo,bp);bq.exportSymbol('ol.format.filter.greaterThan',ol.format.filter.greaterThan,bp);bq.exportSymbol('ol.format.filter.greaterThanOrEqualTo',ol.format.filter.greaterThanOrEqualTo,bp);bq.exportSymbol('ol.format.filter.isNull',ol.format.filter.isNull,bp);bq.exportSymbol('ol.format.filter.between',ol.format.filter.between,bp);bq.exportSymbol('ol.format.filter.like',ol.format.filter.like,bp);bq.exportSymbol('ol.format.filter.during',ol.format.filter.during,bp);bq.exportSymbol('ol.format.GeoJSON',ol.format.GeoJSON,bp);bq.exportProperty(ol.format.GeoJSON.prototype,'readFeature',ol.format.GeoJSON.prototype.readFeature);bq.exportProperty(ol.format.GeoJSON.prototype,'readFeatures',ol.format.GeoJSON.prototype.readFeatures);bq.exportProperty(ol.format.GeoJSON.prototype,'readGeometry',ol.format.GeoJSON.prototype.readGeometry);bq.exportProperty(ol.format.GeoJSON.prototype,'readProjection',ol.format.GeoJSON.prototype.readProjection);bq.exportProperty(ol.format.GeoJSON.prototype,'writeFeature',ol.format.GeoJSON.prototype.writeFeature);bq.exportProperty(ol.format.GeoJSON.prototype,'writeFeatureObject',ol.format.GeoJSON.prototype.writeFeatureObject);bq.exportProperty(ol.format.GeoJSON.prototype,'writeFeatures',ol.format.GeoJSON.prototype.writeFeatures);bq.exportProperty(ol.format.GeoJSON.prototype,'writeFeaturesObject',ol.format.GeoJSON.prototype.writeFeaturesObject);bq.exportProperty(ol.format.GeoJSON.prototype,'writeGeometry',ol.format.GeoJSON.prototype.writeGeometry);bq.exportProperty(ol.format.GeoJSON.prototype,'writeGeometryObject',ol.format.GeoJSON.prototype.writeGeometryObject);bq.exportSymbol('ol.format.GML',ol.format.GML,bp);bq.exportProperty(ol.format.GML.prototype,'writeFeatures',ol.format.GML.prototype.writeFeatures);bq.exportProperty(ol.format.GML.prototype,'writeFeaturesNode',ol.format.GML.prototype.writeFeaturesNode);bq.exportSymbol('ol.format.GML2',ol.format.GML2,bp);bq.exportSymbol('ol.format.GML3',ol.format.GML3,bp);bq.exportProperty(ol.format.GML3.prototype,'writeGeometryNode',ol.format.GML3.prototype.writeGeometryNode);bq.exportProperty(ol.format.GML3.prototype,'writeFeatures',ol.format.GML3.prototype.writeFeatures);bq.exportProperty(ol.format.GML3.prototype,'writeFeaturesNode',ol.format.GML3.prototype.writeFeaturesNode);bq.exportProperty(ol.format.GMLBase.prototype,'readFeatures',ol.format.GMLBase.prototype.readFeatures);bq.exportSymbol('ol.format.GPX',ol.format.GPX,bp);bq.exportProperty(ol.format.GPX.prototype,'readFeature',ol.format.GPX.prototype.readFeature);bq.exportProperty(ol.format.GPX.prototype,'readFeatures',ol.format.GPX.prototype.readFeatures);bq.exportProperty(ol.format.GPX.prototype,'readProjection',ol.format.GPX.prototype.readProjection);bq.exportProperty(ol.format.GPX.prototype,'writeFeatures',ol.format.GPX.prototype.writeFeatures);bq.exportProperty(ol.format.GPX.prototype,'writeFeaturesNode',ol.format.GPX.prototype.writeFeaturesNode);bq.exportSymbol('ol.format.IGC',ol.format.IGC,bp);bq.exportProperty(ol.format.IGC.prototype,'readFeature',ol.format.IGC.prototype.readFeature);bq.exportProperty(ol.format.IGC.prototype,'readFeatures',ol.format.IGC.prototype.readFeatures);bq.exportProperty(ol.format.IGC.prototype,'readProjection',ol.format.IGC.prototype.readProjection);bq.exportSymbol('ol.format.KML',ol.format.KML,bp);bq.exportProperty(ol.format.KML.prototype,'readFeature',ol.format.KML.prototype.readFeature);bq.exportProperty(ol.format.KML.prototype,'readFeatures',ol.format.KML.prototype.readFeatures);bq.exportProperty(ol.format.KML.prototype,'readName',ol.format.KML.prototype.readName);bq.exportProperty(ol.format.KML.prototype,'readNetworkLinks',ol.format.KML.prototype.readNetworkLinks);bq.exportProperty(ol.format.KML.prototype,'readRegion',ol.format.KML.prototype.readRegion);bq.exportProperty(ol.format.KML.prototype,'readRegionFromNode',ol.format.KML.prototype.readRegionFromNode);bq.exportProperty(ol.format.KML.prototype,'readProjection',ol.format.KML.prototype.readProjection);bq.exportProperty(ol.format.KML.prototype,'writeFeatures',ol.format.KML.prototype.writeFeatures);bq.exportProperty(ol.format.KML.prototype,'writeFeaturesNode',ol.format.KML.prototype.writeFeaturesNode);bq.exportSymbol('ol.format.MVT',ol.format.MVT,bp);bq.exportProperty(ol.format.MVT.prototype,'getLastExtent',ol.format.MVT.prototype.getLastExtent);bq.exportProperty(ol.format.MVT.prototype,'readFeatures',ol.format.MVT.prototype.readFeatures);bq.exportProperty(ol.format.MVT.prototype,'readProjection',ol.format.MVT.prototype.readProjection);bq.exportProperty(ol.format.MVT.prototype,'setLayers',ol.format.MVT.prototype.setLayers);bq.exportSymbol('ol.format.OSMXML',ol.format.OSMXML,bp);bq.exportProperty(ol.format.OSMXML.prototype,'readFeatures',ol.format.OSMXML.prototype.readFeatures);bq.exportProperty(ol.format.OSMXML.prototype,'readProjection',ol.format.OSMXML.prototype.readProjection);bq.exportSymbol('ol.format.Polyline',ol.format.Polyline,bp);bq.exportSymbol('ol.format.Polyline.encodeDeltas',ol.format.Polyline.encodeDeltas,bp);bq.exportSymbol('ol.format.Polyline.decodeDeltas',ol.format.Polyline.decodeDeltas,bp);bq.exportSymbol('ol.format.Polyline.encodeFloats',ol.format.Polyline.encodeFloats,bp);bq.exportSymbol('ol.format.Polyline.decodeFloats',ol.format.Polyline.decodeFloats,bp);bq.exportProperty(ol.format.Polyline.prototype,'readFeature',ol.format.Polyline.prototype.readFeature);bq.exportProperty(ol.format.Polyline.prototype,'readFeatures',ol.format.Polyline.prototype.readFeatures);bq.exportProperty(ol.format.Polyline.prototype,'readGeometry',ol.format.Polyline.prototype.readGeometry);bq.exportProperty(ol.format.Polyline.prototype,'readProjection',ol.format.Polyline.prototype.readProjection);bq.exportProperty(ol.format.Polyline.prototype,'writeGeometry',ol.format.Polyline.prototype.writeGeometry);bq.exportSymbol('ol.format.TopoJSON',ol.format.TopoJSON,bp);bq.exportProperty(ol.format.TopoJSON.prototype,'readFeatures',ol.format.TopoJSON.prototype.readFeatures);bq.exportProperty(ol.format.TopoJSON.prototype,'readProjection',ol.format.TopoJSON.prototype.readProjection);bq.exportSymbol('ol.format.WFS',ol.format.WFS,bp);bq.exportProperty(ol.format.WFS.prototype,'readFeatures',ol.format.WFS.prototype.readFeatures);bq.exportProperty(ol.format.WFS.prototype,'readTransactionResponse',ol.format.WFS.prototype.readTransactionResponse);bq.exportProperty(ol.format.WFS.prototype,'readFeatureCollectionMetadata',ol.format.WFS.prototype.readFeatureCollectionMetadata);bq.exportSymbol('ol.format.WFS.writeFilter',ol.format.WFS.writeFilter,bp);bq.exportProperty(ol.format.WFS.prototype,'writeGetFeature',ol.format.WFS.prototype.writeGetFeature);bq.exportProperty(ol.format.WFS.prototype,'writeTransaction',ol.format.WFS.prototype.writeTransaction);bq.exportProperty(ol.format.WFS.prototype,'readProjection',ol.format.WFS.prototype.readProjection);bq.exportSymbol('ol.format.WKT',ol.format.WKT,bp);bq.exportProperty(ol.format.WKT.prototype,'readFeature',ol.format.WKT.prototype.readFeature);bq.exportProperty(ol.format.WKT.prototype,'readFeatures',ol.format.WKT.prototype.readFeatures);bq.exportProperty(ol.format.WKT.prototype,'readGeometry',ol.format.WKT.prototype.readGeometry);bq.exportProperty(ol.format.WKT.prototype,'writeFeature',ol.format.WKT.prototype.writeFeature);bq.exportProperty(ol.format.WKT.prototype,'writeFeatures',ol.format.WKT.prototype.writeFeatures);bq.exportProperty(ol.format.WKT.prototype,'writeGeometry',ol.format.WKT.prototype.writeGeometry);bq.exportSymbol('ol.format.WMSCapabilities',ol.format.WMSCapabilities,bp);bq.exportProperty(ol.format.WMSCapabilities.prototype,'read',ol.format.WMSCapabilities.prototype.read);bq.exportSymbol('ol.format.WMSGetFeatureInfo',ol.format.WMSGetFeatureInfo,bp);bq.exportProperty(ol.format.WMSGetFeatureInfo.prototype,'readFeatures',ol.format.WMSGetFeatureInfo.prototype.readFeatures);bq.exportSymbol('ol.format.WMTSCapabilities',ol.format.WMTSCapabilities,bp);bq.exportProperty(ol.format.WMTSCapabilities.prototype,'read',ol.format.WMTSCapabilities.prototype.read);bq.exportSymbol('ol.format.filter.And',ol.format.filter.And,bp);bq.exportSymbol('ol.format.filter.Bbox',ol.format.filter.Bbox,bp);bq.exportSymbol('ol.format.filter.Comparison',ol.format.filter.Comparison,bp);bq.exportSymbol('ol.format.filter.ComparisonBinary',ol.format.filter.ComparisonBinary,bp);bq.exportSymbol('ol.format.filter.Contains',ol.format.filter.Contains,bp);bq.exportSymbol('ol.format.filter.During',ol.format.filter.During,bp);bq.exportSymbol('ol.format.filter.EqualTo',ol.format.filter.EqualTo,bp);bq.exportSymbol('ol.format.filter.Filter',ol.format.filter.Filter,bp);bq.exportSymbol('ol.format.filter.GreaterThan',ol.format.filter.GreaterThan,bp);bq.exportSymbol('ol.format.filter.GreaterThanOrEqualTo',ol.format.filter.GreaterThanOrEqualTo,bp);bq.exportSymbol('ol.format.filter.Intersects',ol.format.filter.Intersects,bp);bq.exportSymbol('ol.format.filter.IsBetween',ol.format.filter.IsBetween,bp);bq.exportSymbol('ol.format.filter.IsLike',ol.format.filter.IsLike,bp);bq.exportSymbol('ol.format.filter.IsNull',ol.format.filter.IsNull,bp);bq.exportSymbol('ol.format.filter.LessThan',ol.format.filter.LessThan,bp);bq.exportSymbol('ol.format.filter.LessThanOrEqualTo',ol.format.filter.LessThanOrEqualTo,bp);bq.exportSymbol('ol.format.filter.Not',ol.format.filter.Not,bp);bq.exportSymbol('ol.format.filter.NotEqualTo',ol.format.filter.NotEqualTo,bp);bq.exportSymbol('ol.format.filter.Or',ol.format.filter.Or,bp);bq.exportSymbol('ol.format.filter.Spatial',ol.format.filter.Spatial,bp);bq.exportSymbol('ol.format.filter.Within',ol.format.filter.Within,bp);bq.exportSymbol('ol.events.condition.altKeyOnly',ol.events.condition.altKeyOnly,bp);bq.exportSymbol('ol.events.condition.altShiftKeysOnly',ol.events.condition.altShiftKeysOnly,bp);bq.exportSymbol('ol.events.condition.always',ol.events.condition.always,bp);bq.exportSymbol('ol.events.condition.click',ol.events.condition.click,bp);bq.exportSymbol('ol.events.condition.never',ol.events.condition.never,bp);bq.exportSymbol('ol.events.condition.pointerMove',ol.events.condition.pointerMove,bp);bq.exportSymbol('ol.events.condition.singleClick',ol.events.condition.singleClick,bp);bq.exportSymbol('ol.events.condition.doubleClick',ol.events.condition.doubleClick,bp);bq.exportSymbol('ol.events.condition.noModifierKeys',ol.events.condition.noModifierKeys,bp);bq.exportSymbol('ol.events.condition.platformModifierKeyOnly',ol.events.condition.platformModifierKeyOnly,bp);bq.exportSymbol('ol.events.condition.shiftKeyOnly',ol.events.condition.shiftKeyOnly,bp);bq.exportSymbol('ol.events.condition.targetNotEditable',ol.events.condition.targetNotEditable,bp);bq.exportSymbol('ol.events.condition.mouseOnly',ol.events.condition.mouseOnly,bp);bq.exportSymbol('ol.events.condition.primaryAction',ol.events.condition.primaryAction,bp);bq.exportProperty(ol.events.Event.prototype,'type',ol.events.Event.prototype.type);bq.exportProperty(ol.events.Event.prototype,'target',ol.events.Event.prototype.target);bq.exportProperty(ol.events.Event.prototype,'preventDefault',ol.events.Event.prototype.preventDefault);bq.exportProperty(ol.events.Event.prototype,'stopPropagation',ol.events.Event.prototype.stopPropagation);bq.exportSymbol('ol.control.Attribution',ol.control.Attribution,bp);bq.exportSymbol('ol.control.Attribution.render',ol.control.Attribution.render,bp);bq.exportProperty(ol.control.Attribution.prototype,'getCollapsible',ol.control.Attribution.prototype.getCollapsible);bq.exportProperty(ol.control.Attribution.prototype,'setCollapsible',ol.control.Attribution.prototype.setCollapsible);bq.exportProperty(ol.control.Attribution.prototype,'setCollapsed',ol.control.Attribution.prototype.setCollapsed);bq.exportProperty(ol.control.Attribution.prototype,'getCollapsed',ol.control.Attribution.prototype.getCollapsed);bq.exportSymbol('ol.control.Control',ol.control.Control,bp);bq.exportProperty(ol.control.Control.prototype,'getMap',ol.control.Control.prototype.getMap);bq.exportProperty(ol.control.Control.prototype,'setMap',ol.control.Control.prototype.setMap);bq.exportProperty(ol.control.Control.prototype,'setTarget',ol.control.Control.prototype.setTarget);bq.exportSymbol('ol.control.FullScreen',ol.control.FullScreen,bp);bq.exportSymbol('ol.control.MousePosition',ol.control.MousePosition,bp);bq.exportSymbol('ol.control.MousePosition.render',ol.control.MousePosition.render,bp);bq.exportProperty(ol.control.MousePosition.prototype,'getCoordinateFormat',ol.control.MousePosition.prototype.getCoordinateFormat);bq.exportProperty(ol.control.MousePosition.prototype,'getProjection',ol.control.MousePosition.prototype.getProjection);bq.exportProperty(ol.control.MousePosition.prototype,'setCoordinateFormat',ol.control.MousePosition.prototype.setCoordinateFormat);bq.exportProperty(ol.control.MousePosition.prototype,'setProjection',ol.control.MousePosition.prototype.setProjection);bq.exportSymbol('ol.control.OverviewMap',ol.control.OverviewMap,bp);bq.exportSymbol('ol.control.OverviewMap.render',ol.control.OverviewMap.render,bp);bq.exportProperty(ol.control.OverviewMap.prototype,'getCollapsible',ol.control.OverviewMap.prototype.getCollapsible);bq.exportProperty(ol.control.OverviewMap.prototype,'setCollapsible',ol.control.OverviewMap.prototype.setCollapsible);bq.exportProperty(ol.control.OverviewMap.prototype,'setCollapsed',ol.control.OverviewMap.prototype.setCollapsed);bq.exportProperty(ol.control.OverviewMap.prototype,'getCollapsed',ol.control.OverviewMap.prototype.getCollapsed);bq.exportProperty(ol.control.OverviewMap.prototype,'getOverviewMap',ol.control.OverviewMap.prototype.getOverviewMap);bq.exportSymbol('ol.control.Rotate',ol.control.Rotate,bp);bq.exportSymbol('ol.control.Rotate.render',ol.control.Rotate.render,bp);bq.exportSymbol('ol.control.ScaleLine',ol.control.ScaleLine,bp);bq.exportProperty(ol.control.ScaleLine.prototype,'getUnits',ol.control.ScaleLine.prototype.getUnits);bq.exportSymbol('ol.control.ScaleLine.render',ol.control.ScaleLine.render,bp);bq.exportProperty(ol.control.ScaleLine.prototype,'setUnits',ol.control.ScaleLine.prototype.setUnits);bq.exportSymbol('ol.control.Zoom',ol.control.Zoom,bp);bq.exportSymbol('ol.control.ZoomSlider',ol.control.ZoomSlider,bp);bq.exportSymbol('ol.control.ZoomSlider.render',ol.control.ZoomSlider.render,bp);bq.exportSymbol('ol.control.ZoomToExtent',ol.control.ZoomToExtent,bp);bq.exportProperty(ol.Object.prototype,'changed',ol.Object.prototype.changed);bq.exportProperty(ol.Object.prototype,'dispatchEvent',ol.Object.prototype.dispatchEvent);bq.exportProperty(ol.Object.prototype,'getRevision',ol.Object.prototype.getRevision);bq.exportProperty(ol.Object.prototype,'on',ol.Object.prototype.on);bq.exportProperty(ol.Object.prototype,'once',ol.Object.prototype.once);bq.exportProperty(ol.Object.prototype,'un',ol.Object.prototype.un);bq.exportProperty(ol.PluggableMap.prototype,'get',ol.PluggableMap.prototype.get);bq.exportProperty(ol.PluggableMap.prototype,'getKeys',ol.PluggableMap.prototype.getKeys);bq.exportProperty(ol.PluggableMap.prototype,'getProperties',ol.PluggableMap.prototype.getProperties);bq.exportProperty(ol.PluggableMap.prototype,'set',ol.PluggableMap.prototype.set);bq.exportProperty(ol.PluggableMap.prototype,'setProperties',ol.PluggableMap.prototype.setProperties);bq.exportProperty(ol.PluggableMap.prototype,'unset',ol.PluggableMap.prototype.unset);bq.exportProperty(ol.PluggableMap.prototype,'changed',ol.PluggableMap.prototype.changed);bq.exportProperty(ol.PluggableMap.prototype,'dispatchEvent',ol.PluggableMap.prototype.dispatchEvent);bq.exportProperty(ol.PluggableMap.prototype,'getRevision',ol.PluggableMap.prototype.getRevision);bq.exportProperty(ol.PluggableMap.prototype,'on',ol.PluggableMap.prototype.on);bq.exportProperty(ol.PluggableMap.prototype,'once',ol.PluggableMap.prototype.once);bq.exportProperty(ol.PluggableMap.prototype,'un',ol.PluggableMap.prototype.un);bq.exportProperty(ol.CanvasMap.prototype,'addControl',ol.CanvasMap.prototype.addControl);bq.exportProperty(ol.CanvasMap.prototype,'addInteraction',ol.CanvasMap.prototype.addInteraction);bq.exportProperty(ol.CanvasMap.prototype,'addLayer',ol.CanvasMap.prototype.addLayer);bq.exportProperty(ol.CanvasMap.prototype,'addOverlay',ol.CanvasMap.prototype.addOverlay);bq.exportProperty(ol.CanvasMap.prototype,'forEachFeatureAtPixel',ol.CanvasMap.prototype.forEachFeatureAtPixel);bq.exportProperty(ol.CanvasMap.prototype,'getFeaturesAtPixel',ol.CanvasMap.prototype.getFeaturesAtPixel);bq.exportProperty(ol.CanvasMap.prototype,'forEachLayerAtPixel',ol.CanvasMap.prototype.forEachLayerAtPixel);bq.exportProperty(ol.CanvasMap.prototype,'hasFeatureAtPixel',ol.CanvasMap.prototype.hasFeatureAtPixel);bq.exportProperty(ol.CanvasMap.prototype,'getEventCoordinate',ol.CanvasMap.prototype.getEventCoordinate);bq.exportProperty(ol.CanvasMap.prototype,'getEventPixel',ol.CanvasMap.prototype.getEventPixel);bq.exportProperty(ol.CanvasMap.prototype,'getTarget',ol.CanvasMap.prototype.getTarget);bq.exportProperty(ol.CanvasMap.prototype,'getTargetElement',ol.CanvasMap.prototype.getTargetElement);bq.exportProperty(ol.CanvasMap.prototype,'getCoordinateFromPixel',ol.CanvasMap.prototype.getCoordinateFromPixel);bq.exportProperty(ol.CanvasMap.prototype,'getControls',ol.CanvasMap.prototype.getControls);bq.exportProperty(ol.CanvasMap.prototype,'getOverlays',ol.CanvasMap.prototype.getOverlays);bq.exportProperty(ol.CanvasMap.prototype,'getOverlayById',ol.CanvasMap.prototype.getOverlayById);bq.exportProperty(ol.CanvasMap.prototype,'getInteractions',ol.CanvasMap.prototype.getInteractions);bq.exportProperty(ol.CanvasMap.prototype,'getLayerGroup',ol.CanvasMap.prototype.getLayerGroup);bq.exportProperty(ol.CanvasMap.prototype,'getLayers',ol.CanvasMap.prototype.getLayers);bq.exportProperty(ol.CanvasMap.prototype,'getPixelFromCoordinate',ol.CanvasMap.prototype.getPixelFromCoordinate);bq.exportProperty(ol.CanvasMap.prototype,'getSize',ol.CanvasMap.prototype.getSize);bq.exportProperty(ol.CanvasMap.prototype,'getView',ol.CanvasMap.prototype.getView);bq.exportProperty(ol.CanvasMap.prototype,'getViewport',ol.CanvasMap.prototype.getViewport);bq.exportProperty(ol.CanvasMap.prototype,'renderSync',ol.CanvasMap.prototype.renderSync);bq.exportProperty(ol.CanvasMap.prototype,'render',ol.CanvasMap.prototype.render);bq.exportProperty(ol.CanvasMap.prototype,'removeControl',ol.CanvasMap.prototype.removeControl);bq.exportProperty(ol.CanvasMap.prototype,'removeInteraction',ol.CanvasMap.prototype.removeInteraction);bq.exportProperty(ol.CanvasMap.prototype,'removeLayer',ol.CanvasMap.prototype.removeLayer);bq.exportProperty(ol.CanvasMap.prototype,'removeOverlay',ol.CanvasMap.prototype.removeOverlay);bq.exportProperty(ol.CanvasMap.prototype,'setLayerGroup',ol.CanvasMap.prototype.setLayerGroup);bq.exportProperty(ol.CanvasMap.prototype,'setSize',ol.CanvasMap.prototype.setSize);bq.exportProperty(ol.CanvasMap.prototype,'setTarget',ol.CanvasMap.prototype.setTarget);bq.exportProperty(ol.CanvasMap.prototype,'setView',ol.CanvasMap.prototype.setView);bq.exportProperty(ol.CanvasMap.prototype,'updateSize',ol.CanvasMap.prototype.updateSize);bq.exportProperty(ol.CanvasMap.prototype,'get',ol.CanvasMap.prototype.get);bq.exportProperty(ol.CanvasMap.prototype,'getKeys',ol.CanvasMap.prototype.getKeys);bq.exportProperty(ol.CanvasMap.prototype,'getProperties',ol.CanvasMap.prototype.getProperties);bq.exportProperty(ol.CanvasMap.prototype,'set',ol.CanvasMap.prototype.set);bq.exportProperty(ol.CanvasMap.prototype,'setProperties',ol.CanvasMap.prototype.setProperties);bq.exportProperty(ol.CanvasMap.prototype,'unset',ol.CanvasMap.prototype.unset);bq.exportProperty(ol.CanvasMap.prototype,'changed',ol.CanvasMap.prototype.changed);bq.exportProperty(ol.CanvasMap.prototype,'dispatchEvent',ol.CanvasMap.prototype.dispatchEvent);bq.exportProperty(ol.CanvasMap.prototype,'getRevision',ol.CanvasMap.prototype.getRevision);bq.exportProperty(ol.CanvasMap.prototype,'on',ol.CanvasMap.prototype.on);bq.exportProperty(ol.CanvasMap.prototype,'once',ol.CanvasMap.prototype.once);bq.exportProperty(ol.CanvasMap.prototype,'un',ol.CanvasMap.prototype.un);bq.exportProperty(ol.Collection.prototype,'get',ol.Collection.prototype.get);bq.exportProperty(ol.Collection.prototype,'getKeys',ol.Collection.prototype.getKeys);bq.exportProperty(ol.Collection.prototype,'getProperties',ol.Collection.prototype.getProperties);bq.exportProperty(ol.Collection.prototype,'set',ol.Collection.prototype.set);bq.exportProperty(ol.Collection.prototype,'setProperties',ol.Collection.prototype.setProperties);bq.exportProperty(ol.Collection.prototype,'unset',ol.Collection.prototype.unset);bq.exportProperty(ol.Collection.prototype,'changed',ol.Collection.prototype.changed);bq.exportProperty(ol.Collection.prototype,'dispatchEvent',ol.Collection.prototype.dispatchEvent);bq.exportProperty(ol.Collection.prototype,'getRevision',ol.Collection.prototype.getRevision);bq.exportProperty(ol.Collection.prototype,'on',ol.Collection.prototype.on);bq.exportProperty(ol.Collection.prototype,'once',ol.Collection.prototype.once);bq.exportProperty(ol.Collection.prototype,'un',ol.Collection.prototype.un);bq.exportProperty(ol.Collection.Event.prototype,'type',ol.Collection.Event.prototype.type);bq.exportProperty(ol.Collection.Event.prototype,'target',ol.Collection.Event.prototype.target);bq.exportProperty(ol.Collection.Event.prototype,'preventDefault',ol.Collection.Event.prototype.preventDefault);bq.exportProperty(ol.Collection.Event.prototype,'stopPropagation',ol.Collection.Event.prototype.stopPropagation);bq.exportProperty(ol.DeviceOrientation.prototype,'get',ol.DeviceOrientation.prototype.get);bq.exportProperty(ol.DeviceOrientation.prototype,'getKeys',ol.DeviceOrientation.prototype.getKeys);bq.exportProperty(ol.DeviceOrientation.prototype,'getProperties',ol.DeviceOrientation.prototype.getProperties);bq.exportProperty(ol.DeviceOrientation.prototype,'set',ol.DeviceOrientation.prototype.set);bq.exportProperty(ol.DeviceOrientation.prototype,'setProperties',ol.DeviceOrientation.prototype.setProperties);bq.exportProperty(ol.DeviceOrientation.prototype,'unset',ol.DeviceOrientation.prototype.unset);bq.exportProperty(ol.DeviceOrientation.prototype,'changed',ol.DeviceOrientation.prototype.changed);bq.exportProperty(ol.DeviceOrientation.prototype,'dispatchEvent',ol.DeviceOrientation.prototype.dispatchEvent);bq.exportProperty(ol.DeviceOrientation.prototype,'getRevision',ol.DeviceOrientation.prototype.getRevision);bq.exportProperty(ol.DeviceOrientation.prototype,'on',ol.DeviceOrientation.prototype.on);bq.exportProperty(ol.DeviceOrientation.prototype,'once',ol.DeviceOrientation.prototype.once);bq.exportProperty(ol.DeviceOrientation.prototype,'un',ol.DeviceOrientation.prototype.un);bq.exportProperty(ol.Feature.prototype,'get',ol.Feature.prototype.get);bq.exportProperty(ol.Feature.prototype,'getKeys',ol.Feature.prototype.getKeys);bq.exportProperty(ol.Feature.prototype,'getProperties',ol.Feature.prototype.getProperties);bq.exportProperty(ol.Feature.prototype,'set',ol.Feature.prototype.set);bq.exportProperty(ol.Feature.prototype,'setProperties',ol.Feature.prototype.setProperties);bq.exportProperty(ol.Feature.prototype,'unset',ol.Feature.prototype.unset);bq.exportProperty(ol.Feature.prototype,'changed',ol.Feature.prototype.changed);bq.exportProperty(ol.Feature.prototype,'dispatchEvent',ol.Feature.prototype.dispatchEvent);bq.exportProperty(ol.Feature.prototype,'getRevision',ol.Feature.prototype.getRevision);bq.exportProperty(ol.Feature.prototype,'on',ol.Feature.prototype.on);bq.exportProperty(ol.Feature.prototype,'once',ol.Feature.prototype.once);bq.exportProperty(ol.Feature.prototype,'un',ol.Feature.prototype.un);bq.exportProperty(ol.Geolocation.prototype,'get',ol.Geolocation.prototype.get);bq.exportProperty(ol.Geolocation.prototype,'getKeys',ol.Geolocation.prototype.getKeys);bq.exportProperty(ol.Geolocation.prototype,'getProperties',ol.Geolocation.prototype.getProperties);bq.exportProperty(ol.Geolocation.prototype,'set',ol.Geolocation.prototype.set);bq.exportProperty(ol.Geolocation.prototype,'setProperties',ol.Geolocation.prototype.setProperties);bq.exportProperty(ol.Geolocation.prototype,'unset',ol.Geolocation.prototype.unset);bq.exportProperty(ol.Geolocation.prototype,'changed',ol.Geolocation.prototype.changed);bq.exportProperty(ol.Geolocation.prototype,'dispatchEvent',ol.Geolocation.prototype.dispatchEvent);bq.exportProperty(ol.Geolocation.prototype,'getRevision',ol.Geolocation.prototype.getRevision);bq.exportProperty(ol.Geolocation.prototype,'on',ol.Geolocation.prototype.on);bq.exportProperty(ol.Geolocation.prototype,'once',ol.Geolocation.prototype.once);bq.exportProperty(ol.Geolocation.prototype,'un',ol.Geolocation.prototype.un);bq.exportProperty(ol.ImageTile.prototype,'getTileCoord',ol.ImageTile.prototype.getTileCoord);bq.exportProperty(ol.ImageTile.prototype,'load',ol.ImageTile.prototype.load);bq.exportProperty(ol.Map.prototype,'addControl',ol.Map.prototype.addControl);bq.exportProperty(ol.Map.prototype,'addInteraction',ol.Map.prototype.addInteraction);bq.exportProperty(ol.Map.prototype,'addLayer',ol.Map.prototype.addLayer);bq.exportProperty(ol.Map.prototype,'addOverlay',ol.Map.prototype.addOverlay);bq.exportProperty(ol.Map.prototype,'forEachFeatureAtPixel',ol.Map.prototype.forEachFeatureAtPixel);bq.exportProperty(ol.Map.prototype,'getFeaturesAtPixel',ol.Map.prototype.getFeaturesAtPixel);bq.exportProperty(ol.Map.prototype,'forEachLayerAtPixel',ol.Map.prototype.forEachLayerAtPixel);bq.exportProperty(ol.Map.prototype,'hasFeatureAtPixel',ol.Map.prototype.hasFeatureAtPixel);bq.exportProperty(ol.Map.prototype,'getEventCoordinate',ol.Map.prototype.getEventCoordinate);bq.exportProperty(ol.Map.prototype,'getEventPixel',ol.Map.prototype.getEventPixel);bq.exportProperty(ol.Map.prototype,'getTarget',ol.Map.prototype.getTarget);bq.exportProperty(ol.Map.prototype,'getTargetElement',ol.Map.prototype.getTargetElement);bq.exportProperty(ol.Map.prototype,'getCoordinateFromPixel',ol.Map.prototype.getCoordinateFromPixel);bq.exportProperty(ol.Map.prototype,'getControls',ol.Map.prototype.getControls);bq.exportProperty(ol.Map.prototype,'getOverlays',ol.Map.prototype.getOverlays);bq.exportProperty(ol.Map.prototype,'getOverlayById',ol.Map.prototype.getOverlayById);bq.exportProperty(ol.Map.prototype,'getInteractions',ol.Map.prototype.getInteractions);bq.exportProperty(ol.Map.prototype,'getLayerGroup',ol.Map.prototype.getLayerGroup);bq.exportProperty(ol.Map.prototype,'getLayers',ol.Map.prototype.getLayers);bq.exportProperty(ol.Map.prototype,'getPixelFromCoordinate',ol.Map.prototype.getPixelFromCoordinate);bq.exportProperty(ol.Map.prototype,'getSize',ol.Map.prototype.getSize);bq.exportProperty(ol.Map.prototype,'getView',ol.Map.prototype.getView);bq.exportProperty(ol.Map.prototype,'getViewport',ol.Map.prototype.getViewport);bq.exportProperty(ol.Map.prototype,'renderSync',ol.Map.prototype.renderSync);bq.exportProperty(ol.Map.prototype,'render',ol.Map.prototype.render);bq.exportProperty(ol.Map.prototype,'removeControl',ol.Map.prototype.removeControl);bq.exportProperty(ol.Map.prototype,'removeInteraction',ol.Map.prototype.removeInteraction);bq.exportProperty(ol.Map.prototype,'removeLayer',ol.Map.prototype.removeLayer);bq.exportProperty(ol.Map.prototype,'removeOverlay',ol.Map.prototype.removeOverlay);bq.exportProperty(ol.Map.prototype,'setLayerGroup',ol.Map.prototype.setLayerGroup);bq.exportProperty(ol.Map.prototype,'setSize',ol.Map.prototype.setSize);bq.exportProperty(ol.Map.prototype,'setTarget',ol.Map.prototype.setTarget);bq.exportProperty(ol.Map.prototype,'setView',ol.Map.prototype.setView);bq.exportProperty(ol.Map.prototype,'updateSize',ol.Map.prototype.updateSize);bq.exportProperty(ol.Map.prototype,'get',ol.Map.prototype.get);bq.exportProperty(ol.Map.prototype,'getKeys',ol.Map.prototype.getKeys);bq.exportProperty(ol.Map.prototype,'getProperties',ol.Map.prototype.getProperties);bq.exportProperty(ol.Map.prototype,'set',ol.Map.prototype.set);bq.exportProperty(ol.Map.prototype,'setProperties',ol.Map.prototype.setProperties);bq.exportProperty(ol.Map.prototype,'unset',ol.Map.prototype.unset);bq.exportProperty(ol.Map.prototype,'changed',ol.Map.prototype.changed);bq.exportProperty(ol.Map.prototype,'dispatchEvent',ol.Map.prototype.dispatchEvent);bq.exportProperty(ol.Map.prototype,'getRevision',ol.Map.prototype.getRevision);bq.exportProperty(ol.Map.prototype,'on',ol.Map.prototype.on);bq.exportProperty(ol.Map.prototype,'once',ol.Map.prototype.once);bq.exportProperty(ol.Map.prototype,'un',ol.Map.prototype.un);bq.exportProperty(ol.MapEvent.prototype,'type',ol.MapEvent.prototype.type);bq.exportProperty(ol.MapEvent.prototype,'target',ol.MapEvent.prototype.target);bq.exportProperty(ol.MapEvent.prototype,'preventDefault',ol.MapEvent.prototype.preventDefault);bq.exportProperty(ol.MapEvent.prototype,'stopPropagation',ol.MapEvent.prototype.stopPropagation);bq.exportProperty(ol.MapBrowserEvent.prototype,'map',ol.MapBrowserEvent.prototype.map);bq.exportProperty(ol.MapBrowserEvent.prototype,'frameState',ol.MapBrowserEvent.prototype.frameState);bq.exportProperty(ol.MapBrowserEvent.prototype,'type',ol.MapBrowserEvent.prototype.type);bq.exportProperty(ol.MapBrowserEvent.prototype,'target',ol.MapBrowserEvent.prototype.target);bq.exportProperty(ol.MapBrowserEvent.prototype,'preventDefault',ol.MapBrowserEvent.prototype.preventDefault);bq.exportProperty(ol.MapBrowserEvent.prototype,'stopPropagation',ol.MapBrowserEvent.prototype.stopPropagation);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'originalEvent',ol.MapBrowserPointerEvent.prototype.originalEvent);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'pixel',ol.MapBrowserPointerEvent.prototype.pixel);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'coordinate',ol.MapBrowserPointerEvent.prototype.coordinate);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'dragging',ol.MapBrowserPointerEvent.prototype.dragging);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'preventDefault',ol.MapBrowserPointerEvent.prototype.preventDefault);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'stopPropagation',ol.MapBrowserPointerEvent.prototype.stopPropagation);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'map',ol.MapBrowserPointerEvent.prototype.map);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'frameState',ol.MapBrowserPointerEvent.prototype.frameState);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'type',ol.MapBrowserPointerEvent.prototype.type);bq.exportProperty(ol.MapBrowserPointerEvent.prototype,'target',ol.MapBrowserPointerEvent.prototype.target);bq.exportProperty(ol.Object.Event.prototype,'type',ol.Object.Event.prototype.type);bq.exportProperty(ol.Object.Event.prototype,'target',ol.Object.Event.prototype.target);bq.exportProperty(ol.Object.Event.prototype,'preventDefault',ol.Object.Event.prototype.preventDefault);bq.exportProperty(ol.Object.Event.prototype,'stopPropagation',ol.Object.Event.prototype.stopPropagation);bq.exportProperty(ol.Overlay.prototype,'get',ol.Overlay.prototype.get);bq.exportProperty(ol.Overlay.prototype,'getKeys',ol.Overlay.prototype.getKeys);bq.exportProperty(ol.Overlay.prototype,'getProperties',ol.Overlay.prototype.getProperties);bq.exportProperty(ol.Overlay.prototype,'set',ol.Overlay.prototype.set);bq.exportProperty(ol.Overlay.prototype,'setProperties',ol.Overlay.prototype.setProperties);bq.exportProperty(ol.Overlay.prototype,'unset',ol.Overlay.prototype.unset);bq.exportProperty(ol.Overlay.prototype,'changed',ol.Overlay.prototype.changed);bq.exportProperty(ol.Overlay.prototype,'dispatchEvent',ol.Overlay.prototype.dispatchEvent);bq.exportProperty(ol.Overlay.prototype,'getRevision',ol.Overlay.prototype.getRevision);bq.exportProperty(ol.Overlay.prototype,'on',ol.Overlay.prototype.on);bq.exportProperty(ol.Overlay.prototype,'once',ol.Overlay.prototype.once);bq.exportProperty(ol.Overlay.prototype,'un',ol.Overlay.prototype.un);bq.exportProperty(ol.VectorImageTile.prototype,'getTileCoord',ol.VectorImageTile.prototype.getTileCoord);bq.exportProperty(ol.VectorImageTile.prototype,'load',ol.VectorImageTile.prototype.load);bq.exportProperty(ol.VectorTile.prototype,'getTileCoord',ol.VectorTile.prototype.getTileCoord);bq.exportProperty(ol.VectorTile.prototype,'load',ol.VectorTile.prototype.load);bq.exportProperty(ol.View.prototype,'get',ol.View.prototype.get);bq.exportProperty(ol.View.prototype,'getKeys',ol.View.prototype.getKeys);bq.exportProperty(ol.View.prototype,'getProperties',ol.View.prototype.getProperties);bq.exportProperty(ol.View.prototype,'set',ol.View.prototype.set);bq.exportProperty(ol.View.prototype,'setProperties',ol.View.prototype.setProperties);bq.exportProperty(ol.View.prototype,'unset',ol.View.prototype.unset);bq.exportProperty(ol.View.prototype,'changed',ol.View.prototype.changed);bq.exportProperty(ol.View.prototype,'dispatchEvent',ol.View.prototype.dispatchEvent);bq.exportProperty(ol.View.prototype,'getRevision',ol.View.prototype.getRevision);bq.exportProperty(ol.View.prototype,'on',ol.View.prototype.on);bq.exportProperty(ol.View.prototype,'once',ol.View.prototype.once);bq.exportProperty(ol.View.prototype,'un',ol.View.prototype.un);bq.exportProperty(ol.tilegrid.WMTS.prototype,'forEachTileCoord',ol.tilegrid.WMTS.prototype.forEachTileCoord);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getMaxZoom',ol.tilegrid.WMTS.prototype.getMaxZoom);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getMinZoom',ol.tilegrid.WMTS.prototype.getMinZoom);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getOrigin',ol.tilegrid.WMTS.prototype.getOrigin);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getResolution',ol.tilegrid.WMTS.prototype.getResolution);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getResolutions',ol.tilegrid.WMTS.prototype.getResolutions);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getTileCoordExtent',ol.tilegrid.WMTS.prototype.getTileCoordExtent);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getTileCoordForCoordAndResolution',ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndResolution);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getTileCoordForCoordAndZ',ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndZ);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getTileSize',ol.tilegrid.WMTS.prototype.getTileSize);bq.exportProperty(ol.tilegrid.WMTS.prototype,'getZForResolution',ol.tilegrid.WMTS.prototype.getZForResolution);bq.exportProperty(ol.style.RegularShape.prototype,'getOpacity',ol.style.RegularShape.prototype.getOpacity);bq.exportProperty(ol.style.RegularShape.prototype,'getRotateWithView',ol.style.RegularShape.prototype.getRotateWithView);bq.exportProperty(ol.style.RegularShape.prototype,'getRotation',ol.style.RegularShape.prototype.getRotation);bq.exportProperty(ol.style.RegularShape.prototype,'getScale',ol.style.RegularShape.prototype.getScale);bq.exportProperty(ol.style.RegularShape.prototype,'getSnapToPixel',ol.style.RegularShape.prototype.getSnapToPixel);bq.exportProperty(ol.style.RegularShape.prototype,'setOpacity',ol.style.RegularShape.prototype.setOpacity);bq.exportProperty(ol.style.RegularShape.prototype,'setRotation',ol.style.RegularShape.prototype.setRotation);bq.exportProperty(ol.style.RegularShape.prototype,'setScale',ol.style.RegularShape.prototype.setScale);bq.exportProperty(ol.style.Circle.prototype,'clone',ol.style.Circle.prototype.clone);bq.exportProperty(ol.style.Circle.prototype,'getAngle',ol.style.Circle.prototype.getAngle);bq.exportProperty(ol.style.Circle.prototype,'getFill',ol.style.Circle.prototype.getFill);bq.exportProperty(ol.style.Circle.prototype,'getPoints',ol.style.Circle.prototype.getPoints);bq.exportProperty(ol.style.Circle.prototype,'getRadius',ol.style.Circle.prototype.getRadius);bq.exportProperty(ol.style.Circle.prototype,'getRadius2',ol.style.Circle.prototype.getRadius2);bq.exportProperty(ol.style.Circle.prototype,'getStroke',ol.style.Circle.prototype.getStroke);bq.exportProperty(ol.style.Circle.prototype,'getOpacity',ol.style.Circle.prototype.getOpacity);bq.exportProperty(ol.style.Circle.prototype,'getRotateWithView',ol.style.Circle.prototype.getRotateWithView);bq.exportProperty(ol.style.Circle.prototype,'getRotation',ol.style.Circle.prototype.getRotation);bq.exportProperty(ol.style.Circle.prototype,'getScale',ol.style.Circle.prototype.getScale);bq.exportProperty(ol.style.Circle.prototype,'getSnapToPixel',ol.style.Circle.prototype.getSnapToPixel);bq.exportProperty(ol.style.Circle.prototype,'setOpacity',ol.style.Circle.prototype.setOpacity);bq.exportProperty(ol.style.Circle.prototype,'setRotation',ol.style.Circle.prototype.setRotation);bq.exportProperty(ol.style.Circle.prototype,'setScale',ol.style.Circle.prototype.setScale);bq.exportProperty(ol.style.Icon.prototype,'getOpacity',ol.style.Icon.prototype.getOpacity);bq.exportProperty(ol.style.Icon.prototype,'getRotateWithView',ol.style.Icon.prototype.getRotateWithView);bq.exportProperty(ol.style.Icon.prototype,'getRotation',ol.style.Icon.prototype.getRotation);bq.exportProperty(ol.style.Icon.prototype,'getScale',ol.style.Icon.prototype.getScale);bq.exportProperty(ol.style.Icon.prototype,'getSnapToPixel',ol.style.Icon.prototype.getSnapToPixel);bq.exportProperty(ol.style.Icon.prototype,'setOpacity',ol.style.Icon.prototype.setOpacity);bq.exportProperty(ol.style.Icon.prototype,'setRotation',ol.style.Icon.prototype.setRotation);bq.exportProperty(ol.style.Icon.prototype,'setScale',ol.style.Icon.prototype.setScale);bq.exportProperty(ol.source.Source.prototype,'get',ol.source.Source.prototype.get);bq.exportProperty(ol.source.Source.prototype,'getKeys',ol.source.Source.prototype.getKeys);bq.exportProperty(ol.source.Source.prototype,'getProperties',ol.source.Source.prototype.getProperties);bq.exportProperty(ol.source.Source.prototype,'set',ol.source.Source.prototype.set);bq.exportProperty(ol.source.Source.prototype,'setProperties',ol.source.Source.prototype.setProperties);bq.exportProperty(ol.source.Source.prototype,'unset',ol.source.Source.prototype.unset);bq.exportProperty(ol.source.Source.prototype,'changed',ol.source.Source.prototype.changed);bq.exportProperty(ol.source.Source.prototype,'dispatchEvent',ol.source.Source.prototype.dispatchEvent);bq.exportProperty(ol.source.Source.prototype,'getRevision',ol.source.Source.prototype.getRevision);bq.exportProperty(ol.source.Source.prototype,'on',ol.source.Source.prototype.on);bq.exportProperty(ol.source.Source.prototype,'once',ol.source.Source.prototype.once);bq.exportProperty(ol.source.Source.prototype,'un',ol.source.Source.prototype.un);bq.exportProperty(ol.source.Tile.prototype,'getAttributions',ol.source.Tile.prototype.getAttributions);bq.exportProperty(ol.source.Tile.prototype,'getLogo',ol.source.Tile.prototype.getLogo);bq.exportProperty(ol.source.Tile.prototype,'getProjection',ol.source.Tile.prototype.getProjection);bq.exportProperty(ol.source.Tile.prototype,'getState',ol.source.Tile.prototype.getState);bq.exportProperty(ol.source.Tile.prototype,'refresh',ol.source.Tile.prototype.refresh);bq.exportProperty(ol.source.Tile.prototype,'setAttributions',ol.source.Tile.prototype.setAttributions);bq.exportProperty(ol.source.Tile.prototype,'get',ol.source.Tile.prototype.get);bq.exportProperty(ol.source.Tile.prototype,'getKeys',ol.source.Tile.prototype.getKeys);bq.exportProperty(ol.source.Tile.prototype,'getProperties',ol.source.Tile.prototype.getProperties);bq.exportProperty(ol.source.Tile.prototype,'set',ol.source.Tile.prototype.set);bq.exportProperty(ol.source.Tile.prototype,'setProperties',ol.source.Tile.prototype.setProperties);bq.exportProperty(ol.source.Tile.prototype,'unset',ol.source.Tile.prototype.unset);bq.exportProperty(ol.source.Tile.prototype,'changed',ol.source.Tile.prototype.changed);bq.exportProperty(ol.source.Tile.prototype,'dispatchEvent',ol.source.Tile.prototype.dispatchEvent);bq.exportProperty(ol.source.Tile.prototype,'getRevision',ol.source.Tile.prototype.getRevision);bq.exportProperty(ol.source.Tile.prototype,'on',ol.source.Tile.prototype.on);bq.exportProperty(ol.source.Tile.prototype,'once',ol.source.Tile.prototype.once);bq.exportProperty(ol.source.Tile.prototype,'un',ol.source.Tile.prototype.un);bq.exportProperty(ol.source.UrlTile.prototype,'getTileGrid',ol.source.UrlTile.prototype.getTileGrid);bq.exportProperty(ol.source.UrlTile.prototype,'refresh',ol.source.UrlTile.prototype.refresh);bq.exportProperty(ol.source.UrlTile.prototype,'getAttributions',ol.source.UrlTile.prototype.getAttributions);bq.exportProperty(ol.source.UrlTile.prototype,'getLogo',ol.source.UrlTile.prototype.getLogo);bq.exportProperty(ol.source.UrlTile.prototype,'getProjection',ol.source.UrlTile.prototype.getProjection);bq.exportProperty(ol.source.UrlTile.prototype,'getState',ol.source.UrlTile.prototype.getState);bq.exportProperty(ol.source.UrlTile.prototype,'setAttributions',ol.source.UrlTile.prototype.setAttributions);bq.exportProperty(ol.source.UrlTile.prototype,'get',ol.source.UrlTile.prototype.get);bq.exportProperty(ol.source.UrlTile.prototype,'getKeys',ol.source.UrlTile.prototype.getKeys);bq.exportProperty(ol.source.UrlTile.prototype,'getProperties',ol.source.UrlTile.prototype.getProperties);bq.exportProperty(ol.source.UrlTile.prototype,'set',ol.source.UrlTile.prototype.set);bq.exportProperty(ol.source.UrlTile.prototype,'setProperties',ol.source.UrlTile.prototype.setProperties);bq.exportProperty(ol.source.UrlTile.prototype,'unset',ol.source.UrlTile.prototype.unset);bq.exportProperty(ol.source.UrlTile.prototype,'changed',ol.source.UrlTile.prototype.changed);bq.exportProperty(ol.source.UrlTile.prototype,'dispatchEvent',ol.source.UrlTile.prototype.dispatchEvent);bq.exportProperty(ol.source.UrlTile.prototype,'getRevision',ol.source.UrlTile.prototype.getRevision);bq.exportProperty(ol.source.UrlTile.prototype,'on',ol.source.UrlTile.prototype.on);bq.exportProperty(ol.source.UrlTile.prototype,'once',ol.source.UrlTile.prototype.once);bq.exportProperty(ol.source.UrlTile.prototype,'un',ol.source.UrlTile.prototype.un);bq.exportProperty(ol.source.TileImage.prototype,'getTileLoadFunction',ol.source.TileImage.prototype.getTileLoadFunction);bq.exportProperty(ol.source.TileImage.prototype,'getTileUrlFunction',ol.source.TileImage.prototype.getTileUrlFunction);bq.exportProperty(ol.source.TileImage.prototype,'getUrls',ol.source.TileImage.prototype.getUrls);bq.exportProperty(ol.source.TileImage.prototype,'setTileLoadFunction',ol.source.TileImage.prototype.setTileLoadFunction);bq.exportProperty(ol.source.TileImage.prototype,'setTileUrlFunction',ol.source.TileImage.prototype.setTileUrlFunction);bq.exportProperty(ol.source.TileImage.prototype,'setUrl',ol.source.TileImage.prototype.setUrl);bq.exportProperty(ol.source.TileImage.prototype,'setUrls',ol.source.TileImage.prototype.setUrls);bq.exportProperty(ol.source.TileImage.prototype,'getTileGrid',ol.source.TileImage.prototype.getTileGrid);bq.exportProperty(ol.source.TileImage.prototype,'refresh',ol.source.TileImage.prototype.refresh);bq.exportProperty(ol.source.TileImage.prototype,'getAttributions',ol.source.TileImage.prototype.getAttributions);bq.exportProperty(ol.source.TileImage.prototype,'getLogo',ol.source.TileImage.prototype.getLogo);bq.exportProperty(ol.source.TileImage.prototype,'getProjection',ol.source.TileImage.prototype.getProjection);bq.exportProperty(ol.source.TileImage.prototype,'getState',ol.source.TileImage.prototype.getState);bq.exportProperty(ol.source.TileImage.prototype,'setAttributions',ol.source.TileImage.prototype.setAttributions);bq.exportProperty(ol.source.TileImage.prototype,'get',ol.source.TileImage.prototype.get);bq.exportProperty(ol.source.TileImage.prototype,'getKeys',ol.source.TileImage.prototype.getKeys);bq.exportProperty(ol.source.TileImage.prototype,'getProperties',ol.source.TileImage.prototype.getProperties);bq.exportProperty(ol.source.TileImage.prototype,'set',ol.source.TileImage.prototype.set);bq.exportProperty(ol.source.TileImage.prototype,'setProperties',ol.source.TileImage.prototype.setProperties);bq.exportProperty(ol.source.TileImage.prototype,'unset',ol.source.TileImage.prototype.unset);bq.exportProperty(ol.source.TileImage.prototype,'changed',ol.source.TileImage.prototype.changed);bq.exportProperty(ol.source.TileImage.prototype,'dispatchEvent',ol.source.TileImage.prototype.dispatchEvent);bq.exportProperty(ol.source.TileImage.prototype,'getRevision',ol.source.TileImage.prototype.getRevision);bq.exportProperty(ol.source.TileImage.prototype,'on',ol.source.TileImage.prototype.on);bq.exportProperty(ol.source.TileImage.prototype,'once',ol.source.TileImage.prototype.once);bq.exportProperty(ol.source.TileImage.prototype,'un',ol.source.TileImage.prototype.un);bq.exportProperty(ol.source.BingMaps.prototype,'setRenderReprojectionEdges',ol.source.BingMaps.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.BingMaps.prototype,'setTileGridForProjection',ol.source.BingMaps.prototype.setTileGridForProjection);bq.exportProperty(ol.source.BingMaps.prototype,'getTileLoadFunction',ol.source.BingMaps.prototype.getTileLoadFunction);bq.exportProperty(ol.source.BingMaps.prototype,'getTileUrlFunction',ol.source.BingMaps.prototype.getTileUrlFunction);bq.exportProperty(ol.source.BingMaps.prototype,'getUrls',ol.source.BingMaps.prototype.getUrls);bq.exportProperty(ol.source.BingMaps.prototype,'setTileLoadFunction',ol.source.BingMaps.prototype.setTileLoadFunction);bq.exportProperty(ol.source.BingMaps.prototype,'setTileUrlFunction',ol.source.BingMaps.prototype.setTileUrlFunction);bq.exportProperty(ol.source.BingMaps.prototype,'setUrl',ol.source.BingMaps.prototype.setUrl);bq.exportProperty(ol.source.BingMaps.prototype,'setUrls',ol.source.BingMaps.prototype.setUrls);bq.exportProperty(ol.source.BingMaps.prototype,'getTileGrid',ol.source.BingMaps.prototype.getTileGrid);bq.exportProperty(ol.source.BingMaps.prototype,'refresh',ol.source.BingMaps.prototype.refresh);bq.exportProperty(ol.source.BingMaps.prototype,'getAttributions',ol.source.BingMaps.prototype.getAttributions);bq.exportProperty(ol.source.BingMaps.prototype,'getLogo',ol.source.BingMaps.prototype.getLogo);bq.exportProperty(ol.source.BingMaps.prototype,'getProjection',ol.source.BingMaps.prototype.getProjection);bq.exportProperty(ol.source.BingMaps.prototype,'getState',ol.source.BingMaps.prototype.getState);bq.exportProperty(ol.source.BingMaps.prototype,'setAttributions',ol.source.BingMaps.prototype.setAttributions);bq.exportProperty(ol.source.BingMaps.prototype,'get',ol.source.BingMaps.prototype.get);bq.exportProperty(ol.source.BingMaps.prototype,'getKeys',ol.source.BingMaps.prototype.getKeys);bq.exportProperty(ol.source.BingMaps.prototype,'getProperties',ol.source.BingMaps.prototype.getProperties);bq.exportProperty(ol.source.BingMaps.prototype,'set',ol.source.BingMaps.prototype.set);bq.exportProperty(ol.source.BingMaps.prototype,'setProperties',ol.source.BingMaps.prototype.setProperties);bq.exportProperty(ol.source.BingMaps.prototype,'unset',ol.source.BingMaps.prototype.unset);bq.exportProperty(ol.source.BingMaps.prototype,'changed',ol.source.BingMaps.prototype.changed);bq.exportProperty(ol.source.BingMaps.prototype,'dispatchEvent',ol.source.BingMaps.prototype.dispatchEvent);bq.exportProperty(ol.source.BingMaps.prototype,'getRevision',ol.source.BingMaps.prototype.getRevision);bq.exportProperty(ol.source.BingMaps.prototype,'on',ol.source.BingMaps.prototype.on);bq.exportProperty(ol.source.BingMaps.prototype,'once',ol.source.BingMaps.prototype.once);bq.exportProperty(ol.source.BingMaps.prototype,'un',ol.source.BingMaps.prototype.un);bq.exportProperty(ol.source.XYZ.prototype,'setRenderReprojectionEdges',ol.source.XYZ.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.XYZ.prototype,'setTileGridForProjection',ol.source.XYZ.prototype.setTileGridForProjection);bq.exportProperty(ol.source.XYZ.prototype,'getTileLoadFunction',ol.source.XYZ.prototype.getTileLoadFunction);bq.exportProperty(ol.source.XYZ.prototype,'getTileUrlFunction',ol.source.XYZ.prototype.getTileUrlFunction);bq.exportProperty(ol.source.XYZ.prototype,'getUrls',ol.source.XYZ.prototype.getUrls);bq.exportProperty(ol.source.XYZ.prototype,'setTileLoadFunction',ol.source.XYZ.prototype.setTileLoadFunction);bq.exportProperty(ol.source.XYZ.prototype,'setTileUrlFunction',ol.source.XYZ.prototype.setTileUrlFunction);bq.exportProperty(ol.source.XYZ.prototype,'setUrl',ol.source.XYZ.prototype.setUrl);bq.exportProperty(ol.source.XYZ.prototype,'setUrls',ol.source.XYZ.prototype.setUrls);bq.exportProperty(ol.source.XYZ.prototype,'getTileGrid',ol.source.XYZ.prototype.getTileGrid);bq.exportProperty(ol.source.XYZ.prototype,'refresh',ol.source.XYZ.prototype.refresh);bq.exportProperty(ol.source.XYZ.prototype,'getAttributions',ol.source.XYZ.prototype.getAttributions);bq.exportProperty(ol.source.XYZ.prototype,'getLogo',ol.source.XYZ.prototype.getLogo);bq.exportProperty(ol.source.XYZ.prototype,'getProjection',ol.source.XYZ.prototype.getProjection);bq.exportProperty(ol.source.XYZ.prototype,'getState',ol.source.XYZ.prototype.getState);bq.exportProperty(ol.source.XYZ.prototype,'setAttributions',ol.source.XYZ.prototype.setAttributions);bq.exportProperty(ol.source.XYZ.prototype,'get',ol.source.XYZ.prototype.get);bq.exportProperty(ol.source.XYZ.prototype,'getKeys',ol.source.XYZ.prototype.getKeys);bq.exportProperty(ol.source.XYZ.prototype,'getProperties',ol.source.XYZ.prototype.getProperties);bq.exportProperty(ol.source.XYZ.prototype,'set',ol.source.XYZ.prototype.set);bq.exportProperty(ol.source.XYZ.prototype,'setProperties',ol.source.XYZ.prototype.setProperties);bq.exportProperty(ol.source.XYZ.prototype,'unset',ol.source.XYZ.prototype.unset);bq.exportProperty(ol.source.XYZ.prototype,'changed',ol.source.XYZ.prototype.changed);bq.exportProperty(ol.source.XYZ.prototype,'dispatchEvent',ol.source.XYZ.prototype.dispatchEvent);bq.exportProperty(ol.source.XYZ.prototype,'getRevision',ol.source.XYZ.prototype.getRevision);bq.exportProperty(ol.source.XYZ.prototype,'on',ol.source.XYZ.prototype.on);bq.exportProperty(ol.source.XYZ.prototype,'once',ol.source.XYZ.prototype.once);bq.exportProperty(ol.source.XYZ.prototype,'un',ol.source.XYZ.prototype.un);bq.exportProperty(ol.source.CartoDB.prototype,'setRenderReprojectionEdges',ol.source.CartoDB.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.CartoDB.prototype,'setTileGridForProjection',ol.source.CartoDB.prototype.setTileGridForProjection);bq.exportProperty(ol.source.CartoDB.prototype,'getTileLoadFunction',ol.source.CartoDB.prototype.getTileLoadFunction);bq.exportProperty(ol.source.CartoDB.prototype,'getTileUrlFunction',ol.source.CartoDB.prototype.getTileUrlFunction);bq.exportProperty(ol.source.CartoDB.prototype,'getUrls',ol.source.CartoDB.prototype.getUrls);bq.exportProperty(ol.source.CartoDB.prototype,'setTileLoadFunction',ol.source.CartoDB.prototype.setTileLoadFunction);bq.exportProperty(ol.source.CartoDB.prototype,'setTileUrlFunction',ol.source.CartoDB.prototype.setTileUrlFunction);bq.exportProperty(ol.source.CartoDB.prototype,'setUrl',ol.source.CartoDB.prototype.setUrl);bq.exportProperty(ol.source.CartoDB.prototype,'setUrls',ol.source.CartoDB.prototype.setUrls);bq.exportProperty(ol.source.CartoDB.prototype,'getTileGrid',ol.source.CartoDB.prototype.getTileGrid);bq.exportProperty(ol.source.CartoDB.prototype,'refresh',ol.source.CartoDB.prototype.refresh);bq.exportProperty(ol.source.CartoDB.prototype,'getAttributions',ol.source.CartoDB.prototype.getAttributions);bq.exportProperty(ol.source.CartoDB.prototype,'getLogo',ol.source.CartoDB.prototype.getLogo);bq.exportProperty(ol.source.CartoDB.prototype,'getProjection',ol.source.CartoDB.prototype.getProjection);bq.exportProperty(ol.source.CartoDB.prototype,'getState',ol.source.CartoDB.prototype.getState);bq.exportProperty(ol.source.CartoDB.prototype,'setAttributions',ol.source.CartoDB.prototype.setAttributions);bq.exportProperty(ol.source.CartoDB.prototype,'get',ol.source.CartoDB.prototype.get);bq.exportProperty(ol.source.CartoDB.prototype,'getKeys',ol.source.CartoDB.prototype.getKeys);bq.exportProperty(ol.source.CartoDB.prototype,'getProperties',ol.source.CartoDB.prototype.getProperties);bq.exportProperty(ol.source.CartoDB.prototype,'set',ol.source.CartoDB.prototype.set);bq.exportProperty(ol.source.CartoDB.prototype,'setProperties',ol.source.CartoDB.prototype.setProperties);bq.exportProperty(ol.source.CartoDB.prototype,'unset',ol.source.CartoDB.prototype.unset);bq.exportProperty(ol.source.CartoDB.prototype,'changed',ol.source.CartoDB.prototype.changed);bq.exportProperty(ol.source.CartoDB.prototype,'dispatchEvent',ol.source.CartoDB.prototype.dispatchEvent);bq.exportProperty(ol.source.CartoDB.prototype,'getRevision',ol.source.CartoDB.prototype.getRevision);bq.exportProperty(ol.source.CartoDB.prototype,'on',ol.source.CartoDB.prototype.on);bq.exportProperty(ol.source.CartoDB.prototype,'once',ol.source.CartoDB.prototype.once);bq.exportProperty(ol.source.CartoDB.prototype,'un',ol.source.CartoDB.prototype.un);bq.exportProperty(ol.source.Vector.prototype,'getAttributions',ol.source.Vector.prototype.getAttributions);bq.exportProperty(ol.source.Vector.prototype,'getLogo',ol.source.Vector.prototype.getLogo);bq.exportProperty(ol.source.Vector.prototype,'getProjection',ol.source.Vector.prototype.getProjection);bq.exportProperty(ol.source.Vector.prototype,'getState',ol.source.Vector.prototype.getState);bq.exportProperty(ol.source.Vector.prototype,'refresh',ol.source.Vector.prototype.refresh);bq.exportProperty(ol.source.Vector.prototype,'setAttributions',ol.source.Vector.prototype.setAttributions);bq.exportProperty(ol.source.Vector.prototype,'get',ol.source.Vector.prototype.get);bq.exportProperty(ol.source.Vector.prototype,'getKeys',ol.source.Vector.prototype.getKeys);bq.exportProperty(ol.source.Vector.prototype,'getProperties',ol.source.Vector.prototype.getProperties);bq.exportProperty(ol.source.Vector.prototype,'set',ol.source.Vector.prototype.set);bq.exportProperty(ol.source.Vector.prototype,'setProperties',ol.source.Vector.prototype.setProperties);bq.exportProperty(ol.source.Vector.prototype,'unset',ol.source.Vector.prototype.unset);bq.exportProperty(ol.source.Vector.prototype,'changed',ol.source.Vector.prototype.changed);bq.exportProperty(ol.source.Vector.prototype,'dispatchEvent',ol.source.Vector.prototype.dispatchEvent);bq.exportProperty(ol.source.Vector.prototype,'getRevision',ol.source.Vector.prototype.getRevision);bq.exportProperty(ol.source.Vector.prototype,'on',ol.source.Vector.prototype.on);bq.exportProperty(ol.source.Vector.prototype,'once',ol.source.Vector.prototype.once);bq.exportProperty(ol.source.Vector.prototype,'un',ol.source.Vector.prototype.un);bq.exportProperty(ol.source.Cluster.prototype,'addFeature',ol.source.Cluster.prototype.addFeature);bq.exportProperty(ol.source.Cluster.prototype,'addFeatures',ol.source.Cluster.prototype.addFeatures);bq.exportProperty(ol.source.Cluster.prototype,'clear',ol.source.Cluster.prototype.clear);bq.exportProperty(ol.source.Cluster.prototype,'forEachFeature',ol.source.Cluster.prototype.forEachFeature);bq.exportProperty(ol.source.Cluster.prototype,'forEachFeatureInExtent',ol.source.Cluster.prototype.forEachFeatureInExtent);bq.exportProperty(ol.source.Cluster.prototype,'forEachFeatureIntersectingExtent',ol.source.Cluster.prototype.forEachFeatureIntersectingExtent);bq.exportProperty(ol.source.Cluster.prototype,'getFeaturesCollection',ol.source.Cluster.prototype.getFeaturesCollection);bq.exportProperty(ol.source.Cluster.prototype,'getFeatures',ol.source.Cluster.prototype.getFeatures);bq.exportProperty(ol.source.Cluster.prototype,'getFeaturesAtCoordinate',ol.source.Cluster.prototype.getFeaturesAtCoordinate);bq.exportProperty(ol.source.Cluster.prototype,'getFeaturesInExtent',ol.source.Cluster.prototype.getFeaturesInExtent);bq.exportProperty(ol.source.Cluster.prototype,'getClosestFeatureToCoordinate',ol.source.Cluster.prototype.getClosestFeatureToCoordinate);bq.exportProperty(ol.source.Cluster.prototype,'getExtent',ol.source.Cluster.prototype.getExtent);bq.exportProperty(ol.source.Cluster.prototype,'getFeatureById',ol.source.Cluster.prototype.getFeatureById);bq.exportProperty(ol.source.Cluster.prototype,'getFormat',ol.source.Cluster.prototype.getFormat);bq.exportProperty(ol.source.Cluster.prototype,'getUrl',ol.source.Cluster.prototype.getUrl);bq.exportProperty(ol.source.Cluster.prototype,'removeLoadedExtent',ol.source.Cluster.prototype.removeLoadedExtent);bq.exportProperty(ol.source.Cluster.prototype,'removeFeature',ol.source.Cluster.prototype.removeFeature);bq.exportProperty(ol.source.Cluster.prototype,'setLoader',ol.source.Cluster.prototype.setLoader);bq.exportProperty(ol.source.Cluster.prototype,'getAttributions',ol.source.Cluster.prototype.getAttributions);bq.exportProperty(ol.source.Cluster.prototype,'getLogo',ol.source.Cluster.prototype.getLogo);bq.exportProperty(ol.source.Cluster.prototype,'getProjection',ol.source.Cluster.prototype.getProjection);bq.exportProperty(ol.source.Cluster.prototype,'getState',ol.source.Cluster.prototype.getState);bq.exportProperty(ol.source.Cluster.prototype,'refresh',ol.source.Cluster.prototype.refresh);bq.exportProperty(ol.source.Cluster.prototype,'setAttributions',ol.source.Cluster.prototype.setAttributions);bq.exportProperty(ol.source.Cluster.prototype,'get',ol.source.Cluster.prototype.get);bq.exportProperty(ol.source.Cluster.prototype,'getKeys',ol.source.Cluster.prototype.getKeys);bq.exportProperty(ol.source.Cluster.prototype,'getProperties',ol.source.Cluster.prototype.getProperties);bq.exportProperty(ol.source.Cluster.prototype,'set',ol.source.Cluster.prototype.set);bq.exportProperty(ol.source.Cluster.prototype,'setProperties',ol.source.Cluster.prototype.setProperties);bq.exportProperty(ol.source.Cluster.prototype,'unset',ol.source.Cluster.prototype.unset);bq.exportProperty(ol.source.Cluster.prototype,'changed',ol.source.Cluster.prototype.changed);bq.exportProperty(ol.source.Cluster.prototype,'dispatchEvent',ol.source.Cluster.prototype.dispatchEvent);bq.exportProperty(ol.source.Cluster.prototype,'getRevision',ol.source.Cluster.prototype.getRevision);bq.exportProperty(ol.source.Cluster.prototype,'on',ol.source.Cluster.prototype.on);bq.exportProperty(ol.source.Cluster.prototype,'once',ol.source.Cluster.prototype.once);bq.exportProperty(ol.source.Cluster.prototype,'un',ol.source.Cluster.prototype.un);bq.exportProperty(ol.source.Image.prototype,'getAttributions',ol.source.Image.prototype.getAttributions);bq.exportProperty(ol.source.Image.prototype,'getLogo',ol.source.Image.prototype.getLogo);bq.exportProperty(ol.source.Image.prototype,'getProjection',ol.source.Image.prototype.getProjection);bq.exportProperty(ol.source.Image.prototype,'getState',ol.source.Image.prototype.getState);bq.exportProperty(ol.source.Image.prototype,'refresh',ol.source.Image.prototype.refresh);bq.exportProperty(ol.source.Image.prototype,'setAttributions',ol.source.Image.prototype.setAttributions);bq.exportProperty(ol.source.Image.prototype,'get',ol.source.Image.prototype.get);bq.exportProperty(ol.source.Image.prototype,'getKeys',ol.source.Image.prototype.getKeys);bq.exportProperty(ol.source.Image.prototype,'getProperties',ol.source.Image.prototype.getProperties);bq.exportProperty(ol.source.Image.prototype,'set',ol.source.Image.prototype.set);bq.exportProperty(ol.source.Image.prototype,'setProperties',ol.source.Image.prototype.setProperties);bq.exportProperty(ol.source.Image.prototype,'unset',ol.source.Image.prototype.unset);bq.exportProperty(ol.source.Image.prototype,'changed',ol.source.Image.prototype.changed);bq.exportProperty(ol.source.Image.prototype,'dispatchEvent',ol.source.Image.prototype.dispatchEvent);bq.exportProperty(ol.source.Image.prototype,'getRevision',ol.source.Image.prototype.getRevision);bq.exportProperty(ol.source.Image.prototype,'on',ol.source.Image.prototype.on);bq.exportProperty(ol.source.Image.prototype,'once',ol.source.Image.prototype.once);bq.exportProperty(ol.source.Image.prototype,'un',ol.source.Image.prototype.un);bq.exportProperty(ol.source.Image.Event.prototype,'type',ol.source.Image.Event.prototype.type);bq.exportProperty(ol.source.Image.Event.prototype,'target',ol.source.Image.Event.prototype.target);bq.exportProperty(ol.source.Image.Event.prototype,'preventDefault',ol.source.Image.Event.prototype.preventDefault);bq.exportProperty(ol.source.Image.Event.prototype,'stopPropagation',ol.source.Image.Event.prototype.stopPropagation);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getAttributions',ol.source.ImageArcGISRest.prototype.getAttributions);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getLogo',ol.source.ImageArcGISRest.prototype.getLogo);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getProjection',ol.source.ImageArcGISRest.prototype.getProjection);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getState',ol.source.ImageArcGISRest.prototype.getState);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'refresh',ol.source.ImageArcGISRest.prototype.refresh);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'setAttributions',ol.source.ImageArcGISRest.prototype.setAttributions);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'get',ol.source.ImageArcGISRest.prototype.get);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getKeys',ol.source.ImageArcGISRest.prototype.getKeys);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getProperties',ol.source.ImageArcGISRest.prototype.getProperties);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'set',ol.source.ImageArcGISRest.prototype.set);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'setProperties',ol.source.ImageArcGISRest.prototype.setProperties);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'unset',ol.source.ImageArcGISRest.prototype.unset);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'changed',ol.source.ImageArcGISRest.prototype.changed);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'dispatchEvent',ol.source.ImageArcGISRest.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'getRevision',ol.source.ImageArcGISRest.prototype.getRevision);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'on',ol.source.ImageArcGISRest.prototype.on);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'once',ol.source.ImageArcGISRest.prototype.once);bq.exportProperty(ol.source.ImageArcGISRest.prototype,'un',ol.source.ImageArcGISRest.prototype.un);bq.exportProperty(ol.source.ImageCanvas.prototype,'getAttributions',ol.source.ImageCanvas.prototype.getAttributions);bq.exportProperty(ol.source.ImageCanvas.prototype,'getLogo',ol.source.ImageCanvas.prototype.getLogo);bq.exportProperty(ol.source.ImageCanvas.prototype,'getProjection',ol.source.ImageCanvas.prototype.getProjection);bq.exportProperty(ol.source.ImageCanvas.prototype,'getState',ol.source.ImageCanvas.prototype.getState);bq.exportProperty(ol.source.ImageCanvas.prototype,'refresh',ol.source.ImageCanvas.prototype.refresh);bq.exportProperty(ol.source.ImageCanvas.prototype,'setAttributions',ol.source.ImageCanvas.prototype.setAttributions);bq.exportProperty(ol.source.ImageCanvas.prototype,'get',ol.source.ImageCanvas.prototype.get);bq.exportProperty(ol.source.ImageCanvas.prototype,'getKeys',ol.source.ImageCanvas.prototype.getKeys);bq.exportProperty(ol.source.ImageCanvas.prototype,'getProperties',ol.source.ImageCanvas.prototype.getProperties);bq.exportProperty(ol.source.ImageCanvas.prototype,'set',ol.source.ImageCanvas.prototype.set);bq.exportProperty(ol.source.ImageCanvas.prototype,'setProperties',ol.source.ImageCanvas.prototype.setProperties);bq.exportProperty(ol.source.ImageCanvas.prototype,'unset',ol.source.ImageCanvas.prototype.unset);bq.exportProperty(ol.source.ImageCanvas.prototype,'changed',ol.source.ImageCanvas.prototype.changed);bq.exportProperty(ol.source.ImageCanvas.prototype,'dispatchEvent',ol.source.ImageCanvas.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageCanvas.prototype,'getRevision',ol.source.ImageCanvas.prototype.getRevision);bq.exportProperty(ol.source.ImageCanvas.prototype,'on',ol.source.ImageCanvas.prototype.on);bq.exportProperty(ol.source.ImageCanvas.prototype,'once',ol.source.ImageCanvas.prototype.once);bq.exportProperty(ol.source.ImageCanvas.prototype,'un',ol.source.ImageCanvas.prototype.un);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getAttributions',ol.source.ImageMapGuide.prototype.getAttributions);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getLogo',ol.source.ImageMapGuide.prototype.getLogo);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getProjection',ol.source.ImageMapGuide.prototype.getProjection);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getState',ol.source.ImageMapGuide.prototype.getState);bq.exportProperty(ol.source.ImageMapGuide.prototype,'refresh',ol.source.ImageMapGuide.prototype.refresh);bq.exportProperty(ol.source.ImageMapGuide.prototype,'setAttributions',ol.source.ImageMapGuide.prototype.setAttributions);bq.exportProperty(ol.source.ImageMapGuide.prototype,'get',ol.source.ImageMapGuide.prototype.get);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getKeys',ol.source.ImageMapGuide.prototype.getKeys);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getProperties',ol.source.ImageMapGuide.prototype.getProperties);bq.exportProperty(ol.source.ImageMapGuide.prototype,'set',ol.source.ImageMapGuide.prototype.set);bq.exportProperty(ol.source.ImageMapGuide.prototype,'setProperties',ol.source.ImageMapGuide.prototype.setProperties);bq.exportProperty(ol.source.ImageMapGuide.prototype,'unset',ol.source.ImageMapGuide.prototype.unset);bq.exportProperty(ol.source.ImageMapGuide.prototype,'changed',ol.source.ImageMapGuide.prototype.changed);bq.exportProperty(ol.source.ImageMapGuide.prototype,'dispatchEvent',ol.source.ImageMapGuide.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageMapGuide.prototype,'getRevision',ol.source.ImageMapGuide.prototype.getRevision);bq.exportProperty(ol.source.ImageMapGuide.prototype,'on',ol.source.ImageMapGuide.prototype.on);bq.exportProperty(ol.source.ImageMapGuide.prototype,'once',ol.source.ImageMapGuide.prototype.once);bq.exportProperty(ol.source.ImageMapGuide.prototype,'un',ol.source.ImageMapGuide.prototype.un);bq.exportProperty(ol.source.ImageStatic.prototype,'getAttributions',ol.source.ImageStatic.prototype.getAttributions);bq.exportProperty(ol.source.ImageStatic.prototype,'getLogo',ol.source.ImageStatic.prototype.getLogo);bq.exportProperty(ol.source.ImageStatic.prototype,'getProjection',ol.source.ImageStatic.prototype.getProjection);bq.exportProperty(ol.source.ImageStatic.prototype,'getState',ol.source.ImageStatic.prototype.getState);bq.exportProperty(ol.source.ImageStatic.prototype,'refresh',ol.source.ImageStatic.prototype.refresh);bq.exportProperty(ol.source.ImageStatic.prototype,'setAttributions',ol.source.ImageStatic.prototype.setAttributions);bq.exportProperty(ol.source.ImageStatic.prototype,'get',ol.source.ImageStatic.prototype.get);bq.exportProperty(ol.source.ImageStatic.prototype,'getKeys',ol.source.ImageStatic.prototype.getKeys);bq.exportProperty(ol.source.ImageStatic.prototype,'getProperties',ol.source.ImageStatic.prototype.getProperties);bq.exportProperty(ol.source.ImageStatic.prototype,'set',ol.source.ImageStatic.prototype.set);bq.exportProperty(ol.source.ImageStatic.prototype,'setProperties',ol.source.ImageStatic.prototype.setProperties);bq.exportProperty(ol.source.ImageStatic.prototype,'unset',ol.source.ImageStatic.prototype.unset);bq.exportProperty(ol.source.ImageStatic.prototype,'changed',ol.source.ImageStatic.prototype.changed);bq.exportProperty(ol.source.ImageStatic.prototype,'dispatchEvent',ol.source.ImageStatic.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageStatic.prototype,'getRevision',ol.source.ImageStatic.prototype.getRevision);bq.exportProperty(ol.source.ImageStatic.prototype,'on',ol.source.ImageStatic.prototype.on);bq.exportProperty(ol.source.ImageStatic.prototype,'once',ol.source.ImageStatic.prototype.once);bq.exportProperty(ol.source.ImageStatic.prototype,'un',ol.source.ImageStatic.prototype.un);bq.exportProperty(ol.source.ImageVector.prototype,'getAttributions',ol.source.ImageVector.prototype.getAttributions);bq.exportProperty(ol.source.ImageVector.prototype,'getLogo',ol.source.ImageVector.prototype.getLogo);bq.exportProperty(ol.source.ImageVector.prototype,'getProjection',ol.source.ImageVector.prototype.getProjection);bq.exportProperty(ol.source.ImageVector.prototype,'getState',ol.source.ImageVector.prototype.getState);bq.exportProperty(ol.source.ImageVector.prototype,'refresh',ol.source.ImageVector.prototype.refresh);bq.exportProperty(ol.source.ImageVector.prototype,'setAttributions',ol.source.ImageVector.prototype.setAttributions);bq.exportProperty(ol.source.ImageVector.prototype,'get',ol.source.ImageVector.prototype.get);bq.exportProperty(ol.source.ImageVector.prototype,'getKeys',ol.source.ImageVector.prototype.getKeys);bq.exportProperty(ol.source.ImageVector.prototype,'getProperties',ol.source.ImageVector.prototype.getProperties);bq.exportProperty(ol.source.ImageVector.prototype,'set',ol.source.ImageVector.prototype.set);bq.exportProperty(ol.source.ImageVector.prototype,'setProperties',ol.source.ImageVector.prototype.setProperties);bq.exportProperty(ol.source.ImageVector.prototype,'unset',ol.source.ImageVector.prototype.unset);bq.exportProperty(ol.source.ImageVector.prototype,'changed',ol.source.ImageVector.prototype.changed);bq.exportProperty(ol.source.ImageVector.prototype,'dispatchEvent',ol.source.ImageVector.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageVector.prototype,'getRevision',ol.source.ImageVector.prototype.getRevision);bq.exportProperty(ol.source.ImageVector.prototype,'on',ol.source.ImageVector.prototype.on);bq.exportProperty(ol.source.ImageVector.prototype,'once',ol.source.ImageVector.prototype.once);bq.exportProperty(ol.source.ImageVector.prototype,'un',ol.source.ImageVector.prototype.un);bq.exportProperty(ol.source.ImageWMS.prototype,'getAttributions',ol.source.ImageWMS.prototype.getAttributions);bq.exportProperty(ol.source.ImageWMS.prototype,'getLogo',ol.source.ImageWMS.prototype.getLogo);bq.exportProperty(ol.source.ImageWMS.prototype,'getProjection',ol.source.ImageWMS.prototype.getProjection);bq.exportProperty(ol.source.ImageWMS.prototype,'getState',ol.source.ImageWMS.prototype.getState);bq.exportProperty(ol.source.ImageWMS.prototype,'refresh',ol.source.ImageWMS.prototype.refresh);bq.exportProperty(ol.source.ImageWMS.prototype,'setAttributions',ol.source.ImageWMS.prototype.setAttributions);bq.exportProperty(ol.source.ImageWMS.prototype,'get',ol.source.ImageWMS.prototype.get);bq.exportProperty(ol.source.ImageWMS.prototype,'getKeys',ol.source.ImageWMS.prototype.getKeys);bq.exportProperty(ol.source.ImageWMS.prototype,'getProperties',ol.source.ImageWMS.prototype.getProperties);bq.exportProperty(ol.source.ImageWMS.prototype,'set',ol.source.ImageWMS.prototype.set);bq.exportProperty(ol.source.ImageWMS.prototype,'setProperties',ol.source.ImageWMS.prototype.setProperties);bq.exportProperty(ol.source.ImageWMS.prototype,'unset',ol.source.ImageWMS.prototype.unset);bq.exportProperty(ol.source.ImageWMS.prototype,'changed',ol.source.ImageWMS.prototype.changed);bq.exportProperty(ol.source.ImageWMS.prototype,'dispatchEvent',ol.source.ImageWMS.prototype.dispatchEvent);bq.exportProperty(ol.source.ImageWMS.prototype,'getRevision',ol.source.ImageWMS.prototype.getRevision);bq.exportProperty(ol.source.ImageWMS.prototype,'on',ol.source.ImageWMS.prototype.on);bq.exportProperty(ol.source.ImageWMS.prototype,'once',ol.source.ImageWMS.prototype.once);bq.exportProperty(ol.source.ImageWMS.prototype,'un',ol.source.ImageWMS.prototype.un);bq.exportProperty(ol.source.OSM.prototype,'setRenderReprojectionEdges',ol.source.OSM.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.OSM.prototype,'setTileGridForProjection',ol.source.OSM.prototype.setTileGridForProjection);bq.exportProperty(ol.source.OSM.prototype,'getTileLoadFunction',ol.source.OSM.prototype.getTileLoadFunction);bq.exportProperty(ol.source.OSM.prototype,'getTileUrlFunction',ol.source.OSM.prototype.getTileUrlFunction);bq.exportProperty(ol.source.OSM.prototype,'getUrls',ol.source.OSM.prototype.getUrls);bq.exportProperty(ol.source.OSM.prototype,'setTileLoadFunction',ol.source.OSM.prototype.setTileLoadFunction);bq.exportProperty(ol.source.OSM.prototype,'setTileUrlFunction',ol.source.OSM.prototype.setTileUrlFunction);bq.exportProperty(ol.source.OSM.prototype,'setUrl',ol.source.OSM.prototype.setUrl);bq.exportProperty(ol.source.OSM.prototype,'setUrls',ol.source.OSM.prototype.setUrls);bq.exportProperty(ol.source.OSM.prototype,'getTileGrid',ol.source.OSM.prototype.getTileGrid);bq.exportProperty(ol.source.OSM.prototype,'refresh',ol.source.OSM.prototype.refresh);bq.exportProperty(ol.source.OSM.prototype,'getAttributions',ol.source.OSM.prototype.getAttributions);bq.exportProperty(ol.source.OSM.prototype,'getLogo',ol.source.OSM.prototype.getLogo);bq.exportProperty(ol.source.OSM.prototype,'getProjection',ol.source.OSM.prototype.getProjection);bq.exportProperty(ol.source.OSM.prototype,'getState',ol.source.OSM.prototype.getState);bq.exportProperty(ol.source.OSM.prototype,'setAttributions',ol.source.OSM.prototype.setAttributions);bq.exportProperty(ol.source.OSM.prototype,'get',ol.source.OSM.prototype.get);bq.exportProperty(ol.source.OSM.prototype,'getKeys',ol.source.OSM.prototype.getKeys);bq.exportProperty(ol.source.OSM.prototype,'getProperties',ol.source.OSM.prototype.getProperties);bq.exportProperty(ol.source.OSM.prototype,'set',ol.source.OSM.prototype.set);bq.exportProperty(ol.source.OSM.prototype,'setProperties',ol.source.OSM.prototype.setProperties);bq.exportProperty(ol.source.OSM.prototype,'unset',ol.source.OSM.prototype.unset);bq.exportProperty(ol.source.OSM.prototype,'changed',ol.source.OSM.prototype.changed);bq.exportProperty(ol.source.OSM.prototype,'dispatchEvent',ol.source.OSM.prototype.dispatchEvent);bq.exportProperty(ol.source.OSM.prototype,'getRevision',ol.source.OSM.prototype.getRevision);bq.exportProperty(ol.source.OSM.prototype,'on',ol.source.OSM.prototype.on);bq.exportProperty(ol.source.OSM.prototype,'once',ol.source.OSM.prototype.once);bq.exportProperty(ol.source.OSM.prototype,'un',ol.source.OSM.prototype.un);bq.exportProperty(ol.source.Raster.prototype,'getAttributions',ol.source.Raster.prototype.getAttributions);bq.exportProperty(ol.source.Raster.prototype,'getLogo',ol.source.Raster.prototype.getLogo);bq.exportProperty(ol.source.Raster.prototype,'getProjection',ol.source.Raster.prototype.getProjection);bq.exportProperty(ol.source.Raster.prototype,'getState',ol.source.Raster.prototype.getState);bq.exportProperty(ol.source.Raster.prototype,'refresh',ol.source.Raster.prototype.refresh);bq.exportProperty(ol.source.Raster.prototype,'setAttributions',ol.source.Raster.prototype.setAttributions);bq.exportProperty(ol.source.Raster.prototype,'get',ol.source.Raster.prototype.get);bq.exportProperty(ol.source.Raster.prototype,'getKeys',ol.source.Raster.prototype.getKeys);bq.exportProperty(ol.source.Raster.prototype,'getProperties',ol.source.Raster.prototype.getProperties);bq.exportProperty(ol.source.Raster.prototype,'set',ol.source.Raster.prototype.set);bq.exportProperty(ol.source.Raster.prototype,'setProperties',ol.source.Raster.prototype.setProperties);bq.exportProperty(ol.source.Raster.prototype,'unset',ol.source.Raster.prototype.unset);bq.exportProperty(ol.source.Raster.prototype,'changed',ol.source.Raster.prototype.changed);bq.exportProperty(ol.source.Raster.prototype,'dispatchEvent',ol.source.Raster.prototype.dispatchEvent);bq.exportProperty(ol.source.Raster.prototype,'getRevision',ol.source.Raster.prototype.getRevision);bq.exportProperty(ol.source.Raster.prototype,'on',ol.source.Raster.prototype.on);bq.exportProperty(ol.source.Raster.prototype,'once',ol.source.Raster.prototype.once);bq.exportProperty(ol.source.Raster.prototype,'un',ol.source.Raster.prototype.un);bq.exportProperty(ol.source.Raster.Event.prototype,'type',ol.source.Raster.Event.prototype.type);bq.exportProperty(ol.source.Raster.Event.prototype,'target',ol.source.Raster.Event.prototype.target);bq.exportProperty(ol.source.Raster.Event.prototype,'preventDefault',ol.source.Raster.Event.prototype.preventDefault);bq.exportProperty(ol.source.Raster.Event.prototype,'stopPropagation',ol.source.Raster.Event.prototype.stopPropagation);bq.exportProperty(ol.source.Stamen.prototype,'setRenderReprojectionEdges',ol.source.Stamen.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.Stamen.prototype,'setTileGridForProjection',ol.source.Stamen.prototype.setTileGridForProjection);bq.exportProperty(ol.source.Stamen.prototype,'getTileLoadFunction',ol.source.Stamen.prototype.getTileLoadFunction);bq.exportProperty(ol.source.Stamen.prototype,'getTileUrlFunction',ol.source.Stamen.prototype.getTileUrlFunction);bq.exportProperty(ol.source.Stamen.prototype,'getUrls',ol.source.Stamen.prototype.getUrls);bq.exportProperty(ol.source.Stamen.prototype,'setTileLoadFunction',ol.source.Stamen.prototype.setTileLoadFunction);bq.exportProperty(ol.source.Stamen.prototype,'setTileUrlFunction',ol.source.Stamen.prototype.setTileUrlFunction);bq.exportProperty(ol.source.Stamen.prototype,'setUrl',ol.source.Stamen.prototype.setUrl);bq.exportProperty(ol.source.Stamen.prototype,'setUrls',ol.source.Stamen.prototype.setUrls);bq.exportProperty(ol.source.Stamen.prototype,'getTileGrid',ol.source.Stamen.prototype.getTileGrid);bq.exportProperty(ol.source.Stamen.prototype,'refresh',ol.source.Stamen.prototype.refresh);bq.exportProperty(ol.source.Stamen.prototype,'getAttributions',ol.source.Stamen.prototype.getAttributions);bq.exportProperty(ol.source.Stamen.prototype,'getLogo',ol.source.Stamen.prototype.getLogo);bq.exportProperty(ol.source.Stamen.prototype,'getProjection',ol.source.Stamen.prototype.getProjection);bq.exportProperty(ol.source.Stamen.prototype,'getState',ol.source.Stamen.prototype.getState);bq.exportProperty(ol.source.Stamen.prototype,'setAttributions',ol.source.Stamen.prototype.setAttributions);bq.exportProperty(ol.source.Stamen.prototype,'get',ol.source.Stamen.prototype.get);bq.exportProperty(ol.source.Stamen.prototype,'getKeys',ol.source.Stamen.prototype.getKeys);bq.exportProperty(ol.source.Stamen.prototype,'getProperties',ol.source.Stamen.prototype.getProperties);bq.exportProperty(ol.source.Stamen.prototype,'set',ol.source.Stamen.prototype.set);bq.exportProperty(ol.source.Stamen.prototype,'setProperties',ol.source.Stamen.prototype.setProperties);bq.exportProperty(ol.source.Stamen.prototype,'unset',ol.source.Stamen.prototype.unset);bq.exportProperty(ol.source.Stamen.prototype,'changed',ol.source.Stamen.prototype.changed);bq.exportProperty(ol.source.Stamen.prototype,'dispatchEvent',ol.source.Stamen.prototype.dispatchEvent);bq.exportProperty(ol.source.Stamen.prototype,'getRevision',ol.source.Stamen.prototype.getRevision);bq.exportProperty(ol.source.Stamen.prototype,'on',ol.source.Stamen.prototype.on);bq.exportProperty(ol.source.Stamen.prototype,'once',ol.source.Stamen.prototype.once);bq.exportProperty(ol.source.Stamen.prototype,'un',ol.source.Stamen.prototype.un);bq.exportProperty(ol.source.Tile.Event.prototype,'type',ol.source.Tile.Event.prototype.type);bq.exportProperty(ol.source.Tile.Event.prototype,'target',ol.source.Tile.Event.prototype.target);bq.exportProperty(ol.source.Tile.Event.prototype,'preventDefault',ol.source.Tile.Event.prototype.preventDefault);bq.exportProperty(ol.source.Tile.Event.prototype,'stopPropagation',ol.source.Tile.Event.prototype.stopPropagation);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setRenderReprojectionEdges',ol.source.TileArcGISRest.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setTileGridForProjection',ol.source.TileArcGISRest.prototype.setTileGridForProjection);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getTileLoadFunction',ol.source.TileArcGISRest.prototype.getTileLoadFunction);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getTileUrlFunction',ol.source.TileArcGISRest.prototype.getTileUrlFunction);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getUrls',ol.source.TileArcGISRest.prototype.getUrls);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setTileLoadFunction',ol.source.TileArcGISRest.prototype.setTileLoadFunction);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setTileUrlFunction',ol.source.TileArcGISRest.prototype.setTileUrlFunction);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setUrl',ol.source.TileArcGISRest.prototype.setUrl);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setUrls',ol.source.TileArcGISRest.prototype.setUrls);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getTileGrid',ol.source.TileArcGISRest.prototype.getTileGrid);bq.exportProperty(ol.source.TileArcGISRest.prototype,'refresh',ol.source.TileArcGISRest.prototype.refresh);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getAttributions',ol.source.TileArcGISRest.prototype.getAttributions);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getLogo',ol.source.TileArcGISRest.prototype.getLogo);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getProjection',ol.source.TileArcGISRest.prototype.getProjection);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getState',ol.source.TileArcGISRest.prototype.getState);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setAttributions',ol.source.TileArcGISRest.prototype.setAttributions);bq.exportProperty(ol.source.TileArcGISRest.prototype,'get',ol.source.TileArcGISRest.prototype.get);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getKeys',ol.source.TileArcGISRest.prototype.getKeys);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getProperties',ol.source.TileArcGISRest.prototype.getProperties);bq.exportProperty(ol.source.TileArcGISRest.prototype,'set',ol.source.TileArcGISRest.prototype.set);bq.exportProperty(ol.source.TileArcGISRest.prototype,'setProperties',ol.source.TileArcGISRest.prototype.setProperties);bq.exportProperty(ol.source.TileArcGISRest.prototype,'unset',ol.source.TileArcGISRest.prototype.unset);bq.exportProperty(ol.source.TileArcGISRest.prototype,'changed',ol.source.TileArcGISRest.prototype.changed);bq.exportProperty(ol.source.TileArcGISRest.prototype,'dispatchEvent',ol.source.TileArcGISRest.prototype.dispatchEvent);bq.exportProperty(ol.source.TileArcGISRest.prototype,'getRevision',ol.source.TileArcGISRest.prototype.getRevision);bq.exportProperty(ol.source.TileArcGISRest.prototype,'on',ol.source.TileArcGISRest.prototype.on);bq.exportProperty(ol.source.TileArcGISRest.prototype,'once',ol.source.TileArcGISRest.prototype.once);bq.exportProperty(ol.source.TileArcGISRest.prototype,'un',ol.source.TileArcGISRest.prototype.un);bq.exportProperty(ol.source.TileDebug.prototype,'getTileGrid',ol.source.TileDebug.prototype.getTileGrid);bq.exportProperty(ol.source.TileDebug.prototype,'refresh',ol.source.TileDebug.prototype.refresh);bq.exportProperty(ol.source.TileDebug.prototype,'getAttributions',ol.source.TileDebug.prototype.getAttributions);bq.exportProperty(ol.source.TileDebug.prototype,'getLogo',ol.source.TileDebug.prototype.getLogo);bq.exportProperty(ol.source.TileDebug.prototype,'getProjection',ol.source.TileDebug.prototype.getProjection);bq.exportProperty(ol.source.TileDebug.prototype,'getState',ol.source.TileDebug.prototype.getState);bq.exportProperty(ol.source.TileDebug.prototype,'setAttributions',ol.source.TileDebug.prototype.setAttributions);bq.exportProperty(ol.source.TileDebug.prototype,'get',ol.source.TileDebug.prototype.get);bq.exportProperty(ol.source.TileDebug.prototype,'getKeys',ol.source.TileDebug.prototype.getKeys);bq.exportProperty(ol.source.TileDebug.prototype,'getProperties',ol.source.TileDebug.prototype.getProperties);bq.exportProperty(ol.source.TileDebug.prototype,'set',ol.source.TileDebug.prototype.set);bq.exportProperty(ol.source.TileDebug.prototype,'setProperties',ol.source.TileDebug.prototype.setProperties);bq.exportProperty(ol.source.TileDebug.prototype,'unset',ol.source.TileDebug.prototype.unset);bq.exportProperty(ol.source.TileDebug.prototype,'changed',ol.source.TileDebug.prototype.changed);bq.exportProperty(ol.source.TileDebug.prototype,'dispatchEvent',ol.source.TileDebug.prototype.dispatchEvent);bq.exportProperty(ol.source.TileDebug.prototype,'getRevision',ol.source.TileDebug.prototype.getRevision);bq.exportProperty(ol.source.TileDebug.prototype,'on',ol.source.TileDebug.prototype.on);bq.exportProperty(ol.source.TileDebug.prototype,'once',ol.source.TileDebug.prototype.once);bq.exportProperty(ol.source.TileDebug.prototype,'un',ol.source.TileDebug.prototype.un);bq.exportProperty(ol.source.TileJSON.prototype,'setRenderReprojectionEdges',ol.source.TileJSON.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.TileJSON.prototype,'setTileGridForProjection',ol.source.TileJSON.prototype.setTileGridForProjection);bq.exportProperty(ol.source.TileJSON.prototype,'getTileLoadFunction',ol.source.TileJSON.prototype.getTileLoadFunction);bq.exportProperty(ol.source.TileJSON.prototype,'getTileUrlFunction',ol.source.TileJSON.prototype.getTileUrlFunction);bq.exportProperty(ol.source.TileJSON.prototype,'getUrls',ol.source.TileJSON.prototype.getUrls);bq.exportProperty(ol.source.TileJSON.prototype,'setTileLoadFunction',ol.source.TileJSON.prototype.setTileLoadFunction);bq.exportProperty(ol.source.TileJSON.prototype,'setTileUrlFunction',ol.source.TileJSON.prototype.setTileUrlFunction);bq.exportProperty(ol.source.TileJSON.prototype,'setUrl',ol.source.TileJSON.prototype.setUrl);bq.exportProperty(ol.source.TileJSON.prototype,'setUrls',ol.source.TileJSON.prototype.setUrls);bq.exportProperty(ol.source.TileJSON.prototype,'getTileGrid',ol.source.TileJSON.prototype.getTileGrid);bq.exportProperty(ol.source.TileJSON.prototype,'refresh',ol.source.TileJSON.prototype.refresh);bq.exportProperty(ol.source.TileJSON.prototype,'getAttributions',ol.source.TileJSON.prototype.getAttributions);bq.exportProperty(ol.source.TileJSON.prototype,'getLogo',ol.source.TileJSON.prototype.getLogo);bq.exportProperty(ol.source.TileJSON.prototype,'getProjection',ol.source.TileJSON.prototype.getProjection);bq.exportProperty(ol.source.TileJSON.prototype,'getState',ol.source.TileJSON.prototype.getState);bq.exportProperty(ol.source.TileJSON.prototype,'setAttributions',ol.source.TileJSON.prototype.setAttributions);bq.exportProperty(ol.source.TileJSON.prototype,'get',ol.source.TileJSON.prototype.get);bq.exportProperty(ol.source.TileJSON.prototype,'getKeys',ol.source.TileJSON.prototype.getKeys);bq.exportProperty(ol.source.TileJSON.prototype,'getProperties',ol.source.TileJSON.prototype.getProperties);bq.exportProperty(ol.source.TileJSON.prototype,'set',ol.source.TileJSON.prototype.set);bq.exportProperty(ol.source.TileJSON.prototype,'setProperties',ol.source.TileJSON.prototype.setProperties);bq.exportProperty(ol.source.TileJSON.prototype,'unset',ol.source.TileJSON.prototype.unset);bq.exportProperty(ol.source.TileJSON.prototype,'changed',ol.source.TileJSON.prototype.changed);bq.exportProperty(ol.source.TileJSON.prototype,'dispatchEvent',ol.source.TileJSON.prototype.dispatchEvent);bq.exportProperty(ol.source.TileJSON.prototype,'getRevision',ol.source.TileJSON.prototype.getRevision);bq.exportProperty(ol.source.TileJSON.prototype,'on',ol.source.TileJSON.prototype.on);bq.exportProperty(ol.source.TileJSON.prototype,'once',ol.source.TileJSON.prototype.once);bq.exportProperty(ol.source.TileJSON.prototype,'un',ol.source.TileJSON.prototype.un);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getTileGrid',ol.source.TileUTFGrid.prototype.getTileGrid);bq.exportProperty(ol.source.TileUTFGrid.prototype,'refresh',ol.source.TileUTFGrid.prototype.refresh);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getAttributions',ol.source.TileUTFGrid.prototype.getAttributions);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getLogo',ol.source.TileUTFGrid.prototype.getLogo);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getProjection',ol.source.TileUTFGrid.prototype.getProjection);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getState',ol.source.TileUTFGrid.prototype.getState);bq.exportProperty(ol.source.TileUTFGrid.prototype,'setAttributions',ol.source.TileUTFGrid.prototype.setAttributions);bq.exportProperty(ol.source.TileUTFGrid.prototype,'get',ol.source.TileUTFGrid.prototype.get);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getKeys',ol.source.TileUTFGrid.prototype.getKeys);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getProperties',ol.source.TileUTFGrid.prototype.getProperties);bq.exportProperty(ol.source.TileUTFGrid.prototype,'set',ol.source.TileUTFGrid.prototype.set);bq.exportProperty(ol.source.TileUTFGrid.prototype,'setProperties',ol.source.TileUTFGrid.prototype.setProperties);bq.exportProperty(ol.source.TileUTFGrid.prototype,'unset',ol.source.TileUTFGrid.prototype.unset);bq.exportProperty(ol.source.TileUTFGrid.prototype,'changed',ol.source.TileUTFGrid.prototype.changed);bq.exportProperty(ol.source.TileUTFGrid.prototype,'dispatchEvent',ol.source.TileUTFGrid.prototype.dispatchEvent);bq.exportProperty(ol.source.TileUTFGrid.prototype,'getRevision',ol.source.TileUTFGrid.prototype.getRevision);bq.exportProperty(ol.source.TileUTFGrid.prototype,'on',ol.source.TileUTFGrid.prototype.on);bq.exportProperty(ol.source.TileUTFGrid.prototype,'once',ol.source.TileUTFGrid.prototype.once);bq.exportProperty(ol.source.TileUTFGrid.prototype,'un',ol.source.TileUTFGrid.prototype.un);bq.exportProperty(ol.source.TileWMS.prototype,'setRenderReprojectionEdges',ol.source.TileWMS.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.TileWMS.prototype,'setTileGridForProjection',ol.source.TileWMS.prototype.setTileGridForProjection);bq.exportProperty(ol.source.TileWMS.prototype,'getTileLoadFunction',ol.source.TileWMS.prototype.getTileLoadFunction);bq.exportProperty(ol.source.TileWMS.prototype,'getTileUrlFunction',ol.source.TileWMS.prototype.getTileUrlFunction);bq.exportProperty(ol.source.TileWMS.prototype,'getUrls',ol.source.TileWMS.prototype.getUrls);bq.exportProperty(ol.source.TileWMS.prototype,'setTileLoadFunction',ol.source.TileWMS.prototype.setTileLoadFunction);bq.exportProperty(ol.source.TileWMS.prototype,'setTileUrlFunction',ol.source.TileWMS.prototype.setTileUrlFunction);bq.exportProperty(ol.source.TileWMS.prototype,'setUrl',ol.source.TileWMS.prototype.setUrl);bq.exportProperty(ol.source.TileWMS.prototype,'setUrls',ol.source.TileWMS.prototype.setUrls);bq.exportProperty(ol.source.TileWMS.prototype,'getTileGrid',ol.source.TileWMS.prototype.getTileGrid);bq.exportProperty(ol.source.TileWMS.prototype,'refresh',ol.source.TileWMS.prototype.refresh);bq.exportProperty(ol.source.TileWMS.prototype,'getAttributions',ol.source.TileWMS.prototype.getAttributions);bq.exportProperty(ol.source.TileWMS.prototype,'getLogo',ol.source.TileWMS.prototype.getLogo);bq.exportProperty(ol.source.TileWMS.prototype,'getProjection',ol.source.TileWMS.prototype.getProjection);bq.exportProperty(ol.source.TileWMS.prototype,'getState',ol.source.TileWMS.prototype.getState);bq.exportProperty(ol.source.TileWMS.prototype,'setAttributions',ol.source.TileWMS.prototype.setAttributions);bq.exportProperty(ol.source.TileWMS.prototype,'get',ol.source.TileWMS.prototype.get);bq.exportProperty(ol.source.TileWMS.prototype,'getKeys',ol.source.TileWMS.prototype.getKeys);bq.exportProperty(ol.source.TileWMS.prototype,'getProperties',ol.source.TileWMS.prototype.getProperties);bq.exportProperty(ol.source.TileWMS.prototype,'set',ol.source.TileWMS.prototype.set);bq.exportProperty(ol.source.TileWMS.prototype,'setProperties',ol.source.TileWMS.prototype.setProperties);bq.exportProperty(ol.source.TileWMS.prototype,'unset',ol.source.TileWMS.prototype.unset);bq.exportProperty(ol.source.TileWMS.prototype,'changed',ol.source.TileWMS.prototype.changed);bq.exportProperty(ol.source.TileWMS.prototype,'dispatchEvent',ol.source.TileWMS.prototype.dispatchEvent);bq.exportProperty(ol.source.TileWMS.prototype,'getRevision',ol.source.TileWMS.prototype.getRevision);bq.exportProperty(ol.source.TileWMS.prototype,'on',ol.source.TileWMS.prototype.on);bq.exportProperty(ol.source.TileWMS.prototype,'once',ol.source.TileWMS.prototype.once);bq.exportProperty(ol.source.TileWMS.prototype,'un',ol.source.TileWMS.prototype.un);bq.exportProperty(ol.source.Vector.Event.prototype,'type',ol.source.Vector.Event.prototype.type);bq.exportProperty(ol.source.Vector.Event.prototype,'target',ol.source.Vector.Event.prototype.target);bq.exportProperty(ol.source.Vector.Event.prototype,'preventDefault',ol.source.Vector.Event.prototype.preventDefault);bq.exportProperty(ol.source.Vector.Event.prototype,'stopPropagation',ol.source.Vector.Event.prototype.stopPropagation);bq.exportProperty(ol.source.VectorTile.prototype,'getTileLoadFunction',ol.source.VectorTile.prototype.getTileLoadFunction);bq.exportProperty(ol.source.VectorTile.prototype,'getTileUrlFunction',ol.source.VectorTile.prototype.getTileUrlFunction);bq.exportProperty(ol.source.VectorTile.prototype,'getUrls',ol.source.VectorTile.prototype.getUrls);bq.exportProperty(ol.source.VectorTile.prototype,'setTileLoadFunction',ol.source.VectorTile.prototype.setTileLoadFunction);bq.exportProperty(ol.source.VectorTile.prototype,'setTileUrlFunction',ol.source.VectorTile.prototype.setTileUrlFunction);bq.exportProperty(ol.source.VectorTile.prototype,'setUrl',ol.source.VectorTile.prototype.setUrl);bq.exportProperty(ol.source.VectorTile.prototype,'setUrls',ol.source.VectorTile.prototype.setUrls);bq.exportProperty(ol.source.VectorTile.prototype,'getTileGrid',ol.source.VectorTile.prototype.getTileGrid);bq.exportProperty(ol.source.VectorTile.prototype,'refresh',ol.source.VectorTile.prototype.refresh);bq.exportProperty(ol.source.VectorTile.prototype,'getAttributions',ol.source.VectorTile.prototype.getAttributions);bq.exportProperty(ol.source.VectorTile.prototype,'getLogo',ol.source.VectorTile.prototype.getLogo);bq.exportProperty(ol.source.VectorTile.prototype,'getProjection',ol.source.VectorTile.prototype.getProjection);bq.exportProperty(ol.source.VectorTile.prototype,'getState',ol.source.VectorTile.prototype.getState);bq.exportProperty(ol.source.VectorTile.prototype,'setAttributions',ol.source.VectorTile.prototype.setAttributions);bq.exportProperty(ol.source.VectorTile.prototype,'get',ol.source.VectorTile.prototype.get);bq.exportProperty(ol.source.VectorTile.prototype,'getKeys',ol.source.VectorTile.prototype.getKeys);bq.exportProperty(ol.source.VectorTile.prototype,'getProperties',ol.source.VectorTile.prototype.getProperties);bq.exportProperty(ol.source.VectorTile.prototype,'set',ol.source.VectorTile.prototype.set);bq.exportProperty(ol.source.VectorTile.prototype,'setProperties',ol.source.VectorTile.prototype.setProperties);bq.exportProperty(ol.source.VectorTile.prototype,'unset',ol.source.VectorTile.prototype.unset);bq.exportProperty(ol.source.VectorTile.prototype,'changed',ol.source.VectorTile.prototype.changed);bq.exportProperty(ol.source.VectorTile.prototype,'dispatchEvent',ol.source.VectorTile.prototype.dispatchEvent);bq.exportProperty(ol.source.VectorTile.prototype,'getRevision',ol.source.VectorTile.prototype.getRevision);bq.exportProperty(ol.source.VectorTile.prototype,'on',ol.source.VectorTile.prototype.on);bq.exportProperty(ol.source.VectorTile.prototype,'once',ol.source.VectorTile.prototype.once);bq.exportProperty(ol.source.VectorTile.prototype,'un',ol.source.VectorTile.prototype.un);bq.exportProperty(ol.source.WMTS.prototype,'setRenderReprojectionEdges',ol.source.WMTS.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.WMTS.prototype,'setTileGridForProjection',ol.source.WMTS.prototype.setTileGridForProjection);bq.exportProperty(ol.source.WMTS.prototype,'getTileLoadFunction',ol.source.WMTS.prototype.getTileLoadFunction);bq.exportProperty(ol.source.WMTS.prototype,'getTileUrlFunction',ol.source.WMTS.prototype.getTileUrlFunction);bq.exportProperty(ol.source.WMTS.prototype,'getUrls',ol.source.WMTS.prototype.getUrls);bq.exportProperty(ol.source.WMTS.prototype,'setTileLoadFunction',ol.source.WMTS.prototype.setTileLoadFunction);bq.exportProperty(ol.source.WMTS.prototype,'setTileUrlFunction',ol.source.WMTS.prototype.setTileUrlFunction);bq.exportProperty(ol.source.WMTS.prototype,'setUrl',ol.source.WMTS.prototype.setUrl);bq.exportProperty(ol.source.WMTS.prototype,'setUrls',ol.source.WMTS.prototype.setUrls);bq.exportProperty(ol.source.WMTS.prototype,'getTileGrid',ol.source.WMTS.prototype.getTileGrid);bq.exportProperty(ol.source.WMTS.prototype,'refresh',ol.source.WMTS.prototype.refresh);bq.exportProperty(ol.source.WMTS.prototype,'getAttributions',ol.source.WMTS.prototype.getAttributions);bq.exportProperty(ol.source.WMTS.prototype,'getLogo',ol.source.WMTS.prototype.getLogo);bq.exportProperty(ol.source.WMTS.prototype,'getProjection',ol.source.WMTS.prototype.getProjection);bq.exportProperty(ol.source.WMTS.prototype,'getState',ol.source.WMTS.prototype.getState);bq.exportProperty(ol.source.WMTS.prototype,'setAttributions',ol.source.WMTS.prototype.setAttributions);bq.exportProperty(ol.source.WMTS.prototype,'get',ol.source.WMTS.prototype.get);bq.exportProperty(ol.source.WMTS.prototype,'getKeys',ol.source.WMTS.prototype.getKeys);bq.exportProperty(ol.source.WMTS.prototype,'getProperties',ol.source.WMTS.prototype.getProperties);bq.exportProperty(ol.source.WMTS.prototype,'set',ol.source.WMTS.prototype.set);bq.exportProperty(ol.source.WMTS.prototype,'setProperties',ol.source.WMTS.prototype.setProperties);bq.exportProperty(ol.source.WMTS.prototype,'unset',ol.source.WMTS.prototype.unset);bq.exportProperty(ol.source.WMTS.prototype,'changed',ol.source.WMTS.prototype.changed);bq.exportProperty(ol.source.WMTS.prototype,'dispatchEvent',ol.source.WMTS.prototype.dispatchEvent);bq.exportProperty(ol.source.WMTS.prototype,'getRevision',ol.source.WMTS.prototype.getRevision);bq.exportProperty(ol.source.WMTS.prototype,'on',ol.source.WMTS.prototype.on);bq.exportProperty(ol.source.WMTS.prototype,'once',ol.source.WMTS.prototype.once);bq.exportProperty(ol.source.WMTS.prototype,'un',ol.source.WMTS.prototype.un);bq.exportProperty(ol.source.Zoomify.prototype,'setRenderReprojectionEdges',ol.source.Zoomify.prototype.setRenderReprojectionEdges);bq.exportProperty(ol.source.Zoomify.prototype,'setTileGridForProjection',ol.source.Zoomify.prototype.setTileGridForProjection);bq.exportProperty(ol.source.Zoomify.prototype,'getTileLoadFunction',ol.source.Zoomify.prototype.getTileLoadFunction);bq.exportProperty(ol.source.Zoomify.prototype,'getTileUrlFunction',ol.source.Zoomify.prototype.getTileUrlFunction);bq.exportProperty(ol.source.Zoomify.prototype,'getUrls',ol.source.Zoomify.prototype.getUrls);bq.exportProperty(ol.source.Zoomify.prototype,'setTileLoadFunction',ol.source.Zoomify.prototype.setTileLoadFunction);bq.exportProperty(ol.source.Zoomify.prototype,'setTileUrlFunction',ol.source.Zoomify.prototype.setTileUrlFunction);bq.exportProperty(ol.source.Zoomify.prototype,'setUrl',ol.source.Zoomify.prototype.setUrl);bq.exportProperty(ol.source.Zoomify.prototype,'setUrls',ol.source.Zoomify.prototype.setUrls);bq.exportProperty(ol.source.Zoomify.prototype,'getTileGrid',ol.source.Zoomify.prototype.getTileGrid);bq.exportProperty(ol.source.Zoomify.prototype,'refresh',ol.source.Zoomify.prototype.refresh);bq.exportProperty(ol.source.Zoomify.prototype,'getAttributions',ol.source.Zoomify.prototype.getAttributions);bq.exportProperty(ol.source.Zoomify.prototype,'getLogo',ol.source.Zoomify.prototype.getLogo);bq.exportProperty(ol.source.Zoomify.prototype,'getProjection',ol.source.Zoomify.prototype.getProjection);bq.exportProperty(ol.source.Zoomify.prototype,'getState',ol.source.Zoomify.prototype.getState);bq.exportProperty(ol.source.Zoomify.prototype,'setAttributions',ol.source.Zoomify.prototype.setAttributions);bq.exportProperty(ol.source.Zoomify.prototype,'get',ol.source.Zoomify.prototype.get);bq.exportProperty(ol.source.Zoomify.prototype,'getKeys',ol.source.Zoomify.prototype.getKeys);bq.exportProperty(ol.source.Zoomify.prototype,'getProperties',ol.source.Zoomify.prototype.getProperties);bq.exportProperty(ol.source.Zoomify.prototype,'set',ol.source.Zoomify.prototype.set);bq.exportProperty(ol.source.Zoomify.prototype,'setProperties',ol.source.Zoomify.prototype.setProperties);bq.exportProperty(ol.source.Zoomify.prototype,'unset',ol.source.Zoomify.prototype.unset);bq.exportProperty(ol.source.Zoomify.prototype,'changed',ol.source.Zoomify.prototype.changed);bq.exportProperty(ol.source.Zoomify.prototype,'dispatchEvent',ol.source.Zoomify.prototype.dispatchEvent);bq.exportProperty(ol.source.Zoomify.prototype,'getRevision',ol.source.Zoomify.prototype.getRevision);bq.exportProperty(ol.source.Zoomify.prototype,'on',ol.source.Zoomify.prototype.on);bq.exportProperty(ol.source.Zoomify.prototype,'once',ol.source.Zoomify.prototype.once);bq.exportProperty(ol.source.Zoomify.prototype,'un',ol.source.Zoomify.prototype.un);bq.exportProperty(ol.reproj.Tile.prototype,'getTileCoord',ol.reproj.Tile.prototype.getTileCoord);bq.exportProperty(ol.reproj.Tile.prototype,'load',ol.reproj.Tile.prototype.load);bq.exportProperty(ol.renderer.Layer.prototype,'changed',ol.renderer.Layer.prototype.changed);bq.exportProperty(ol.renderer.Layer.prototype,'dispatchEvent',ol.renderer.Layer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.Layer.prototype,'getRevision',ol.renderer.Layer.prototype.getRevision);bq.exportProperty(ol.renderer.Layer.prototype,'on',ol.renderer.Layer.prototype.on);bq.exportProperty(ol.renderer.Layer.prototype,'once',ol.renderer.Layer.prototype.once);bq.exportProperty(ol.renderer.Layer.prototype,'un',ol.renderer.Layer.prototype.un);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'changed',ol.renderer.webgl.Layer.prototype.changed);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'dispatchEvent',ol.renderer.webgl.Layer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'getRevision',ol.renderer.webgl.Layer.prototype.getRevision);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'on',ol.renderer.webgl.Layer.prototype.on);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'once',ol.renderer.webgl.Layer.prototype.once);bq.exportProperty(ol.renderer.webgl.Layer.prototype,'un',ol.renderer.webgl.Layer.prototype.un);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'changed',ol.renderer.webgl.ImageLayer.prototype.changed);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'dispatchEvent',ol.renderer.webgl.ImageLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'getRevision',ol.renderer.webgl.ImageLayer.prototype.getRevision);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'on',ol.renderer.webgl.ImageLayer.prototype.on);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'once',ol.renderer.webgl.ImageLayer.prototype.once);bq.exportProperty(ol.renderer.webgl.ImageLayer.prototype,'un',ol.renderer.webgl.ImageLayer.prototype.un);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'changed',ol.renderer.webgl.TileLayer.prototype.changed);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'dispatchEvent',ol.renderer.webgl.TileLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'getRevision',ol.renderer.webgl.TileLayer.prototype.getRevision);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'on',ol.renderer.webgl.TileLayer.prototype.on);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'once',ol.renderer.webgl.TileLayer.prototype.once);bq.exportProperty(ol.renderer.webgl.TileLayer.prototype,'un',ol.renderer.webgl.TileLayer.prototype.un);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'changed',ol.renderer.webgl.VectorLayer.prototype.changed);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'dispatchEvent',ol.renderer.webgl.VectorLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'getRevision',ol.renderer.webgl.VectorLayer.prototype.getRevision);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'on',ol.renderer.webgl.VectorLayer.prototype.on);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'once',ol.renderer.webgl.VectorLayer.prototype.once);bq.exportProperty(ol.renderer.webgl.VectorLayer.prototype,'un',ol.renderer.webgl.VectorLayer.prototype.un);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'changed',ol.renderer.canvas.Layer.prototype.changed);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'dispatchEvent',ol.renderer.canvas.Layer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'getRevision',ol.renderer.canvas.Layer.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'on',ol.renderer.canvas.Layer.prototype.on);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'once',ol.renderer.canvas.Layer.prototype.once);bq.exportProperty(ol.renderer.canvas.Layer.prototype,'un',ol.renderer.canvas.Layer.prototype.un);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'changed',ol.renderer.canvas.IntermediateCanvas.prototype.changed);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'dispatchEvent',ol.renderer.canvas.IntermediateCanvas.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'getRevision',ol.renderer.canvas.IntermediateCanvas.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'on',ol.renderer.canvas.IntermediateCanvas.prototype.on);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'once',ol.renderer.canvas.IntermediateCanvas.prototype.once);bq.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,'un',ol.renderer.canvas.IntermediateCanvas.prototype.un);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'changed',ol.renderer.canvas.ImageLayer.prototype.changed);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'dispatchEvent',ol.renderer.canvas.ImageLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'getRevision',ol.renderer.canvas.ImageLayer.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'on',ol.renderer.canvas.ImageLayer.prototype.on);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'once',ol.renderer.canvas.ImageLayer.prototype.once);bq.exportProperty(ol.renderer.canvas.ImageLayer.prototype,'un',ol.renderer.canvas.ImageLayer.prototype.un);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'changed',ol.renderer.canvas.TileLayer.prototype.changed);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'dispatchEvent',ol.renderer.canvas.TileLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'getRevision',ol.renderer.canvas.TileLayer.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'on',ol.renderer.canvas.TileLayer.prototype.on);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'once',ol.renderer.canvas.TileLayer.prototype.once);bq.exportProperty(ol.renderer.canvas.TileLayer.prototype,'un',ol.renderer.canvas.TileLayer.prototype.un);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'changed',ol.renderer.canvas.VectorLayer.prototype.changed);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'dispatchEvent',ol.renderer.canvas.VectorLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'getRevision',ol.renderer.canvas.VectorLayer.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'on',ol.renderer.canvas.VectorLayer.prototype.on);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'once',ol.renderer.canvas.VectorLayer.prototype.once);bq.exportProperty(ol.renderer.canvas.VectorLayer.prototype,'un',ol.renderer.canvas.VectorLayer.prototype.un);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'changed',ol.renderer.canvas.VectorTileLayer.prototype.changed);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'dispatchEvent',ol.renderer.canvas.VectorTileLayer.prototype.dispatchEvent);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'getRevision',ol.renderer.canvas.VectorTileLayer.prototype.getRevision);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'on',ol.renderer.canvas.VectorTileLayer.prototype.on);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'once',ol.renderer.canvas.VectorTileLayer.prototype.once);bq.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,'un',ol.renderer.canvas.VectorTileLayer.prototype.un);bq.exportProperty(ol.render.Event.prototype,'type',ol.render.Event.prototype.type);bq.exportProperty(ol.render.Event.prototype,'target',ol.render.Event.prototype.target);bq.exportProperty(ol.render.Event.prototype,'preventDefault',ol.render.Event.prototype.preventDefault);bq.exportProperty(ol.render.Event.prototype,'stopPropagation',ol.render.Event.prototype.stopPropagation);bq.exportProperty(ol.pointer.PointerEvent.prototype,'type',ol.pointer.PointerEvent.prototype.type);bq.exportProperty(ol.pointer.PointerEvent.prototype,'target',ol.pointer.PointerEvent.prototype.target);bq.exportProperty(ol.pointer.PointerEvent.prototype,'preventDefault',ol.pointer.PointerEvent.prototype.preventDefault);bq.exportProperty(ol.pointer.PointerEvent.prototype,'stopPropagation',ol.pointer.PointerEvent.prototype.stopPropagation);bq.exportProperty(ol.layer.Base.prototype,'get',ol.layer.Base.prototype.get);bq.exportProperty(ol.layer.Base.prototype,'getKeys',ol.layer.Base.prototype.getKeys);bq.exportProperty(ol.layer.Base.prototype,'getProperties',ol.layer.Base.prototype.getProperties);bq.exportProperty(ol.layer.Base.prototype,'set',ol.layer.Base.prototype.set);bq.exportProperty(ol.layer.Base.prototype,'setProperties',ol.layer.Base.prototype.setProperties);bq.exportProperty(ol.layer.Base.prototype,'unset',ol.layer.Base.prototype.unset);bq.exportProperty(ol.layer.Base.prototype,'changed',ol.layer.Base.prototype.changed);bq.exportProperty(ol.layer.Base.prototype,'dispatchEvent',ol.layer.Base.prototype.dispatchEvent);bq.exportProperty(ol.layer.Base.prototype,'getRevision',ol.layer.Base.prototype.getRevision);bq.exportProperty(ol.layer.Base.prototype,'on',ol.layer.Base.prototype.on);bq.exportProperty(ol.layer.Base.prototype,'once',ol.layer.Base.prototype.once);bq.exportProperty(ol.layer.Base.prototype,'un',ol.layer.Base.prototype.un);bq.exportProperty(ol.layer.Group.prototype,'getExtent',ol.layer.Group.prototype.getExtent);bq.exportProperty(ol.layer.Group.prototype,'getMaxResolution',ol.layer.Group.prototype.getMaxResolution);bq.exportProperty(ol.layer.Group.prototype,'getMinResolution',ol.layer.Group.prototype.getMinResolution);bq.exportProperty(ol.layer.Group.prototype,'getOpacity',ol.layer.Group.prototype.getOpacity);bq.exportProperty(ol.layer.Group.prototype,'getVisible',ol.layer.Group.prototype.getVisible);bq.exportProperty(ol.layer.Group.prototype,'getZIndex',ol.layer.Group.prototype.getZIndex);bq.exportProperty(ol.layer.Group.prototype,'setExtent',ol.layer.Group.prototype.setExtent);bq.exportProperty(ol.layer.Group.prototype,'setMaxResolution',ol.layer.Group.prototype.setMaxResolution);bq.exportProperty(ol.layer.Group.prototype,'setMinResolution',ol.layer.Group.prototype.setMinResolution);bq.exportProperty(ol.layer.Group.prototype,'setOpacity',ol.layer.Group.prototype.setOpacity);bq.exportProperty(ol.layer.Group.prototype,'setVisible',ol.layer.Group.prototype.setVisible);bq.exportProperty(ol.layer.Group.prototype,'setZIndex',ol.layer.Group.prototype.setZIndex);bq.exportProperty(ol.layer.Group.prototype,'get',ol.layer.Group.prototype.get);bq.exportProperty(ol.layer.Group.prototype,'getKeys',ol.layer.Group.prototype.getKeys);bq.exportProperty(ol.layer.Group.prototype,'getProperties',ol.layer.Group.prototype.getProperties);bq.exportProperty(ol.layer.Group.prototype,'set',ol.layer.Group.prototype.set);bq.exportProperty(ol.layer.Group.prototype,'setProperties',ol.layer.Group.prototype.setProperties);bq.exportProperty(ol.layer.Group.prototype,'unset',ol.layer.Group.prototype.unset);bq.exportProperty(ol.layer.Group.prototype,'changed',ol.layer.Group.prototype.changed);bq.exportProperty(ol.layer.Group.prototype,'dispatchEvent',ol.layer.Group.prototype.dispatchEvent);bq.exportProperty(ol.layer.Group.prototype,'getRevision',ol.layer.Group.prototype.getRevision);bq.exportProperty(ol.layer.Group.prototype,'on',ol.layer.Group.prototype.on);bq.exportProperty(ol.layer.Group.prototype,'once',ol.layer.Group.prototype.once);bq.exportProperty(ol.layer.Group.prototype,'un',ol.layer.Group.prototype.un);bq.exportProperty(ol.layer.Layer.prototype,'getExtent',ol.layer.Layer.prototype.getExtent);bq.exportProperty(ol.layer.Layer.prototype,'getMaxResolution',ol.layer.Layer.prototype.getMaxResolution);bq.exportProperty(ol.layer.Layer.prototype,'getMinResolution',ol.layer.Layer.prototype.getMinResolution);bq.exportProperty(ol.layer.Layer.prototype,'getOpacity',ol.layer.Layer.prototype.getOpacity);bq.exportProperty(ol.layer.Layer.prototype,'getVisible',ol.layer.Layer.prototype.getVisible);bq.exportProperty(ol.layer.Layer.prototype,'getZIndex',ol.layer.Layer.prototype.getZIndex);bq.exportProperty(ol.layer.Layer.prototype,'setExtent',ol.layer.Layer.prototype.setExtent);bq.exportProperty(ol.layer.Layer.prototype,'setMaxResolution',ol.layer.Layer.prototype.setMaxResolution);bq.exportProperty(ol.layer.Layer.prototype,'setMinResolution',ol.layer.Layer.prototype.setMinResolution);bq.exportProperty(ol.layer.Layer.prototype,'setOpacity',ol.layer.Layer.prototype.setOpacity);bq.exportProperty(ol.layer.Layer.prototype,'setVisible',ol.layer.Layer.prototype.setVisible);bq.exportProperty(ol.layer.Layer.prototype,'setZIndex',ol.layer.Layer.prototype.setZIndex);bq.exportProperty(ol.layer.Layer.prototype,'get',ol.layer.Layer.prototype.get);bq.exportProperty(ol.layer.Layer.prototype,'getKeys',ol.layer.Layer.prototype.getKeys);bq.exportProperty(ol.layer.Layer.prototype,'getProperties',ol.layer.Layer.prototype.getProperties);bq.exportProperty(ol.layer.Layer.prototype,'set',ol.layer.Layer.prototype.set);bq.exportProperty(ol.layer.Layer.prototype,'setProperties',ol.layer.Layer.prototype.setProperties);bq.exportProperty(ol.layer.Layer.prototype,'unset',ol.layer.Layer.prototype.unset);bq.exportProperty(ol.layer.Layer.prototype,'changed',ol.layer.Layer.prototype.changed);bq.exportProperty(ol.layer.Layer.prototype,'dispatchEvent',ol.layer.Layer.prototype.dispatchEvent);bq.exportProperty(ol.layer.Layer.prototype,'getRevision',ol.layer.Layer.prototype.getRevision);bq.exportProperty(ol.layer.Layer.prototype,'on',ol.layer.Layer.prototype.on);bq.exportProperty(ol.layer.Layer.prototype,'once',ol.layer.Layer.prototype.once);bq.exportProperty(ol.layer.Layer.prototype,'un',ol.layer.Layer.prototype.un);bq.exportProperty(ol.layer.Vector.prototype,'setMap',ol.layer.Vector.prototype.setMap);bq.exportProperty(ol.layer.Vector.prototype,'setSource',ol.layer.Vector.prototype.setSource);bq.exportProperty(ol.layer.Vector.prototype,'getExtent',ol.layer.Vector.prototype.getExtent);bq.exportProperty(ol.layer.Vector.prototype,'getMaxResolution',ol.layer.Vector.prototype.getMaxResolution);bq.exportProperty(ol.layer.Vector.prototype,'getMinResolution',ol.layer.Vector.prototype.getMinResolution);bq.exportProperty(ol.layer.Vector.prototype,'getOpacity',ol.layer.Vector.prototype.getOpacity);bq.exportProperty(ol.layer.Vector.prototype,'getVisible',ol.layer.Vector.prototype.getVisible);bq.exportProperty(ol.layer.Vector.prototype,'getZIndex',ol.layer.Vector.prototype.getZIndex);bq.exportProperty(ol.layer.Vector.prototype,'setExtent',ol.layer.Vector.prototype.setExtent);bq.exportProperty(ol.layer.Vector.prototype,'setMaxResolution',ol.layer.Vector.prototype.setMaxResolution);bq.exportProperty(ol.layer.Vector.prototype,'setMinResolution',ol.layer.Vector.prototype.setMinResolution);bq.exportProperty(ol.layer.Vector.prototype,'setOpacity',ol.layer.Vector.prototype.setOpacity);bq.exportProperty(ol.layer.Vector.prototype,'setVisible',ol.layer.Vector.prototype.setVisible);bq.exportProperty(ol.layer.Vector.prototype,'setZIndex',ol.layer.Vector.prototype.setZIndex);bq.exportProperty(ol.layer.Vector.prototype,'get',ol.layer.Vector.prototype.get);bq.exportProperty(ol.layer.Vector.prototype,'getKeys',ol.layer.Vector.prototype.getKeys);bq.exportProperty(ol.layer.Vector.prototype,'getProperties',ol.layer.Vector.prototype.getProperties);bq.exportProperty(ol.layer.Vector.prototype,'set',ol.layer.Vector.prototype.set);bq.exportProperty(ol.layer.Vector.prototype,'setProperties',ol.layer.Vector.prototype.setProperties);bq.exportProperty(ol.layer.Vector.prototype,'unset',ol.layer.Vector.prototype.unset);bq.exportProperty(ol.layer.Vector.prototype,'changed',ol.layer.Vector.prototype.changed);bq.exportProperty(ol.layer.Vector.prototype,'dispatchEvent',ol.layer.Vector.prototype.dispatchEvent);bq.exportProperty(ol.layer.Vector.prototype,'getRevision',ol.layer.Vector.prototype.getRevision);bq.exportProperty(ol.layer.Vector.prototype,'on',ol.layer.Vector.prototype.on);bq.exportProperty(ol.layer.Vector.prototype,'once',ol.layer.Vector.prototype.once);bq.exportProperty(ol.layer.Vector.prototype,'un',ol.layer.Vector.prototype.un);bq.exportProperty(ol.layer.Heatmap.prototype,'getSource',ol.layer.Heatmap.prototype.getSource);bq.exportProperty(ol.layer.Heatmap.prototype,'getStyle',ol.layer.Heatmap.prototype.getStyle);bq.exportProperty(ol.layer.Heatmap.prototype,'getStyleFunction',ol.layer.Heatmap.prototype.getStyleFunction);bq.exportProperty(ol.layer.Heatmap.prototype,'setStyle',ol.layer.Heatmap.prototype.setStyle);bq.exportProperty(ol.layer.Heatmap.prototype,'setMap',ol.layer.Heatmap.prototype.setMap);bq.exportProperty(ol.layer.Heatmap.prototype,'setSource',ol.layer.Heatmap.prototype.setSource);bq.exportProperty(ol.layer.Heatmap.prototype,'getExtent',ol.layer.Heatmap.prototype.getExtent);bq.exportProperty(ol.layer.Heatmap.prototype,'getMaxResolution',ol.layer.Heatmap.prototype.getMaxResolution);bq.exportProperty(ol.layer.Heatmap.prototype,'getMinResolution',ol.layer.Heatmap.prototype.getMinResolution);bq.exportProperty(ol.layer.Heatmap.prototype,'getOpacity',ol.layer.Heatmap.prototype.getOpacity);bq.exportProperty(ol.layer.Heatmap.prototype,'getVisible',ol.layer.Heatmap.prototype.getVisible);bq.exportProperty(ol.layer.Heatmap.prototype,'getZIndex',ol.layer.Heatmap.prototype.getZIndex);bq.exportProperty(ol.layer.Heatmap.prototype,'setExtent',ol.layer.Heatmap.prototype.setExtent);bq.exportProperty(ol.layer.Heatmap.prototype,'setMaxResolution',ol.layer.Heatmap.prototype.setMaxResolution);bq.exportProperty(ol.layer.Heatmap.prototype,'setMinResolution',ol.layer.Heatmap.prototype.setMinResolution);bq.exportProperty(ol.layer.Heatmap.prototype,'setOpacity',ol.layer.Heatmap.prototype.setOpacity);bq.exportProperty(ol.layer.Heatmap.prototype,'setVisible',ol.layer.Heatmap.prototype.setVisible);bq.exportProperty(ol.layer.Heatmap.prototype,'setZIndex',ol.layer.Heatmap.prototype.setZIndex);bq.exportProperty(ol.layer.Heatmap.prototype,'get',ol.layer.Heatmap.prototype.get);bq.exportProperty(ol.layer.Heatmap.prototype,'getKeys',ol.layer.Heatmap.prototype.getKeys);bq.exportProperty(ol.layer.Heatmap.prototype,'getProperties',ol.layer.Heatmap.prototype.getProperties);bq.exportProperty(ol.layer.Heatmap.prototype,'set',ol.layer.Heatmap.prototype.set);bq.exportProperty(ol.layer.Heatmap.prototype,'setProperties',ol.layer.Heatmap.prototype.setProperties);bq.exportProperty(ol.layer.Heatmap.prototype,'unset',ol.layer.Heatmap.prototype.unset);bq.exportProperty(ol.layer.Heatmap.prototype,'changed',ol.layer.Heatmap.prototype.changed);bq.exportProperty(ol.layer.Heatmap.prototype,'dispatchEvent',ol.layer.Heatmap.prototype.dispatchEvent);bq.exportProperty(ol.layer.Heatmap.prototype,'getRevision',ol.layer.Heatmap.prototype.getRevision);bq.exportProperty(ol.layer.Heatmap.prototype,'on',ol.layer.Heatmap.prototype.on);bq.exportProperty(ol.layer.Heatmap.prototype,'once',ol.layer.Heatmap.prototype.once);bq.exportProperty(ol.layer.Heatmap.prototype,'un',ol.layer.Heatmap.prototype.un);bq.exportProperty(ol.layer.Image.prototype,'setMap',ol.layer.Image.prototype.setMap);bq.exportProperty(ol.layer.Image.prototype,'setSource',ol.layer.Image.prototype.setSource);bq.exportProperty(ol.layer.Image.prototype,'getExtent',ol.layer.Image.prototype.getExtent);bq.exportProperty(ol.layer.Image.prototype,'getMaxResolution',ol.layer.Image.prototype.getMaxResolution);bq.exportProperty(ol.layer.Image.prototype,'getMinResolution',ol.layer.Image.prototype.getMinResolution);bq.exportProperty(ol.layer.Image.prototype,'getOpacity',ol.layer.Image.prototype.getOpacity);bq.exportProperty(ol.layer.Image.prototype,'getVisible',ol.layer.Image.prototype.getVisible);bq.exportProperty(ol.layer.Image.prototype,'getZIndex',ol.layer.Image.prototype.getZIndex);bq.exportProperty(ol.layer.Image.prototype,'setExtent',ol.layer.Image.prototype.setExtent);bq.exportProperty(ol.layer.Image.prototype,'setMaxResolution',ol.layer.Image.prototype.setMaxResolution);bq.exportProperty(ol.layer.Image.prototype,'setMinResolution',ol.layer.Image.prototype.setMinResolution);bq.exportProperty(ol.layer.Image.prototype,'setOpacity',ol.layer.Image.prototype.setOpacity);bq.exportProperty(ol.layer.Image.prototype,'setVisible',ol.layer.Image.prototype.setVisible);bq.exportProperty(ol.layer.Image.prototype,'setZIndex',ol.layer.Image.prototype.setZIndex);bq.exportProperty(ol.layer.Image.prototype,'get',ol.layer.Image.prototype.get);bq.exportProperty(ol.layer.Image.prototype,'getKeys',ol.layer.Image.prototype.getKeys);bq.exportProperty(ol.layer.Image.prototype,'getProperties',ol.layer.Image.prototype.getProperties);bq.exportProperty(ol.layer.Image.prototype,'set',ol.layer.Image.prototype.set);bq.exportProperty(ol.layer.Image.prototype,'setProperties',ol.layer.Image.prototype.setProperties);bq.exportProperty(ol.layer.Image.prototype,'unset',ol.layer.Image.prototype.unset);bq.exportProperty(ol.layer.Image.prototype,'changed',ol.layer.Image.prototype.changed);bq.exportProperty(ol.layer.Image.prototype,'dispatchEvent',ol.layer.Image.prototype.dispatchEvent);bq.exportProperty(ol.layer.Image.prototype,'getRevision',ol.layer.Image.prototype.getRevision);bq.exportProperty(ol.layer.Image.prototype,'on',ol.layer.Image.prototype.on);bq.exportProperty(ol.layer.Image.prototype,'once',ol.layer.Image.prototype.once);bq.exportProperty(ol.layer.Image.prototype,'un',ol.layer.Image.prototype.un);bq.exportProperty(ol.layer.Tile.prototype,'setMap',ol.layer.Tile.prototype.setMap);bq.exportProperty(ol.layer.Tile.prototype,'setSource',ol.layer.Tile.prototype.setSource);bq.exportProperty(ol.layer.Tile.prototype,'getExtent',ol.layer.Tile.prototype.getExtent);bq.exportProperty(ol.layer.Tile.prototype,'getMaxResolution',ol.layer.Tile.prototype.getMaxResolution);bq.exportProperty(ol.layer.Tile.prototype,'getMinResolution',ol.layer.Tile.prototype.getMinResolution);bq.exportProperty(ol.layer.Tile.prototype,'getOpacity',ol.layer.Tile.prototype.getOpacity);bq.exportProperty(ol.layer.Tile.prototype,'getVisible',ol.layer.Tile.prototype.getVisible);bq.exportProperty(ol.layer.Tile.prototype,'getZIndex',ol.layer.Tile.prototype.getZIndex);bq.exportProperty(ol.layer.Tile.prototype,'setExtent',ol.layer.Tile.prototype.setExtent);bq.exportProperty(ol.layer.Tile.prototype,'setMaxResolution',ol.layer.Tile.prototype.setMaxResolution);bq.exportProperty(ol.layer.Tile.prototype,'setMinResolution',ol.layer.Tile.prototype.setMinResolution);bq.exportProperty(ol.layer.Tile.prototype,'setOpacity',ol.layer.Tile.prototype.setOpacity);bq.exportProperty(ol.layer.Tile.prototype,'setVisible',ol.layer.Tile.prototype.setVisible);bq.exportProperty(ol.layer.Tile.prototype,'setZIndex',ol.layer.Tile.prototype.setZIndex);bq.exportProperty(ol.layer.Tile.prototype,'get',ol.layer.Tile.prototype.get);bq.exportProperty(ol.layer.Tile.prototype,'getKeys',ol.layer.Tile.prototype.getKeys);bq.exportProperty(ol.layer.Tile.prototype,'getProperties',ol.layer.Tile.prototype.getProperties);bq.exportProperty(ol.layer.Tile.prototype,'set',ol.layer.Tile.prototype.set);bq.exportProperty(ol.layer.Tile.prototype,'setProperties',ol.layer.Tile.prototype.setProperties);bq.exportProperty(ol.layer.Tile.prototype,'unset',ol.layer.Tile.prototype.unset);bq.exportProperty(ol.layer.Tile.prototype,'changed',ol.layer.Tile.prototype.changed);bq.exportProperty(ol.layer.Tile.prototype,'dispatchEvent',ol.layer.Tile.prototype.dispatchEvent);bq.exportProperty(ol.layer.Tile.prototype,'getRevision',ol.layer.Tile.prototype.getRevision);bq.exportProperty(ol.layer.Tile.prototype,'on',ol.layer.Tile.prototype.on);bq.exportProperty(ol.layer.Tile.prototype,'once',ol.layer.Tile.prototype.once);bq.exportProperty(ol.layer.Tile.prototype,'un',ol.layer.Tile.prototype.un);bq.exportProperty(ol.layer.VectorTile.prototype,'getStyle',ol.layer.VectorTile.prototype.getStyle);bq.exportProperty(ol.layer.VectorTile.prototype,'getStyleFunction',ol.layer.VectorTile.prototype.getStyleFunction);bq.exportProperty(ol.layer.VectorTile.prototype,'setStyle',ol.layer.VectorTile.prototype.setStyle);bq.exportProperty(ol.layer.VectorTile.prototype,'setMap',ol.layer.VectorTile.prototype.setMap);bq.exportProperty(ol.layer.VectorTile.prototype,'setSource',ol.layer.VectorTile.prototype.setSource);bq.exportProperty(ol.layer.VectorTile.prototype,'getExtent',ol.layer.VectorTile.prototype.getExtent);bq.exportProperty(ol.layer.VectorTile.prototype,'getMaxResolution',ol.layer.VectorTile.prototype.getMaxResolution);bq.exportProperty(ol.layer.VectorTile.prototype,'getMinResolution',ol.layer.VectorTile.prototype.getMinResolution);bq.exportProperty(ol.layer.VectorTile.prototype,'getOpacity',ol.layer.VectorTile.prototype.getOpacity);bq.exportProperty(ol.layer.VectorTile.prototype,'getVisible',ol.layer.VectorTile.prototype.getVisible);bq.exportProperty(ol.layer.VectorTile.prototype,'getZIndex',ol.layer.VectorTile.prototype.getZIndex);bq.exportProperty(ol.layer.VectorTile.prototype,'setExtent',ol.layer.VectorTile.prototype.setExtent);bq.exportProperty(ol.layer.VectorTile.prototype,'setMaxResolution',ol.layer.VectorTile.prototype.setMaxResolution);bq.exportProperty(ol.layer.VectorTile.prototype,'setMinResolution',ol.layer.VectorTile.prototype.setMinResolution);bq.exportProperty(ol.layer.VectorTile.prototype,'setOpacity',ol.layer.VectorTile.prototype.setOpacity);bq.exportProperty(ol.layer.VectorTile.prototype,'setVisible',ol.layer.VectorTile.prototype.setVisible);bq.exportProperty(ol.layer.VectorTile.prototype,'setZIndex',ol.layer.VectorTile.prototype.setZIndex);bq.exportProperty(ol.layer.VectorTile.prototype,'get',ol.layer.VectorTile.prototype.get);bq.exportProperty(ol.layer.VectorTile.prototype,'getKeys',ol.layer.VectorTile.prototype.getKeys);bq.exportProperty(ol.layer.VectorTile.prototype,'getProperties',ol.layer.VectorTile.prototype.getProperties);bq.exportProperty(ol.layer.VectorTile.prototype,'set',ol.layer.VectorTile.prototype.set);bq.exportProperty(ol.layer.VectorTile.prototype,'setProperties',ol.layer.VectorTile.prototype.setProperties);bq.exportProperty(ol.layer.VectorTile.prototype,'unset',ol.layer.VectorTile.prototype.unset);bq.exportProperty(ol.layer.VectorTile.prototype,'changed',ol.layer.VectorTile.prototype.changed);bq.exportProperty(ol.layer.VectorTile.prototype,'dispatchEvent',ol.layer.VectorTile.prototype.dispatchEvent);bq.exportProperty(ol.layer.VectorTile.prototype,'getRevision',ol.layer.VectorTile.prototype.getRevision);bq.exportProperty(ol.layer.VectorTile.prototype,'on',ol.layer.VectorTile.prototype.on);bq.exportProperty(ol.layer.VectorTile.prototype,'once',ol.layer.VectorTile.prototype.once);bq.exportProperty(ol.layer.VectorTile.prototype,'un',ol.layer.VectorTile.prototype.un);bq.exportProperty(ol.interaction.Interaction.prototype,'get',ol.interaction.Interaction.prototype.get);bq.exportProperty(ol.interaction.Interaction.prototype,'getKeys',ol.interaction.Interaction.prototype.getKeys);bq.exportProperty(ol.interaction.Interaction.prototype,'getProperties',ol.interaction.Interaction.prototype.getProperties);bq.exportProperty(ol.interaction.Interaction.prototype,'set',ol.interaction.Interaction.prototype.set);bq.exportProperty(ol.interaction.Interaction.prototype,'setProperties',ol.interaction.Interaction.prototype.setProperties);bq.exportProperty(ol.interaction.Interaction.prototype,'unset',ol.interaction.Interaction.prototype.unset);bq.exportProperty(ol.interaction.Interaction.prototype,'changed',ol.interaction.Interaction.prototype.changed);bq.exportProperty(ol.interaction.Interaction.prototype,'dispatchEvent',ol.interaction.Interaction.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Interaction.prototype,'getRevision',ol.interaction.Interaction.prototype.getRevision);bq.exportProperty(ol.interaction.Interaction.prototype,'on',ol.interaction.Interaction.prototype.on);bq.exportProperty(ol.interaction.Interaction.prototype,'once',ol.interaction.Interaction.prototype.once);bq.exportProperty(ol.interaction.Interaction.prototype,'un',ol.interaction.Interaction.prototype.un);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'getActive',ol.interaction.DoubleClickZoom.prototype.getActive);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'getMap',ol.interaction.DoubleClickZoom.prototype.getMap);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'setActive',ol.interaction.DoubleClickZoom.prototype.setActive);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'get',ol.interaction.DoubleClickZoom.prototype.get);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'getKeys',ol.interaction.DoubleClickZoom.prototype.getKeys);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'getProperties',ol.interaction.DoubleClickZoom.prototype.getProperties);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'set',ol.interaction.DoubleClickZoom.prototype.set);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'setProperties',ol.interaction.DoubleClickZoom.prototype.setProperties);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'unset',ol.interaction.DoubleClickZoom.prototype.unset);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'changed',ol.interaction.DoubleClickZoom.prototype.changed);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'dispatchEvent',ol.interaction.DoubleClickZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'getRevision',ol.interaction.DoubleClickZoom.prototype.getRevision);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'on',ol.interaction.DoubleClickZoom.prototype.on);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'once',ol.interaction.DoubleClickZoom.prototype.once);bq.exportProperty(ol.interaction.DoubleClickZoom.prototype,'un',ol.interaction.DoubleClickZoom.prototype.un);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'getActive',ol.interaction.DragAndDrop.prototype.getActive);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'getMap',ol.interaction.DragAndDrop.prototype.getMap);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'setActive',ol.interaction.DragAndDrop.prototype.setActive);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'get',ol.interaction.DragAndDrop.prototype.get);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'getKeys',ol.interaction.DragAndDrop.prototype.getKeys);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'getProperties',ol.interaction.DragAndDrop.prototype.getProperties);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'set',ol.interaction.DragAndDrop.prototype.set);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'setProperties',ol.interaction.DragAndDrop.prototype.setProperties);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'unset',ol.interaction.DragAndDrop.prototype.unset);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'changed',ol.interaction.DragAndDrop.prototype.changed);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'dispatchEvent',ol.interaction.DragAndDrop.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'getRevision',ol.interaction.DragAndDrop.prototype.getRevision);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'on',ol.interaction.DragAndDrop.prototype.on);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'once',ol.interaction.DragAndDrop.prototype.once);bq.exportProperty(ol.interaction.DragAndDrop.prototype,'un',ol.interaction.DragAndDrop.prototype.un);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'type',ol.interaction.DragAndDrop.Event.prototype.type);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'target',ol.interaction.DragAndDrop.Event.prototype.target);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'preventDefault',ol.interaction.DragAndDrop.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.DragAndDrop.Event.prototype,'stopPropagation',ol.interaction.DragAndDrop.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.Pointer.prototype,'getActive',ol.interaction.Pointer.prototype.getActive);bq.exportProperty(ol.interaction.Pointer.prototype,'getMap',ol.interaction.Pointer.prototype.getMap);bq.exportProperty(ol.interaction.Pointer.prototype,'setActive',ol.interaction.Pointer.prototype.setActive);bq.exportProperty(ol.interaction.Pointer.prototype,'get',ol.interaction.Pointer.prototype.get);bq.exportProperty(ol.interaction.Pointer.prototype,'getKeys',ol.interaction.Pointer.prototype.getKeys);bq.exportProperty(ol.interaction.Pointer.prototype,'getProperties',ol.interaction.Pointer.prototype.getProperties);bq.exportProperty(ol.interaction.Pointer.prototype,'set',ol.interaction.Pointer.prototype.set);bq.exportProperty(ol.interaction.Pointer.prototype,'setProperties',ol.interaction.Pointer.prototype.setProperties);bq.exportProperty(ol.interaction.Pointer.prototype,'unset',ol.interaction.Pointer.prototype.unset);bq.exportProperty(ol.interaction.Pointer.prototype,'changed',ol.interaction.Pointer.prototype.changed);bq.exportProperty(ol.interaction.Pointer.prototype,'dispatchEvent',ol.interaction.Pointer.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Pointer.prototype,'getRevision',ol.interaction.Pointer.prototype.getRevision);bq.exportProperty(ol.interaction.Pointer.prototype,'on',ol.interaction.Pointer.prototype.on);bq.exportProperty(ol.interaction.Pointer.prototype,'once',ol.interaction.Pointer.prototype.once);bq.exportProperty(ol.interaction.Pointer.prototype,'un',ol.interaction.Pointer.prototype.un);bq.exportProperty(ol.interaction.DragBox.prototype,'getActive',ol.interaction.DragBox.prototype.getActive);bq.exportProperty(ol.interaction.DragBox.prototype,'getMap',ol.interaction.DragBox.prototype.getMap);bq.exportProperty(ol.interaction.DragBox.prototype,'setActive',ol.interaction.DragBox.prototype.setActive);bq.exportProperty(ol.interaction.DragBox.prototype,'get',ol.interaction.DragBox.prototype.get);bq.exportProperty(ol.interaction.DragBox.prototype,'getKeys',ol.interaction.DragBox.prototype.getKeys);bq.exportProperty(ol.interaction.DragBox.prototype,'getProperties',ol.interaction.DragBox.prototype.getProperties);bq.exportProperty(ol.interaction.DragBox.prototype,'set',ol.interaction.DragBox.prototype.set);bq.exportProperty(ol.interaction.DragBox.prototype,'setProperties',ol.interaction.DragBox.prototype.setProperties);bq.exportProperty(ol.interaction.DragBox.prototype,'unset',ol.interaction.DragBox.prototype.unset);bq.exportProperty(ol.interaction.DragBox.prototype,'changed',ol.interaction.DragBox.prototype.changed);bq.exportProperty(ol.interaction.DragBox.prototype,'dispatchEvent',ol.interaction.DragBox.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragBox.prototype,'getRevision',ol.interaction.DragBox.prototype.getRevision);bq.exportProperty(ol.interaction.DragBox.prototype,'on',ol.interaction.DragBox.prototype.on);bq.exportProperty(ol.interaction.DragBox.prototype,'once',ol.interaction.DragBox.prototype.once);bq.exportProperty(ol.interaction.DragBox.prototype,'un',ol.interaction.DragBox.prototype.un);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'type',ol.interaction.DragBox.Event.prototype.type);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'target',ol.interaction.DragBox.Event.prototype.target);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'preventDefault',ol.interaction.DragBox.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.DragBox.Event.prototype,'stopPropagation',ol.interaction.DragBox.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.DragPan.prototype,'getActive',ol.interaction.DragPan.prototype.getActive);bq.exportProperty(ol.interaction.DragPan.prototype,'getMap',ol.interaction.DragPan.prototype.getMap);bq.exportProperty(ol.interaction.DragPan.prototype,'setActive',ol.interaction.DragPan.prototype.setActive);bq.exportProperty(ol.interaction.DragPan.prototype,'get',ol.interaction.DragPan.prototype.get);bq.exportProperty(ol.interaction.DragPan.prototype,'getKeys',ol.interaction.DragPan.prototype.getKeys);bq.exportProperty(ol.interaction.DragPan.prototype,'getProperties',ol.interaction.DragPan.prototype.getProperties);bq.exportProperty(ol.interaction.DragPan.prototype,'set',ol.interaction.DragPan.prototype.set);bq.exportProperty(ol.interaction.DragPan.prototype,'setProperties',ol.interaction.DragPan.prototype.setProperties);bq.exportProperty(ol.interaction.DragPan.prototype,'unset',ol.interaction.DragPan.prototype.unset);bq.exportProperty(ol.interaction.DragPan.prototype,'changed',ol.interaction.DragPan.prototype.changed);bq.exportProperty(ol.interaction.DragPan.prototype,'dispatchEvent',ol.interaction.DragPan.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragPan.prototype,'getRevision',ol.interaction.DragPan.prototype.getRevision);bq.exportProperty(ol.interaction.DragPan.prototype,'on',ol.interaction.DragPan.prototype.on);bq.exportProperty(ol.interaction.DragPan.prototype,'once',ol.interaction.DragPan.prototype.once);bq.exportProperty(ol.interaction.DragPan.prototype,'un',ol.interaction.DragPan.prototype.un);bq.exportProperty(ol.interaction.DragRotate.prototype,'getActive',ol.interaction.DragRotate.prototype.getActive);bq.exportProperty(ol.interaction.DragRotate.prototype,'getMap',ol.interaction.DragRotate.prototype.getMap);bq.exportProperty(ol.interaction.DragRotate.prototype,'setActive',ol.interaction.DragRotate.prototype.setActive);bq.exportProperty(ol.interaction.DragRotate.prototype,'get',ol.interaction.DragRotate.prototype.get);bq.exportProperty(ol.interaction.DragRotate.prototype,'getKeys',ol.interaction.DragRotate.prototype.getKeys);bq.exportProperty(ol.interaction.DragRotate.prototype,'getProperties',ol.interaction.DragRotate.prototype.getProperties);bq.exportProperty(ol.interaction.DragRotate.prototype,'set',ol.interaction.DragRotate.prototype.set);bq.exportProperty(ol.interaction.DragRotate.prototype,'setProperties',ol.interaction.DragRotate.prototype.setProperties);bq.exportProperty(ol.interaction.DragRotate.prototype,'unset',ol.interaction.DragRotate.prototype.unset);bq.exportProperty(ol.interaction.DragRotate.prototype,'changed',ol.interaction.DragRotate.prototype.changed);bq.exportProperty(ol.interaction.DragRotate.prototype,'dispatchEvent',ol.interaction.DragRotate.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragRotate.prototype,'getRevision',ol.interaction.DragRotate.prototype.getRevision);bq.exportProperty(ol.interaction.DragRotate.prototype,'on',ol.interaction.DragRotate.prototype.on);bq.exportProperty(ol.interaction.DragRotate.prototype,'once',ol.interaction.DragRotate.prototype.once);bq.exportProperty(ol.interaction.DragRotate.prototype,'un',ol.interaction.DragRotate.prototype.un);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'getActive',ol.interaction.DragRotateAndZoom.prototype.getActive);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'getMap',ol.interaction.DragRotateAndZoom.prototype.getMap);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'setActive',ol.interaction.DragRotateAndZoom.prototype.setActive);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'get',ol.interaction.DragRotateAndZoom.prototype.get);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'getKeys',ol.interaction.DragRotateAndZoom.prototype.getKeys);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'getProperties',ol.interaction.DragRotateAndZoom.prototype.getProperties);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'set',ol.interaction.DragRotateAndZoom.prototype.set);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'setProperties',ol.interaction.DragRotateAndZoom.prototype.setProperties);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'unset',ol.interaction.DragRotateAndZoom.prototype.unset);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'changed',ol.interaction.DragRotateAndZoom.prototype.changed);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'dispatchEvent',ol.interaction.DragRotateAndZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'getRevision',ol.interaction.DragRotateAndZoom.prototype.getRevision);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'on',ol.interaction.DragRotateAndZoom.prototype.on);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'once',ol.interaction.DragRotateAndZoom.prototype.once);bq.exportProperty(ol.interaction.DragRotateAndZoom.prototype,'un',ol.interaction.DragRotateAndZoom.prototype.un);bq.exportProperty(ol.interaction.DragZoom.prototype,'getGeometry',ol.interaction.DragZoom.prototype.getGeometry);bq.exportProperty(ol.interaction.DragZoom.prototype,'getActive',ol.interaction.DragZoom.prototype.getActive);bq.exportProperty(ol.interaction.DragZoom.prototype,'getMap',ol.interaction.DragZoom.prototype.getMap);bq.exportProperty(ol.interaction.DragZoom.prototype,'setActive',ol.interaction.DragZoom.prototype.setActive);bq.exportProperty(ol.interaction.DragZoom.prototype,'get',ol.interaction.DragZoom.prototype.get);bq.exportProperty(ol.interaction.DragZoom.prototype,'getKeys',ol.interaction.DragZoom.prototype.getKeys);bq.exportProperty(ol.interaction.DragZoom.prototype,'getProperties',ol.interaction.DragZoom.prototype.getProperties);bq.exportProperty(ol.interaction.DragZoom.prototype,'set',ol.interaction.DragZoom.prototype.set);bq.exportProperty(ol.interaction.DragZoom.prototype,'setProperties',ol.interaction.DragZoom.prototype.setProperties);bq.exportProperty(ol.interaction.DragZoom.prototype,'unset',ol.interaction.DragZoom.prototype.unset);bq.exportProperty(ol.interaction.DragZoom.prototype,'changed',ol.interaction.DragZoom.prototype.changed);bq.exportProperty(ol.interaction.DragZoom.prototype,'dispatchEvent',ol.interaction.DragZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.DragZoom.prototype,'getRevision',ol.interaction.DragZoom.prototype.getRevision);bq.exportProperty(ol.interaction.DragZoom.prototype,'on',ol.interaction.DragZoom.prototype.on);bq.exportProperty(ol.interaction.DragZoom.prototype,'once',ol.interaction.DragZoom.prototype.once);bq.exportProperty(ol.interaction.DragZoom.prototype,'un',ol.interaction.DragZoom.prototype.un);bq.exportProperty(ol.interaction.Draw.prototype,'getActive',ol.interaction.Draw.prototype.getActive);bq.exportProperty(ol.interaction.Draw.prototype,'getMap',ol.interaction.Draw.prototype.getMap);bq.exportProperty(ol.interaction.Draw.prototype,'setActive',ol.interaction.Draw.prototype.setActive);bq.exportProperty(ol.interaction.Draw.prototype,'get',ol.interaction.Draw.prototype.get);bq.exportProperty(ol.interaction.Draw.prototype,'getKeys',ol.interaction.Draw.prototype.getKeys);bq.exportProperty(ol.interaction.Draw.prototype,'getProperties',ol.interaction.Draw.prototype.getProperties);bq.exportProperty(ol.interaction.Draw.prototype,'set',ol.interaction.Draw.prototype.set);bq.exportProperty(ol.interaction.Draw.prototype,'setProperties',ol.interaction.Draw.prototype.setProperties);bq.exportProperty(ol.interaction.Draw.prototype,'unset',ol.interaction.Draw.prototype.unset);bq.exportProperty(ol.interaction.Draw.prototype,'changed',ol.interaction.Draw.prototype.changed);bq.exportProperty(ol.interaction.Draw.prototype,'dispatchEvent',ol.interaction.Draw.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Draw.prototype,'getRevision',ol.interaction.Draw.prototype.getRevision);bq.exportProperty(ol.interaction.Draw.prototype,'on',ol.interaction.Draw.prototype.on);bq.exportProperty(ol.interaction.Draw.prototype,'once',ol.interaction.Draw.prototype.once);bq.exportProperty(ol.interaction.Draw.prototype,'un',ol.interaction.Draw.prototype.un);bq.exportProperty(ol.interaction.Draw.Event.prototype,'type',ol.interaction.Draw.Event.prototype.type);bq.exportProperty(ol.interaction.Draw.Event.prototype,'target',ol.interaction.Draw.Event.prototype.target);bq.exportProperty(ol.interaction.Draw.Event.prototype,'preventDefault',ol.interaction.Draw.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.Draw.Event.prototype,'stopPropagation',ol.interaction.Draw.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.Extent.prototype,'getActive',ol.interaction.Extent.prototype.getActive);bq.exportProperty(ol.interaction.Extent.prototype,'getMap',ol.interaction.Extent.prototype.getMap);bq.exportProperty(ol.interaction.Extent.prototype,'setActive',ol.interaction.Extent.prototype.setActive);bq.exportProperty(ol.interaction.Extent.prototype,'get',ol.interaction.Extent.prototype.get);bq.exportProperty(ol.interaction.Extent.prototype,'getKeys',ol.interaction.Extent.prototype.getKeys);bq.exportProperty(ol.interaction.Extent.prototype,'getProperties',ol.interaction.Extent.prototype.getProperties);bq.exportProperty(ol.interaction.Extent.prototype,'set',ol.interaction.Extent.prototype.set);bq.exportProperty(ol.interaction.Extent.prototype,'setProperties',ol.interaction.Extent.prototype.setProperties);bq.exportProperty(ol.interaction.Extent.prototype,'unset',ol.interaction.Extent.prototype.unset);bq.exportProperty(ol.interaction.Extent.prototype,'changed',ol.interaction.Extent.prototype.changed);bq.exportProperty(ol.interaction.Extent.prototype,'dispatchEvent',ol.interaction.Extent.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Extent.prototype,'getRevision',ol.interaction.Extent.prototype.getRevision);bq.exportProperty(ol.interaction.Extent.prototype,'on',ol.interaction.Extent.prototype.on);bq.exportProperty(ol.interaction.Extent.prototype,'once',ol.interaction.Extent.prototype.once);bq.exportProperty(ol.interaction.Extent.prototype,'un',ol.interaction.Extent.prototype.un);bq.exportProperty(ol.interaction.Extent.Event.prototype,'type',ol.interaction.Extent.Event.prototype.type);bq.exportProperty(ol.interaction.Extent.Event.prototype,'target',ol.interaction.Extent.Event.prototype.target);bq.exportProperty(ol.interaction.Extent.Event.prototype,'preventDefault',ol.interaction.Extent.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.Extent.Event.prototype,'stopPropagation',ol.interaction.Extent.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'getActive',ol.interaction.KeyboardPan.prototype.getActive);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'getMap',ol.interaction.KeyboardPan.prototype.getMap);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'setActive',ol.interaction.KeyboardPan.prototype.setActive);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'get',ol.interaction.KeyboardPan.prototype.get);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'getKeys',ol.interaction.KeyboardPan.prototype.getKeys);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'getProperties',ol.interaction.KeyboardPan.prototype.getProperties);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'set',ol.interaction.KeyboardPan.prototype.set);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'setProperties',ol.interaction.KeyboardPan.prototype.setProperties);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'unset',ol.interaction.KeyboardPan.prototype.unset);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'changed',ol.interaction.KeyboardPan.prototype.changed);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'dispatchEvent',ol.interaction.KeyboardPan.prototype.dispatchEvent);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'getRevision',ol.interaction.KeyboardPan.prototype.getRevision);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'on',ol.interaction.KeyboardPan.prototype.on);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'once',ol.interaction.KeyboardPan.prototype.once);bq.exportProperty(ol.interaction.KeyboardPan.prototype,'un',ol.interaction.KeyboardPan.prototype.un);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'getActive',ol.interaction.KeyboardZoom.prototype.getActive);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'getMap',ol.interaction.KeyboardZoom.prototype.getMap);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'setActive',ol.interaction.KeyboardZoom.prototype.setActive);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'get',ol.interaction.KeyboardZoom.prototype.get);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'getKeys',ol.interaction.KeyboardZoom.prototype.getKeys);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'getProperties',ol.interaction.KeyboardZoom.prototype.getProperties);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'set',ol.interaction.KeyboardZoom.prototype.set);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'setProperties',ol.interaction.KeyboardZoom.prototype.setProperties);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'unset',ol.interaction.KeyboardZoom.prototype.unset);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'changed',ol.interaction.KeyboardZoom.prototype.changed);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'dispatchEvent',ol.interaction.KeyboardZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'getRevision',ol.interaction.KeyboardZoom.prototype.getRevision);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'on',ol.interaction.KeyboardZoom.prototype.on);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'once',ol.interaction.KeyboardZoom.prototype.once);bq.exportProperty(ol.interaction.KeyboardZoom.prototype,'un',ol.interaction.KeyboardZoom.prototype.un);bq.exportProperty(ol.interaction.Modify.prototype,'getActive',ol.interaction.Modify.prototype.getActive);bq.exportProperty(ol.interaction.Modify.prototype,'getMap',ol.interaction.Modify.prototype.getMap);bq.exportProperty(ol.interaction.Modify.prototype,'setActive',ol.interaction.Modify.prototype.setActive);bq.exportProperty(ol.interaction.Modify.prototype,'get',ol.interaction.Modify.prototype.get);bq.exportProperty(ol.interaction.Modify.prototype,'getKeys',ol.interaction.Modify.prototype.getKeys);bq.exportProperty(ol.interaction.Modify.prototype,'getProperties',ol.interaction.Modify.prototype.getProperties);bq.exportProperty(ol.interaction.Modify.prototype,'set',ol.interaction.Modify.prototype.set);bq.exportProperty(ol.interaction.Modify.prototype,'setProperties',ol.interaction.Modify.prototype.setProperties);bq.exportProperty(ol.interaction.Modify.prototype,'unset',ol.interaction.Modify.prototype.unset);bq.exportProperty(ol.interaction.Modify.prototype,'changed',ol.interaction.Modify.prototype.changed);bq.exportProperty(ol.interaction.Modify.prototype,'dispatchEvent',ol.interaction.Modify.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Modify.prototype,'getRevision',ol.interaction.Modify.prototype.getRevision);bq.exportProperty(ol.interaction.Modify.prototype,'on',ol.interaction.Modify.prototype.on);bq.exportProperty(ol.interaction.Modify.prototype,'once',ol.interaction.Modify.prototype.once);bq.exportProperty(ol.interaction.Modify.prototype,'un',ol.interaction.Modify.prototype.un);bq.exportProperty(ol.interaction.Modify.Event.prototype,'type',ol.interaction.Modify.Event.prototype.type);bq.exportProperty(ol.interaction.Modify.Event.prototype,'target',ol.interaction.Modify.Event.prototype.target);bq.exportProperty(ol.interaction.Modify.Event.prototype,'preventDefault',ol.interaction.Modify.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.Modify.Event.prototype,'stopPropagation',ol.interaction.Modify.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'getActive',ol.interaction.MouseWheelZoom.prototype.getActive);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'getMap',ol.interaction.MouseWheelZoom.prototype.getMap);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'setActive',ol.interaction.MouseWheelZoom.prototype.setActive);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'get',ol.interaction.MouseWheelZoom.prototype.get);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'getKeys',ol.interaction.MouseWheelZoom.prototype.getKeys);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'getProperties',ol.interaction.MouseWheelZoom.prototype.getProperties);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'set',ol.interaction.MouseWheelZoom.prototype.set);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'setProperties',ol.interaction.MouseWheelZoom.prototype.setProperties);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'unset',ol.interaction.MouseWheelZoom.prototype.unset);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'changed',ol.interaction.MouseWheelZoom.prototype.changed);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'dispatchEvent',ol.interaction.MouseWheelZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'getRevision',ol.interaction.MouseWheelZoom.prototype.getRevision);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'on',ol.interaction.MouseWheelZoom.prototype.on);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'once',ol.interaction.MouseWheelZoom.prototype.once);bq.exportProperty(ol.interaction.MouseWheelZoom.prototype,'un',ol.interaction.MouseWheelZoom.prototype.un);bq.exportProperty(ol.interaction.PinchRotate.prototype,'getActive',ol.interaction.PinchRotate.prototype.getActive);bq.exportProperty(ol.interaction.PinchRotate.prototype,'getMap',ol.interaction.PinchRotate.prototype.getMap);bq.exportProperty(ol.interaction.PinchRotate.prototype,'setActive',ol.interaction.PinchRotate.prototype.setActive);bq.exportProperty(ol.interaction.PinchRotate.prototype,'get',ol.interaction.PinchRotate.prototype.get);bq.exportProperty(ol.interaction.PinchRotate.prototype,'getKeys',ol.interaction.PinchRotate.prototype.getKeys);bq.exportProperty(ol.interaction.PinchRotate.prototype,'getProperties',ol.interaction.PinchRotate.prototype.getProperties);bq.exportProperty(ol.interaction.PinchRotate.prototype,'set',ol.interaction.PinchRotate.prototype.set);bq.exportProperty(ol.interaction.PinchRotate.prototype,'setProperties',ol.interaction.PinchRotate.prototype.setProperties);bq.exportProperty(ol.interaction.PinchRotate.prototype,'unset',ol.interaction.PinchRotate.prototype.unset);bq.exportProperty(ol.interaction.PinchRotate.prototype,'changed',ol.interaction.PinchRotate.prototype.changed);bq.exportProperty(ol.interaction.PinchRotate.prototype,'dispatchEvent',ol.interaction.PinchRotate.prototype.dispatchEvent);bq.exportProperty(ol.interaction.PinchRotate.prototype,'getRevision',ol.interaction.PinchRotate.prototype.getRevision);bq.exportProperty(ol.interaction.PinchRotate.prototype,'on',ol.interaction.PinchRotate.prototype.on);bq.exportProperty(ol.interaction.PinchRotate.prototype,'once',ol.interaction.PinchRotate.prototype.once);bq.exportProperty(ol.interaction.PinchRotate.prototype,'un',ol.interaction.PinchRotate.prototype.un);bq.exportProperty(ol.interaction.PinchZoom.prototype,'getActive',ol.interaction.PinchZoom.prototype.getActive);bq.exportProperty(ol.interaction.PinchZoom.prototype,'getMap',ol.interaction.PinchZoom.prototype.getMap);bq.exportProperty(ol.interaction.PinchZoom.prototype,'setActive',ol.interaction.PinchZoom.prototype.setActive);bq.exportProperty(ol.interaction.PinchZoom.prototype,'get',ol.interaction.PinchZoom.prototype.get);bq.exportProperty(ol.interaction.PinchZoom.prototype,'getKeys',ol.interaction.PinchZoom.prototype.getKeys);bq.exportProperty(ol.interaction.PinchZoom.prototype,'getProperties',ol.interaction.PinchZoom.prototype.getProperties);bq.exportProperty(ol.interaction.PinchZoom.prototype,'set',ol.interaction.PinchZoom.prototype.set);bq.exportProperty(ol.interaction.PinchZoom.prototype,'setProperties',ol.interaction.PinchZoom.prototype.setProperties);bq.exportProperty(ol.interaction.PinchZoom.prototype,'unset',ol.interaction.PinchZoom.prototype.unset);bq.exportProperty(ol.interaction.PinchZoom.prototype,'changed',ol.interaction.PinchZoom.prototype.changed);bq.exportProperty(ol.interaction.PinchZoom.prototype,'dispatchEvent',ol.interaction.PinchZoom.prototype.dispatchEvent);bq.exportProperty(ol.interaction.PinchZoom.prototype,'getRevision',ol.interaction.PinchZoom.prototype.getRevision);bq.exportProperty(ol.interaction.PinchZoom.prototype,'on',ol.interaction.PinchZoom.prototype.on);bq.exportProperty(ol.interaction.PinchZoom.prototype,'once',ol.interaction.PinchZoom.prototype.once);bq.exportProperty(ol.interaction.PinchZoom.prototype,'un',ol.interaction.PinchZoom.prototype.un);bq.exportProperty(ol.interaction.Select.prototype,'getActive',ol.interaction.Select.prototype.getActive);bq.exportProperty(ol.interaction.Select.prototype,'getMap',ol.interaction.Select.prototype.getMap);bq.exportProperty(ol.interaction.Select.prototype,'setActive',ol.interaction.Select.prototype.setActive);bq.exportProperty(ol.interaction.Select.prototype,'get',ol.interaction.Select.prototype.get);bq.exportProperty(ol.interaction.Select.prototype,'getKeys',ol.interaction.Select.prototype.getKeys);bq.exportProperty(ol.interaction.Select.prototype,'getProperties',ol.interaction.Select.prototype.getProperties);bq.exportProperty(ol.interaction.Select.prototype,'set',ol.interaction.Select.prototype.set);bq.exportProperty(ol.interaction.Select.prototype,'setProperties',ol.interaction.Select.prototype.setProperties);bq.exportProperty(ol.interaction.Select.prototype,'unset',ol.interaction.Select.prototype.unset);bq.exportProperty(ol.interaction.Select.prototype,'changed',ol.interaction.Select.prototype.changed);bq.exportProperty(ol.interaction.Select.prototype,'dispatchEvent',ol.interaction.Select.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Select.prototype,'getRevision',ol.interaction.Select.prototype.getRevision);bq.exportProperty(ol.interaction.Select.prototype,'on',ol.interaction.Select.prototype.on);bq.exportProperty(ol.interaction.Select.prototype,'once',ol.interaction.Select.prototype.once);bq.exportProperty(ol.interaction.Select.prototype,'un',ol.interaction.Select.prototype.un);bq.exportProperty(ol.interaction.Select.Event.prototype,'type',ol.interaction.Select.Event.prototype.type);bq.exportProperty(ol.interaction.Select.Event.prototype,'target',ol.interaction.Select.Event.prototype.target);bq.exportProperty(ol.interaction.Select.Event.prototype,'preventDefault',ol.interaction.Select.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.Select.Event.prototype,'stopPropagation',ol.interaction.Select.Event.prototype.stopPropagation);bq.exportProperty(ol.interaction.Snap.prototype,'getActive',ol.interaction.Snap.prototype.getActive);bq.exportProperty(ol.interaction.Snap.prototype,'getMap',ol.interaction.Snap.prototype.getMap);bq.exportProperty(ol.interaction.Snap.prototype,'setActive',ol.interaction.Snap.prototype.setActive);bq.exportProperty(ol.interaction.Snap.prototype,'get',ol.interaction.Snap.prototype.get);bq.exportProperty(ol.interaction.Snap.prototype,'getKeys',ol.interaction.Snap.prototype.getKeys);bq.exportProperty(ol.interaction.Snap.prototype,'getProperties',ol.interaction.Snap.prototype.getProperties);bq.exportProperty(ol.interaction.Snap.prototype,'set',ol.interaction.Snap.prototype.set);bq.exportProperty(ol.interaction.Snap.prototype,'setProperties',ol.interaction.Snap.prototype.setProperties);bq.exportProperty(ol.interaction.Snap.prototype,'unset',ol.interaction.Snap.prototype.unset);bq.exportProperty(ol.interaction.Snap.prototype,'changed',ol.interaction.Snap.prototype.changed);bq.exportProperty(ol.interaction.Snap.prototype,'dispatchEvent',ol.interaction.Snap.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Snap.prototype,'getRevision',ol.interaction.Snap.prototype.getRevision);bq.exportProperty(ol.interaction.Snap.prototype,'on',ol.interaction.Snap.prototype.on);bq.exportProperty(ol.interaction.Snap.prototype,'once',ol.interaction.Snap.prototype.once);bq.exportProperty(ol.interaction.Snap.prototype,'un',ol.interaction.Snap.prototype.un);bq.exportProperty(ol.interaction.Translate.prototype,'getActive',ol.interaction.Translate.prototype.getActive);bq.exportProperty(ol.interaction.Translate.prototype,'getMap',ol.interaction.Translate.prototype.getMap);bq.exportProperty(ol.interaction.Translate.prototype,'setActive',ol.interaction.Translate.prototype.setActive);bq.exportProperty(ol.interaction.Translate.prototype,'get',ol.interaction.Translate.prototype.get);bq.exportProperty(ol.interaction.Translate.prototype,'getKeys',ol.interaction.Translate.prototype.getKeys);bq.exportProperty(ol.interaction.Translate.prototype,'getProperties',ol.interaction.Translate.prototype.getProperties);bq.exportProperty(ol.interaction.Translate.prototype,'set',ol.interaction.Translate.prototype.set);bq.exportProperty(ol.interaction.Translate.prototype,'setProperties',ol.interaction.Translate.prototype.setProperties);bq.exportProperty(ol.interaction.Translate.prototype,'unset',ol.interaction.Translate.prototype.unset);bq.exportProperty(ol.interaction.Translate.prototype,'changed',ol.interaction.Translate.prototype.changed);bq.exportProperty(ol.interaction.Translate.prototype,'dispatchEvent',ol.interaction.Translate.prototype.dispatchEvent);bq.exportProperty(ol.interaction.Translate.prototype,'getRevision',ol.interaction.Translate.prototype.getRevision);bq.exportProperty(ol.interaction.Translate.prototype,'on',ol.interaction.Translate.prototype.on);bq.exportProperty(ol.interaction.Translate.prototype,'once',ol.interaction.Translate.prototype.once);bq.exportProperty(ol.interaction.Translate.prototype,'un',ol.interaction.Translate.prototype.un);bq.exportProperty(ol.interaction.Translate.Event.prototype,'type',ol.interaction.Translate.Event.prototype.type);bq.exportProperty(ol.interaction.Translate.Event.prototype,'target',ol.interaction.Translate.Event.prototype.target);bq.exportProperty(ol.interaction.Translate.Event.prototype,'preventDefault',ol.interaction.Translate.Event.prototype.preventDefault);bq.exportProperty(ol.interaction.Translate.Event.prototype,'stopPropagation',ol.interaction.Translate.Event.prototype.stopPropagation);bq.exportProperty(ol.geom.Geometry.prototype,'get',ol.geom.Geometry.prototype.get);bq.exportProperty(ol.geom.Geometry.prototype,'getKeys',ol.geom.Geometry.prototype.getKeys);bq.exportProperty(ol.geom.Geometry.prototype,'getProperties',ol.geom.Geometry.prototype.getProperties);bq.exportProperty(ol.geom.Geometry.prototype,'set',ol.geom.Geometry.prototype.set);bq.exportProperty(ol.geom.Geometry.prototype,'setProperties',ol.geom.Geometry.prototype.setProperties);bq.exportProperty(ol.geom.Geometry.prototype,'unset',ol.geom.Geometry.prototype.unset);bq.exportProperty(ol.geom.Geometry.prototype,'changed',ol.geom.Geometry.prototype.changed);bq.exportProperty(ol.geom.Geometry.prototype,'dispatchEvent',ol.geom.Geometry.prototype.dispatchEvent);bq.exportProperty(ol.geom.Geometry.prototype,'getRevision',ol.geom.Geometry.prototype.getRevision);bq.exportProperty(ol.geom.Geometry.prototype,'on',ol.geom.Geometry.prototype.on);bq.exportProperty(ol.geom.Geometry.prototype,'once',ol.geom.Geometry.prototype.once);bq.exportProperty(ol.geom.Geometry.prototype,'un',ol.geom.Geometry.prototype.un);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getClosestPoint',ol.geom.SimpleGeometry.prototype.getClosestPoint);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'intersectsCoordinate',ol.geom.SimpleGeometry.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getExtent',ol.geom.SimpleGeometry.prototype.getExtent);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'rotate',ol.geom.SimpleGeometry.prototype.rotate);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'scale',ol.geom.SimpleGeometry.prototype.scale);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'simplify',ol.geom.SimpleGeometry.prototype.simplify);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'transform',ol.geom.SimpleGeometry.prototype.transform);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'get',ol.geom.SimpleGeometry.prototype.get);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getKeys',ol.geom.SimpleGeometry.prototype.getKeys);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getProperties',ol.geom.SimpleGeometry.prototype.getProperties);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'set',ol.geom.SimpleGeometry.prototype.set);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'setProperties',ol.geom.SimpleGeometry.prototype.setProperties);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'unset',ol.geom.SimpleGeometry.prototype.unset);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'changed',ol.geom.SimpleGeometry.prototype.changed);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'dispatchEvent',ol.geom.SimpleGeometry.prototype.dispatchEvent);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'getRevision',ol.geom.SimpleGeometry.prototype.getRevision);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'on',ol.geom.SimpleGeometry.prototype.on);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'once',ol.geom.SimpleGeometry.prototype.once);bq.exportProperty(ol.geom.SimpleGeometry.prototype,'un',ol.geom.SimpleGeometry.prototype.un);bq.exportProperty(ol.geom.Circle.prototype,'getFirstCoordinate',ol.geom.Circle.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.Circle.prototype,'getLastCoordinate',ol.geom.Circle.prototype.getLastCoordinate);bq.exportProperty(ol.geom.Circle.prototype,'getLayout',ol.geom.Circle.prototype.getLayout);bq.exportProperty(ol.geom.Circle.prototype,'rotate',ol.geom.Circle.prototype.rotate);bq.exportProperty(ol.geom.Circle.prototype,'scale',ol.geom.Circle.prototype.scale);bq.exportProperty(ol.geom.Circle.prototype,'getClosestPoint',ol.geom.Circle.prototype.getClosestPoint);bq.exportProperty(ol.geom.Circle.prototype,'intersectsCoordinate',ol.geom.Circle.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.Circle.prototype,'getExtent',ol.geom.Circle.prototype.getExtent);bq.exportProperty(ol.geom.Circle.prototype,'simplify',ol.geom.Circle.prototype.simplify);bq.exportProperty(ol.geom.Circle.prototype,'get',ol.geom.Circle.prototype.get);bq.exportProperty(ol.geom.Circle.prototype,'getKeys',ol.geom.Circle.prototype.getKeys);bq.exportProperty(ol.geom.Circle.prototype,'getProperties',ol.geom.Circle.prototype.getProperties);bq.exportProperty(ol.geom.Circle.prototype,'set',ol.geom.Circle.prototype.set);bq.exportProperty(ol.geom.Circle.prototype,'setProperties',ol.geom.Circle.prototype.setProperties);bq.exportProperty(ol.geom.Circle.prototype,'unset',ol.geom.Circle.prototype.unset);bq.exportProperty(ol.geom.Circle.prototype,'changed',ol.geom.Circle.prototype.changed);bq.exportProperty(ol.geom.Circle.prototype,'dispatchEvent',ol.geom.Circle.prototype.dispatchEvent);bq.exportProperty(ol.geom.Circle.prototype,'getRevision',ol.geom.Circle.prototype.getRevision);bq.exportProperty(ol.geom.Circle.prototype,'on',ol.geom.Circle.prototype.on);bq.exportProperty(ol.geom.Circle.prototype,'once',ol.geom.Circle.prototype.once);bq.exportProperty(ol.geom.Circle.prototype,'un',ol.geom.Circle.prototype.un);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getClosestPoint',ol.geom.GeometryCollection.prototype.getClosestPoint);bq.exportProperty(ol.geom.GeometryCollection.prototype,'intersectsCoordinate',ol.geom.GeometryCollection.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getExtent',ol.geom.GeometryCollection.prototype.getExtent);bq.exportProperty(ol.geom.GeometryCollection.prototype,'rotate',ol.geom.GeometryCollection.prototype.rotate);bq.exportProperty(ol.geom.GeometryCollection.prototype,'scale',ol.geom.GeometryCollection.prototype.scale);bq.exportProperty(ol.geom.GeometryCollection.prototype,'simplify',ol.geom.GeometryCollection.prototype.simplify);bq.exportProperty(ol.geom.GeometryCollection.prototype,'transform',ol.geom.GeometryCollection.prototype.transform);bq.exportProperty(ol.geom.GeometryCollection.prototype,'get',ol.geom.GeometryCollection.prototype.get);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getKeys',ol.geom.GeometryCollection.prototype.getKeys);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getProperties',ol.geom.GeometryCollection.prototype.getProperties);bq.exportProperty(ol.geom.GeometryCollection.prototype,'set',ol.geom.GeometryCollection.prototype.set);bq.exportProperty(ol.geom.GeometryCollection.prototype,'setProperties',ol.geom.GeometryCollection.prototype.setProperties);bq.exportProperty(ol.geom.GeometryCollection.prototype,'unset',ol.geom.GeometryCollection.prototype.unset);bq.exportProperty(ol.geom.GeometryCollection.prototype,'changed',ol.geom.GeometryCollection.prototype.changed);bq.exportProperty(ol.geom.GeometryCollection.prototype,'dispatchEvent',ol.geom.GeometryCollection.prototype.dispatchEvent);bq.exportProperty(ol.geom.GeometryCollection.prototype,'getRevision',ol.geom.GeometryCollection.prototype.getRevision);bq.exportProperty(ol.geom.GeometryCollection.prototype,'on',ol.geom.GeometryCollection.prototype.on);bq.exportProperty(ol.geom.GeometryCollection.prototype,'once',ol.geom.GeometryCollection.prototype.once);bq.exportProperty(ol.geom.GeometryCollection.prototype,'un',ol.geom.GeometryCollection.prototype.un);bq.exportProperty(ol.geom.LinearRing.prototype,'getFirstCoordinate',ol.geom.LinearRing.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.LinearRing.prototype,'getLastCoordinate',ol.geom.LinearRing.prototype.getLastCoordinate);bq.exportProperty(ol.geom.LinearRing.prototype,'getLayout',ol.geom.LinearRing.prototype.getLayout);bq.exportProperty(ol.geom.LinearRing.prototype,'rotate',ol.geom.LinearRing.prototype.rotate);bq.exportProperty(ol.geom.LinearRing.prototype,'scale',ol.geom.LinearRing.prototype.scale);bq.exportProperty(ol.geom.LinearRing.prototype,'getClosestPoint',ol.geom.LinearRing.prototype.getClosestPoint);bq.exportProperty(ol.geom.LinearRing.prototype,'intersectsCoordinate',ol.geom.LinearRing.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.LinearRing.prototype,'getExtent',ol.geom.LinearRing.prototype.getExtent);bq.exportProperty(ol.geom.LinearRing.prototype,'simplify',ol.geom.LinearRing.prototype.simplify);bq.exportProperty(ol.geom.LinearRing.prototype,'transform',ol.geom.LinearRing.prototype.transform);bq.exportProperty(ol.geom.LinearRing.prototype,'get',ol.geom.LinearRing.prototype.get);bq.exportProperty(ol.geom.LinearRing.prototype,'getKeys',ol.geom.LinearRing.prototype.getKeys);bq.exportProperty(ol.geom.LinearRing.prototype,'getProperties',ol.geom.LinearRing.prototype.getProperties);bq.exportProperty(ol.geom.LinearRing.prototype,'set',ol.geom.LinearRing.prototype.set);bq.exportProperty(ol.geom.LinearRing.prototype,'setProperties',ol.geom.LinearRing.prototype.setProperties);bq.exportProperty(ol.geom.LinearRing.prototype,'unset',ol.geom.LinearRing.prototype.unset);bq.exportProperty(ol.geom.LinearRing.prototype,'changed',ol.geom.LinearRing.prototype.changed);bq.exportProperty(ol.geom.LinearRing.prototype,'dispatchEvent',ol.geom.LinearRing.prototype.dispatchEvent);bq.exportProperty(ol.geom.LinearRing.prototype,'getRevision',ol.geom.LinearRing.prototype.getRevision);bq.exportProperty(ol.geom.LinearRing.prototype,'on',ol.geom.LinearRing.prototype.on);bq.exportProperty(ol.geom.LinearRing.prototype,'once',ol.geom.LinearRing.prototype.once);bq.exportProperty(ol.geom.LinearRing.prototype,'un',ol.geom.LinearRing.prototype.un);bq.exportProperty(ol.geom.LineString.prototype,'getFirstCoordinate',ol.geom.LineString.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.LineString.prototype,'getLastCoordinate',ol.geom.LineString.prototype.getLastCoordinate);bq.exportProperty(ol.geom.LineString.prototype,'getLayout',ol.geom.LineString.prototype.getLayout);bq.exportProperty(ol.geom.LineString.prototype,'rotate',ol.geom.LineString.prototype.rotate);bq.exportProperty(ol.geom.LineString.prototype,'scale',ol.geom.LineString.prototype.scale);bq.exportProperty(ol.geom.LineString.prototype,'getClosestPoint',ol.geom.LineString.prototype.getClosestPoint);bq.exportProperty(ol.geom.LineString.prototype,'intersectsCoordinate',ol.geom.LineString.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.LineString.prototype,'getExtent',ol.geom.LineString.prototype.getExtent);bq.exportProperty(ol.geom.LineString.prototype,'simplify',ol.geom.LineString.prototype.simplify);bq.exportProperty(ol.geom.LineString.prototype,'transform',ol.geom.LineString.prototype.transform);bq.exportProperty(ol.geom.LineString.prototype,'get',ol.geom.LineString.prototype.get);bq.exportProperty(ol.geom.LineString.prototype,'getKeys',ol.geom.LineString.prototype.getKeys);bq.exportProperty(ol.geom.LineString.prototype,'getProperties',ol.geom.LineString.prototype.getProperties);bq.exportProperty(ol.geom.LineString.prototype,'set',ol.geom.LineString.prototype.set);bq.exportProperty(ol.geom.LineString.prototype,'setProperties',ol.geom.LineString.prototype.setProperties);bq.exportProperty(ol.geom.LineString.prototype,'unset',ol.geom.LineString.prototype.unset);bq.exportProperty(ol.geom.LineString.prototype,'changed',ol.geom.LineString.prototype.changed);bq.exportProperty(ol.geom.LineString.prototype,'dispatchEvent',ol.geom.LineString.prototype.dispatchEvent);bq.exportProperty(ol.geom.LineString.prototype,'getRevision',ol.geom.LineString.prototype.getRevision);bq.exportProperty(ol.geom.LineString.prototype,'on',ol.geom.LineString.prototype.on);bq.exportProperty(ol.geom.LineString.prototype,'once',ol.geom.LineString.prototype.once);bq.exportProperty(ol.geom.LineString.prototype,'un',ol.geom.LineString.prototype.un);bq.exportProperty(ol.geom.MultiLineString.prototype,'getFirstCoordinate',ol.geom.MultiLineString.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.MultiLineString.prototype,'getLastCoordinate',ol.geom.MultiLineString.prototype.getLastCoordinate);bq.exportProperty(ol.geom.MultiLineString.prototype,'getLayout',ol.geom.MultiLineString.prototype.getLayout);bq.exportProperty(ol.geom.MultiLineString.prototype,'rotate',ol.geom.MultiLineString.prototype.rotate);bq.exportProperty(ol.geom.MultiLineString.prototype,'scale',ol.geom.MultiLineString.prototype.scale);bq.exportProperty(ol.geom.MultiLineString.prototype,'getClosestPoint',ol.geom.MultiLineString.prototype.getClosestPoint);bq.exportProperty(ol.geom.MultiLineString.prototype,'intersectsCoordinate',ol.geom.MultiLineString.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.MultiLineString.prototype,'getExtent',ol.geom.MultiLineString.prototype.getExtent);bq.exportProperty(ol.geom.MultiLineString.prototype,'simplify',ol.geom.MultiLineString.prototype.simplify);bq.exportProperty(ol.geom.MultiLineString.prototype,'transform',ol.geom.MultiLineString.prototype.transform);bq.exportProperty(ol.geom.MultiLineString.prototype,'get',ol.geom.MultiLineString.prototype.get);bq.exportProperty(ol.geom.MultiLineString.prototype,'getKeys',ol.geom.MultiLineString.prototype.getKeys);bq.exportProperty(ol.geom.MultiLineString.prototype,'getProperties',ol.geom.MultiLineString.prototype.getProperties);bq.exportProperty(ol.geom.MultiLineString.prototype,'set',ol.geom.MultiLineString.prototype.set);bq.exportProperty(ol.geom.MultiLineString.prototype,'setProperties',ol.geom.MultiLineString.prototype.setProperties);bq.exportProperty(ol.geom.MultiLineString.prototype,'unset',ol.geom.MultiLineString.prototype.unset);bq.exportProperty(ol.geom.MultiLineString.prototype,'changed',ol.geom.MultiLineString.prototype.changed);bq.exportProperty(ol.geom.MultiLineString.prototype,'dispatchEvent',ol.geom.MultiLineString.prototype.dispatchEvent);bq.exportProperty(ol.geom.MultiLineString.prototype,'getRevision',ol.geom.MultiLineString.prototype.getRevision);bq.exportProperty(ol.geom.MultiLineString.prototype,'on',ol.geom.MultiLineString.prototype.on);bq.exportProperty(ol.geom.MultiLineString.prototype,'once',ol.geom.MultiLineString.prototype.once);bq.exportProperty(ol.geom.MultiLineString.prototype,'un',ol.geom.MultiLineString.prototype.un);bq.exportProperty(ol.geom.MultiPoint.prototype,'getFirstCoordinate',ol.geom.MultiPoint.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.MultiPoint.prototype,'getLastCoordinate',ol.geom.MultiPoint.prototype.getLastCoordinate);bq.exportProperty(ol.geom.MultiPoint.prototype,'getLayout',ol.geom.MultiPoint.prototype.getLayout);bq.exportProperty(ol.geom.MultiPoint.prototype,'rotate',ol.geom.MultiPoint.prototype.rotate);bq.exportProperty(ol.geom.MultiPoint.prototype,'scale',ol.geom.MultiPoint.prototype.scale);bq.exportProperty(ol.geom.MultiPoint.prototype,'getClosestPoint',ol.geom.MultiPoint.prototype.getClosestPoint);bq.exportProperty(ol.geom.MultiPoint.prototype,'intersectsCoordinate',ol.geom.MultiPoint.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.MultiPoint.prototype,'getExtent',ol.geom.MultiPoint.prototype.getExtent);bq.exportProperty(ol.geom.MultiPoint.prototype,'simplify',ol.geom.MultiPoint.prototype.simplify);bq.exportProperty(ol.geom.MultiPoint.prototype,'transform',ol.geom.MultiPoint.prototype.transform);bq.exportProperty(ol.geom.MultiPoint.prototype,'get',ol.geom.MultiPoint.prototype.get);bq.exportProperty(ol.geom.MultiPoint.prototype,'getKeys',ol.geom.MultiPoint.prototype.getKeys);bq.exportProperty(ol.geom.MultiPoint.prototype,'getProperties',ol.geom.MultiPoint.prototype.getProperties);bq.exportProperty(ol.geom.MultiPoint.prototype,'set',ol.geom.MultiPoint.prototype.set);bq.exportProperty(ol.geom.MultiPoint.prototype,'setProperties',ol.geom.MultiPoint.prototype.setProperties);bq.exportProperty(ol.geom.MultiPoint.prototype,'unset',ol.geom.MultiPoint.prototype.unset);bq.exportProperty(ol.geom.MultiPoint.prototype,'changed',ol.geom.MultiPoint.prototype.changed);bq.exportProperty(ol.geom.MultiPoint.prototype,'dispatchEvent',ol.geom.MultiPoint.prototype.dispatchEvent);bq.exportProperty(ol.geom.MultiPoint.prototype,'getRevision',ol.geom.MultiPoint.prototype.getRevision);bq.exportProperty(ol.geom.MultiPoint.prototype,'on',ol.geom.MultiPoint.prototype.on);bq.exportProperty(ol.geom.MultiPoint.prototype,'once',ol.geom.MultiPoint.prototype.once);bq.exportProperty(ol.geom.MultiPoint.prototype,'un',ol.geom.MultiPoint.prototype.un);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getFirstCoordinate',ol.geom.MultiPolygon.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getLastCoordinate',ol.geom.MultiPolygon.prototype.getLastCoordinate);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getLayout',ol.geom.MultiPolygon.prototype.getLayout);bq.exportProperty(ol.geom.MultiPolygon.prototype,'rotate',ol.geom.MultiPolygon.prototype.rotate);bq.exportProperty(ol.geom.MultiPolygon.prototype,'scale',ol.geom.MultiPolygon.prototype.scale);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getClosestPoint',ol.geom.MultiPolygon.prototype.getClosestPoint);bq.exportProperty(ol.geom.MultiPolygon.prototype,'intersectsCoordinate',ol.geom.MultiPolygon.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getExtent',ol.geom.MultiPolygon.prototype.getExtent);bq.exportProperty(ol.geom.MultiPolygon.prototype,'simplify',ol.geom.MultiPolygon.prototype.simplify);bq.exportProperty(ol.geom.MultiPolygon.prototype,'transform',ol.geom.MultiPolygon.prototype.transform);bq.exportProperty(ol.geom.MultiPolygon.prototype,'get',ol.geom.MultiPolygon.prototype.get);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getKeys',ol.geom.MultiPolygon.prototype.getKeys);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getProperties',ol.geom.MultiPolygon.prototype.getProperties);bq.exportProperty(ol.geom.MultiPolygon.prototype,'set',ol.geom.MultiPolygon.prototype.set);bq.exportProperty(ol.geom.MultiPolygon.prototype,'setProperties',ol.geom.MultiPolygon.prototype.setProperties);bq.exportProperty(ol.geom.MultiPolygon.prototype,'unset',ol.geom.MultiPolygon.prototype.unset);bq.exportProperty(ol.geom.MultiPolygon.prototype,'changed',ol.geom.MultiPolygon.prototype.changed);bq.exportProperty(ol.geom.MultiPolygon.prototype,'dispatchEvent',ol.geom.MultiPolygon.prototype.dispatchEvent);bq.exportProperty(ol.geom.MultiPolygon.prototype,'getRevision',ol.geom.MultiPolygon.prototype.getRevision);bq.exportProperty(ol.geom.MultiPolygon.prototype,'on',ol.geom.MultiPolygon.prototype.on);bq.exportProperty(ol.geom.MultiPolygon.prototype,'once',ol.geom.MultiPolygon.prototype.once);bq.exportProperty(ol.geom.MultiPolygon.prototype,'un',ol.geom.MultiPolygon.prototype.un);bq.exportProperty(ol.geom.Point.prototype,'getFirstCoordinate',ol.geom.Point.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.Point.prototype,'getLastCoordinate',ol.geom.Point.prototype.getLastCoordinate);bq.exportProperty(ol.geom.Point.prototype,'getLayout',ol.geom.Point.prototype.getLayout);bq.exportProperty(ol.geom.Point.prototype,'rotate',ol.geom.Point.prototype.rotate);bq.exportProperty(ol.geom.Point.prototype,'scale',ol.geom.Point.prototype.scale);bq.exportProperty(ol.geom.Point.prototype,'getClosestPoint',ol.geom.Point.prototype.getClosestPoint);bq.exportProperty(ol.geom.Point.prototype,'intersectsCoordinate',ol.geom.Point.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.Point.prototype,'getExtent',ol.geom.Point.prototype.getExtent);bq.exportProperty(ol.geom.Point.prototype,'simplify',ol.geom.Point.prototype.simplify);bq.exportProperty(ol.geom.Point.prototype,'transform',ol.geom.Point.prototype.transform);bq.exportProperty(ol.geom.Point.prototype,'get',ol.geom.Point.prototype.get);bq.exportProperty(ol.geom.Point.prototype,'getKeys',ol.geom.Point.prototype.getKeys);bq.exportProperty(ol.geom.Point.prototype,'getProperties',ol.geom.Point.prototype.getProperties);bq.exportProperty(ol.geom.Point.prototype,'set',ol.geom.Point.prototype.set);bq.exportProperty(ol.geom.Point.prototype,'setProperties',ol.geom.Point.prototype.setProperties);bq.exportProperty(ol.geom.Point.prototype,'unset',ol.geom.Point.prototype.unset);bq.exportProperty(ol.geom.Point.prototype,'changed',ol.geom.Point.prototype.changed);bq.exportProperty(ol.geom.Point.prototype,'dispatchEvent',ol.geom.Point.prototype.dispatchEvent);bq.exportProperty(ol.geom.Point.prototype,'getRevision',ol.geom.Point.prototype.getRevision);bq.exportProperty(ol.geom.Point.prototype,'on',ol.geom.Point.prototype.on);bq.exportProperty(ol.geom.Point.prototype,'once',ol.geom.Point.prototype.once);bq.exportProperty(ol.geom.Point.prototype,'un',ol.geom.Point.prototype.un);bq.exportProperty(ol.geom.Polygon.prototype,'getFirstCoordinate',ol.geom.Polygon.prototype.getFirstCoordinate);bq.exportProperty(ol.geom.Polygon.prototype,'getLastCoordinate',ol.geom.Polygon.prototype.getLastCoordinate);bq.exportProperty(ol.geom.Polygon.prototype,'getLayout',ol.geom.Polygon.prototype.getLayout);bq.exportProperty(ol.geom.Polygon.prototype,'rotate',ol.geom.Polygon.prototype.rotate);bq.exportProperty(ol.geom.Polygon.prototype,'scale',ol.geom.Polygon.prototype.scale);bq.exportProperty(ol.geom.Polygon.prototype,'getClosestPoint',ol.geom.Polygon.prototype.getClosestPoint);bq.exportProperty(ol.geom.Polygon.prototype,'intersectsCoordinate',ol.geom.Polygon.prototype.intersectsCoordinate);bq.exportProperty(ol.geom.Polygon.prototype,'getExtent',ol.geom.Polygon.prototype.getExtent);bq.exportProperty(ol.geom.Polygon.prototype,'simplify',ol.geom.Polygon.prototype.simplify);bq.exportProperty(ol.geom.Polygon.prototype,'transform',ol.geom.Polygon.prototype.transform);bq.exportProperty(ol.geom.Polygon.prototype,'get',ol.geom.Polygon.prototype.get);bq.exportProperty(ol.geom.Polygon.prototype,'getKeys',ol.geom.Polygon.prototype.getKeys);bq.exportProperty(ol.geom.Polygon.prototype,'getProperties',ol.geom.Polygon.prototype.getProperties);bq.exportProperty(ol.geom.Polygon.prototype,'set',ol.geom.Polygon.prototype.set);bq.exportProperty(ol.geom.Polygon.prototype,'setProperties',ol.geom.Polygon.prototype.setProperties);bq.exportProperty(ol.geom.Polygon.prototype,'unset',ol.geom.Polygon.prototype.unset);bq.exportProperty(ol.geom.Polygon.prototype,'changed',ol.geom.Polygon.prototype.changed);bq.exportProperty(ol.geom.Polygon.prototype,'dispatchEvent',ol.geom.Polygon.prototype.dispatchEvent);bq.exportProperty(ol.geom.Polygon.prototype,'getRevision',ol.geom.Polygon.prototype.getRevision);bq.exportProperty(ol.geom.Polygon.prototype,'on',ol.geom.Polygon.prototype.on);bq.exportProperty(ol.geom.Polygon.prototype,'once',ol.geom.Polygon.prototype.once);bq.exportProperty(ol.geom.Polygon.prototype,'un',ol.geom.Polygon.prototype.un);bq.exportProperty(ol.format.GML.prototype,'readFeatures',ol.format.GML.prototype.readFeatures);bq.exportProperty(ol.format.GML2.prototype,'readFeatures',ol.format.GML2.prototype.readFeatures);bq.exportProperty(ol.format.GML3.prototype,'readFeatures',ol.format.GML3.prototype.readFeatures);bq.exportProperty(ol.control.Control.prototype,'get',ol.control.Control.prototype.get);bq.exportProperty(ol.control.Control.prototype,'getKeys',ol.control.Control.prototype.getKeys);bq.exportProperty(ol.control.Control.prototype,'getProperties',ol.control.Control.prototype.getProperties);bq.exportProperty(ol.control.Control.prototype,'set',ol.control.Control.prototype.set);bq.exportProperty(ol.control.Control.prototype,'setProperties',ol.control.Control.prototype.setProperties);bq.exportProperty(ol.control.Control.prototype,'unset',ol.control.Control.prototype.unset);bq.exportProperty(ol.control.Control.prototype,'changed',ol.control.Control.prototype.changed);bq.exportProperty(ol.control.Control.prototype,'dispatchEvent',ol.control.Control.prototype.dispatchEvent);bq.exportProperty(ol.control.Control.prototype,'getRevision',ol.control.Control.prototype.getRevision);bq.exportProperty(ol.control.Control.prototype,'on',ol.control.Control.prototype.on);bq.exportProperty(ol.control.Control.prototype,'once',ol.control.Control.prototype.once);bq.exportProperty(ol.control.Control.prototype,'un',ol.control.Control.prototype.un);bq.exportProperty(ol.control.Attribution.prototype,'getMap',ol.control.Attribution.prototype.getMap);bq.exportProperty(ol.control.Attribution.prototype,'setMap',ol.control.Attribution.prototype.setMap);bq.exportProperty(ol.control.Attribution.prototype,'setTarget',ol.control.Attribution.prototype.setTarget);bq.exportProperty(ol.control.Attribution.prototype,'get',ol.control.Attribution.prototype.get);bq.exportProperty(ol.control.Attribution.prototype,'getKeys',ol.control.Attribution.prototype.getKeys);bq.exportProperty(ol.control.Attribution.prototype,'getProperties',ol.control.Attribution.prototype.getProperties);bq.exportProperty(ol.control.Attribution.prototype,'set',ol.control.Attribution.prototype.set);bq.exportProperty(ol.control.Attribution.prototype,'setProperties',ol.control.Attribution.prototype.setProperties);bq.exportProperty(ol.control.Attribution.prototype,'unset',ol.control.Attribution.prototype.unset);bq.exportProperty(ol.control.Attribution.prototype,'changed',ol.control.Attribution.prototype.changed);bq.exportProperty(ol.control.Attribution.prototype,'dispatchEvent',ol.control.Attribution.prototype.dispatchEvent);bq.exportProperty(ol.control.Attribution.prototype,'getRevision',ol.control.Attribution.prototype.getRevision);bq.exportProperty(ol.control.Attribution.prototype,'on',ol.control.Attribution.prototype.on);bq.exportProperty(ol.control.Attribution.prototype,'once',ol.control.Attribution.prototype.once);bq.exportProperty(ol.control.Attribution.prototype,'un',ol.control.Attribution.prototype.un);bq.exportProperty(ol.control.FullScreen.prototype,'getMap',ol.control.FullScreen.prototype.getMap);bq.exportProperty(ol.control.FullScreen.prototype,'setMap',ol.control.FullScreen.prototype.setMap);bq.exportProperty(ol.control.FullScreen.prototype,'setTarget',ol.control.FullScreen.prototype.setTarget);bq.exportProperty(ol.control.FullScreen.prototype,'get',ol.control.FullScreen.prototype.get);bq.exportProperty(ol.control.FullScreen.prototype,'getKeys',ol.control.FullScreen.prototype.getKeys);bq.exportProperty(ol.control.FullScreen.prototype,'getProperties',ol.control.FullScreen.prototype.getProperties);bq.exportProperty(ol.control.FullScreen.prototype,'set',ol.control.FullScreen.prototype.set);bq.exportProperty(ol.control.FullScreen.prototype,'setProperties',ol.control.FullScreen.prototype.setProperties);bq.exportProperty(ol.control.FullScreen.prototype,'unset',ol.control.FullScreen.prototype.unset);bq.exportProperty(ol.control.FullScreen.prototype,'changed',ol.control.FullScreen.prototype.changed);bq.exportProperty(ol.control.FullScreen.prototype,'dispatchEvent',ol.control.FullScreen.prototype.dispatchEvent);bq.exportProperty(ol.control.FullScreen.prototype,'getRevision',ol.control.FullScreen.prototype.getRevision);bq.exportProperty(ol.control.FullScreen.prototype,'on',ol.control.FullScreen.prototype.on);bq.exportProperty(ol.control.FullScreen.prototype,'once',ol.control.FullScreen.prototype.once);bq.exportProperty(ol.control.FullScreen.prototype,'un',ol.control.FullScreen.prototype.un);bq.exportProperty(ol.control.MousePosition.prototype,'getMap',ol.control.MousePosition.prototype.getMap);bq.exportProperty(ol.control.MousePosition.prototype,'setMap',ol.control.MousePosition.prototype.setMap);bq.exportProperty(ol.control.MousePosition.prototype,'setTarget',ol.control.MousePosition.prototype.setTarget);bq.exportProperty(ol.control.MousePosition.prototype,'get',ol.control.MousePosition.prototype.get);bq.exportProperty(ol.control.MousePosition.prototype,'getKeys',ol.control.MousePosition.prototype.getKeys);bq.exportProperty(ol.control.MousePosition.prototype,'getProperties',ol.control.MousePosition.prototype.getProperties);bq.exportProperty(ol.control.MousePosition.prototype,'set',ol.control.MousePosition.prototype.set);bq.exportProperty(ol.control.MousePosition.prototype,'setProperties',ol.control.MousePosition.prototype.setProperties);bq.exportProperty(ol.control.MousePosition.prototype,'unset',ol.control.MousePosition.prototype.unset);bq.exportProperty(ol.control.MousePosition.prototype,'changed',ol.control.MousePosition.prototype.changed);bq.exportProperty(ol.control.MousePosition.prototype,'dispatchEvent',ol.control.MousePosition.prototype.dispatchEvent);bq.exportProperty(ol.control.MousePosition.prototype,'getRevision',ol.control.MousePosition.prototype.getRevision);bq.exportProperty(ol.control.MousePosition.prototype,'on',ol.control.MousePosition.prototype.on);bq.exportProperty(ol.control.MousePosition.prototype,'once',ol.control.MousePosition.prototype.once);bq.exportProperty(ol.control.MousePosition.prototype,'un',ol.control.MousePosition.prototype.un);bq.exportProperty(ol.control.OverviewMap.prototype,'getMap',ol.control.OverviewMap.prototype.getMap);bq.exportProperty(ol.control.OverviewMap.prototype,'setMap',ol.control.OverviewMap.prototype.setMap);bq.exportProperty(ol.control.OverviewMap.prototype,'setTarget',ol.control.OverviewMap.prototype.setTarget);bq.exportProperty(ol.control.OverviewMap.prototype,'get',ol.control.OverviewMap.prototype.get);bq.exportProperty(ol.control.OverviewMap.prototype,'getKeys',ol.control.OverviewMap.prototype.getKeys);bq.exportProperty(ol.control.OverviewMap.prototype,'getProperties',ol.control.OverviewMap.prototype.getProperties);bq.exportProperty(ol.control.OverviewMap.prototype,'set',ol.control.OverviewMap.prototype.set);bq.exportProperty(ol.control.OverviewMap.prototype,'setProperties',ol.control.OverviewMap.prototype.setProperties);bq.exportProperty(ol.control.OverviewMap.prototype,'unset',ol.control.OverviewMap.prototype.unset);bq.exportProperty(ol.control.OverviewMap.prototype,'changed',ol.control.OverviewMap.prototype.changed);bq.exportProperty(ol.control.OverviewMap.prototype,'dispatchEvent',ol.control.OverviewMap.prototype.dispatchEvent);bq.exportProperty(ol.control.OverviewMap.prototype,'getRevision',ol.control.OverviewMap.prototype.getRevision);bq.exportProperty(ol.control.OverviewMap.prototype,'on',ol.control.OverviewMap.prototype.on);bq.exportProperty(ol.control.OverviewMap.prototype,'once',ol.control.OverviewMap.prototype.once);bq.exportProperty(ol.control.OverviewMap.prototype,'un',ol.control.OverviewMap.prototype.un);bq.exportProperty(ol.control.Rotate.prototype,'getMap',ol.control.Rotate.prototype.getMap);bq.exportProperty(ol.control.Rotate.prototype,'setMap',ol.control.Rotate.prototype.setMap);bq.exportProperty(ol.control.Rotate.prototype,'setTarget',ol.control.Rotate.prototype.setTarget);bq.exportProperty(ol.control.Rotate.prototype,'get',ol.control.Rotate.prototype.get);bq.exportProperty(ol.control.Rotate.prototype,'getKeys',ol.control.Rotate.prototype.getKeys);bq.exportProperty(ol.control.Rotate.prototype,'getProperties',ol.control.Rotate.prototype.getProperties);bq.exportProperty(ol.control.Rotate.prototype,'set',ol.control.Rotate.prototype.set);bq.exportProperty(ol.control.Rotate.prototype,'setProperties',ol.control.Rotate.prototype.setProperties);bq.exportProperty(ol.control.Rotate.prototype,'unset',ol.control.Rotate.prototype.unset);bq.exportProperty(ol.control.Rotate.prototype,'changed',ol.control.Rotate.prototype.changed);bq.exportProperty(ol.control.Rotate.prototype,'dispatchEvent',ol.control.Rotate.prototype.dispatchEvent);bq.exportProperty(ol.control.Rotate.prototype,'getRevision',ol.control.Rotate.prototype.getRevision);bq.exportProperty(ol.control.Rotate.prototype,'on',ol.control.Rotate.prototype.on);bq.exportProperty(ol.control.Rotate.prototype,'once',ol.control.Rotate.prototype.once);bq.exportProperty(ol.control.Rotate.prototype,'un',ol.control.Rotate.prototype.un);bq.exportProperty(ol.control.ScaleLine.prototype,'getMap',ol.control.ScaleLine.prototype.getMap);bq.exportProperty(ol.control.ScaleLine.prototype,'setMap',ol.control.ScaleLine.prototype.setMap);bq.exportProperty(ol.control.ScaleLine.prototype,'setTarget',ol.control.ScaleLine.prototype.setTarget);bq.exportProperty(ol.control.ScaleLine.prototype,'get',ol.control.ScaleLine.prototype.get);bq.exportProperty(ol.control.ScaleLine.prototype,'getKeys',ol.control.ScaleLine.prototype.getKeys);bq.exportProperty(ol.control.ScaleLine.prototype,'getProperties',ol.control.ScaleLine.prototype.getProperties);bq.exportProperty(ol.control.ScaleLine.prototype,'set',ol.control.ScaleLine.prototype.set);bq.exportProperty(ol.control.ScaleLine.prototype,'setProperties',ol.control.ScaleLine.prototype.setProperties);bq.exportProperty(ol.control.ScaleLine.prototype,'unset',ol.control.ScaleLine.prototype.unset);bq.exportProperty(ol.control.ScaleLine.prototype,'changed',ol.control.ScaleLine.prototype.changed);bq.exportProperty(ol.control.ScaleLine.prototype,'dispatchEvent',ol.control.ScaleLine.prototype.dispatchEvent);bq.exportProperty(ol.control.ScaleLine.prototype,'getRevision',ol.control.ScaleLine.prototype.getRevision);bq.exportProperty(ol.control.ScaleLine.prototype,'on',ol.control.ScaleLine.prototype.on);bq.exportProperty(ol.control.ScaleLine.prototype,'once',ol.control.ScaleLine.prototype.once);bq.exportProperty(ol.control.ScaleLine.prototype,'un',ol.control.ScaleLine.prototype.un);bq.exportProperty(ol.control.Zoom.prototype,'getMap',ol.control.Zoom.prototype.getMap);bq.exportProperty(ol.control.Zoom.prototype,'setMap',ol.control.Zoom.prototype.setMap);bq.exportProperty(ol.control.Zoom.prototype,'setTarget',ol.control.Zoom.prototype.setTarget);bq.exportProperty(ol.control.Zoom.prototype,'get',ol.control.Zoom.prototype.get);bq.exportProperty(ol.control.Zoom.prototype,'getKeys',ol.control.Zoom.prototype.getKeys);bq.exportProperty(ol.control.Zoom.prototype,'getProperties',ol.control.Zoom.prototype.getProperties);bq.exportProperty(ol.control.Zoom.prototype,'set',ol.control.Zoom.prototype.set);bq.exportProperty(ol.control.Zoom.prototype,'setProperties',ol.control.Zoom.prototype.setProperties);bq.exportProperty(ol.control.Zoom.prototype,'unset',ol.control.Zoom.prototype.unset);bq.exportProperty(ol.control.Zoom.prototype,'changed',ol.control.Zoom.prototype.changed);bq.exportProperty(ol.control.Zoom.prototype,'dispatchEvent',ol.control.Zoom.prototype.dispatchEvent);bq.exportProperty(ol.control.Zoom.prototype,'getRevision',ol.control.Zoom.prototype.getRevision);bq.exportProperty(ol.control.Zoom.prototype,'on',ol.control.Zoom.prototype.on);bq.exportProperty(ol.control.Zoom.prototype,'once',ol.control.Zoom.prototype.once);bq.exportProperty(ol.control.Zoom.prototype,'un',ol.control.Zoom.prototype.un);bq.exportProperty(ol.control.ZoomSlider.prototype,'getMap',ol.control.ZoomSlider.prototype.getMap);bq.exportProperty(ol.control.ZoomSlider.prototype,'setMap',ol.control.ZoomSlider.prototype.setMap);bq.exportProperty(ol.control.ZoomSlider.prototype,'setTarget',ol.control.ZoomSlider.prototype.setTarget);bq.exportProperty(ol.control.ZoomSlider.prototype,'get',ol.control.ZoomSlider.prototype.get);bq.exportProperty(ol.control.ZoomSlider.prototype,'getKeys',ol.control.ZoomSlider.prototype.getKeys);bq.exportProperty(ol.control.ZoomSlider.prototype,'getProperties',ol.control.ZoomSlider.prototype.getProperties);bq.exportProperty(ol.control.ZoomSlider.prototype,'set',ol.control.ZoomSlider.prototype.set);bq.exportProperty(ol.control.ZoomSlider.prototype,'setProperties',ol.control.ZoomSlider.prototype.setProperties);bq.exportProperty(ol.control.ZoomSlider.prototype,'unset',ol.control.ZoomSlider.prototype.unset);bq.exportProperty(ol.control.ZoomSlider.prototype,'changed',ol.control.ZoomSlider.prototype.changed);bq.exportProperty(ol.control.ZoomSlider.prototype,'dispatchEvent',ol.control.ZoomSlider.prototype.dispatchEvent);bq.exportProperty(ol.control.ZoomSlider.prototype,'getRevision',ol.control.ZoomSlider.prototype.getRevision);bq.exportProperty(ol.control.ZoomSlider.prototype,'on',ol.control.ZoomSlider.prototype.on);bq.exportProperty(ol.control.ZoomSlider.prototype,'once',ol.control.ZoomSlider.prototype.once);bq.exportProperty(ol.control.ZoomSlider.prototype,'un',ol.control.ZoomSlider.prototype.un);bq.exportProperty(ol.control.ZoomToExtent.prototype,'getMap',ol.control.ZoomToExtent.prototype.getMap);bq.exportProperty(ol.control.ZoomToExtent.prototype,'setMap',ol.control.ZoomToExtent.prototype.setMap);bq.exportProperty(ol.control.ZoomToExtent.prototype,'setTarget',ol.control.ZoomToExtent.prototype.setTarget);bq.exportProperty(ol.control.ZoomToExtent.prototype,'get',ol.control.ZoomToExtent.prototype.get);bq.exportProperty(ol.control.ZoomToExtent.prototype,'getKeys',ol.control.ZoomToExtent.prototype.getKeys);bq.exportProperty(ol.control.ZoomToExtent.prototype,'getProperties',ol.control.ZoomToExtent.prototype.getProperties);bq.exportProperty(ol.control.ZoomToExtent.prototype,'set',ol.control.ZoomToExtent.prototype.set);bq.exportProperty(ol.control.ZoomToExtent.prototype,'setProperties',ol.control.ZoomToExtent.prototype.setProperties);bq.exportProperty(ol.control.ZoomToExtent.prototype,'unset',ol.control.ZoomToExtent.prototype.unset);bq.exportProperty(ol.control.ZoomToExtent.prototype,'changed',ol.control.ZoomToExtent.prototype.changed);bq.exportProperty(ol.control.ZoomToExtent.prototype,'dispatchEvent',ol.control.ZoomToExtent.prototype.dispatchEvent);bq.exportProperty(ol.control.ZoomToExtent.prototype,'getRevision',ol.control.ZoomToExtent.prototype.getRevision);bq.exportProperty(ol.control.ZoomToExtent.prototype,'on',ol.control.ZoomToExtent.prototype.on);bq.exportProperty(ol.control.ZoomToExtent.prototype,'once',ol.control.ZoomToExtent.prototype.once);bq.exportProperty(ol.control.ZoomToExtent.prototype,'un',ol.control.ZoomToExtent.prototype.un);ol.VERSION='v4.6.5';bp.ol=ol;return bp.ol}));;